!function(t){var e,r,i,s,n=t.setTimeout,o=(t.clearTimeout,t.setInterval,t.clearInterval,t.setImmediate),h=(t.clearImmediate,t.console),f=[["bcoin","/lib/workers/worker.js",function(t,e,i,s,n,o){"use strict";const h=new(d(1,i));r.title="bcoin-worker",h.listen()}],["bcoin","/lib/workers/master.js",function(t,e,r,i,s,o){"use strict";const h=d(2,r),f=d(3,r),{format:a}=d(4,r),u=d(5,r),c=d(48,r),l=d(92,r),p=d(93,r),b=d(54,r),m=d(94,r);r.exports=class extends f{constructor(){super(),this.parent=new m,this.framer=new p,this.parser=new l,this.listening=!1,this.color=!1,this.init()}init(){this.parent.on("data",t=>{this.parser.feed(t)}),this.parent.on("error",t=>{this.emit("error",t)}),this.parent.on("exception",t=>{this.send(new b.ErrorPacket(t)),n(()=>this.destroy(),1e3)}),this.parser.on("error",t=>{this.emit("error",t)}),this.parser.on("packet",t=>{this.emit("packet",t)})}setEnv(t){this.color="1"===t.BCOIN_WORKER_ISTTY,this.set(t.BCOIN_WORKER_NETWORK)}set(t){return u.set(t)}write(t){return this.parent.write(t)}send(t){return this.write(this.framer.packet(t))}sendEvent(...t){return this.send(new b.EventPacket(t))}destroy(){return this.parent.destroy()}log(){const t=a.apply(null,arguments);this.send(new b.LogPacket(t))}listen(){h(!this.listening,"Already listening."),this.listening=!0,this.on("error",t=>{this.send(new b.ErrorPacket(t))}),this.on("packet",t=>{try{this.handlePacket(t)}catch(t){this.emit("error",t)}})}handlePacket(t){let e;switch(t.cmd){case b.types.ENV:this.setEnv(t.env);break;case b.types.EVENT:this.emit("event",t.items),this.emit(...t.items);break;case b.types.ERROR:this.emit("error",t.error);break;default:(e=c.execute(t)).id=t.id,this.send(e)}}}}],["bsert","/lib/assert.js",function(t,r,i,s,n,o){"use strict";class h extends Error{constructor(t){"string"==typeof t&&(t={message:t}),null!==t&&"object"==typeof t||(t={});let e=null,r="fail",i=Boolean(t.generatedMessage);var s;if(null!=t.message&&(e="string"==typeof(s=t.message)?s:O(s)?w(s):g(s)),"string"==typeof t.operator&&(r=t.operator),null==e){if("fail"===r)e="Assertion failed.";else{e=`${g(t.actual)} ${r} ${g(t.expected)}`}i=!0}super(e);let n=this.constructor;"function"==typeof t.stackStartFunction?n=t.stackStartFunction:"function"==typeof t.stackStartFn&&(n=t.stackStartFn),this.type="AssertionError",this.name="AssertionError [ERR_ASSERTION]",this.code="ERR_ASSERTION",this.generatedMessage=i,this.actual=t.actual,this.expected=t.expected,this.operator=r,Error.captureStackTrace&&Error.captureStackTrace(this,n)}}function f(t,e){if(!t){let r=!1;if(0===arguments.length)e="No value argument passed to `assert()`.",r=!0;else if(null==e)e="Assertion failed.",r=!0;else if(O(e))throw e;throw new h({message:e,actual:t,expected:!0,operator:"==",generatedMessage:r,stackStartFn:f})}}function a(t,e,r){if(!Object.is(t,e)){if(O(r))throw r;throw new h({message:r,actual:t,expected:e,operator:"strictEqual",stackStartFn:a})}}function u(t,e,r){if(Object.is(t,e)){if(O(r))throw r;throw new h({message:r,actual:t,expected:e,operator:"notStrictEqual",stackStartFn:u})}}function c(t,r,i){"string"==typeof r&&(i=r,r=e);let s=!1,n=null;m("function"==typeof t,"func","function");try{t()}catch(t){s=!0,n=t}if(s){if(y(n,r,i,c)){let t=!1;throw null==i&&(i="Got unwanted exception.",t=!0),new h({message:i,actual:n,expected:r,operator:"doesNotThrow",generatedMessage:t,stackStartFn:c})}throw n}}async function d(t,r,i){"string"==typeof r&&(i=r,r=e);let s=!1,n=null;"function"!=typeof t&&m(M(t),"func","promise");try{M(t)?await t:await t()}catch(t){s=!0,n=t}if(!s){let t=!1;throw null==i&&(i="Missing expected rejection.",t=!0),new h({message:i,actual:e,expected:r,operator:"rejects",generatedMessage:t,stackStartFn:d})}if(!y(n,r,i,d))throw n}async function l(t,r,i){"string"==typeof r&&(i=r,r=e);let s=!1,n=null;"function"!=typeof t&&m(M(t),"func","promise");try{M(t)?await t:await t()}catch(t){s=!0,n=t}if(s){if(y(n,r,i,l)){let t=!1;throw null==i&&(i="Got unwanted rejection.",t=!0),new h({message:i,actual:e,expected:r,operator:"doesNotReject",generatedMessage:t,stackStartFn:l})}throw n}}function p(t,e,r){if(!S(t,e,!1)){if(O(r))throw r;throw new h({message:r,actual:t,expected:e,operator:"deepStrictEqual",stackStartFn:p})}}function b(t,e,r){if(S(t,e,!0)){if(O(r))throw r;throw new h({message:r,actual:t,expected:e,operator:"notDeepStrictEqual",stackStartFn:b})}}function m(t,e,r){if(!t){let t;t=null==e?"Invalid type for parameter.":null==r?`Invalid type for "${e}".`:`"${e}" must be a(n) ${r}.`;const i=new TypeError(t);throw Error.captureStackTrace&&Error.captureStackTrace(i,m),i}}function g(t){switch(typeof t){case"undefined":return"undefined";case"object":return null===t?"null":`[${function(t){const e=function(t){return E(t).slice(8,-1)}(t);if(null==t)return e;if("Object"!==e&&"Error"!==e)return e;let r,i;try{r=t.constructor}catch(t){}if(null==r)return e;try{i=r.name}catch(t){return e}return"string"!=typeof i||0===i.length?e:i}(t)}]`;case"boolean":case"number":return`${t}`;case"string":return t.length>80&&(t=`${t.substring(0,77)}...`),JSON.stringify(t);case"symbol":return w(t);case"function":return`[${function(t){let e;try{e=t.name}catch(t){}return"string"!=typeof e||0===e.length?"Function":`Function: ${e}`}(t)}]`;case"bigint":return`${t}n`;default:return`[${typeof t}]`}}function w(t){try{return String(t)}catch(t){return"Object"}}function y(t,r,i,s){if(null==r)return!0;if(N(r))return r.test(t);if("function"!=typeof r){if(s===c||s===l)throw new TypeError('"expected" must not be an object.');if("object"!=typeof r)throw new TypeError('"expected" must be an object.');let e=!1;if(null==i){i=`Missing expected ${s===d?"rejection":"exception"}.`,e=!0}if(null==t||"object"!=typeof t)throw new h({actual:t,expected:r,message:i,operator:s.name,generatedMessage:e,stackStartFn:s});const n=Object.keys(r);if(O(r)&&n.push("name","message"),0===n.length)throw new TypeError('"expected" may not be an empty object.');for(const o of n){const n=r[o],f=t[o];if(("string"!=typeof f||!N(n)||!n.test(f))&&!(o in t&&S(f,n,!1)))throw new h({actual:t,expected:r,message:i,operator:s.name,generatedMessage:e,stackStartFn:s})}return!0}return r.prototype!==e&&t instanceof r||!Error.isPrototypeOf(r)&&!0===r.call({},t)}function S(t,e,r){try{return v(t,e,null)}catch(t){return r}}function v(t,e,r){if(Object.is(t,e))return!0;if(!A(t)||!A(e))return!1;if(E(t)!==E(e))return!1;if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;if(_(t)&&_(e))return t.equals(e);if(t instanceof Date)return Object.is(t.getTime(),e.getTime());if(N(t))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(O(t)&&t.message!==e.message)return!1;if(function(t){return t instanceof ArrayBuffer}(t)&&(t=new Uint8Array(t),e=new Uint8Array(e)),function(t){return ArrayBuffer.isView(t)}(t)&&!_(t)){if(_(e))return!1;const r=new Uint8Array(t.buffer),i=new Uint8Array(e.buffer);if(r.length!==i.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==i[t])return!1;return!0}if(function(t){return t instanceof Set}(t)){if(t.size!==e.size)return!1;return new Set([...t,...e]).size===t.size}if(r){const i=r.a.get(t);if(null!=i){const t=r.b.get(e);if(null!=t)return i===t}r.p+=1}else r={a:new Map,b:new Map,p:0};r.a.set(t,r.p),r.b.set(e,r.p);const i=function(t,e,r){if(i=t,i instanceof Map){if(t.size!==e.size)return!1;const i=new Set([...t.keys(),...e.keys()]);if(i.size!==t.size)return!1;for(const s of i)if(!v(t.get(s),e.get(s),r))return!1;return!0}var i;if(function(t){return Array.isArray(t)}(t)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!v(t[i],e[i],r))return!1;return!0}const s=I(t),n=I(e);if(s.length!==n.length)return!1;const o=new Set([...s,...n]);if(o.size!==s.length)return!1;for(const i of o)if(!v(t[i],e[i],r))return!1;return!0}(t,e,r);return r.a.delete(t),r.b.delete(e),i}function I(t){const e=Object.keys(t);if(!Object.getOwnPropertySymbols)return e;if(!Object.getOwnPropertyDescriptor)return e;const r=Object.getOwnPropertySymbols(t);for(const i of r){const r=Object.getOwnPropertyDescriptor(t,i);r&&r.enumerable&&e.push(i)}return e}function E(t){if(t===e)return"[object Undefined]";if(null===t)return"[object Null]";try{return Object.prototype.toString.call(t)}catch(t){return"[object Object]"}}function _(t){return A(t)&&"function"==typeof t.writeUInt32LE&&"function"==typeof t.equals}function O(t){return t instanceof Error}function A(t){return t&&"object"==typeof t}function M(t){return t instanceof Promise}function N(t){return t instanceof RegExp}function P(t){if("string"!=typeof t)return!1;switch(t){case"ascii":case"binary":case"base64":case"hex":case"latin1":case"ucs2":case"utf8":case"utf16le":return!0}return!1}function R(t,e,r){if("string"==typeof e){if(!_(t))return null;const{constructor:i}=t;if(!i||"function"!=typeof i.from)return null;if(!P(r))return null;if("hex"===r&&1&e.length)return null;const s=i.from(e,r);return"hex"===r&&s.length!==e.length>>>1?null:s}return e}f.AssertionError=h,f.assert=f,f.strict=f,f.ok=f,f.equal=a,f.notEqual=u,f.strictEqual=a,f.notStrictEqual=u,f.fail=function t(e){let r=!1;if(O(e))throw e;throw null==e&&(e="Assertion failed.",r=!0),new h({message:e,actual:!1,expected:!0,operator:"fail",generatedMessage:r,stackStartFn:t})},f.throws=function t(r,i,s){"string"==typeof i&&(s=i,i=e);let n=!1,o=null;m("function"==typeof r,"func","function");try{r()}catch(t){n=!0,o=t}if(!n){let r=!1;throw null==s&&(s="Missing expected exception.",r=!0),new h({message:s,actual:e,expected:i,operator:"throws",generatedMessage:r,stackStartFn:t})}if(!y(o,i,s,t))throw o},f.doesNotThrow=c,f.rejects=d,f.doesNotReject=l,f.ifError=function t(e){if(null!=e){let r="ifError got unwanted exception: ";throw"object"==typeof e&&"string"==typeof e.message?0===e.message.length&&e.constructor?r+=e.constructor.name:r+=e.message:r+=g(e),new h({message:r,actual:e,expected:null,operator:"ifError",generatedMessage:!0,stackStartFn:t})}},f.deepEqual=p,f.notDeepEqual=b,f.deepStrictEqual=p,f.notDeepStrictEqual=b,f.bufferEqual=function t(e,r,i,s){if(P(i)||(s=i,i=null),null==i&&(i="hex"),r=R(e,r,i),m(_(e),"actual","buffer"),m(_(r),"expected","buffer"),e!==r&&!e.equals(r)){if(O(s))throw s;throw new h({message:s,actual:e.toString(i),expected:r.toString(i),operator:"bufferEqual",stackStartFn:t})}},f.notBufferEqual=function t(e,r,i,s){if(P(i)||(s=i,i=null),null==i&&(i="hex"),r=R(e,r,i),m(_(e),"actual","buffer"),m(_(r),"expected","buffer"),e===r||e.equals(r)){if(O(s))throw s;throw new h({message:s,actual:e.toString(i),expected:r.toString(i),operator:"notBufferEqual",stackStartFn:t})}},f.enforce=m,f.range=function t(e,r){if(!e){const e=null!=r?`"${r}" is out of range.`:"Parameter is out of range.",i=new RangeError(e);throw Error.captureStackTrace&&Error.captureStackTrace(i,t),i}},i.exports=f}],["bpkg","/lib/builtins/events.js",function(t,r,i,s,n,o){"use strict";var f,a="object"==typeof Reflect?Reflect:null,u=a&&"function"==typeof a.apply?a.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};f=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var c=Number.isNaN||function(t){return t!=t};function d(){d.init.call(this)}i.exports=d,d.EventEmitter=d,d.prototype._events=e,d.prototype._eventsCount=0,d.prototype._maxListeners=e;var l=10;function p(t){return t._maxListeners===e?d.defaultMaxListeners:t._maxListeners}function b(t,r,i,s){var n,o,f,a;if("function"!=typeof i)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i);if((o=t._events)===e?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==e&&(t.emit("newListener",r,i.listener?i.listener:i),o=t._events),f=o[r]),f===e)f=o[r]=i,++t._eventsCount;else if("function"==typeof f?f=o[r]=s?[i,f]:[f,i]:s?f.unshift(i):f.push(i),(n=p(t))>0&&f.length>n&&!f.warned){f.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=r,u.count=f.length,a=u,h&&h.warn&&h.warn(a)}return t}function m(t,r,i){var s={fired:!1,wrapFn:e,target:t,type:r,listener:i},n=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,u(this.listener,this.target,t))}.bind(s);return n.listener=i,s.wrapFn=n,n}function g(t,r,i){var s=t._events;if(s===e)return[];var n=s[r];return n===e?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(n):y(n,n.length)}function w(t){var r=this._events;if(r!==e){var i=r[t];if("function"==typeof i)return 1;if(i!==e)return i.length}return 0}function y(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||c(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),d.init=function(){this._events!==e&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||e},d.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||c(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},d.prototype.getMaxListeners=function(){return p(this)},d.prototype.emit=function(t){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var s="error"===t,n=this._events;if(n!==e)s=s&&n.error===e;else if(!s)return!1;if(s){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var h=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw h.context=o,h}var f=n[t];if(f===e)return!1;if("function"==typeof f)u(f,this,r);else{var a=f.length,c=y(f,a);for(i=0;i<a;++i)u(c[i],this,r)}return!0},d.prototype.addListener=function(t,e){return b(this,t,e,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(t,e){return b(this,t,e,!0)},d.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,m(this,t,e)),this},d.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,m(this,t,e)),this},d.prototype.removeListener=function(t,r){var i,s,n,o,h;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if((s=this._events)===e)return this;if((i=s[t])===e)return this;if(i===r||i.listener===r)0==--this._eventsCount?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,i.listener||r));else if("function"!=typeof i){for(n=-1,o=i.length-1;o>=0;o--)if(i[o]===r||i[o].listener===r){h=i[o].listener,n=o;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(s[t]=i[0]),s.removeListener!==e&&this.emit("removeListener",t,h||r)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(t){var r,i,s;if((i=this._events)===e)return this;if(i.removeListener===e)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):i[t]!==e&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var n,o=Object.keys(i);for(s=0;s<o.length;++s)"removeListener"!==(n=o[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(r=i[t]))this.removeListener(t,r);else if(r!==e)for(s=r.length-1;s>=0;s--)this.removeListener(t,r[s]);return this},d.prototype.listeners=function(t){return g(this,t,!0)},d.prototype.rawListeners=function(t){return g(this,t,!1)},d.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):w.call(t,e)},d.prototype.listenerCount=w,d.prototype.eventNames=function(){return this._eventsCount>0?f(this._events):[]}}],["bpkg","/lib/builtins/util.js",function(t,i,s,n,o,f){var a=[["util","/util.js",function(t,i,s,n,o){var f=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},i=0;i<e.length;i++)r[e[i]]=Object.getOwnPropertyDescriptor(t,e[i]);return r},a=/%[sdj%]/g;t.format=function(t){if(!E(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(l(arguments[r]));return e.join(" ")}r=1;for(var i=arguments,s=i.length,n=String(t).replace(a,function(t){if("%%"===t)return"%";if(r>=s)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return t}}),o=i[r];r<s;o=i[++r])v(o)||!A(o)?n+=" "+o:n+=" "+l(o);return n},t.deprecate=function(e,i){if(void 0!==r&&!0===r.noDeprecation)return e;if(void 0===r)return function(){return t.deprecate(e,i).apply(this,arguments)};var s=!1;return function(){if(!s){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?h.trace(i):h.error(i),s=!0}return e.apply(this,arguments)}};var u,d={};function l(e,r){var i={seen:[],stylize:b};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),S(r)?i.showHidden=r:r&&t._extend(i,r),_(i.showHidden)&&(i.showHidden=!1),_(i.depth)&&(i.depth=2),_(i.colors)&&(i.colors=!1),_(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=p),m(i,e,i.depth)}function p(t,e){var r=l.styles[e];return r?"["+l.colors[r][0]+"m"+t+"["+l.colors[r][1]+"m":t}function b(t,e){return t}function m(e,r,i){if(e.customInspect&&r&&P(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var s=r.inspect(i,e);return E(s)||(s=m(e,s,i)),s}var n=function(t,e){if(_(e))return t.stylize("undefined","undefined");if(E(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(I(e))return t.stylize(""+e,"number");if(S(e))return t.stylize(""+e,"boolean");if(v(e))return t.stylize("null","null")}(e,r);if(n)return n;var o=Object.keys(r),h=function(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),N(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return g(r);if(0===o.length){if(P(r)){var f=r.name?": "+r.name:"";return e.stylize("[Function"+f+"]","special")}if(O(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(M(r))return e.stylize(Date.prototype.toString.call(r),"date");if(N(r))return g(r)}var a,u="",c=!1,d=["{","}"];(y(r)&&(c=!0,d=["[","]"]),P(r))&&(u=" [Function"+(r.name?": "+r.name:"")+"]");return O(r)&&(u=" "+RegExp.prototype.toString.call(r)),M(r)&&(u=" "+Date.prototype.toUTCString.call(r)),N(r)&&(u=" "+g(r)),0!==o.length||c&&0!=r.length?i<0?O(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),a=c?function(t,e,r,i,s){for(var n=[],o=0,h=e.length;o<h;++o)k(e,String(o))?n.push(w(t,e,r,i,String(o),!0)):n.push("");return s.forEach(function(s){s.match(/^\d+$/)||n.push(w(t,e,r,i,s,!0))}),n}(e,r,i,h,o):o.map(function(t){return w(e,r,i,h,t,c)}),e.seen.pop(),function(t,e,r){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(a,u,d)):d[0]+u+d[1]}function g(t){return"["+Error.prototype.toString.call(t)+"]"}function w(t,e,r,i,s,n){var o,h,f;if((f=Object.getOwnPropertyDescriptor(e,s)||{value:e[s]}).get?h=f.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):f.set&&(h=t.stylize("[Setter]","special")),k(i,s)||(o="["+s+"]"),h||(t.seen.indexOf(f.value)<0?(h=v(r)?m(t,f.value,null):m(t,f.value,r-1)).indexOf("\n")>-1&&(h=n?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n")):h=t.stylize("[Circular]","special")),_(o)){if(n&&s.match(/^\d+$/))return h;(o=JSON.stringify(""+s)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+h}function y(t){return Array.isArray(t)}function S(t){return"boolean"==typeof t}function v(t){return null===t}function I(t){return"number"==typeof t}function E(t){return"string"==typeof t}function _(t){return void 0===t}function O(t){return A(t)&&"[object RegExp]"===R(t)}function A(t){return"object"==typeof t&&null!==t}function M(t){return A(t)&&"[object Date]"===R(t)}function N(t){return A(t)&&("[object Error]"===R(t)||t instanceof Error)}function P(t){return"function"==typeof t}function R(t){return Object.prototype.toString.call(t)}function x(t){return t<10?"0"+t.toString(10):t.toString(10)}t.debuglog=function(e){if(_(u)&&(u=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!d[e])if(new RegExp("\\b"+e+"\\b","i").test(u)){var i=r.pid;d[e]=function(){var r=t.format.apply(t,arguments);h.error("%s %d: %s",e,i,r)}}else d[e]=function(){};return d[e]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=y,t.isBoolean=S,t.isNull=v,t.isNullOrUndefined=function(t){return null==t},t.isNumber=I,t.isString=E,t.isSymbol=function(t){return"symbol"==typeof t},t.isUndefined=_,t.isRegExp=O,t.isObject=A,t.isDate=M,t.isError=N,t.isFunction=P,t.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},t.isBuffer=c(1);var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.log=function(){var e,r;h.log("%s - %s",(e=new Date,r=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":"),[e.getDate(),B[e.getMonth()],r].join(" ")),t.format.apply(t,arguments))},t.inherits=c(2),t._extend=function(t,e){if(!e||!A(e))return t;for(var r=Object.keys(e),i=r.length;i--;)t[r[i]]=e[r[i]];return t};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):e;function U(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}t.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(T&&t[T]){var e;if("function"!=typeof(e=t[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,i=new Promise(function(t,i){e=t,r=i}),s=[],n=0;n<arguments.length;n++)s.push(arguments[n]);s.push(function(t,i){t?r(t):e(i)});try{t.apply(this,s)}catch(t){r(t)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),T&&Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,f(t))},t.promisify.custom=T,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i]);var s=e.pop();if("function"!=typeof s)throw new TypeError("The last argument must be of type Function");var n=this,o=function(){return s.apply(n,arguments)};t.apply(this,e).then(function(t){r.nextTick(o,null,t)},function(t){r.nextTick(U,t,o)})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,f(t)),e}}],["util","/support/isBufferBrowser.js",function(t,e,r,i,s){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}}],["inherits","/inherits_browser.js",function(t,e,r,i,s){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}]],u=[];function c(e){if(e>>>0!==e||e>a.length)return function(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}(e);for(;u.length<=e;)u.push(null);var r=u[e];if(r)return r.exports;var i=a[e],h=i[0],f=i[1],c=i[2],d=t,l=s;0!==e&&(l={id:"/"+h+f,exports:d={},parent:s.parent,filename:s.filename,loaded:!1,children:s.children,paths:s.paths}),u[e]=l;try{c.call(d,d,l,n,o,void 0)}catch(t){throw u[e]=null,t}return a[e]=null,0!==e&&(l.loaded=!0),l.exports}c(0)}],["bcoin","/lib/protocol/network.js",function(t,e,i,s,n,o){"use strict";const h=d(2,i),f=d(6,i),a=d(7,i),u=d(11,i),c=d(12,i),{inspectSymbol:l}=d(14,i);class p{constructor(t){h(!p[t.type],"Cannot create two networks."),this.type=t.type,this.seeds=t.seeds,this.magic=t.magic,this.port=t.port,this.checkpointMap=t.checkpointMap,this.lastCheckpoint=t.lastCheckpoint,this.checkpoints=[],this.halvingInterval=t.halvingInterval,this.genesis=t.genesis,this.genesisBlock=t.genesisBlock,this.pow=t.pow,this.block=t.block,this.bip30=t.bip30,this.activationThreshold=t.activationThreshold,this.minerWindow=t.minerWindow,this.deployments=t.deployments,this.deploys=t.deploys,this.unknownBits=~u.VERSION_TOP_MASK,this.keyPrefix=t.keyPrefix,this.addressPrefix=t.addressPrefix,this.requireStandard=t.requireStandard,this.rpcPort=t.rpcPort,this.walletPort=t.walletPort,this.minRelay=t.minRelay,this.feeRate=t.feeRate,this.maxFeeRate=t.maxFeeRate,this.selfConnect=t.selfConnect,this.requestMempool=t.requestMempool,this.time=new c,this.init()}init(){let t=0;for(const e of this.deploys)t|=1<<e.bit;t|=u.VERSION_TOP_MASK,this.unknownBits=~t>>>0;for(const t of Object.keys(this.checkpointMap)){const e=this.checkpointMap[t],r=Number(t);this.checkpoints.push({hash:e,height:r})}this.checkpoints.sort(m)}byBit(t){const e=f.search(this.deploys,t,b);return-1===e?null:this.deploys[e]}now(){return this.time.now()}ms(){return this.time.ms()}static create(t){if("string"==typeof t&&(t=a[t]),h(t,"Unknown network."),p[t.type])return p[t.type];const e=new p(t);return p[e.type]=e,p.primary||(p.primary=e),e}static set(t){return h("string"==typeof t,"Bad network."),p.primary=p.get(t),p.type=t,p.primary}static get(t){if(!t)return h(p.primary,"No default network."),p.primary;if(t instanceof p)return t;if("string"==typeof t)return p.create(t);throw new Error("Unknown network.")}static ensure(t){return t?t instanceof p?t:"string"==typeof t&&a[t]?p.create(t):(h(p.primary,"No default network."),p.primary):(h(p.primary,"No default network."),p.primary)}static by(t,e,r,i){if(r){if(e(r=p.get(r),t))return r;throw new Error(`Network mismatch for ${i}.`)}for(const i of a.types)if(e(r=a[i],t))return p.get(i);throw new Error(`Network not found for ${i}.`)}static fromMagic(t,e){return p.by(t,g,e,"magic number")}static fromWIF(t,e){return p.by(t,w,e,"WIF")}static fromPublic(t,e){return p.by(t,y,e,"xpubkey")}static fromPrivate(t,e){return p.by(t,S,e,"xprivkey")}static fromPublic58(t,e){return p.by(t,v,e,"xpubkey")}static fromPrivate58(t,e){return p.by(t,I,e,"xprivkey")}static fromAddress(t,e){return p.by(t,E,e,"base58 address")}static fromBech32(t,e){return p.by(t,_,e,"bech32 address")}toString(){return this.type}[l](){return`<Network: ${this.type}>`}static isNetwork(t){return t instanceof p}}function b(t,e){return t.bit-e}function m(t,e){return t.height-e.height}function g(t,e){return t.magic===e}function w(t,e){return t.keyPrefix.privkey===e}function y(t,e){return t.keyPrefix.xpubkey===e}function S(t,e){return t.keyPrefix.xprivkey===e}function v(t,e){return t.keyPrefix.xpubkey58===e}function I(t,e){return t.keyPrefix.xprivkey58===e}function E(t,e){const r=t.addressPrefix;switch(e){case r.pubkeyhash:case r.scripthash:case r.witnesspubkeyhash:case r.witnessscripthash:return!0}return!1}function _(t,e){return t.addressPrefix.bech32===e}p.primary=null,p.type=null,p.main=null,p.testnet=null,p.regtest=null,p.segnet4=null,p.simnet=null,p.set(r.env.BCOIN_NETWORK||"main"),i.exports=p}],["bcoin","/lib/utils/binary.js",function(t,e,r,i,s,n){"use strict";t.search=function(t,e,r,i){let s=0,n=t.length-1;for(;s<=n;){const i=s+n>>>1,o=r(t[i],e);if(0===o)return i;o<0?s=i+1:n=i-1}return i?s:-1},t.insert=function(e,r,i,s){const n=t.search(e,r,i,!0);return s&&n<e.length&&0===i(e[n],r)?-1:(0===n?e.unshift(r):n===e.length?e.push(r):e.splice(n,0,r),n)},t.remove=function(e,r,i){const s=t.search(e,r,i,!1);return-1!==s&&(function(t,e){if(0===e)return void t.shift();let r=e+1;for(;r<t.length;)t[e++]=t[r++];t.pop()}(e,s),!0)}}],["bcoin","/lib/protocol/networks.js",function(t,e,r,s,n,o){"use strict";const h=d(8,r),f=t;function a(t){return i.from(t,"hex")}f.types=["main","testnet","regtest","simnet"];const u={type:"main",seeds:["seed.bitcoin.sipa.be","dnsseed.bluematt.me","dnsseed.bitcoin.dashjr.org","seed.bitcoinstats.com","seed.bitcoin.jonasschnelli.ch","seed.btc.petertodd.org","seed.bitcoin.sprovoost.nl","dnsseed.emzy.de"],magic:3652501241,port:8333};u.checkpointMap={11111:a("1d7c6eb2fd42f55925e92efad68b61edd22fba29fde8783df744e26900000000"),33333:a("a6d0b5df7d0df069ceb1e736a216ad187a50b07aaa4e78748a58d52d00000000"),74000:a("201a66b853f9e7814a820e2af5f5dc79c07144e31ce4c9a39339570000000000"),105000:a("97dc6b1d15fbeef373a744fee0b254b0d2c820a3ae7f0228ce91020000000000"),134444:a("feb0d2420d4a18914c81ac30f494a5d4ff34cd15d34cfd2fb105000000000000"),168000:a("63b703835cb735cb9a89d733cbe66f212f63795e0172ea619e09000000000000"),193000:a("17138bca83bdc3e6f60f01177c3877a98266de40735f2a459f05000000000000"),210000:a("2e3471a19b8e22b7f939c63663076603cf692f19837e34958b04000000000000"),216116:a("4edf231bf170234e6a811460f95c94af9464e41ee833b4f4b401000000000000"),225430:a("32595730b165f097e7b806a679cf7f3e439040f750433808c101000000000000"),250000:a("14d2f24d29bed75354f3f88a5fb50022fc064b02291fdf873800000000000000"),279000:a("407ebde958e44190fa9e810ea1fc3a7ef601c3b0a0728cae0100000000000000"),295000:a("83a93246c67003105af33ae0b29dd66f689d0f0ff54e9b4d0000000000000000"),300255:a("b2f3a0f0de4120c1089d5f5280a263059f9b6e7c520428160000000000000000"),319400:a("3bf115fd057391587ca39a531c5d4989e1adec9b2e05c6210000000000000000"),343185:a("548536d48e7678fcfa034202dd45d4a76b1ad061f38b2b070000000000000000"),352940:a("ffc9520143e41c94b6e03c2fa3e62bb76b55ba2df45d75100000000000000000"),382320:a("b28afdde92b0899715e40362f56afdb20e3d135bedc68d0a0000000000000000"),401465:a("eed16cb3e893ed9366f27c39a9ecd95465d02e3ef40e45010000000000000000"),420000:a("a1ff746b2d42b834cb7d6b8981b09c265c2cabc016e8cc020000000000000000"),440000:a("9bf296b8de5f834f7635d5e258a434ad51b4dbbcf7c08c030000000000000000"),450000:a("0ba2070c62cd9da1f8cef88a0648c661a411d33e728340010000000000000000"),460000:a("8c25fc7e414d3e868d6ce0ec473c30ad44e7e8bc1b75ef000000000000000000"),470000:a("89756d1ed75901437300af10d5ab69070a282e729c536c000000000000000000"),480000:a("b1a896fd31e639e0c74d1abeb1dbc93f176b767a5d4c02010000000000000000"),490000:a("90dec4d0153f20fbdcb245b1d5fb3d5a8d7bb1379106de000000000000000000"),500000:a("045d94a1c33354c3759cc0512dcc49fd81bf4c3637fb24000000000000000000"),510000:a("297301b8ca28584cb0c31c7e3fed51696bc33ef8782615000000000000000000"),525000:a("1dde8e3fb49bbd5ab66a1b847544d67fff10b108a1fa2f000000000000000000")},u.lastCheckpoint=525e3,u.halvingInterval=21e4,u.genesis={version:1,hash:a("6fe28c0ab6f1b372c1a6a246ae63f74f931e8365e15a089c68d6190000000000"),prevBlock:a("0000000000000000000000000000000000000000000000000000000000000000"),merkleRoot:a("3ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a"),time:1231006505,bits:486604799,nonce:2083236893,height:0},u.genesisBlock="0100000000000000000000000000000000000000000000000000000000000000000000003ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a29ab5f49ffff001d1dac2b7c0101000000010000000000000000000000000000000000000000000000000000000000000000ffffffff4d04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73ffffffff0100f2052a01000000434104678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5fac00000000",u.pow={limit:new h("00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff","hex"),bits:486604799,chainwork:new h("00000000000000000000000000000000000000000259c9b7d8c7779d29a1188f","hex"),targetTimespan:1209600,targetSpacing:600,retargetInterval:2016,targetReset:!1,noRetargeting:!1},u.block={bip34height:227931,bip34hash:a("b808089c756add1591b1d17bab44bba3fed9e02f942ab4894b02000000000000"),bip65height:388381,bip65hash:a("f035476cfaeb9f677c2cdad00fd908c556775ded24b6c2040000000000000000"),bip66height:363725,bip66hash:a("3109b588941188a9f1c2576aae462d729b8cce9da1ea79030000000000000000"),pruneAfterHeight:1e3,keepBlocks:288,maxTipAge:86400,slowHeight:325e3},u.bip30={91842:a("eccae000e3c8e4e093936360431f3b7603c563c1ff6181390a4d0a0000000000"),91880:a("21d77ccb4c08386a04ac0196ae10f6a1d2c2a377558ca190f143070000000000")},u.activationThreshold=1916,u.minerWindow=2016,u.deployments={csv:{name:"csv",bit:0,startTime:1462060800,timeout:1493596800,threshold:-1,window:-1,required:!1,force:!0},segwit:{name:"segwit",bit:1,startTime:1479168e3,timeout:1510704e3,threshold:-1,window:-1,required:!0,force:!1},segsignal:{name:"segsignal",bit:4,startTime:1496275200,timeout:1510704e3,threshold:269,window:336,required:!1,force:!1},testdummy:{name:"testdummy",bit:28,startTime:1199145601,timeout:1230767999,threshold:-1,window:-1,required:!1,force:!0}},u.deploys=[u.deployments.csv,u.deployments.segwit,u.deployments.segsignal,u.deployments.testdummy],u.keyPrefix={privkey:128,xpubkey:76067358,xprivkey:76066276,xpubkey58:"xpub",xprivkey58:"xprv",coinType:0},u.addressPrefix={pubkeyhash:0,scripthash:5,witnesspubkeyhash:6,witnessscripthash:10,bech32:"bc"},u.requireStandard=!0,u.rpcPort=8332,u.walletPort=8334,u.minRelay=1e3,u.feeRate=1e5,u.maxFeeRate=4e5,u.selfConnect=!1,u.requestMempool=!1;const c={type:"testnet",seeds:["testnet-seed.bitcoin.jonasschnelli.ch","seed.tbtc.petertodd.org","testnet-seed.bluematt.me","testnet-seed.bitcoin.schildbach.de","seed.testnet.bitcoin.sprovoost.nl"],magic:118034699,port:18333};c.checkpointMap={546:a("70cb6af7ebbcb1315d3414029c556c55f3e2fc353c4c9063a76c932a00000000"),10000:a("02a1b43f52591e53b660069173ac83b675798e12599dbb0442b7580000000000"),50000:a("0c6ceabe803cec55ba2831e445956d0a43ba9521743a802cddac7e0700000000"),90000:a("cafc21e17faf90461a5905aa03302c394912651ed9475ae711723e0d00000000"),100000:a("1e0a16bbadccde1d80c66597b1939e45f91b570d29f95fc158299e0000000000"),140000:a("92c0877b54c556889b72175ccbe0c91a1208f6ef7efb2c006101062300000000"),170000:a("508125560d202b89757889bb0e49c712477be20440058f05db4f0e0000000000"),210000:a("32365454b5f29a826bff8ad9b0448cad0072fc73d50e482d91a3dece00000000"),230000:a("b11a447e62643e0b27406eb0fc270cb8126d7b5b70822fb642d9513400000000"),270000:a("1c42b811cf9c163932f6e95ec55bf9b5e2cb5324e7e93001572e000000000000"),300000:a("a141bf3972424853f04367b47995e220e0b5a2706e5618766f22000000000000"),340000:a("67edd4d92e405608109164b15f92b193377d49325b0ed036739c010000000000"),350000:a("592b44bc0f7a4286cf07ead8497114c6952c1c7dea7305193deacf8e00000000"),390000:a("f217e183484fb6d695609cc71fa2ae24c3020943407e0150b298030000000000"),420000:a("de9e73a3b91fbb014e036e8583a17d6b638a699aeb2de8573d12580800000000"),460000:a("2e8baaffc107f15c87aebe01664b63d07476afa53bcbada1281a030000000000"),500000:a("06f60922a2aab2757317820fc6ffaf6a470e2cbb0f63a2aac0a7010000000000"),540000:a("8dd0bebfbc4878f5af09d3e848dcc57827d2c1cebea8ec5d8cbe420500000000"),570000:a("87acbd4cd3c40ec9bd648f8698ed226b31187274c06cc7a9af79030000000000"),600000:a("169a05b3bb04b7d13ad628915630900a5ed2e89f3a9dc6064f62000000000000"),630000:a("bbbe117035432a6a4effcb297207a02b031735b43e0d19a9217c000000000000"),670000:a("080bfe75caed8624fcfdfbc65973c8f962d7bdc495a891f5d16b7d0000000000"),700000:a("c14d3f6a1e7c7d66fd940951e44f3c3be1273bea4d2ab1786140000000000000"),740000:a("b3b423f0462fd78a01e4f1a59a2737a0525b5dbb9bba0b4634f9000000000000"),780000:a("0381582e34c3755964dc2813e2b33e521e5596367144e1670851050000000000"),800000:a("03b5f8ab257e02903f509f5ff2935220eec2e77b1819651d099b200000000000"),840000:a("dac1648107bd4394e57e4083c86d42b548b1cfb119665f179ea80a0000000000"),880000:a("ff90b4bb07eded8e96715bf595c09c7d21dd8c61b8306ff48705d60000000000"),900000:a("9bd8ac418beeb1a2cf5d68c8b5c6ebaa947a5b766e5524898d6f350000000000"),940000:a("c98f1651a475b00d12f8c25eb166ee843affaa90610e36a19d68030000000000"),980000:a("cc8e9774542d044a9698ca2336ae02d5987157e676f1c76aa3877c0000000000"),1010000:a("9d9fb11abc2712d80368229e97b8d827b2a07d27eb5335e5c924000000000000"),1050000:a("d8190cf0af7f08e179cab51d67db0b44b87951a78f7fdc31b4a01a0000000000")},c.lastCheckpoint=105e4,c.halvingInterval=21e4,c.genesis={version:1,hash:a("43497fd7f826957108f4a30fd9cec3aeba79972084e90ead01ea330900000000"),prevBlock:a("0000000000000000000000000000000000000000000000000000000000000000"),merkleRoot:a("3ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a"),time:1296688602,bits:486604799,nonce:414098458,height:0},c.genesisBlock="0100000000000000000000000000000000000000000000000000000000000000000000003ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4adae5494dffff001d1aa4ae180101000000010000000000000000000000000000000000000000000000000000000000000000ffffffff4d04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73ffffffff0100f2052a01000000434104678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5fac00000000",c.pow={limit:new h("00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff","hex"),bits:486604799,chainwork:new h("000000000000000000000000000000000000000000000062b7123cfd7d09f7b6","hex"),targetTimespan:1209600,targetSpacing:600,retargetInterval:2016,targetReset:!0,noRetargeting:!1},c.block={bip34height:21111,bip34hash:a("f88ecd9912d00d3f5c2a8e0f50417d3e415c75b3abe584346da9b32300000000"),bip65height:581885,bip65hash:a("b61e864fbec41dfaf09da05d1d76dc068b0dd82ee7982ff255667f0000000000"),bip66height:330776,bip66hash:a("82a14b9e5ea81d4832b8e2cd3c2a6092b5a3853285a8995ec4c8042100000000"),pruneAfterHeight:1e3,keepBlocks:1e4,maxTipAge:86400,slowHeight:95e4},c.bip30={},c.activationThreshold=1512,c.minerWindow=2016,c.deployments={csv:{name:"csv",bit:0,startTime:1456790400,timeout:1493596800,threshold:-1,window:-1,required:!1,force:!0},segwit:{name:"segwit",bit:1,startTime:1462060800,timeout:1493596800,threshold:-1,window:-1,required:!0,force:!1},segsignal:{name:"segsignal",bit:4,startTime:4294967295,timeout:4294967295,threshold:269,window:336,required:!1,force:!1},testdummy:{name:"testdummy",bit:28,startTime:1199145601,timeout:1230767999,threshold:-1,window:-1,required:!1,force:!0}},c.deploys=[c.deployments.csv,c.deployments.segwit,c.deployments.segsignal,c.deployments.testdummy],c.keyPrefix={privkey:239,xpubkey:70617039,xprivkey:70615956,xpubkey58:"tpub",xprivkey58:"tprv",coinType:1},c.addressPrefix={pubkeyhash:111,scripthash:196,witnesspubkeyhash:3,witnessscripthash:40,bech32:"tb"},c.requireStandard=!1,c.rpcPort=18332,c.walletPort=18334,c.minRelay=1e3,c.feeRate=2e4,c.maxFeeRate=6e4,c.selfConnect=!1,c.requestMempool=!1;const l={type:"regtest",seeds:[],magic:3669344250,port:48444,checkpointMap:{},lastCheckpoint:0,halvingInterval:150};l.genesis={version:1,hash:a("06226e46111a0b59caaf126043eb5bbf28c34f3a5e332a1fc7b2b73cf188910f"),prevBlock:a("0000000000000000000000000000000000000000000000000000000000000000"),merkleRoot:a("3ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a"),time:1296688602,bits:545259519,nonce:2,height:0},l.genesisBlock="0100000000000000000000000000000000000000000000000000000000000000000000003ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4adae5494dffff7f20020000000101000000010000000000000000000000000000000000000000000000000000000000000000ffffffff4d04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73ffffffff0100f2052a01000000434104678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5fac00000000",l.pow={limit:new h("7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff","hex"),bits:545259519,chainwork:new h("0000000000000000000000000000000000000000000000000000000000000002","hex"),targetTimespan:1209600,targetSpacing:600,retargetInterval:2016,targetReset:!0,noRetargeting:!0},l.block={bip34height:1e8,bip34hash:null,bip65height:1351,bip65hash:null,bip66height:1251,bip66hash:null,pruneAfterHeight:1e3,keepBlocks:1e4,maxTipAge:4294967295,slowHeight:0},l.bip30={},l.activationThreshold=108,l.minerWindow=144,l.deployments={csv:{name:"csv",bit:0,startTime:0,timeout:4294967295,threshold:-1,window:-1,required:!1,force:!0},segwit:{name:"segwit",bit:1,startTime:-1,timeout:4294967295,threshold:-1,window:-1,required:!0,force:!1},segsignal:{name:"segsignal",bit:4,startTime:4294967295,timeout:4294967295,threshold:269,window:336,required:!1,force:!1},testdummy:{name:"testdummy",bit:28,startTime:0,timeout:4294967295,threshold:-1,window:-1,required:!1,force:!0}},l.deploys=[l.deployments.csv,l.deployments.segwit,l.deployments.segsignal,l.deployments.testdummy],l.keyPrefix={privkey:239,xpubkey:70617039,xprivkey:70615956,xpubkey58:"tpub",xprivkey58:"tprv",coinType:1},l.addressPrefix={pubkeyhash:111,scripthash:196,witnesspubkeyhash:3,witnessscripthash:40,bech32:"bcrt"},l.requireStandard=!1,l.rpcPort=48332,l.walletPort=48334,l.minRelay=1e3,l.feeRate=2e4,l.maxFeeRate=6e4,l.selfConnect=!0,l.requestMempool=!0;const p={type:"simnet",seeds:["127.0.0.1"],magic:303307798,port:18555,checkpointMap:{},lastCheckpoint:0,halvingInterval:21e4};p.genesis={version:1,hash:a("f67ad7695d9b662a72ff3d8edbbb2de0bfa67b13974bb9910d116d5cbd863e68"),prevBlock:a("0000000000000000000000000000000000000000000000000000000000000000"),merkleRoot:a("3ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a"),time:1401292357,bits:545259519,nonce:2,height:0},p.genesisBlock="0100000000000000000000000000000000000000000000000000000000000000000000003ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a45068653ffff7f20020000000101000000010000000000000000000000000000000000000000000000000000000000000000ffffffff4d04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73ffffffff0100f2052a01000000434104678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5fac00000000",p.pow={limit:new h("7fffff0000000000000000000000000000000000000000000000000000000000","hex"),bits:545259519,chainwork:new h("0000000000000000000000000000000000000000000000000000000000000002","hex"),targetTimespan:1209600,targetSpacing:600,retargetInterval:2016,targetReset:!0,noRetargeting:!1},p.block={bip34height:0,bip34hash:a("f67ad7695d9b662a72ff3d8edbbb2de0bfa67b13974bb9910d116d5cbd863e68"),bip65height:0,bip65hash:a("f67ad7695d9b662a72ff3d8edbbb2de0bfa67b13974bb9910d116d5cbd863e68"),bip66height:0,bip66hash:a("f67ad7695d9b662a72ff3d8edbbb2de0bfa67b13974bb9910d116d5cbd863e68"),pruneAfterHeight:1e3,keepBlocks:1e4,maxTipAge:4294967295,slowHeight:0},p.bip30={},p.activationThreshold=75,p.minerWindow=100,p.deployments={csv:{name:"csv",bit:0,startTime:0,timeout:4294967295,threshold:-1,window:-1,required:!1,force:!0},segwit:{name:"segwit",bit:1,startTime:0,timeout:4294967295,threshold:-1,window:-1,required:!0,force:!1},segsignal:{name:"segsignal",bit:4,startTime:4294967295,timeout:4294967295,threshold:269,window:336,required:!1,force:!1},testdummy:{name:"testdummy",bit:28,startTime:1199145601,timeout:1230767999,threshold:-1,window:-1,required:!1,force:!0}},p.deploys=[p.deployments.csv,p.deployments.segwit,p.deployments.segsignal,p.deployments.testdummy],p.keyPrefix={privkey:100,xpubkey:69254458,xprivkey:69253376,xpubkey58:"spub",xprivkey58:"sprv",coinType:115},p.addressPrefix={pubkeyhash:63,scripthash:123,witnesspubkeyhash:25,witnessscripthash:40,bech32:"sb"},p.requireStandard=!1,p.rpcPort=18556,p.walletPort=18558,p.minRelay=1e3,p.feeRate=2e4,p.maxFeeRate=6e4,p.selfConnect=!1,p.requestMempool=!1,f.main=u,f.testnet=c,f.regtest=l,f.simnet=p}],["bcrypto","/lib/bn-browser.js",function(t,e,r,i,s,n){"use strict";r.exports=d(9,r)}],["bcrypto","/lib/js/bn.js",function(t,e,r,s,n,o){"use strict";const{custom:h}=d(10,r),f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176],c={p192:null,p224:null,p521:null,k256:null,p25519:null,p448:null},l={NONE:0,QUO:1,REM:2,BOTH:3,EUCLID:4,ALL:7},p="function"==typeof BigInt;class b{constructor(t,e,r){this.words=[0],this.length=1,this.negative=0,this.red=null,this.from(t,e,r)}_iadd(t,e){let r=0,i=0;for(t.length<e.length&&([t,e]=[e,t]),t!==this&&this._alloc(t.length);i<e.length;i++){const s=(0|t.words[i])+(0|e.words[i])+r;this.words[i]=67108863&s,r=s>>>26}for(;0!==r&&i<t.length;i++){const e=(0|t.words[i])+r;this.words[i]=67108863&e,r=e>>>26}if(this.length=t.length,0!==r)this._alloc(this.length+1),this.words[this.length++]=r;else if(t!==this)for(;i<t.length;i++)this.words[i]=t.words[i];return this}_iaddn(t){if(this.words[0]+=t,this.words[0]<67108864)return this;let e=0;for(this._alloc(this.length+1),this.words[this.length]=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,this.words[e+1]+=1;return this.length=Math.max(this.length,e+1),this}iadd(t){if(N(b.isBN(t),"num","bignum"),this.negative===t.negative)this._iadd(this,t);else{const e=this.ucmp(t);if(0===e)return this.words[0]=0,this.length=1,this.negative=0,this;e<0?(this._isub(t,this),this.negative^=1):this._isub(this,t)}return this}iaddn(t){N(T(t),"num","smi");const e=t<0|0;return e&&(t=-t),this.negative===e?this._iaddn(t):1===this.length&&this.words[0]<t?(this.words[0]=t-this.words[0],this.negative^=1):this._isubn(t),this}add(t){return N(b.isBN(t),"num","bignum"),t.length>this.length?t.clone().iadd(this):this.clone().iadd(t)}addn(t){return this.clone().iaddn(t)}_isub(t,e){let r=0,i=0;for(M(t.length>=e.length),t!==this&&this._alloc(t.length);i<e.length;i++){const s=(0|t.words[i])-(0|e.words[i])+r;r=s>>26,this.words[i]=67108863&s}for(;0!==r&&i<t.length;i++){const e=(0|t.words[i])+r;r=e>>26,this.words[i]=67108863&e}if(M(0===r),t!==this)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=Math.max(this.length,i),this._strip()}_isubn(t){if(this.words[0]-=t,this.words[0]>=0)return this._normalize();M(1!==this.length),this._alloc(this.length+1);for(let t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.words[this.length]=0,this._strip()}isub(t){if(N(b.isBN(t),"num","bignum"),this.negative!==t.negative)this._iadd(this,t);else{const e=this.ucmp(t);if(0===e)return this.words[0]=0,this.length=1,this.negative=0,this;e<0?(this._isub(t,this),this.negative^=1):this._isub(this,t)}return this}isubn(t){N(T(t),"num","smi");const e=t<0|0;return e&&(t=-t),this.negative!==e?this._iaddn(t):1===this.length&&this.words[0]<t?(this.words[0]=t-this.words[0],this.negative^=1):this._isubn(t),this}sub(t){return this.clone().isub(t)}subn(t){return this.clone().isubn(t)}_mul(t,e){if(N(b.isBN(t),"num","bignum"),N(b.isBN(e),"out","bignum"),10===this.length&&10===t.length)return j(this,t,e);const r=this.length+t.length;return r<63?V(this,t,e):r<1024?D(this,t,e):function(t,e,r){if(!p||t.length+e.length>82595519)return D(t,e,r);const i=BigInt(0),s=BigInt(67108863),n=BigInt(26);let o=t.toBigInt()*e.toBigInt();const h=o<i|0;h&&(o=-o);let f=0;for(;o>i;)r.words[f++]=Number(o&s),o>>=n;0===f&&(r.words[f++]=0);return r.length=f,r.negative=h,r}(this,t,e)}imul(t){return this.mul(t)._move(this)}imuln(t){N(T(t),"num","smi");const e=t<0|0;e&&(t=-t);let r=0;for(let e=0;e<this.length;e++){const i=this.words[e]*t,s=(67108863&i)+(67108863&r);r>>=26,r+=i/67108864|0,r+=s>>>26,this.words[e]=67108863&s}return this.negative^=e,0!==r?(this._alloc(this.length+1),this.words[this.length++]=r):this._strip(),this}mul(t){N(b.isBN(t),"num","bignum");const e=this.length+t.length,r=new b;r.words=new Array(e);for(let t=0;t<e;t++)r.words[t]=0;return this._mul(t,r)}muln(t){return this.clone().imuln(t)}mulShift(t,e){N(b.isBN(t),"num","bignum"),N(e>>>0===e,"bits","uint32");const r=this.mul(t),i=r.utestn(e-1);return r.iushrn(e),this.negative^t.negative?r.isubn(i):r.iaddn(i)}_div(t,e){N(b.isBN(t),"num","bignum"),M((e&l.ALL)===e),M(e!==l.NONE);const r=this,i=t;if(B(!i.isZero()),r.isZero())return[new b(0),new b(0)];const s=r.negative,n=i.negative;r.negative=0,i.negative=0;let o=null,h=null;return r.ucmp(i)<0?(e&l.QUO&&(o=new b(0)),e&l.REM&&(h=r.clone())):1===i.length?(e&l.QUO&&(o=r.quon(i.words[0])),e&l.REM&&(h=r.remn(i.words[0]))):[o,h]=r._wordDiv(i,e),r.negative=s,i.negative=n,e&l.QUO&&(o.negative=r.negative^i.negative,o._normalize()),e&l.REM&&(h.negative=r.negative,h._normalize()),e&l.EUCLID&&(e&l.QUO&&(M(0!=(e&l.REM)),0!==h.negative&&(0!==i.negative?o.iaddn(1):o.isubn(1))),e&l.REM&&0!==h.negative&&(0!==i.negative?h.isub(i):h.iadd(i))),[o,h]}_wordDiv(t,e){let r,i=this.clone(),s=t,n=null;const o=0|s.words[s.length-1],h=26-z(o);0!==h?(s=s.clone(),i.iushln(h),s.iushln(h),r=0|s.words[s.length-1]):r=o;const f=i.length-s.length;if(M(f>=0),e&l.QUO){(n=new b(0)).length=f+1,n.words=new Array(n.length);for(let t=0;t<n.length;t++)n.words[t]=0}const a=i.clone();a._ishlnsubmul(s,1,f),0===a.negative&&(n&&(n.words[f]=1),i=a);for(let t=f-1;t>=0;t--){const e=(67108864*i.words[s.length+t]+i.words[s.length+t-1])/r|0;let o=Math.min(e,67108863);for(i._ishlnsubmul(s,o,t);0!==i.negative;)o-=1,i.negative=0,i._ishlnsubmul(s,1,t),i.ineg();n&&(n.words[t]=o)}return n&&n._strip(),e&l.REM&&0!==h&&i.iushrn(h),[n,i]}_ishlnsubmul(t,e,r){let i=0,s=0;for(this._expand(t.length+r);s<t.length;s++){const n=(0|this.words[s+r])+i,o=t.words[s]*e,h=n-(67108863&o);i=(h>>26)-(o/67108864|0),this.words[s+r]=67108863&h}for(;s<this.length-r;s++){const t=(0|this.words[s+r])+i;i=t>>26,this.words[s+r]=67108863&t}if(0===i)return this._strip();M(-1===i),i=0;for(let t=0;t<this.length;t++){const e=-(0|this.words[t])+i;i=e>>26,this.words[t]=67108863&e}return this.negative=1,this._strip()}quorem(t){return this._div(t,l.BOTH)}iquo(t){return this.quo(t)._move(this)}iquon(t){N(T(t),"num","smi"),B(0!==t);const e=t<0|0;e&&(t=-t);let r=0;for(let e=this.length-1;e>=0;e--){const i=(0|this.words[e])+67108864*r;this.words[e]=i/t|0,r=i%t}return this.negative^=e,this._strip()}quo(t){return this._div(t,l.QUO)[0]}quon(t){return this.clone().iquon(t)}irem(t){return this.rem(t)._move(this)}iremn(t){let e=this.remrn(t);return e<0&&(e=-e),this.words[0]=e,this.length=1,this._normalize()}rem(t){return this._div(t,l.REM)[1]}remn(t){return this.clone().iremn(t)}remrn(t){N(T(t),"num","smi"),B(0!==t),t<0&&(t=-t);const e=(1<<26)%t;let r=0;for(let i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return 0!==this.negative?0|-r:r}divmod(t){return this._div(t,l.BOTH|l.EUCLID)}idiv(t){return this.div(t)._move(this)}idivn(t){if(0===this.negative)return this.iquon(t);const e=this.remrn(t);return this.iquon(t),e<0&&(t<0?this.iaddn(1):this.isubn(1)),this}div(t){return this._div(t,l.BOTH|l.EUCLID)[0]}divn(t){return this.clone().idivn(t)}imod(t){return this.ucmp(t)<0?(0!==this.negative&&(this._isub(t,this),this.negative=0),this):this.mod(t)._move(this)}imodn(t){return this.words[0]=this.modrn(t),this.length=1,this.negative=0,this}mod(t){return this._div(t,l.REM|l.EUCLID)[1]}modn(t){return this.clone().imodn(t)}modrn(t){N(T(t),"num","smi");let e=this.remrn(t);return e<0&&(t<0?e-=t:e+=t),e}divRound(t){const[e,r]=this.quorem(t);if(r.isZero())return e;const i=1&t.words[0];t.iushrn(1);const s=r.ucmp(t);return t.iushln(1),t.words[0]|=i,s<0||t.isOdd()&&0===s?e:this.negative^t.negative?e.isubn(1):e.iaddn(1)}ipow(t){return this.pow(t)._move(this)}ipown(t){return this.pown(t)._move(this)}pow(t){N(b.isBN(t),"num","bignum");let e=z(t.words[t.length-1]),r=new b(1);for(let i=t.length-1;i>=0;i--){const s=t.words[i];for(let t=e-1;t>=0;t--)r=r.sqr(),s>>t&1&&(r=r.mul(this));e=26}return r}pown(t){if(N(T(t),"num","smi"),t<0&&(t=-t),0===t)return new b(1);if(1===t)return this.clone();let e=this;for(let r=z(t)-2;r>=0;r--)e=e.sqr(),t>>r&1&&(e=e.mul(this));return e}isqr(){return this.imul(this)}sqr(){return this.mul(this)}_rootrem(t,e){if(N(t>>>0===t,"num","uint32"),0===t)throw new RangeError("Zeroth root.");if(~t&this.negative)throw new RangeError("Negative with even root.");if(this.ucmpn(1)<=0)return[this.clone(),new b(0)];let r,i,s=new b(0),n=b.shift(1,this.bitLength()/t+1|0);if(0!==this.negative&&n.ineg(),2===t)do{s=n,(n=this.quo(s)).iadd(s),n.iushrn(1)}while(n.ucmp(s)<0);else do{n=(s=n).pown(t-1),n=this.quo(n),r=s.muln(t-1),n.iadd(r),n=n.quon(t)}while(n.ucmp(s)<0);return e&&(n=s.pown(t),i=this.sub(n)),[s,i]}rootrem(t){return this._rootrem(t,1)}iroot(t){return this.root(t)._move(this)}root(t){return this._rootrem(t,0)[0]}isPower(t){if(N(t>>>0===t,"num","uint32"),0===t||~t&this.negative)return!1;const[,e]=this.rootrem(t);return 0===e.sign()}sqrtrem(){return this.rootrem(2)}isqrt(){return this.sqrt()._move(this)}sqrt(){return this.root(2)}isSquare(){return this.isPower(2)}iand(t){N(b.isBN(t),"num","bignum");let e=this,r=t;if(e===r)return e;if(0==(e.negative|r.negative))return e.iuand(r);if(1==(e.negative&r.negative))return e.iaddn(1),r.iaddn(1),e.iuor(r),e.isubn(1),r.isubn(1),e;0!==e.negative&&([e,r]=[r.clone(),e]);const i=e.bitLength();return r.iaddn(1),r.inotn(i),e.iuand(r),r.inotn(i),r.isubn(1),e._move(this)}iandn(t){return N(T(t),"num","smi"),0!=(this.negative|t<0)?this.iand(new b(t)):(this.words[0]&=t,this.length=1,this)}and(t){return this.clone().iand(t)}andn(t){return this.clone().iandn(t)}andrn(t){if(N(T(t),"num","smi"),0!=(this.negative|t<0)){const e=this.iand(new b(t));if(e.length>1)throw new RangeError("Number exceeds 26 bits.");return 0!==e.negative?-e.words[0]:e.words[0]}return this.words[0]&t}iuand(t){N(b.isBN(t),"num","bignum"),this.length=Math.min(this.length,t.length);for(let e=0;e<this.length;e++)this.words[e]&=t.words[e];return this._strip()}iuandn(t){return N(T(t),"num","smi"),this.words[0]&=Math.abs(t),this.length=1,this._normalize()}uand(t){return this.clone().iuand(t)}uandn(t){return this.clone().iuandn(t)}uandrn(t){N(T(t),"num","smi");const e=this.words[0]&Math.abs(t);return 0!==this.negative?0|-e:e}ior(t){N(b.isBN(t),"num","bignum");let e=this,r=t;return e===r?e:0==(e.negative|r.negative)?e.iuor(r):1==(e.negative&r.negative)?(e.iaddn(1),r.iaddn(1),e.iuand(r),e.isubn(1),r.isubn(1),e):(r=r.clone(),0!==e.negative&&([e,r]=[r,e]),r.iaddn(1),e.inotn(r.bitLength()),r.iuand(e),r.isubn(1),r._move(this))}iorn(t){return N(T(t),"num","smi"),0!=(this.negative|t<0)?this.ior(new b(t)):(this.words[0]|=t,this)}or(t){return this.clone().ior(t)}orn(t){return this.clone().iorn(t)}iuor(t){N(b.isBN(t),"num","bignum"),this._expand(t.length);for(let e=0;e<t.length;e++)this.words[e]|=t.words[e];return this}iuorn(t){return N(T(t),"num","smi"),this.words[0]|=Math.abs(t),this}uor(t){return this.clone().iuor(t)}uorn(t){return this.clone().iuorn(t)}ixor(t){N(b.isBN(t),"num","bignum");let e=this,r=t;return e===r?(e.words[0]=0,e.length=1,e.negative=0,e):0==(e.negative|r.negative)?e.iuxor(r):1==(e.negative&r.negative)?(e.iaddn(1),r.iaddn(1),e.iuxor(r),e.ineg(),r.isubn(1),e):(0!==e.negative&&([e,r]=[r.clone(),e]),r.iaddn(1),e.iuxor(r),e.iaddn(1),e.ineg(),r.isubn(1),e._move(this))}ixorn(t){return N(T(t),"num","smi"),0!=(this.negative|t<0)?this.ixor(new b(t)):(this.words[0]^=t,this)}xor(t){return this.clone().ixor(t)}xorn(t){return this.clone().ixorn(t)}iuxor(t){N(b.isBN(t),"num","bignum");let e=this,r=t;e.length<r.length&&([e,r]=[r,e]);let i=0;for(;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(e!==this)for(this._alloc(e.length);i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this._strip()}iuxorn(t){return N(T(t),"num","smi"),this.words[0]^=Math.abs(t),this._normalize()}uxor(t){return this.clone().iuxor(t)}uxorn(t){return this.clone().iuxorn(t)}inot(){return 0!==this.negative?this.ineg().isubn(1):this.iaddn(1).ineg(),this}not(){return this.clone().inot()}inotn(t){N(t>>>0===t,"width","uint32");const e=t%26;let r=Math.ceil(t/26),i=0;for(this._expand(r),e>0&&(r-=1);i<r;i++)this.words[i]^=67108863;return e>0&&(this.words[i]^=(1<<e)-1),this._strip()}notn(t){return this.clone().inotn(t)}ishl(t){return N(b.isBN(t),"bits","bignum"),N(t.bitLength()<=32,"bits","uint32"),this.ishln(t.toNumber())}ishln(t){return this.iushln(t)}shl(t){return this.clone().ishl(t)}shln(t){return this.clone().ishln(t)}iushl(t){return N(b.isBN(t),"bits","bignum"),N(t.bitLength()<=32,"bits","uint32"),this.iushln(t.toNumber())}iushln(t){N(t>>>0===t,"bits","uint32");const e=t%26,r=(t-e)/26,i=(1<<e)-1<<26-e;if(0!==e){let t=0;for(let r=0;r<this.length;r++){const s=this.words[r]&i,n=(0|this.words[r])-s<<e;this.words[r]=n|t,t=s>>>26-e}0!==t&&(this._alloc(this.length+1),this.words[this.length++]=t)}if(0!==r){this._alloc(this.length+r);for(let t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(let t=0;t<r;t++)this.words[t]=0;this.length+=r}return this._strip()}ushl(t){return this.clone().iushl(t)}ushln(t){return this.clone().iushln(t)}_split(t,e){const r=t%26,i=Math.min((t-r)/26,this.length),s=(1<<r)-1;if(e){e._alloc(i);for(let t=0;t<i;t++)e.words[t]=this.words[t];e.length=i}if(0===i);else if(this.length>i){this.length-=i;for(let t=0;t<this.length;t++)this.words[t]=this.words[t+i]}else this.words[0]=0,this.length=1;let n=0;if(0!==r)for(let t=this.length-1;t>=0;t--){const e=0|this.words[t];this.words[t]=n<<26-r|e>>>r,n=e&s}return e&&(0!==n?(e._alloc(e.length+1),e.words[e.length++]=n):(0===e.length&&(e.words[e.length++]=0),e._strip())),this._strip()}ishr(t){return N(b.isBN(t),"bits","bignum"),N(t.bitLength()<=32,"bits","uint32"),this.ishrn(t.toNumber())}ishrn(t){return N(t>>>0===t,"bits","uint32"),0!==this.negative?(this.iaddn(1),this.iushrn(t),this.isubn(1),this):this.iushrn(t)}shr(t){return this.clone().ishr(t)}shrn(t){return this.clone().ishrn(t)}iushr(t){return N(b.isBN(t),"bits","bignum"),N(t.bitLength()<=32,"bits","uint32"),this.iushrn(t.toNumber())}iushrn(t){return N(t>>>0===t,"bits","uint32"),this._split(t,null)}ushr(t){return this.clone().iushr(t)}ushrn(t){return this.clone().iushrn(t)}setn(t,e){return N(t>>>0===t,"bit","uint32"),0!==this.negative?(this.iaddn(1),this.usetn(t,!e),this.isubn(1),this):this.usetn(t,e)}usetn(t,e){N(t>>>0===t,"bit","uint32");const r=t%26,i=(t-r)/26;return this._expand(i+1),e?this.words[i]|=1<<r:this.words[i]&=~(1<<r),this._strip()}testn(t){N(t>>>0===t,"bit","uint32");const e=t%26,r=(t-e)/26;if(this.length<=r)return this.negative;const i=this.words[r],s=i>>e&1;if(0!==this.negative){if(e>0&&i&(1<<e)-1)return 1^s;let t=r;for(;t--;)if(this.words[t]>0)return 1^s}return s}utestn(t){N(t>>>0===t,"bit","uint32");const e=t%26,r=(t-e)/26;return this.length<=r?0:this.words[r]>>e&1}imaskn(t){return N(t>>>0===t,"bits","uint32"),0!==this.negative&&(this.iaddn(1),this.inotn(t+1),this.ineg()),this.iumaskn(t)}maskn(t){return this.clone().imaskn(t)}iumaskn(t){N(t>>>0===t,"bits","uint32");const e=t%26;let r=(t-e)/26;return this.length<=r?this:(0!==e&&(r+=1),this.length=Math.min(r,this.length),0!==e&&(this.words[this.length-1]&=(1<<e)-1),0===this.length&&(this.words[this.length++]=0),this._strip())}umaskn(t){return this.clone().iumaskn(t)}andln(t){return this.words[0]&t}ineg(){return this.isZero()||(this.negative^=1),this}neg(){return this.clone().ineg()}iabs(){return this.negative=0,this}abs(){return this.clone().iabs()}cmp(t){if(N(b.isBN(t),"num","bignum"),this.negative!==t.negative)return t.negative-this.negative;const e=this.ucmp(t);return 0!==this.negative?0|-e:e}cmpn(t){N(T(t),"num","smi");const e=t<0|0;if(this.negative!==e)return e-this.negative;const r=this.ucmpn(t);return 0!==this.negative?0|-r:r}eq(t){return 0===this.cmp(t)}eqn(t){return 0===this.cmpn(t)}gt(t){return this.cmp(t)>0}gtn(t){return this.cmpn(t)>0}gte(t){return this.cmp(t)>=0}gten(t){return this.cmpn(t)>=0}lt(t){return this.cmp(t)<0}ltn(t){return this.cmpn(t)<0}lte(t){return this.cmp(t)<=0}lten(t){return this.cmpn(t)<=0}sign(){return 0!==this.negative?-1:1===this.length&&0===this.words[0]?0:1}isZero(){return 1===this.length&&0===this.words[0]}isNeg(){return 0!==this.negative}isPos(){return 0===this.negative}isOdd(){return 1==(1&this.words[0])}isEven(){return 0==(1&this.words[0])}ucmp(t){if(N(b.isBN(t),"num","bignum"),this.length<t.length)return-1;if(this.length>t.length)return 1;for(let e=this.length-1;e>=0;e--){const r=0|this.words[e],i=0|t.words[e];if(r!==i)return(r>i)-(r<i)}return 0}ucmpn(t){if(N(T(t),"num","smi"),this.length>1)return 1;const e=0|this.words[0];return t<0&&(t=-t),(e>t)-(e<t)}legendre(t){const e=p?b.red(t):b.mont(t);return this.toRed(e).redLegendre()}jacobi(t){if(N(b.isBN(t),"num","bignum"),t.isZero()||t.isEven())throw new Error("jacobi: `num` must be odd.");let e=this._cloneNormal(),r=t.clone(),i=1;for(r.isNeg()&&(e.isNeg()&&(i=-1),r.ineg());;){if(0===r.cmpn(1))return i;if(e.isZero())return 0;if(e.imod(r),e.isZero())return 0;const t=e.zeroBits();if(1&t){const t=r.andln(7);3!==t&&5!==t||(i=-i)}const s=e.iushrn(t);3===r.andln(3)&&3===s.andln(3)&&(i=-i),e=r,r=s}}kronecker(t){N(b.isBN(t),"num","bignum");const e=[0,1,0,-1,0,-1,0,1];let r=this._cloneNormal(),i=t.clone(),s=1;if(i.isZero())return 0===r.ucmpn(1)?s:0;if(!r.isOdd()&&!i.isOdd())return 0;const n=i.zeroBits();for(i.iushrn(n),1&n&&(s=e[r.andln(7)]),i.isNeg()&&(r.isNeg()&&(s=-s),i.ineg());;){if(r.isZero())return 0===i.cmpn(1)?s:0;const t=r.zeroBits();r.iushrn(t),1&t&&(s*=e[i.andln(7)]),(r.words[0]^67108863*r.negative)&i.words[0]&2&&(s=-s),i.imod(r),[r,i]=[i,r],i.negative=0}}igcd(t){return this.gcd(t)._move(this)}gcd(t){if(N(b.isBN(t),"num","bignum"),this.isZero())return t.abs();if(t.isZero())return this.abs();let e=this.clone(),r=t.clone();e.negative=0,r.negative=0;const i=e._factor2(r);for(0!==i&&(e.iushrn(i),r.iushrn(i));;){const t=e.zeroBits(),i=r.zeroBits();0!==t&&e.iushrn(t),0!==i&&r.iushrn(i);const s=e.ucmp(r);if(s<0)[e,r]=[r,e];else if(0===s||0===r.ucmpn(1))break;e._isub(e,r)}return r.iushln(i)}ilcm(t){return this.lcm(t)._move(this)}lcm(t){return N(b.isBN(t),"num","bignum"),this.isZero()||t.isZero()?new b(0):this.quo(this.gcd(t)).mul(t).iabs()}egcd(t){if(N(b.isBN(t),"num","bignum"),this.isZero())return[new b(0),new b(t.sign()),t.abs()];if(t.isZero())return[new b(this.sign()),new b(0),this.abs()];const e=this.clone(),r=t.clone();e.negative=0,r.negative=0;const i=new b(1),s=new b(0),n=new b(0),o=new b(1),h=e._factor2(r);0!==h&&(e.iushrn(h),r.iushrn(h));const f=r.clone(),a=e.clone();for(;!e.isZero();){let t=0;for(let r=1;0==(e.words[0]&r)&&t<26;r<<=1)t+=1;if(t>0)for(e.iushrn(t);t>0;)(i.isOdd()||s.isOdd())&&(i.iadd(f),s.isub(a)),i.iushrn(1),s.iushrn(1),t-=1;let h=0;for(let t=1;0==(r.words[0]&t)&&h<26;t<<=1)h+=1;if(h>0)for(r.iushrn(h);h>0;)(n.isOdd()||o.isOdd())&&(n.iadd(f),o.isub(a)),n.iushrn(1),o.iushrn(1),h-=1;e.cmp(r)>=0?(e.isub(r),i.isub(n),s.isub(o)):(r.isub(e),n.isub(i),o.isub(s))}return 0!==this.negative&&n.ineg(),0!==t.negative&&o.ineg(),[n,o,r.iushln(h)]}iinvert(t){return this.invert(t)._move(this)}invert(t){if(N(b.isBN(t),"num","bignum"),P(t.sign()>0,"invert"),0===t.cmpn(1))throw new RangeError("Not invertible.");const[e,,r]=this.egcd(t);if(0!==r.cmpn(1))throw new RangeError("Not invertible.");return e.imod(t)}ifermat(t){return this.fermat(t)._move(this)}fermat(t){const e=p?b.red(t):b.mont(t);return this.toRed(e).redFermat().fromRed()}ipowm(t,e,r,i){return this.powm(t,e,r,i)._move(this)}powm(t,e,r,i){const s=!p&&r?b.mont(e):b.red(e);return this.toRed(s).redPow(t,i).fromRed()}ipowmn(t,e,r){return this.powmn(t,e,r)._move(this)}powmn(t,e,r){const i=r?b.mont(e):b.red(e);return this.toRed(i).redPown(t).fromRed()}isqrtm(t){return this.sqrtm(t)._move(this)}sqrtm(t){let e;return N(b.isBN(t),"p","bignum"),e=3===t.andln(3)||5===t.andln(7)?b.red(t):b.mont(t),this.toRed(e).redSqrt().fromRed()}isqrtpq(t,e){return this.sqrtpq(t,e)._move(this)}sqrtpq(t,e){const r=this.sqrtm(t),i=this.sqrtm(e),[s,n]=t.egcd(e),o=i.mul(s).mul(t),h=r.mul(n).mul(e),f=t.mul(e);return o.iadd(h).imod(f)}isPrime(t,e,r){return N(e>>>0===e,"reps","uint32"),!!this.isPrimeMR(t,e+1,!0)&&!!this.isPrimeLucas(r)}isPrimeMR(t,e,r=!1){N(e>>>0===e,"reps","uint32"),N(e>0,"reps","integer"),N("boolean"==typeof r,"force2","boolean");const i=this;if(i.cmpn(7)<0)return 0===i.cmpn(2)||0===i.cmpn(3)||0===i.cmpn(5);if(i.isEven())return!1;const s=i.subn(1),n=s.subn(2),o=s.zeroBits(),h=s.ushrn(o),f=b.red(i),a=s.toRed(f),u=new b(1).toRed(f);t:for(let i=0;i<e;i++){let s;i===e-1&&r?s=new b(2):(s=b.random(t,0,n)).iaddn(2);let c=s.toRed(f).redPow(h);if(0!==c.cmp(u)&&0!==c.cmp(a)){for(let t=1;t<o;t++){if(0===(c=c.redSqr()).cmp(a))continue t;if(0===c.cmp(u))return!1}return!1}}return!0}isPrimeLucas(t=0){N(t>>>0===t,"limit","uint32");const e=this;if(e.cmpn(1)<=0)return!1;if(e.isEven())return 0===e.cmpn(2);let r=3;for(;;){if(r>1e4)throw new Error(`Cannot find (D/n) = -1 for ${e.toString(10)}.`);if(0!==t&&r>t)return!1;const i=new b(r*r-4).jacobi(e);if(-1===i)break;if(0===i)return 0===e.cmpn(r+2);if(40===r&&e.isSquare())return!1;r+=1}const i=e.addn(1),s=i.zeroBits(),n=e.subn(2);let o=new b(2),h=new b(r);i.iushrn(s);for(let t=i.bitLength();t>=0;t--)i.utestn(t)?(o=o.mul(h).iadd(e).isubn(r).imod(e),h=h.sqr().iadd(n).imod(e)):(h=h.mul(o).iadd(e).isubn(r).imod(e),o=o.sqr().iadd(n).imod(e));if(0===o.cmpn(2)||0===o.cmp(n)){let t=o.muln(r),i=h.ushln(1);if(t.cmp(i)<0&&([t,i]=[i,t]),t.isub(i).imod(e).isZero())return!0}for(let t=0;t<s-1;t++){if(o.isZero())return!0;if(0===o.cmpn(2))return!1;o=o.sqr().isubn(2).imod(e)}return!1}toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()}fromTwos(t){return N(t>>>0===t,"width","uint32"),P(t>0,"width"),this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()}toRed(t){if(N(t instanceof E,"ctx","reduction context"),this.red)throw new Error("Already in reduction context.");return t.convertTo(this)}fromRed(){return R(this.red,"fromRed"),this.red.convertFrom(this)}forceRed(t){if(N(t instanceof E,"ctx","reduction context"),this.red){if(!t.m.eq(this.red.m)||t.mont!==this.red.mont)throw new Error("Already in reduction context.")}else P(0===this.negative,"red"),P(this.ucmp(t.m)<0,"red");return this.clone()._forceRed(t)}redIAdd(t){return N(b.isBN(t),"num","bignum"),R(this.red,"redIAdd"),this.red.iadd(this,t)}redAdd(t){return N(b.isBN(t),"num","bignum"),R(this.red,"redAdd"),this.red.add(this,t)}redIAddn(t){return N(T(t),"num","smi"),R(this.red,"redIAddn"),this.red.iaddn(this,t)}redAddn(t){return N(T(t),"num","smi"),R(this.red,"redAddn"),this.red.addn(this,t)}redISub(t){return N(b.isBN(t),"num","bignum"),R(this.red,"redISub"),this.red.isub(this,t)}redSub(t){return N(b.isBN(t),"num","bignum"),R(this.red,"redSub"),this.red.sub(this,t)}redISubn(t){return N(T(t),"num","smi"),R(this.red,"redISubn"),this.red.isubn(this,t)}redSubn(t){return N(T(t),"num","smi"),R(this.red,"redSubn"),this.red.subn(this,t)}redIMul(t){return N(b.isBN(t),"num","bignum"),R(this.red,"redIMul"),this.red.imul(this,t)}redMul(t){return N(b.isBN(t),"num","bignum"),R(this.red,"redMul"),this.red.mul(this,t)}redIMuln(t){return N(T(t),"num","smi"),R(this.red,"redIMuln"),this.red.imuln(this,t)}redMuln(t){return N(T(t),"num","smi"),R(this.red,"redMuln"),this.red.muln(this,t)}redIDiv(t){return N(b.isBN(t),"num","bignum"),R(this.red,"redIDiv"),this.red.idiv(this,t)}redDiv(t){return N(b.isBN(t),"num","bignum"),R(this.red,"redDiv"),this.red.div(this,t)}redIDivn(t){return N(T(t),"num","smi"),R(this.red,"redIDivn"),this.red.idivn(this,t)}redDivn(t){return N(T(t),"num","smi"),R(this.red,"redDivn"),this.red.divn(this,t)}redIPow(t,e){return N(b.isBN(t),"num","bignum"),R(this.red,"redIPow"),x(!t.red,"redIPow"),this.red.ipow(this,t,e)}redPow(t,e){return N(b.isBN(t),"num","bignum"),R(this.red,"redPow"),x(!t.red,"redPow"),this.red.pow(this,t,e)}redIPown(t){return N(T(t),"num","smi"),R(this.red,"redIPown"),this.red.ipown(this,t)}redPown(t){return N(T(t),"num","smi"),R(this.red,"redPown"),this.red.pown(this,t)}redISqr(){return R(this.red,"redISqr"),this.red.isqr(this)}redSqr(){return R(this.red,"redSqr"),this.red.sqr(this)}redISqrt(){return R(this.red,"redISqrt"),this.red.isqrt(this)}redSqrt(){return R(this.red,"redSqrt"),this.red.sqrt(this)}redIDivSqrt(t){return R(this.red,"redIDivSqrt"),this.red.idivsqrt(this,t)}redDivSqrt(t){return R(this.red,"redDivSqrt"),this.red.divsqrt(this,t)}redIsSquare(){return R(this.red,"redIsSquare"),this.red.isSquare(this)}redIShl(t){return N(b.isBN(t),"num","bignum"),R(this.red,"redIShl"),x(!t.red,"redIShl"),this.red.ishl(this,t)}redShl(t){return N(b.isBN(t),"num","bignum"),R(this.red,"redShl"),x(!t.red,"redShl"),this.red.shl(this,t)}redIShln(t){return N(t>>>0===t,"num","uint32"),R(this.red,"redIShln"),this.red.ishln(this,t)}redShln(t){return N(t>>>0===t,"num","uint32"),R(this.red,"redShln"),this.red.shln(this,t)}redINeg(){return R(this.red,"redINeg"),this.red.ineg(this)}redNeg(){return R(this.red,"redNeg"),this.red.neg(this)}redEq(t){return N(b.isBN(t),"num","bignum"),R(this.red,"redEq"),this.red.eq(this,t)}redEqn(t){return N(T(t),"num","smi"),R(this.red,"redEqn"),this.red.eqn(this,t)}redIsHigh(){return R(this.red,"redIsHigh"),this.red.isHigh(this)}redIsLow(){return R(this.red,"redIsLow"),this.red.isLow(this)}redIsOdd(){return R(this.red,"redIsOdd"),this.red.isOdd(this)}redIsEven(){return R(this.red,"redIsEven"),this.red.isEven(this)}redLegendre(){return R(this.red,"redLegendre"),this.red.legendre(this)}redJacobi(){return R(this.red,"redJacobi"),this.red.jacobi(this)}redKronecker(){return R(this.red,"redKronecker"),this.red.kronecker(this)}redIInvert(){return R(this.red,"redIInvert"),this.red.iinvert(this)}redInvert(){return R(this.red,"redInvert"),this.red.invert(this)}redIFermat(){return R(this.red,"redIFermat"),this.red.ifermat(this)}redFermat(){return R(this.red,"redFermat"),this.red.fermat(this)}_move(t){return t.words=this.words,t.length=this.length,t.negative=this.negative,t.red=this.red,t}_alloc(t){for(;this.words.length<t;)this.words.push(0);return this}_expand(t){for(this._alloc(t);this.length<t;)this.words[this.length++]=0;return this}_strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length-=1;return this._normalize()}_normalize(){return M(this.length>0),1===this.length&&0===this.words[0]&&(this.negative=0),this}_check(){return M(this.length>0),M(this.length<=this.words.length),1===this.length?(0===this.words[0]&&M(0===this.negative),this):(M(0!==this.words[this.length-1]),this)}_invertp(t){if(N(b.isBN(t),"p","bignum"),M(0===this.negative),M(t.sign()>0),this.isZero()||0===t.cmpn(1))throw new RangeError("Not invertible.");const e=this.clone(),r=t.clone(),i=new b(1),s=new b(0),n=r.clone();for(;e.cmpn(1)>0&&r.cmpn(1)>0;){let t=0;for(let r=1;0==(e.words[0]&r)&&t<26;r<<=1)t+=1;if(t>0)for(e.iushrn(t);t>0;)i.isOdd()&&i.iadd(n),i.iushrn(1),t-=1;let o=0;for(let t=1;0==(r.words[0]&t)&&o<26;t<<=1)o+=1;if(o>0)for(r.iushrn(o);o>0;)s.isOdd()&&s.iadd(n),s.iushrn(1),o-=1;e.cmp(r)>=0?(e.isub(r),i.isub(s)):(r.isub(e),s.isub(i))}const o=0===e.cmpn(1)?i:s;return o.ucmp(t)>=0&&(o._isub(o,t),o.ucmp(t)>=0&&o._isub(o,t)),o.isNeg()&&o.iadd(t),o}_factor2(t){if(1&(this.words[0]|t.words[0]))return 0;const e=Math.min(this.length,t.length);let r=0;for(let i=0;i<e;i++){const e=C(this.words[i]|t.words[i]);if(r+=e,26!==e)break}return r}_cloneNormal(){return this.red?this.fromRed():this.clone()}_forceRed(t){return this.red=t,this}clone(){const t=new b;t.words=new Array(this.length);for(let e=0;e<this.length;e++)t.words[e]=this.words[e];return t.length=this.length,t.negative=this.negative,t.red=this.red,t}inject(t){N(b.isBN(t),"num","bignum"),this._alloc(t.length);for(let e=0;e<t.length;e++)this.words[e]=t.words[e];return this.length=t.length,this.negative=t.negative,this.red=t.red,this}set(t,e){return this.fromNumber(t,e)}swap(t){N(b.isBN(t),"num","bignum");const e=this,r=t;return[e.words,r.words]=[r.words,e.words],[e.length,r.length]=[r.length,e.length],[e.negative,r.negative]=[r.negative,e.negative],[e.red,r.red]=[r.red,e.red],e}reverse(){const t=this.negative;return this.fromBuffer(this.toBuffer("be"),"le"),this.negative=t,this}byteLength(){return Math.ceil(this.bitLength()/8)}bitLength(){const t=z(this.words[this.length-1]);return 26*(this.length-1)+t}zeroBits(){if(this.isZero())return 0;if(this.isOdd())return 0;let t=0;for(let e=0;e<this.length;e++){const r=C(this.words[e]);if(t+=r,26!==r)break}return t}isSafe(){return this.length<=2||3===this.length&&1===this.words[2]}word(t){return N(t>>>0===t,"pos","uint32"),t>=this.length?0:this.words[t]}[h](){let t="BN";return this.red&&(t="BN-R"),`<${t}: ${this.toString(10)}>`}csign(){return-2*this.negative+1-this.czero()}czero(){const t=this.words[0]-1>>>31;return this.length-2>>>31&t}cneg(){return this.negative}cpos(){return 1^this.negative}ceq(t){N(b.isBN(t),"num","bignum");let e=0;for(let r=0;r<t.length;r++)e|=this.words[r%this.length]^t.words[r];return e|=this.length^t.length,(e|=this.negative^t.negative)-1>>>31}ceqn(t){const e=t>>31&1,r=(0|t)*(1|-e)&67108863;let i=0;return i|=this.words[0]^r,i|=1^this.length,(i|=this.negative^e)-1>>>31}cswap(t,e){N(b.isBN(t),"num","bignum");const r=this,i=t,s=67108863&-(1&(e>>31|-e>>31));r._alloc(i.words.length),i._alloc(r.words.length);for(let t=0;t<r.words.length;t++){const e=(r.words[t]^i.words[t])&s;r.words[t]^=e,i.words[t]^=e}const n=(r.length^i.length)&s,o=(r.negative^i.negative)&s;return r.length^=n,i.length^=n,r.negative^=o,i.negative^=o,this}cinject(t,e){N(b.isBN(t),"num","bignum");const r=this,i=t,s=1&(e>>31|-e>>31),n=s-1&67108863,o=67108863&~(s-1);r._alloc(i.length);for(let t=0;t<i.length;t++)r.words[t]=r.words[t]&n|i.words[t]&o;return r.length=r.length&n|i.length&o,r.negative=r.negative&n|i.negative&o,this}cset(t,e){const r=1&(e>>31|-e>>31),i=r-1&67108863,s=67108863&~(r-1),n=t>>31&1,o=(0|t)*(1|-n)&67108863;return this.words[0]=this.words[0]&i|o&s,this.length=this.length&i|1&s,this.negative=this.negative&i|n&s,this}toNumber(){let t=this.words[0];if(2===this.length)t+=67108864*this.words[1];else if(3===this.length&&1===this.words[2])t+=4503599627370496+67108864*this.words[1];else if(this.length>2)throw new RangeError("Number can only safely store up to 53 bits.");return 0!==this.negative?-t:t}toDouble(){let t=0;for(let e=this.length-1;e>=0;e--)t=67108864*t+this.words[e];return 0!==this.negative?-t:t}valueOf(){return this.toDouble()}toBigInt(){if(!p)throw new Error("BigInt is not supported!");const t=BigInt(52),e=BigInt(26);let r=this.length-1,i=BigInt(0);for(;r>=1;r-=2){const e=67108864*this.words[r],s=this.words[r-1];i=i<<t|BigInt(e+s)}return r>=0&&(i=i<<e|BigInt(this.words[0])),0!==this.negative?-i:i}toBool(){return!this.isZero()}toString(t,e){if(t=U(t),null==e&&(e=0),0===e&&(e=1),N(t>>>0===t,"base","uint32"),N(e>>>0===e,"padding","uint32"),t<2||t>36)throw new RangeError("Base ranges between 2 and 36.");if(this._check(),16===t){let t="",r=0,i=0;for(let e=0;e<this.length;e++){const s=this.words[e],n=(16777215&(s<<r|i)).toString(16);t=0!==(i=s>>>24-r&16777215)||e!==this.length-1?f[6-n.length]+n+t:n+t,(r+=2)>=26&&(r-=26,e-=1)}for(0!==i&&(t=i.toString(16)+t);t.length%e!=0;)t="0"+t;return 0!==this.negative&&(t="-"+t),t}const r=a[t-1],i=u[t-1],s=this.clone();let n="";for(s.negative=0;!s.isZero();){const e=s.remrn(i).toString(t);s.iquon(i),n=s.isZero()?e+n:f[r-e.length]+e+n}for(this.isZero()&&(n="0");n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}toJSON(){return this.toString(16,2)}toArray(t,e){return this.toArrayLike(Array,t,e)}toBuffer(t,e){return this.toArrayLike(i,t,e)}toArrayLike(t,e,r){null==e&&(e="be"),null==r&&(r=0),N("function"==typeof t,"ArrayType","function"),N("be"===e||"le"===e,"endian","endianness"),N(r>>>0===r,"length","uint32"),this._check();const i=this.byteLength(),s=r||Math.max(1,i);if(i>s)throw new RangeError("Byte array longer than desired length.");const n=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,s);if("be"===e){let t=n.length-1,e=0;for(let r=0;r<this.length;r++){const i=(3&r)<<1,s=this.words[r]<<i|e;n[t--]=255&s,t>=0&&(n[t--]=s>>>8&255),t>=0&&(n[t--]=s>>>16&255),6===i?(t>=0&&(n[t--]=s>>>24&255),e=0):e=s>>>24}if(t>=0){for(n[t--]=e;t>=0;)n[t--]=0;e=0}M(0===e)}else{let t=0,e=0;for(let r=0;r<this.length;r++){const i=(3&r)<<1,s=this.words[r]<<i|e;n[t++]=255&s,t<n.length&&(n[t++]=s>>>8&255),t<n.length&&(n[t++]=s>>>16&255),6===i?(t<n.length&&(n[t++]=s>>>24&255),e=0):e=s>>>24}if(t<n.length){for(n[t++]=e;t<n.length;)n[t++]=0;e=0}M(0===e)}return n}encode(t,e){return this.toBuffer(t,e)}of(t,e){return this.fromNumber(t,e)}fromNumber(t,e){null==e&&(e="be"),N(k(t),"num","integer"),N("be"===e||"le"===e,"endian","endianness");const r=t<0|0;return r&&(t=-t),t<67108864?(this.words[0]=67108863&t,this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),this.negative=r,"le"===e&&this.reverse(),this}fromDouble(t,e){null==e&&(e="be"),N("number"==typeof t,"num","double"),N("be"===e||"le"===e,"endian","endianness"),isFinite(t)||(t=0);const r=t<=-1|0;for(t<0&&(t=-t),t=Math.floor(t),this.words=[];t>0;){const e=t%67108864,r=(t-e)/67108864;this.words.push(e),t=r}return 0===this.words.length&&this.words.push(0),this.length=this.words.length,this.negative=r,"le"===e&&this.reverse(),this}fromBigInt(t,e){if(null==e&&(e="be"),N("bigint"==typeof t,"num","bigint"),N("be"===e||"le"===e,"endian","endianness"),!p)throw new Error("BigInt is not supported!");const r=t<BigInt(0)|0;return this._fromHex(t.toString(16),r),this.negative=r,"le"===e&&this.reverse(),this}fromBool(t){return N("boolean"==typeof t,"value","boolean"),this.words[0]=0|t,this.length=1,this.negative=0,this}fromString(t,e,r){if("le"!==e&&"be"!==e||([e,r]=[r,e]),e=U(e),null==r&&(r="be"),N("string"==typeof t,"string","string"),N(e>>>0===e,"base","uint32"),N("be"===r||"le"===r,"endian","endianness"),e<2||e>36)throw new Error("Base ranges between 2 and 36.");let i=0;return(t=t.replace(/\s+/g,"")).length>0&&45===t.charCodeAt(0)&&(i=1),16===e?this._fromHex(t,i):this._fromBase(t,e,i),this.negative=i,this._normalize(),"le"===r&&this.reverse(),this}_fromHex(t,e){this.length=Math.max(2,Math.ceil((t.length-e)/6)),this.words=new Array(this.length);for(let t=0;t<this.length;t++)this.words[t]=0;let r=0,i=t.length-6,s=0;for(;i>=e;i-=6){const e=L(t,i,i+6);this.words[s]|=e<<r&67108863,this.words[s+1]|=e>>>26-r&4194303,(r+=24)>=26&&(r-=26,s+=1)}if(i+6!==e){const n=L(t,e,i+6);this.words[s]|=n<<r&67108863,this.words[s+1]|=n>>>26-r&4194303}return this._strip()}_fromBase(t,e,r){this.words[0]=0,this.length=1,this.negative=0;let i=0,s=1;for(;s<=67108863;s*=e)i+=1;i-=1,s=s/e|0;const n=t.length-r,o=n%i,h=Math.min(n,n-o)+r;let f=r;for(;f<h;f+=i){const r=q(t,f,f+i,e);this.imuln(s),this._iaddn(r)}if(0!==o){const r=Math.pow(e,o),i=q(t,f,t.length,e);this.imuln(r),this._iaddn(i)}return this}fromJSON(t){if(b.isBN(t))return t.red?t.fromRed():t.clone();if(Array.isArray(t)){for(const e of t)N("string"==typeof e,"chunk","string");t=t.join("")}return this.fromString(t,16)}fromBN(t){return this.inject(t)}fromArray(t,e){return N(Array.isArray(t),"data","array"),this.fromArrayLike(t,e)}fromBuffer(t,e){return N(null!=t&&!0===t._isBuffer,"data","buffer"),this.fromArrayLike(t,e)}fromArrayLike(t,e){if(null==e&&(e="be"),N(t&&t.length>>>0===t.length,"data","array-like"),N("be"===e||"le"===e,"endian","endianness"),0===t.length)return this.words[0]=0,this.length=1,this.negative=0,this;this.length=Math.max(2,Math.ceil(t.length/3)),this.words=new Array(this.length),this.negative=0;for(let t=0;t<this.length;t++)this.words[t]=0;const r=t.length%3;let i=0,s=0,n=0;if("be"===e){for(let e=t.length-1;e>=2;e-=3){const r=t[e]|t[e-1]<<8|t[e-2]<<16;this.words[s]|=r<<i&67108863,this.words[s+1]=r>>>26-i&67108863,(i+=24)>=26&&(i-=26,s+=1)}switch(r){case 2:n=t[1]|t[0]<<8;break;case 1:n=t[0]}}else{const e=t.length-r;for(let r=0;r<e;r+=3){const e=t[r]|t[r+1]<<8|t[r+2]<<16;this.words[s]|=e<<i&67108863,this.words[s+1]=e>>>26-i&67108863,(i+=24)>=26&&(i-=26,s+=1)}switch(r){case 2:n=t[e]|t[e+1]<<8;break;case 1:n=t[e]}}return r>0&&(this.words[s]|=n<<i&67108863,this.words[s+1]=n>>>26-i&67108863),this._strip()}decode(t,e){return this.fromBuffer(t,e)}from(t,e,r){if(null==t)return this;if("le"!==e&&"be"!==e||([e,r]=[r,e]),"number"==typeof t)return this.fromNumber(t,r);if("bigint"==typeof t)return this.fromBigInt(t,r);if("string"==typeof t)return this.fromString(t,e,r);if("object"==typeof t){if(b.isBN(t))return this.fromBN(t,r);if(t.length>>>0===t.length)return this.fromArrayLike(t,r)}if("boolean"==typeof t)return this.fromBool(t);throw new TypeError("Non-numeric object passed to BN.")}static min(...t){let e=null;for(const r of t)N(b.isBN(r),"num","bignum"),(!e||r.cmp(e)<0)&&(e=r);return e||new b(0)}static max(...t){let e=null;for(const r of t)N(b.isBN(r),"num","bignum"),(!e||r.cmp(e)>0)&&(e=r);return e||new b(0)}static cmp(t,e){return N(b.isBN(t),"a","bignum"),t.cmp(e)}static ucmp(t,e){return N(b.isBN(t),"a","bignum"),t.ucmp(e)}static red(t){return new E(t)}static barrett(t){return new _(t)}static mont(t){return new O(t)}static _prime(t){if(c[t])return c[t];let e;if("p192"===t)e=new g;else if("p224"===t)e=new w;else if("p521"===t)e=new y;else if("k256"===t)e=new S;else if("p25519"===t)e=new v;else{if("p448"!==t)throw new Error(`Unknown prime: "${t}".`);e=new I}return c[t]=e,e}static prime(t){return b._prime(t).p.clone()}static pow(t,e){return 2===t?b.shift(1,e):(new b).fromNumber(t).pown(e)}static shift(t,e){return 1===t?new b(0).usetn(e,1):(new b).fromNumber(t).ishln(e)}static mask(t){return b.shift(1,t).isubn(1)}static randomBits(t,e){if(N(null!=t,"rng","rng"),N(e>>>0===e,"bits","uint32"),"object"==typeof t){N("function"==typeof t.randomBytes,"rng","rng");const r=e+7>>>3,i=8*r,s=t.randomBytes(r);if(N(null!=s&&!0===s._isBuffer,"bytes","buffer"),s.length!==r)throw new RangeError("Invalid number of bytes returned from RNG.");const n=b.fromBuffer(s);return i>e&&n.iushrn(i-e),n}N("function"==typeof t,"rng","rng");const r=t(e);if(N(b.isBN(r),"num","bignum"),P(0===r.negative,"RNG"),x(!r.red,"RNG"),r.bitLength()>e)throw new RangeError("Invalid number of bits returned from RNG.");return r}static random(t,e,r){if(e=b.cast(e,16),r=b.cast(r,16),e.cmp(r)>0)throw new RangeError("Minimum cannot be greater than maximum.");const i=r.sub(e).iabs(),s=i.bitLength();if(0===s)return e.clone();for(;;){const r=b.randomBits(t,s);if(!(r.cmp(i)>=0))return r.iadd(e),r}}static of(t,e){return(new b).of(t,e)}static fromNumber(t,e){return(new b).fromNumber(t,e)}static fromDouble(t,e){return(new b).fromDouble(t,e)}static fromBigInt(t,e){return(new b).fromBigInt(t,e)}static fromBool(t){return(new b).fromBool(t)}static fromString(t,e,r){return(new b).fromString(t,e,r)}static fromJSON(t){return(new b).fromJSON(t)}static fromBN(t){return(new b).fromBN(t)}static fromArray(t,e){return(new b).fromArray(t,e)}static fromBuffer(t,e){return(new b).fromBuffer(t,e)}static fromArrayLike(t,e){return(new b).fromArrayLike(t,e)}static decode(t,e){return(new b).decode(t,e)}static from(t,e,r){return(new b).from(t,e,r)}static cast(t,e,r){return b.isBN(t)?t:new b(t,e,r)}static isBN(t){return t instanceof b}}b.BN=b,b.wordSize=26,b.native=0;class m{constructor(t,e){this.name=t,this.p=new b(e,16),this.n=this.p.bitLength(),this.k=b.shift(1,this.n).isub(this.p),this.lo=this.p.clone(),this.one=this.p.clone()}ireduce(t){const e=0!==t.negative;let r=t.bitLength();for(M(r<=2*this.n),t.negative=0;r>this.n;)this.split(t,this.lo),this.imulK(t),t._iadd(t,this.lo),r=t.bitLength();const i=r<this.n?-1:t.ucmp(this.p);return 0===i?(t.words[0]=0,t.length=1):i>0&&t._isub(t,this.p),e&&!t.isZero()&&t._isub(this.p,t),t}split(t,e){t._split(this.n,e)}imulK(t){return t.imul(this.k)}}class g extends m{constructor(){super("p192","ffffffff ffffffff ffffffff fffffffeffffffff ffffffff")}imulK(t){const e=this.one.inject(t);return t.iushln(64)._iadd(t,e)}}class w extends m{constructor(){super("p224","ffffffff ffffffff ffffffff ffffffff00000000 00000000 00000001")}imulK(t){const e=this.one.inject(t);return t.iushln(96)._isub(t,e)}}class y extends m{constructor(){super("p521","000001ff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffffffff")}imulK(t){return t}}class S extends m{constructor(){super("k256","ffffffff ffffffff ffffffff ffffffffffffffff ffffffff fffffffe fffffc2f")}split(t,e){const r=Math.min(t.length,9);e._alloc(r+1);for(let i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return e._strip(),t.words[0]=0,void(t.length=1);let i=t.words[9],s=10;for(e.words[e.length++]=4194303&i,e._strip();s<t.length;s++){const e=0|t.words[s];t.words[s-10]=(4194303&e)<<4|i>>>22,i=e}i>>>=22,t.words[s-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9,t._strip()}imulK(t){t._expand(t.length+2);let e=0;for(let r=0;r<t.length;r++){const i=t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+Math.floor(e/67108864)}return 0===t.words[t.length-1]&&(t.length-=1,0===t.words[t.length-1]&&(t.length-=1)),t}}class v extends m{constructor(){super("p25519","7fffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffed")}imulK(t){let e=0;for(let r=0;r<t.length;r++){const i=19*t.words[r]+e;e=i>>>26,t.words[r]=67108863&i}return 0!==e&&(t._alloc(t.length+1),t.words[t.length++]=e),t}}class I extends m{constructor(){super("p448","ffffffff ffffffff ffffffff ffffffffffffffff ffffffff fffffffe ffffffffffffffff ffffffff ffffffff ffffffffffffffff ffffffff")}imulK(t){const e=this.one.inject(t);return t.iushln(224)._iadd(t,e)}}class E{constructor(t){let e=null;"string"==typeof t&&(t=(e=b._prime(t)).p),N(b.isBN(t),"m","bignum"),x(!t.red,"reduction"),P(t.sign()>0,"reduction"),this.m=t,this.prime=e,this.mb=null,this.sm1=null}_verify1(t){P(0===t.negative,"red"),R(null!=t.red,"red")}_verify2(t,e){P(0==(t.negative|e.negative),"red"),R(null!=t.red&&t.red===e.red,"red")}get mont(){return!1}get coprime(){return!1}precompute(){if(null===this.sm1&&5===this.m.andln(7)){const t=new b(2).toRed(this),e=this.m.subn(1).iushrn(2);this.sm1=this.pow(t,e)}return this}convertTo(t){const e=t.mod(this.m);return e.red=this,e}convertFrom(t){const e=t.clone();return e.red=null,e}intTo(t){return t}intFrom(t){return t}imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.imod(this.m)._forceRed(this)}iadd(t,e){return this._verify2(t,e),t._iadd(t,e),t.ucmp(this.m)>=0&&t._isub(t,this.m),t}add(t,e){return t.length<e.length?this.iadd(e.clone(),t):this.iadd(t.clone(),e)}iaddn(t,e){return this._verify1(t),e<0?this.isubn(t,-e):(1===this.m.length&&(e%=this.m.words[0]),t._iaddn(e),t.ucmp(this.m)>=0&&t._isub(t,this.m),t)}addn(t,e){return this.iaddn(t.clone(),e)}isub(t,e){this._verify2(t,e);const r=t.ucmp(e);return 0===r?(t.words[0]=0,t.length=1,t):(r<0?(t._isub(e,t),t._isub(this.m,t)):t._isub(t,e),t)}sub(t,e){return this.isub(t.clone(),e)}isubn(t,e){return this._verify1(t),e<0?this.iaddn(t,-e):(1===this.m.length&&(e%=this.m.words[0]),1===t.length&&t.words[0]<e?(t.words[0]=e-t.words[0],t._isub(this.m,t)):t._isubn(e),t)}subn(t,e){return this.isubn(t.clone(),e)}imul(t,e){return this._verify2(t,e),this.imod(t.imul(e))}mul(t,e){return this._verify2(t,e),this.imod(t.mul(e))}imuln(t,e){if(this._verify1(t),t.isZero())return t;if(0===e)return t.words[0]=0,t.length=1,t;const r=e<0;if(r&&(e=-e),1===this.m.length&&(e%=this.m.words[0]),t.imuln(e),e<=16)for(;t.ucmp(this.m)>=0;)t._isub(t,this.m);else this.imod(t);return r&&this.ineg(t),t}muln(t,e){return this.imuln(t.clone(),e)}idiv(t,e){return this.div(t,e)._move(t)}div(t,e){return this.mul(t,this.invert(e))}idivn(t,e){return this.divn(t,e)._move(t)}divn(t,e){return this.div(t,this.convertTo(new b(e)))}ipow(t,e,r){return this.pow(t,e,r)._move(t)}pow(t,e,r){return this._verify1(t),e.isNeg()&&(t=this.invert(t)),p&&!this.prime?this.powInt(t,e,r):null!=r?this.climb(t,e,r):1===e.length?this.pown(t,e.words[0]):this.slide(t,e)}slide(t,e){const r=new Array(16);r[0]=new b(1).toRed(this),r[1]=t;for(let e=2;e<r.length;e++)r[e]=this.mul(r[e-1],t);let i=z(e.words[e.length-1]),s=r[0],n=0,o=0;for(let t=e.length-1;t>=0;t--){const h=e.words[t];for(let e=i-1;e>=0;e--){const i=h>>e&1;s!==r[0]&&(s=this.sqr(s)),0!==i||0!==n?(n<<=1,n|=i,4!==(o+=1)&&0!=(t|e)||(s=this.mul(s,r[n]),o=0,n=0)):o=0}i=26}return s}climb(t,e,r){const i=Math.max(e.bitLength(),r>>>0),s=i+7>>>3,n=e.toArray("le",s);let o=t.clone(),h=new b(1).toRed(this),f=0;for(let t=i-1;t>=0;t--){const e=n[t>>3]>>(7&t)&1;o.cswap(h,f^e),o=this.mul(o,h),h=this.mul(h,h),f=e}return o.cswap(h,f),h}powInt(t,e,r){null===this.mb&&(this.mb=this.m.toBigInt());const i=function(t,e,r,i){return null!=i?function(t,e,r,i){const s=Math.max(e.bitLength(),i>>>0),n=s+7>>>3,o=e.toArray("le",n);let h=BigInt(1),f=0;for(let e=s-1;e>=0;e--){const i=o[e>>3]>>(7&e)&1;[t,h]=F(t,h,f^i),t=t*h%r,h=h*h%r,f=i}return[t,h]=F(t,h,f),h}(t,e,r,i):function(t,e,r){let i=BigInt(1),s=z(e.words[e.length-1]);for(let n=e.length-1;n>=0;n--){const o=e.words[n];for(let e=s-1;e>=0;e--)i=i*i%r,o>>e&1&&(i=i*t%r);s=26}return i}(t,e,r)}(this.intFrom(t.toBigInt()),e,this.mb,r),s=this.intTo(i);return b.fromBigInt(s)._forceRed(this)}ipown(t,e){return this.pown(t,e)._move(t)}pown(t,e){if(this._verify1(t),e<0&&(t=this.invert(t),e=-e),0===e)return new b(1).toRed(this);if(1===e)return t.clone();let r=t;for(let i=z(e)-2;i>=0;i--)r=this.sqr(r),e>>i&1&&(r=this.mul(r,t));return r}isqr(t){return this.imul(t,t)}sqr(t){return this.mul(t,t)}isqrt(t){return this.sqrt(t)._move(t)}sqrt(t){return this._verify1(t),3===this.m.andln(3)?this.sqrt3mod4(t):5===this.m.andln(7)?null!=this.sm1?this.sqrt5mod8sm1(t):this.sqrt5mod8(t):this.sqrt0(t)}sqrt3mod4(t){const e=this.m.addn(1).iushrn(2),r=this.pow(t,e);if(!this.sqr(r).eq(t))throw new Error("X is not a square mod P.");return r}sqrt5mod8(t){const e=new b(1).toRed(this),r=this.m.ushrn(3),i=this.add(t,t),s=this.pow(i,r),n=this.mul(i,this.sqr(s)),o=this.mul(this.mul(s,t),this.isub(n,e));if(!this.sqr(o).eq(t))throw new Error("X is not a square mod P.");return o}sqrt5mod8sm1(t){const e=this.m.addn(3).iushrn(3);let r=this.pow(t,e);if(!this.sqr(r).eq(t)&&(r=this.mul(r,this.sm1),!this.sqr(r).eq(t)))throw new Error("X is not a square mod P.");return r}sqrt0(t){if(0===this.m.cmpn(1)||!this.m.isOdd())throw new Error("Invalid prime.");switch(this.jacobi(t)){case-1:throw new Error("X is not a square mod P.");case 0:return new b(0)._forceRed(this)}const e=new b(1).toRed(this),r=this.m.subn(1),i=r.zeroBits();r.iushrn(i);const s=new b(2).toRed(this);for(;-1!==this.jacobi(s);)this.iadd(s,e);let n=this.pow(t,r),o=this.pow(s,r),h=this.pow(t,r.iaddn(1).iushrn(1)),f=i;for(;;){let t=n,r=0;for(;0!==t.cmp(e);)t=this.sqr(t),r+=1;if(0===r)break;M(r<f),t=b.shift(1,f-r-1),t=this.pow(o,t),o=this.sqr(t),h=this.mul(h,t),n=this.mul(n,o),f=r}return h}idivsqrt(t,e){return this.divsqrt(t,e)._move(t)}divsqrt(t,e){if(this._verify2(t,e),e.isZero())throw new RangeError("Not invertible.");return 3===this.m.andln(3)?this.divsqrt3mod4(t,e):null!=this.sm1&&5===this.m.andln(7)?this.divsqrt5mod8(t,e):this.sqrt(this.div(t,e))}divsqrt3mod4(t,e){const r=this.m.subn(3).iushrn(2),i=this.sqr(t),s=this.mul(i,t),n=this.mul(s,i),o=this.mul(this.sqr(e),e),h=this.pow(this.mul(n,o),r),f=this.mul(this.mul(s,e),h);if(0===this.mul(e,this.sqr(f)).cmp(t))return f;throw new Error("X is not a square mod P.")}divsqrt5mod8(t,e){const r=this.m.subn(5).iushrn(3),i=this.mul(this.sqr(e),e),s=this.mul(this.sqr(i),e),n=this.pow(this.mul(t,s),r),o=this.mul(this.mul(t,i),n),h=this.mul(e,this.sqr(o));if(0===h.cmp(t))return o;if(0===this.ineg(h).cmp(t))return this.mul(o,this.sm1);throw new Error("X is not a square mod P.")}isSquare(t){let e;return e=this.prime||this.coprime?this.legendre(t):this.m.isOdd()?this.jacobi(t):this.kronecker(t),Boolean(~e>>>31)}ishl(t,e){return this._verify1(t),this.imod(t.iushl(e))}shl(t,e){return this.ishl(t.clone(),e)}ishln(t,e){if(this._verify1(t),t.iushln(e),e<=4)for(;t.ucmp(this.m)>=0;)t._isub(t,this.m);else this.imod(t);return t}shln(t,e){return this.ishln(t.clone(),e)}ineg(t){return this._verify1(t),t.isZero()||t._isub(this.m,t),t}neg(t){return this.ineg(t.clone())}eq(t,e){return this._verify2(t,e),0===t.ucmp(e)}eqn(t,e){if(this._verify1(t),1===this.m.length)return(e%=this.m.words[0])<0&&(e+=this.m.words[0]),0===t.ucmpn(e);if(e<0){this.m._isubn(-e);const r=t.ucmp(this.m);return this.m._iaddn(-e),0===r}return 0===t.ucmpn(e)}isHigh(t){return!this.isLow(t)}isLow(t){return this._verify1(t),t.ucmp(this.m.ushrn(1))<=0}isOdd(t){return this._verify1(t),t.isOdd()}isEven(t){return this._verify1(t),t.isEven()}legendre(t){if(this._verify1(t),this.m.isEven())throw new Error("legendre: `num` must be odd.");const e=this.m.subn(1).iushrn(1),r=this.pow(t,e),i=new b(1).toRed(this),s=r.czero(),n=r.ceq(i),o=r.ceq(this.ineg(i));if(0==(s|n|o))throw new Error("Invalid prime.");return M(s+n+o===1),n-o}jacobi(t){return this._verify1(t),t.jacobi(this.m)}kronecker(t){return this._verify1(t),t.kronecker(this.m)}iinvert(t){return this.invert(t)._move(t)}invert(t){return this._verify1(t),this.prime?this.imod(t._invertp(this.m)):t.invert(this.m)._forceRed(this)}ifermat(t){return this.fermat(t)._move(t)}fermat(t){if(this._verify1(t),t.isZero()||0===this.m.cmpn(1))throw new RangeError("Not invertible.");return this.pow(t,this.m.subn(2))}[h](){return this.prime?`<Red: ${this.prime.name}>`:`<Red: ${this.m.toString(10)}>`}}class _ extends E{constructor(t){super(t),this.prime=null,this.n=this.m.bitLength(),this.n%26!=0&&(this.n+=26-this.n%26),this.k=2*this.n,this.w=this.k/26,this.b=b.shift(1,this.k).div(this.m)}convertTo(t){return t.length>this.w?super.convertTo(t):this.imod(t.clone())}_shift(t){let e=0,r=this.w;for(;r<t.length;)t.words[e++]=t.words[r++];0===e&&(t.words[e++]=0),t.length=e}imod(t){const e=t.negative;M(t.length<=this.w),t.negative=0;const r=t.mul(this.b);return this._shift(r),t._isub(t,r.mul(this.m)),t.ucmp(this.m)>=0&&t._isub(t,this.m),e&&!t.isZero()&&t._isub(this.m,t),t.red=this,t}}class O extends E{constructor(t){super(t),this.prime=null,this.n=this.m.bitLength(),this.n%26!=0&&(this.n+=26-this.n%26),this.r=b.shift(1,this.n),this.r2=b.shift(1,2*this.n).imod(this.m),this.ri=this.r._invertp(this.m).imod(this.m),this.mi=this.r.mul(this.ri).isubn(1).div(this.m),this.rib=null}get mont(){return!0}get coprime(){return!0}convertTo(t){return this.imod(t.ushln(this.n))}convertFrom(t){const e=this.imod(t.mul(this.ri));return e.red=null,e}intTo(t){return(t<<BigInt(this.n))%this.mb}intFrom(t){return null===this.rib&&(this.rib=this.ri.toBigInt()),t*this.rib%this.mb}iaddn(t,e){return this.iadd(t,this.convertTo(new b(e)))}isubn(t,e){return this.isub(t,this.convertTo(new b(e)))}imul(t,e){return this.mul(t,e)._move(t)}mul(t,e){if(this._verify2(t,e),t.isZero()||e.isZero())return new b(0)._forceRed(this);const r=t.mul(e),i=r.umaskn(this.n).mul(this.mi).iumaskn(this.n),s=r.iadd(i.mul(this.m)).iushrn(this.n);return s.ucmp(this.m)>=0&&s._isub(s,this.m),s._forceRed(this)}imuln(t,e){if(this._verify1(t),t.isZero())return t;if(0===e)return t.words[0]=0,t.length=1,t;const r=e<0;r&&(e=-e),1===this.m.length&&(e%=this.m.words[0]);const i=z(e);if(i>5)this.imul(t,this.convertTo(new b(e)));else if(0==(e&e-1))for(let e=0;e<i-1;e++)this.iadd(t,t);else{const r=t.clone();for(let s=i-2;s>=0;s--)this.iadd(t,t),e>>s&1&&this.iadd(t,r)}return r&&this.ineg(t),t}eqn(t,e){return this._verify1(t),0===e?t.isZero():0===t.ucmp(this.convertTo(new b(e)))}isLow(t){return this._verify1(t),this.convertFrom(t).ucmp(this.m.ushrn(1))<=0}isOdd(t){return this._verify1(t),this.convertFrom(t).isOdd()}isEven(t){return this._verify1(t),this.convertFrom(t).isEven()}invert(t){return this._verify1(t),this.imod(t._invertp(this.m).mul(this.r2))}}function A(t,e,r){const i=new t(e);return t.captureStackTrace&&t.captureStackTrace(i,r),i}function M(t,e){if(!t){throw A(Error,e||"Assertion failed.",M)}}function N(t,e,r){if(!t){const t=`"${e}" must be a(n) ${r}.`;throw A(TypeError,t,N)}}function P(t,e){if(!t){const t=`"${e}" only works with positive numbers.`;throw A(RangeError,t,P)}}function R(t,e){if(!t){const t=`"${e}" only works with red numbers.`;throw A(TypeError,t,R)}}function x(t,e){if(!t){const t=`"${e}" only works with normal numbers.`;throw A(TypeError,t,x)}}function B(t){if(!t){throw A(RangeError,"Cannot divide by zero.",B)}}function k(t){return Number.isSafeInteger(t)}function T(t){return k(t)&&t>=-67108863&&t<=67108863}function U(t){if(null==t)return 10;if("number"==typeof t)return t;switch(t){case"bin":return 2;case"oct":return 8;case"dec":return 10;case"hex":return 16}return 0}function z(t){if(Math.clz32)return 32-Math.clz32(t);let e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e}function C(t){if(0===t)return 26;let e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&(r+=1),r}function L(t,e,r){const i=Math.min(t.length,r);let s=0,n=0;for(let r=e;r<i;r++){const e=t.charCodeAt(r)-48;let i;s<<=4,s|=i=e>=49&&e<=54?e-49+10:e>=17&&e<=22?e-17+10:e,n|=i}if(-16&n)throw new Error("Invalid string.");return s}function q(t,e,r,i){const s=Math.min(t.length,r);let n=0;for(let r=e;r<s;r++){const e=t.charCodeAt(r)-48;let s;if(n*=i,s=e>=49?e-49+10:e>=17?e-17+10:e,e<0||e>207||s>=i)throw new Error("Invalid string.");n+=s}return n}function F(t,e,r){const i=BigInt(1),s=BigInt(r);return[t*(s^i)|e*s,e*(s^i)|t*s]}function V(t,e,r){const i=t.length+e.length;r.negative=t.negative^e.negative,r._alloc(i),r.length=i;const s=t.words[0]*e.words[0],n=67108863&s;let o=s/67108864|0,h=1;for(r.words[0]=n;h<r.length-1;h++){let i=o>>>26,s=67108863&o;const n=Math.max(0,h-t.length+1),f=Math.min(h,e.length-1);for(let r=n;r<=f;r++){const n=h-r,o=t.words[n]*e.words[r]+s;i+=o/67108864|0,s=67108863&o}r.words[h]=0|s,o=0|i}return 0!==o?r.words[h]=0|o:r.length-=1,r._strip()}function D(t,e,r){const i=t.length+e.length;r.negative=t.negative^e.negative,r._alloc(i),r.length=i;let s=0,n=0,o=0;for(;o<r.length-1;o++){let i=n;n=0;let h=67108863&s;const f=Math.max(0,o-t.length+1),a=Math.min(o,e.length-1);for(let r=f;r<=a;r++){const s=o-r,f=t.words[s]*e.words[r];let a=67108863&f;h=67108863&(a=a+h|0),n+=(i=(i=i+(f/67108864|0)|0)+(a>>>26)|0)>>>26,i&=67108863}r.words[o]=h,s=i,i=n}return 0!==s?r.words[o]=s:r.length-=1,r._strip()}function j(t,e,r){const i=t.words,s=e.words,n=r.words,o=0|i[0],h=8191&o,f=o>>>13,a=0|i[1],u=8191&a,c=a>>>13,d=0|i[2],l=8191&d,p=d>>>13,b=0|i[3],m=8191&b,g=b>>>13,w=0|i[4],y=8191&w,S=w>>>13,v=0|i[5],I=8191&v,E=v>>>13,_=0|i[6],O=8191&_,A=_>>>13,M=0|i[7],N=8191&M,P=M>>>13,R=0|i[8],x=8191&R,B=R>>>13,k=0|i[9],T=8191&k,U=k>>>13,z=0|s[0],C=8191&z,L=z>>>13,q=0|s[1],F=8191&q,V=q>>>13,D=0|s[2],j=8191&D,H=D>>>13,K=0|s[3],W=8191&K,Y=K>>>13,J=0|s[4],X=8191&J,G=J>>>13,Z=0|s[5],$=8191&Z,Q=Z>>>13,tt=0|s[6],et=8191&tt,rt=tt>>>13,it=0|s[7],st=8191&it,nt=it>>>13,ot=0|s[8],ht=8191&ot,ft=ot>>>13,at=0|s[9],ut=8191&at,ct=at>>>13;let dt,lt,pt,bt=0;r.negative=t.negative^e.negative,r._alloc(20),r.length=19;let mt=(bt+(dt=Math.imul(h,C))|0)+((8191&(lt=(lt=Math.imul(h,L))+Math.imul(f,C)|0))<<13)|0;bt=((pt=Math.imul(f,L))+(lt>>>13)|0)+(mt>>>26)|0,mt&=67108863,dt=Math.imul(u,C),lt=(lt=Math.imul(u,L))+Math.imul(c,C)|0,pt=Math.imul(c,L);let gt=(bt+(dt=dt+Math.imul(h,F)|0)|0)+((8191&(lt=(lt=lt+Math.imul(h,V)|0)+Math.imul(f,F)|0))<<13)|0;bt=((pt=pt+Math.imul(f,V)|0)+(lt>>>13)|0)+(gt>>>26)|0,gt&=67108863,dt=Math.imul(l,C),lt=(lt=Math.imul(l,L))+Math.imul(p,C)|0,pt=Math.imul(p,L),dt=dt+Math.imul(u,F)|0,lt=(lt=lt+Math.imul(u,V)|0)+Math.imul(c,F)|0,pt=pt+Math.imul(c,V)|0;let wt=(bt+(dt=dt+Math.imul(h,j)|0)|0)+((8191&(lt=(lt=lt+Math.imul(h,H)|0)+Math.imul(f,j)|0))<<13)|0;bt=((pt=pt+Math.imul(f,H)|0)+(lt>>>13)|0)+(wt>>>26)|0,wt&=67108863,dt=Math.imul(m,C),lt=(lt=Math.imul(m,L))+Math.imul(g,C)|0,pt=Math.imul(g,L),dt=dt+Math.imul(l,F)|0,lt=(lt=lt+Math.imul(l,V)|0)+Math.imul(p,F)|0,pt=pt+Math.imul(p,V)|0,dt=dt+Math.imul(u,j)|0,lt=(lt=lt+Math.imul(u,H)|0)+Math.imul(c,j)|0,pt=pt+Math.imul(c,H)|0;let yt=(bt+(dt=dt+Math.imul(h,W)|0)|0)+((8191&(lt=(lt=lt+Math.imul(h,Y)|0)+Math.imul(f,W)|0))<<13)|0;bt=((pt=pt+Math.imul(f,Y)|0)+(lt>>>13)|0)+(yt>>>26)|0,yt&=67108863,dt=Math.imul(y,C),lt=(lt=Math.imul(y,L))+Math.imul(S,C)|0,pt=Math.imul(S,L),dt=dt+Math.imul(m,F)|0,lt=(lt=lt+Math.imul(m,V)|0)+Math.imul(g,F)|0,pt=pt+Math.imul(g,V)|0,dt=dt+Math.imul(l,j)|0,lt=(lt=lt+Math.imul(l,H)|0)+Math.imul(p,j)|0,pt=pt+Math.imul(p,H)|0,dt=dt+Math.imul(u,W)|0,lt=(lt=lt+Math.imul(u,Y)|0)+Math.imul(c,W)|0,pt=pt+Math.imul(c,Y)|0;let St=(bt+(dt=dt+Math.imul(h,X)|0)|0)+((8191&(lt=(lt=lt+Math.imul(h,G)|0)+Math.imul(f,X)|0))<<13)|0;bt=((pt=pt+Math.imul(f,G)|0)+(lt>>>13)|0)+(St>>>26)|0,St&=67108863,dt=Math.imul(I,C),lt=(lt=Math.imul(I,L))+Math.imul(E,C)|0,pt=Math.imul(E,L),dt=dt+Math.imul(y,F)|0,lt=(lt=lt+Math.imul(y,V)|0)+Math.imul(S,F)|0,pt=pt+Math.imul(S,V)|0,dt=dt+Math.imul(m,j)|0,lt=(lt=lt+Math.imul(m,H)|0)+Math.imul(g,j)|0,pt=pt+Math.imul(g,H)|0,dt=dt+Math.imul(l,W)|0,lt=(lt=lt+Math.imul(l,Y)|0)+Math.imul(p,W)|0,pt=pt+Math.imul(p,Y)|0,dt=dt+Math.imul(u,X)|0,lt=(lt=lt+Math.imul(u,G)|0)+Math.imul(c,X)|0,pt=pt+Math.imul(c,G)|0;let vt=(bt+(dt=dt+Math.imul(h,$)|0)|0)+((8191&(lt=(lt=lt+Math.imul(h,Q)|0)+Math.imul(f,$)|0))<<13)|0;bt=((pt=pt+Math.imul(f,Q)|0)+(lt>>>13)|0)+(vt>>>26)|0,vt&=67108863,dt=Math.imul(O,C),lt=(lt=Math.imul(O,L))+Math.imul(A,C)|0,pt=Math.imul(A,L),dt=dt+Math.imul(I,F)|0,lt=(lt=lt+Math.imul(I,V)|0)+Math.imul(E,F)|0,pt=pt+Math.imul(E,V)|0,dt=dt+Math.imul(y,j)|0,lt=(lt=lt+Math.imul(y,H)|0)+Math.imul(S,j)|0,pt=pt+Math.imul(S,H)|0,dt=dt+Math.imul(m,W)|0,lt=(lt=lt+Math.imul(m,Y)|0)+Math.imul(g,W)|0,pt=pt+Math.imul(g,Y)|0,dt=dt+Math.imul(l,X)|0,lt=(lt=lt+Math.imul(l,G)|0)+Math.imul(p,X)|0,pt=pt+Math.imul(p,G)|0,dt=dt+Math.imul(u,$)|0,lt=(lt=lt+Math.imul(u,Q)|0)+Math.imul(c,$)|0,pt=pt+Math.imul(c,Q)|0;let It=(bt+(dt=dt+Math.imul(h,et)|0)|0)+((8191&(lt=(lt=lt+Math.imul(h,rt)|0)+Math.imul(f,et)|0))<<13)|0;bt=((pt=pt+Math.imul(f,rt)|0)+(lt>>>13)|0)+(It>>>26)|0,It&=67108863,dt=Math.imul(N,C),lt=(lt=Math.imul(N,L))+Math.imul(P,C)|0,pt=Math.imul(P,L),dt=dt+Math.imul(O,F)|0,lt=(lt=lt+Math.imul(O,V)|0)+Math.imul(A,F)|0,pt=pt+Math.imul(A,V)|0,dt=dt+Math.imul(I,j)|0,lt=(lt=lt+Math.imul(I,H)|0)+Math.imul(E,j)|0,pt=pt+Math.imul(E,H)|0,dt=dt+Math.imul(y,W)|0,lt=(lt=lt+Math.imul(y,Y)|0)+Math.imul(S,W)|0,pt=pt+Math.imul(S,Y)|0,dt=dt+Math.imul(m,X)|0,lt=(lt=lt+Math.imul(m,G)|0)+Math.imul(g,X)|0,pt=pt+Math.imul(g,G)|0,dt=dt+Math.imul(l,$)|0,lt=(lt=lt+Math.imul(l,Q)|0)+Math.imul(p,$)|0,pt=pt+Math.imul(p,Q)|0,dt=dt+Math.imul(u,et)|0,lt=(lt=lt+Math.imul(u,rt)|0)+Math.imul(c,et)|0,pt=pt+Math.imul(c,rt)|0;let Et=(bt+(dt=dt+Math.imul(h,st)|0)|0)+((8191&(lt=(lt=lt+Math.imul(h,nt)|0)+Math.imul(f,st)|0))<<13)|0;bt=((pt=pt+Math.imul(f,nt)|0)+(lt>>>13)|0)+(Et>>>26)|0,Et&=67108863,dt=Math.imul(x,C),lt=(lt=Math.imul(x,L))+Math.imul(B,C)|0,pt=Math.imul(B,L),dt=dt+Math.imul(N,F)|0,lt=(lt=lt+Math.imul(N,V)|0)+Math.imul(P,F)|0,pt=pt+Math.imul(P,V)|0,dt=dt+Math.imul(O,j)|0,lt=(lt=lt+Math.imul(O,H)|0)+Math.imul(A,j)|0,pt=pt+Math.imul(A,H)|0,dt=dt+Math.imul(I,W)|0,lt=(lt=lt+Math.imul(I,Y)|0)+Math.imul(E,W)|0,pt=pt+Math.imul(E,Y)|0,dt=dt+Math.imul(y,X)|0,lt=(lt=lt+Math.imul(y,G)|0)+Math.imul(S,X)|0,pt=pt+Math.imul(S,G)|0,dt=dt+Math.imul(m,$)|0,lt=(lt=lt+Math.imul(m,Q)|0)+Math.imul(g,$)|0,pt=pt+Math.imul(g,Q)|0,dt=dt+Math.imul(l,et)|0,lt=(lt=lt+Math.imul(l,rt)|0)+Math.imul(p,et)|0,pt=pt+Math.imul(p,rt)|0,dt=dt+Math.imul(u,st)|0,lt=(lt=lt+Math.imul(u,nt)|0)+Math.imul(c,st)|0,pt=pt+Math.imul(c,nt)|0;let _t=(bt+(dt=dt+Math.imul(h,ht)|0)|0)+((8191&(lt=(lt=lt+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;bt=((pt=pt+Math.imul(f,ft)|0)+(lt>>>13)|0)+(_t>>>26)|0,_t&=67108863,dt=Math.imul(T,C),lt=(lt=Math.imul(T,L))+Math.imul(U,C)|0,pt=Math.imul(U,L),dt=dt+Math.imul(x,F)|0,lt=(lt=lt+Math.imul(x,V)|0)+Math.imul(B,F)|0,pt=pt+Math.imul(B,V)|0,dt=dt+Math.imul(N,j)|0,lt=(lt=lt+Math.imul(N,H)|0)+Math.imul(P,j)|0,pt=pt+Math.imul(P,H)|0,dt=dt+Math.imul(O,W)|0,lt=(lt=lt+Math.imul(O,Y)|0)+Math.imul(A,W)|0,pt=pt+Math.imul(A,Y)|0,dt=dt+Math.imul(I,X)|0,lt=(lt=lt+Math.imul(I,G)|0)+Math.imul(E,X)|0,pt=pt+Math.imul(E,G)|0,dt=dt+Math.imul(y,$)|0,lt=(lt=lt+Math.imul(y,Q)|0)+Math.imul(S,$)|0,pt=pt+Math.imul(S,Q)|0,dt=dt+Math.imul(m,et)|0,lt=(lt=lt+Math.imul(m,rt)|0)+Math.imul(g,et)|0,pt=pt+Math.imul(g,rt)|0,dt=dt+Math.imul(l,st)|0,lt=(lt=lt+Math.imul(l,nt)|0)+Math.imul(p,st)|0,pt=pt+Math.imul(p,nt)|0,dt=dt+Math.imul(u,ht)|0,lt=(lt=lt+Math.imul(u,ft)|0)+Math.imul(c,ht)|0,pt=pt+Math.imul(c,ft)|0;let Ot=(bt+(dt=dt+Math.imul(h,ut)|0)|0)+((8191&(lt=(lt=lt+Math.imul(h,ct)|0)+Math.imul(f,ut)|0))<<13)|0;bt=((pt=pt+Math.imul(f,ct)|0)+(lt>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,dt=Math.imul(T,F),lt=(lt=Math.imul(T,V))+Math.imul(U,F)|0,pt=Math.imul(U,V),dt=dt+Math.imul(x,j)|0,lt=(lt=lt+Math.imul(x,H)|0)+Math.imul(B,j)|0,pt=pt+Math.imul(B,H)|0,dt=dt+Math.imul(N,W)|0,lt=(lt=lt+Math.imul(N,Y)|0)+Math.imul(P,W)|0,pt=pt+Math.imul(P,Y)|0,dt=dt+Math.imul(O,X)|0,lt=(lt=lt+Math.imul(O,G)|0)+Math.imul(A,X)|0,pt=pt+Math.imul(A,G)|0,dt=dt+Math.imul(I,$)|0,lt=(lt=lt+Math.imul(I,Q)|0)+Math.imul(E,$)|0,pt=pt+Math.imul(E,Q)|0,dt=dt+Math.imul(y,et)|0,lt=(lt=lt+Math.imul(y,rt)|0)+Math.imul(S,et)|0,pt=pt+Math.imul(S,rt)|0,dt=dt+Math.imul(m,st)|0,lt=(lt=lt+Math.imul(m,nt)|0)+Math.imul(g,st)|0,pt=pt+Math.imul(g,nt)|0,dt=dt+Math.imul(l,ht)|0,lt=(lt=lt+Math.imul(l,ft)|0)+Math.imul(p,ht)|0,pt=pt+Math.imul(p,ft)|0;let At=(bt+(dt=dt+Math.imul(u,ut)|0)|0)+((8191&(lt=(lt=lt+Math.imul(u,ct)|0)+Math.imul(c,ut)|0))<<13)|0;bt=((pt=pt+Math.imul(c,ct)|0)+(lt>>>13)|0)+(At>>>26)|0,At&=67108863,dt=Math.imul(T,j),lt=(lt=Math.imul(T,H))+Math.imul(U,j)|0,pt=Math.imul(U,H),dt=dt+Math.imul(x,W)|0,lt=(lt=lt+Math.imul(x,Y)|0)+Math.imul(B,W)|0,pt=pt+Math.imul(B,Y)|0,dt=dt+Math.imul(N,X)|0,lt=(lt=lt+Math.imul(N,G)|0)+Math.imul(P,X)|0,pt=pt+Math.imul(P,G)|0,dt=dt+Math.imul(O,$)|0,lt=(lt=lt+Math.imul(O,Q)|0)+Math.imul(A,$)|0,pt=pt+Math.imul(A,Q)|0,dt=dt+Math.imul(I,et)|0,lt=(lt=lt+Math.imul(I,rt)|0)+Math.imul(E,et)|0,pt=pt+Math.imul(E,rt)|0,dt=dt+Math.imul(y,st)|0,lt=(lt=lt+Math.imul(y,nt)|0)+Math.imul(S,st)|0,pt=pt+Math.imul(S,nt)|0,dt=dt+Math.imul(m,ht)|0,lt=(lt=lt+Math.imul(m,ft)|0)+Math.imul(g,ht)|0,pt=pt+Math.imul(g,ft)|0;let Mt=(bt+(dt=dt+Math.imul(l,ut)|0)|0)+((8191&(lt=(lt=lt+Math.imul(l,ct)|0)+Math.imul(p,ut)|0))<<13)|0;bt=((pt=pt+Math.imul(p,ct)|0)+(lt>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,dt=Math.imul(T,W),lt=(lt=Math.imul(T,Y))+Math.imul(U,W)|0,pt=Math.imul(U,Y),dt=dt+Math.imul(x,X)|0,lt=(lt=lt+Math.imul(x,G)|0)+Math.imul(B,X)|0,pt=pt+Math.imul(B,G)|0,dt=dt+Math.imul(N,$)|0,lt=(lt=lt+Math.imul(N,Q)|0)+Math.imul(P,$)|0,pt=pt+Math.imul(P,Q)|0,dt=dt+Math.imul(O,et)|0,lt=(lt=lt+Math.imul(O,rt)|0)+Math.imul(A,et)|0,pt=pt+Math.imul(A,rt)|0,dt=dt+Math.imul(I,st)|0,lt=(lt=lt+Math.imul(I,nt)|0)+Math.imul(E,st)|0,pt=pt+Math.imul(E,nt)|0,dt=dt+Math.imul(y,ht)|0,lt=(lt=lt+Math.imul(y,ft)|0)+Math.imul(S,ht)|0,pt=pt+Math.imul(S,ft)|0;let Nt=(bt+(dt=dt+Math.imul(m,ut)|0)|0)+((8191&(lt=(lt=lt+Math.imul(m,ct)|0)+Math.imul(g,ut)|0))<<13)|0;bt=((pt=pt+Math.imul(g,ct)|0)+(lt>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,dt=Math.imul(T,X),lt=(lt=Math.imul(T,G))+Math.imul(U,X)|0,pt=Math.imul(U,G),dt=dt+Math.imul(x,$)|0,lt=(lt=lt+Math.imul(x,Q)|0)+Math.imul(B,$)|0,pt=pt+Math.imul(B,Q)|0,dt=dt+Math.imul(N,et)|0,lt=(lt=lt+Math.imul(N,rt)|0)+Math.imul(P,et)|0,pt=pt+Math.imul(P,rt)|0,dt=dt+Math.imul(O,st)|0,lt=(lt=lt+Math.imul(O,nt)|0)+Math.imul(A,st)|0,pt=pt+Math.imul(A,nt)|0,dt=dt+Math.imul(I,ht)|0,lt=(lt=lt+Math.imul(I,ft)|0)+Math.imul(E,ht)|0,pt=pt+Math.imul(E,ft)|0;let Pt=(bt+(dt=dt+Math.imul(y,ut)|0)|0)+((8191&(lt=(lt=lt+Math.imul(y,ct)|0)+Math.imul(S,ut)|0))<<13)|0;bt=((pt=pt+Math.imul(S,ct)|0)+(lt>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,dt=Math.imul(T,$),lt=(lt=Math.imul(T,Q))+Math.imul(U,$)|0,pt=Math.imul(U,Q),dt=dt+Math.imul(x,et)|0,lt=(lt=lt+Math.imul(x,rt)|0)+Math.imul(B,et)|0,pt=pt+Math.imul(B,rt)|0,dt=dt+Math.imul(N,st)|0,lt=(lt=lt+Math.imul(N,nt)|0)+Math.imul(P,st)|0,pt=pt+Math.imul(P,nt)|0,dt=dt+Math.imul(O,ht)|0,lt=(lt=lt+Math.imul(O,ft)|0)+Math.imul(A,ht)|0,pt=pt+Math.imul(A,ft)|0;let Rt=(bt+(dt=dt+Math.imul(I,ut)|0)|0)+((8191&(lt=(lt=lt+Math.imul(I,ct)|0)+Math.imul(E,ut)|0))<<13)|0;bt=((pt=pt+Math.imul(E,ct)|0)+(lt>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,dt=Math.imul(T,et),lt=(lt=Math.imul(T,rt))+Math.imul(U,et)|0,pt=Math.imul(U,rt),dt=dt+Math.imul(x,st)|0,lt=(lt=lt+Math.imul(x,nt)|0)+Math.imul(B,st)|0,pt=pt+Math.imul(B,nt)|0,dt=dt+Math.imul(N,ht)|0,lt=(lt=lt+Math.imul(N,ft)|0)+Math.imul(P,ht)|0,pt=pt+Math.imul(P,ft)|0;let xt=(bt+(dt=dt+Math.imul(O,ut)|0)|0)+((8191&(lt=(lt=lt+Math.imul(O,ct)|0)+Math.imul(A,ut)|0))<<13)|0;bt=((pt=pt+Math.imul(A,ct)|0)+(lt>>>13)|0)+(xt>>>26)|0,xt&=67108863,dt=Math.imul(T,st),lt=(lt=Math.imul(T,nt))+Math.imul(U,st)|0,pt=Math.imul(U,nt),dt=dt+Math.imul(x,ht)|0,lt=(lt=lt+Math.imul(x,ft)|0)+Math.imul(B,ht)|0,pt=pt+Math.imul(B,ft)|0;let Bt=(bt+(dt=dt+Math.imul(N,ut)|0)|0)+((8191&(lt=(lt=lt+Math.imul(N,ct)|0)+Math.imul(P,ut)|0))<<13)|0;bt=((pt=pt+Math.imul(P,ct)|0)+(lt>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,dt=Math.imul(T,ht),lt=(lt=Math.imul(T,ft))+Math.imul(U,ht)|0,pt=Math.imul(U,ft);let kt=(bt+(dt=dt+Math.imul(x,ut)|0)|0)+((8191&(lt=(lt=lt+Math.imul(x,ct)|0)+Math.imul(B,ut)|0))<<13)|0;bt=((pt=pt+Math.imul(B,ct)|0)+(lt>>>13)|0)+(kt>>>26)|0,kt&=67108863;let Tt=(bt+(dt=Math.imul(T,ut))|0)+((8191&(lt=(lt=Math.imul(T,ct))+Math.imul(U,ut)|0))<<13)|0;return bt=((pt=Math.imul(U,ct))+(lt>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n[0]=mt,n[1]=gt,n[2]=wt,n[3]=yt,n[4]=St,n[5]=vt,n[6]=It,n[7]=Et,n[8]=_t,n[9]=Ot,n[10]=At,n[11]=Mt,n[12]=Nt,n[13]=Pt,n[14]=Rt,n[15]=xt,n[16]=Bt,n[17]=kt,n[18]=Tt,0!==bt&&(n[19]=bt,r.length+=1),r}Math.imul||(j=V),b.Red=E,r.exports=b}],["bcrypto","/lib/internal/custom-browser.js",function(t,e,r,i,s,n){"use strict";t.custom="inspect"}],["bcoin","/lib/protocol/consensus.js",function(t,e,r,s,n,o){"use strict";const h=d(2,r),f=d(8,r);t.COIN=1e8,t.MAX_MONEY=21e6*t.COIN,t.BASE_REWARD=50*t.COIN,t.HALF_REWARD=Math.floor(t.BASE_REWARD/2),t.MAX_BLOCK_SIZE=1e6,t.MAX_RAW_BLOCK_SIZE=4e6,t.MAX_BLOCK_WEIGHT=4e6,t.MAX_BLOCK_SIGOPS=2e4,t.MAX_BLOCK_SIGOPS_COST=8e4,t.MEDIAN_TIMESPAN=11,t.VERSION_TOP_BITS=536870912,t.VERSION_TOP_MASK=3758096384,t.COINBASE_MATURITY=100,t.WITNESS_SCALE_FACTOR=4,t.LOCKTIME_THRESHOLD=5e8,t.SEQUENCE_DISABLE_FLAG=1<<31>>>0,t.SEQUENCE_TYPE_FLAG=1<<22,t.SEQUENCE_GRANULARITY=9,t.SEQUENCE_MASK=65535,t.MAX_SCRIPT_SIZE=1e4,t.MAX_SCRIPT_STACK=1e3,t.MAX_SCRIPT_PUSH=520,t.MAX_SCRIPT_OPS=201,t.MAX_MULTISIG_PUBKEYS=20,t.BIP16_TIME=1333238400,t.ZERO_HASH=i.alloc(32,0),t.fromCompact=function(t){if(0===t)return new f(0);const e=t>>>24,r=t>>>23&1;let i,s=8388607&t;return e<=3?i=new f(s>>>=8*(3-e)):(i=new f(s)).iushln(8*(e-3)),r&&i.ineg(),i},t.toCompact=function(t){if(t.isZero())return 0;let e,r=t.byteLength();r<=3?(e=t.toNumber(),e<<=8*(3-r)):e=t.ushrn(8*(r-3)).toNumber(),8388608&e&&(e>>=8,r++);let i=r<<24|e;return t.isNeg()&&(i|=8388608),i>>>=0},t.verifyPOW=function(e,r){const i=t.fromCompact(r);return!i.isNeg()&&!i.isZero()&&(!(i.bitLength()>256)&&!new f(e,"le").gt(i))},t.getReward=function(e,r){h(e>=0,"Bad height for reward.");const i=Math.floor(e/r);return i>=33?0:0===i?t.BASE_REWARD:t.HALF_REWARD>>>i-1},t.hasBit=function(e,r){return(e&t.VERSION_TOP_MASK)>>>0===t.VERSION_TOP_BITS&&0!=(e&1<<r)}}],["bcoin","/lib/protocol/timedata.js",function(t,e,r,i,s,n){"use strict";const o=d(3,r),h=d(13,r),f=d(6,r);function a(t,e){return t-e}r.exports=class extends o{constructor(t){super(),null==t&&(t=200),this.samples=[],this.known=new Map,this.limit=t,this.offset=0,this.checked=!1}add(t,e){if(this.samples.length>=this.limit)return;if(this.known.has(t))return;const r=e-h.now();if(this.known.set(t,r),f.insert(this.samples,r,a),this.emit("sample",r,this.samples.length),this.samples.length>=5&&this.samples.length%2==1){let t=this.samples[this.samples.length>>>1];if(Math.abs(t)>=4200){if(!this.checked){let t=!1;for(const e of this.samples)if(0!==e&&Math.abs(e)<300){t=!0;break}t||(this.checked=!0,this.emit("mismatch"))}t=0}this.offset=t,this.emit("offset",this.offset)}}now(){return h.now()+this.offset}adjust(t){return t+this.offset}local(t){return t-this.offset}ms(){return Date.now()+1e3*this.offset}}}],["bcoin","/lib/utils/util.js",function(t,e,s,n,o,h){"use strict";const f=d(2,s),a=t;a.bench=function(t){if(!r.hrtime){const e=Date.now();if(t){const[r,i]=t;return e-(1e3*r+i/1e6)}const r=e%1e3;return[(e-r)/1e3,1e6*r]}if(t){const[e,i]=r.hrtime(t);return 1e3*e+i/1e6}return r.hrtime()},a.now=function(){return Math.floor(Date.now()/1e3)},a.ms=function(){return Date.now()},a.date=function(t){return null==t&&(t=a.now()),new Date(1e3*t).toISOString().slice(0,-5)+"Z"},a.time=function(t){return null==t?a.now():new Date(t)/1e3|0},a.revHex=function(t){return f(null!=t&&!0===t._isBuffer),i.from(t).reverse().toString("hex")},a.fromRev=function(t){return f("string"==typeof t),f(0==(1&t.length)),i.from(t,"hex").reverse()}}],["bcoin","/lib/utils/index.js",function(t,e,r,i,s,n){"use strict";t.binary=d(6,r),t.fixed=d(15,r),t.util=d(13,r),t.message=d(16,r);const{inspect:{custom:o}}=d(4,r);t.inspectSymbol=o||"inspect"}],["bcoin","/lib/utils/fixed.js",function(t,e,r,i,s,n){"use strict";const o=d(2,r);function h(t){switch(t){case 0:return 1;case 1:return 10;case 2:return 100;case 3:return 1e3;case 4:return 1e4;case 5:return 1e5;case 6:return 1e6;case 7:return 1e7;case 8:return 1e8}throw new Error("Exponent is too large.")}t.encode=function(t,e){o(Number.isSafeInteger(t),"Invalid integer value.");let r="";t<0&&(t=-t,r="-");const i=h(e);let s=t%i,n=(t-s)/i;for(s=s.toString(10),n=n.toString(10);s.length<e;)s="0"+s;return s=s.replace(/0+$/,""),o(s.length<=e,"Invalid integer value."),0===s.length&&(s="0"),0===e?`${r}${n}`:`${r}${n}.${s}`},t.decode=function(t,e){o("string"==typeof t),o(t.length<=32,"Fixed number string too large.");let r=1;t.length>0&&"-"===t[0]&&(t=t.substring(1),r=-1);let i=t,s="0";const n=t.indexOf(".");for(-1!==n&&(i=t.substring(0,n),s=t.substring(n+1)),i=i.replace(/^0+/,""),s=s.replace(/0+$/,""),o(i.length<=16-e,"Fixed number string exceeds 2^53-1."),o(s.length<=e,"Too many decimal places in fixed number string."),0===i.length&&(i="0");s.length<e;)s+="0";0===s.length&&(s="0"),o(/^\d+$/.test(i)&&/^\d+$/.test(s),"Non-numeric characters in fixed number string."),i=parseInt(i,10),s=parseInt(s,10);const f=h(e),a=function(t){switch(t){case 1:return 0;case 10:return 1;case 100:return 91;case 1e3:case 1e4:return 991;case 1e5:return 40991;case 1e6:return 740991;case 1e7:return 4740991;case 1e8:return 54740991}throw new Error("Exponent is too large.")}(f),u=function(t){switch(t){case 1:return 9007199254740991;case 10:return 900719925474099;case 100:return 90071992547409;case 1e3:return 9007199254740;case 1e4:return 900719925474;case 1e5:return 90071992547;case 1e6:return 9007199254;case 1e7:return 900719925;case 1e8:return 90071992}throw new Error("Exponent is too large.")}(f);return o(i<u||i===u&&s<=a,"Fixed number string exceeds 2^53-1."),r*(i*f+s)},t.toFloat=function(e,r){return parseFloat(t.encode(e,r))},t.fromFloat=function(e,r){return o("number"==typeof e&&isFinite(e)),o(Number.isSafeInteger(r)),t.decode(e.toFixed(r),r)}}],["bcoin","/lib/utils/message.js",function(t,e,r,i,s,n){"use strict";const o=d(2,r),h=d(17,r),f=d(26,r),a=d(31,r),u=t;u.MAGIC_STRING="Bitcoin Signed Message:\n",u.magicHash=((t,e=u.MAGIC_STRING)=>{o("string"==typeof e,"prefix must be a string."),o("string"==typeof t,"message must be a string");const r=h.write();return r.writeVarString(e),r.writeVarString(t,"utf8"),f.digest(r.render())}),u.sign=((t,e,r)=>{o(e.getPrivateKey(),"Cannot sign without private key.");const i=u.magicHash(t,r),s=4!==e.getPublicKey().readInt8(0),[n,f]=a.signRecoverable(i,e.getPrivateKey()),c=h.write();return c.writeI8(f+27+(s?4:0)),c.writeBytes(n),c.render()}),u.recover=((t,e,r)=>{o("string"==typeof t,"msg must be a string"),o(null!=e&&!0===e._isBuffer,"sig must be a buffer");const i=u.magicHash(t,r);o.strictEqual(e.length,65,"Invalid signature length");const s=e.readUInt8(0)-27;o(s<8,"Invalid signature parameter");const n=Boolean(4&s),h=3&s;return a.recover(i,e.slice(1),h,n)})}],["bufio","/lib/bufio.js",function(t,e,r,i,s,n){"use strict";const o=d(18,r),h=d(19,r),f=d(20,r),a=d(21,r),u=d(22,r),c=d(23,r),l=d(24,r),p=d(25,r);function b(t,e){return function(r,i){if(f(null!=r&&!0===r._isBuffer,"data","buffer"),f(i>>>0===i,"off","integer"),i+e>r.length)throw new a(i,"Out of bounds read");return t(r,i)}}function m(t){return function(e,r,i){if(f(null!=e&&!0===e._isBuffer,"data","buffer"),f(r>>>0===r,"off","integer"),f(i>>>0===i,"len","integer"),r+i>e.length)throw new a(r,"Out of bounds read");return t(e,r,i)}}function g(t){return function(e,r){return f(null!=e&&!0===e._isBuffer,"data","buffer"),f(r>>>0===r,"off","integer"),t(e,r)}}function w(t,e){return function(r,i,s){if(f(null!=r&&!0===r._isBuffer,"data","buffer"),f(s>>>0===s,"off","integer"),s+e>r.length)throw new a(s,"Out of bounds write");return t(r,i,s)}}function y(t){return function(e,r,i,s){if(f(null!=e&&!0===e._isBuffer,"data","buffer"),f(i>>>0===i,"off","integer"),f(s>>>0===s,"len","integer"),i+s>e.length)throw new a(i,"Out of bounds write");return t(e,r,i,s)}}function S(t,e){return function(r,i,s){if(f(null!=r&&!0===r._isBuffer,"data","buffer"),f(s>>>0===s,"off","integer"),s+e(i)>r.length)throw new a(s,"Out of bounds write");return t(r,i,s)}}t.custom=o,t.encoding=h,t.EncodingError=a,t.BufferReader=u,t.BufferWriter=c,t.StaticWriter=l,t.Struct=p,t.read=function(t,e){return new u(t,e)},t.write=function(t){return null!=t?new l(t):new c},t.pool=function(t){return l.pool(t)},t.readU=m(h.readU),t.readU64=b(h.readU64,8),t.readU56=b(h.readU56,7),t.readU48=b(h.readU48,6),t.readU40=b(h.readU40,5),t.readU32=b(h.readU32,4),t.readU24=b(h.readU24,3),t.readU16=b(h.readU16,2),t.readU8=b(h.readU8,1),t.readUBE=m(h.readUBE),t.readU64BE=b(h.readU64BE,8),t.readU56BE=b(h.readU56BE,7),t.readU48BE=b(h.readU48BE,6),t.readU40BE=b(h.readU40BE,5),t.readU32BE=b(h.readU32BE,4),t.readU24BE=b(h.readU24BE,3),t.readU16BE=b(h.readU16BE,2),t.readI=m(h.readI),t.readI64=b(h.readI64,8),t.readI56=b(h.readI56,7),t.readI48=b(h.readI48,6),t.readI40=b(h.readI40,5),t.readI32=b(h.readI32,4),t.readI24=b(h.readI24,3),t.readI16=b(h.readI16,2),t.readI8=b(h.readI8,1),t.readIBE=m(h.readIBE),t.readI64BE=b(h.readI64BE,8),t.readI56BE=b(h.readI56BE,7),t.readI48BE=b(h.readI48BE,6),t.readI40BE=b(h.readI40BE,5),t.readI32BE=b(h.readI32BE,4),t.readI24BE=b(h.readI24BE,3),t.readI16BE=b(h.readI16BE,2),t.readFloat=b(h.readFloat,4),t.readFloatBE=b(h.readFloatBE,4),t.readDouble=b(h.readDouble,8),t.readDoubleBE=b(h.readDoubleBE,8),t.writeU=y(h.writeU),t.writeU64=w(h.writeU64,8),t.writeU56=w(h.writeU56,7),t.writeU48=w(h.writeU48,6),t.writeU40=w(h.writeU40,5),t.writeU32=w(h.writeU32,4),t.writeU24=w(h.writeU24,3),t.writeU16=w(h.writeU16,2),t.writeU8=w(h.writeU8,1),t.writeUBE=y(h.writeUBE),t.writeU64BE=w(h.writeU64BE,8),t.writeU56BE=w(h.writeU56BE,7),t.writeU48BE=w(h.writeU48BE,6),t.writeU40BE=w(h.writeU40BE,5),t.writeU32BE=w(h.writeU32BE,4),t.writeU24BE=w(h.writeU24BE,3),t.writeU16BE=w(h.writeU16BE,2),t.writeI=y(h.writeI),t.writeI64=w(h.writeI64,8),t.writeI56=w(h.writeI56,7),t.writeI48=w(h.writeI48,6),t.writeI40=w(h.writeI40,5),t.writeI32=w(h.writeI32,4),t.writeI24=w(h.writeI24,3),t.writeI16=w(h.writeI16,2),t.writeI8=w(h.writeI8,1),t.writeIBE=y(h.writeIBE),t.writeI64BE=w(h.writeI64BE,8),t.writeI56BE=w(h.writeI56BE,7),t.writeI48BE=w(h.writeI48BE,6),t.writeI40BE=w(h.writeI40BE,5),t.writeI32BE=w(h.writeI32BE,4),t.writeI24BE=w(h.writeI24BE,3),t.writeI16BE=w(h.writeI16BE,2),t.writeFloat=w(h.writeFloat,4),t.writeFloatBE=w(h.writeFloatBE,4),t.writeDouble=w(h.writeDouble,8),t.writeDoubleBE=w(h.writeDoubleBE,8),t.readVarint=g(h.readVarint),t.writeVarint=S(h.writeVarint,h.sizeVarint),t.sizeVarint=h.sizeVarint,t.readVarint2=g(h.readVarint2),t.writeVarint2=S(h.writeVarint2,h.sizeVarint2),t.sizeVarint2=h.sizeVarint2,t.sliceBytes=h.sliceBytes,t.readBytes=h.readBytes,t.writeBytes=h.writeBytes,t.readString=h.readString,t.writeString=h.writeString,t.realloc=h.realloc,t.copy=h.copy,t.concat=h.concat,t.sizeVarBytes=h.sizeVarBytes,t.sizeVarlen=h.sizeVarlen,t.sizeVarString=h.sizeVarString}],["bufio","/lib/custom-browser.js",function(t,e,r,i,s,n){"use strict";t.custom="inspect"}],["bufio","/lib/encoding.js",function(t,e,r,s,n,o){"use strict";const h=d(20,r),f=d(21,r),a=1/4294967296,{MAX_SAFE_INTEGER:u}=Number,c=new Float32Array(1),l=new Uint8Array(c.buffer),p=new Float64Array(1),b=new Uint8Array(p.buffer);c[0]=-1;const m=0===l[3];function g(t,e){const r=v(t,e+4),i=v(t,e);return zt(0==(4292870144&r),e,"Number exceeds 2^53-1"),4294967296*r+i}function w(t,e){const r=I(t,e+4),i=v(t,e);return zt(0==(4292870144&r),e,"Number exceeds 2^53-1"),4294967296*r+i}function y(t,e){return t[e++]+256*t[e++]+65536*t[e++]+16777216*t[e++]+4294967296*t[e++]+1099511627776*t[e]}function S(t,e){return t[e++]+256*t[e++]+65536*t[e++]+16777216*t[e++]+4294967296*t[e]}function v(t,e){return t[e++]+256*t[e++]+65536*t[e++]+16777216*t[e]}function I(t,e){return t[e++]+256*t[e++]+65536*t[e]}function E(t,e){return t[e++]+256*t[e]}function _(t,e){return t[e]}function O(t,e){const r=P(t,e),i=P(t,e+4);return zt(0==(4292870144&r),e,"Number exceeds 2^53-1"),4294967296*r+i}function A(t,e){const r=R(t,e),i=P(t,e+3);return zt(0==(4292870144&r),e,"Number exceeds 2^53-1"),4294967296*r+i}function M(t,e){return 1099511627776*t[e++]+4294967296*t[e++]+16777216*t[e++]+65536*t[e++]+256*t[e++]+t[e]}function N(t,e){return 4294967296*t[e++]+16777216*t[e++]+65536*t[e++]+256*t[e++]+t[e]}function P(t,e){return 16777216*t[e++]+65536*t[e++]+256*t[e++]+t[e]}function R(t,e){return 65536*t[e++]+256*t[e++]+t[e]}function x(t,e){return 256*t[e++]+t[e]}function B(t,e){const r=z(t,e+4),i=v(t,e);return zt(Rt(r,i),"Number exceeds 2^53-1"),4294967296*r+i}function k(t,e){const r=C(t,e+4),i=v(t,e);return zt(Rt(r,i),"Number exceeds 2^53-1"),4294967296*r+i}function T(t,e){const r=t[e+4]+256*t[e+5];return t[e++]+256*t[e++]+65536*t[e++]+16777216*t[e]+4294967296*(r|131070*(32768&r))}function U(t,e){return t[e++]+256*t[e++]+65536*t[e++]+16777216*t[e++]+4294967296*(t[e]|33554430*(128&t[e]))}function z(t,e){return t[e++]+256*t[e++]+65536*t[e++]+(t[e]<<24)}function C(t,e){const r=t[e++]+256*t[e++]+65536*t[e];return r|510*(8388608&r)}function L(t,e){const r=t[e++]+256*t[e];return r|131070*(32768&r)}function q(t,e){const r=t[e];return r|33554430*(128&r)}function F(t,e){const r=H(t,e),i=P(t,e+4);return zt(Rt(r,i),"Number exceeds 2^53-1"),4294967296*r+i}function V(t,e){const r=K(t,e),i=P(t,e+3);return zt(Rt(r,i),"Number exceeds 2^53-1"),4294967296*r+i}function D(t,e){const r=256*t[e++]+t[e++];return 4294967296*(r|131070*(32768&r))+16777216*t[e++]+65536*t[e++]+256*t[e++]+t[e]}function j(t,e){const r=t[e++];return 4294967296*(r|33554430*(128&r))+16777216*t[e++]+65536*t[e++]+256*t[e++]+t[e]}function H(t,e){return(t[e++]<<24)+65536*t[e++]+256*t[e++]+t[e]}function K(t,e){const r=65536*t[e++]+256*t[e++]+t[e];return r|510*(8388608&r)}function W(t,e){const r=256*t[e++]+t[e];return r|131070*(32768&r)}function Y(t,e){return l[3]=t[e++],l[2]=t[e++],l[1]=t[e++],l[0]=t[e],c[0]}function J(t,e){return l[0]=t[e++],l[1]=t[e++],l[2]=t[e++],l[3]=t[e],c[0]}function X(t,e){return b[7]=t[e++],b[6]=t[e++],b[5]=t[e++],b[4]=t[e++],b[3]=t[e++],b[2]=t[e++],b[1]=t[e++],b[0]=t[e],p[0]}function G(t,e){return b[0]=t[e++],b[1]=t[e++],b[2]=t[e++],b[3]=t[e++],b[4]=t[e++],b[5]=t[e++],b[6]=t[e++],b[7]=t[e],p[0]}const Z=m?Y:J,$=m?J:Y,Q=m?X:G,tt=m?G:X;function et(t,e,r){return h(Number.isSafeInteger(e),"num","integer"),xt(t,e,r,!1)}function rt(t,e,r){return h(Number.isSafeInteger(e),"num","integer"),Bt(t,e,r,!1)}function it(t,e,r){h(Number.isSafeInteger(e),"num","integer");const i=e*a|0;return t[r++]=e,e>>>=8,t[r++]=e,e>>>=8,t[r++]=e,e>>>=8,t[r++]=e,t[r++]=i,t[r++]=i>>>8,r}function st(t,e,r){h(Number.isSafeInteger(e),"num","integer");const i=e*a|0;return t[r++]=e,e>>>=8,t[r++]=e,e>>>=8,t[r++]=e,e>>>=8,t[r++]=e,t[r++]=i,r}function nt(t,e,r){return h(Number.isSafeInteger(e),"num","integer"),t[r++]=e,e>>>=8,t[r++]=e,e>>>=8,t[r++]=e,e>>>=8,t[r++]=e,r}function ot(t,e,r){return h(Number.isSafeInteger(e),"num","integer"),t[r++]=e,e>>>=8,t[r++]=e,e>>>=8,t[r++]=e,r}function ht(t,e,r){return h(Number.isSafeInteger(e),"num","integer"),t[r++]=e,t[r++]=e>>>8,r}function ft(t,e,r){return h(Number.isSafeInteger(e),"num","integer"),t[r]=e,r+1}function at(t,e,r){return h(Number.isSafeInteger(e),"num","integer"),xt(t,e,r,!0)}function ut(t,e,r){return h(Number.isSafeInteger(e),"num","integer"),Bt(t,e,r,!0)}function ct(t,e,r){h(Number.isSafeInteger(e),"num","integer");const i=e*a|0;return t[r++]=i>>>8,t[r++]=i,t[r+3]=e,e>>>=8,t[r+2]=e,e>>>=8,t[r+1]=e,e>>>=8,t[r]=e,r+4}function dt(t,e,r){h(Number.isSafeInteger(e),"num","integer");const i=e*a|0;return t[r++]=i,t[r+3]=e,e>>>=8,t[r+2]=e,e>>>=8,t[r+1]=e,e>>>=8,t[r]=e,r+4}function lt(t,e,r){return h(Number.isSafeInteger(e),"num","integer"),t[r+3]=e,e>>>=8,t[r+2]=e,e>>>=8,t[r+1]=e,e>>>=8,t[r]=e,r+4}function pt(t,e,r){return h(Number.isSafeInteger(e),"num","integer"),t[r+2]=e,e>>>=8,t[r+1]=e,e>>>=8,t[r]=e,r+3}function bt(t,e,r){return h(Number.isSafeInteger(e),"num","integer"),t[r++]=e>>>8,t[r++]=e,r}function mt(t,e,r){return nt(t,e,r)}function gt(t,e,r){return ot(t,e,r)}function wt(t,e,r){return lt(t,e,r)}function yt(t,e,r){return pt(t,e,r)}function St(t,e,r){return h(Tt(e),"num","number"),p[0]=e,t[r++]=b[0],t[r++]=b[1],t[r++]=b[2],t[r++]=b[3],t[r++]=b[4],t[r++]=b[5],t[r++]=b[6],t[r++]=b[7],r}function vt(t,e,r){return h(Tt(e),"num","number"),p[0]=e,t[r++]=b[7],t[r++]=b[6],t[r++]=b[5],t[r++]=b[4],t[r++]=b[3],t[r++]=b[2],t[r++]=b[1],t[r++]=b[0],r}function It(t,e,r){return h(Tt(e),"num","number"),c[0]=e,t[r++]=l[0],t[r++]=l[1],t[r++]=l[2],t[r++]=l[3],r}function Et(t,e,r){return h(Tt(e),"num","number"),c[0]=e,t[r++]=l[3],t[r++]=l[2],t[r++]=l[1],t[r++]=l[0],r}const _t=m?Et:It,Ot=m?It:Et,At=m?vt:St,Mt=m?St:vt;function Nt(t){return h(Number.isSafeInteger(t),"num","integer"),t<253?1:t<=65535?3:t<=4294967295?5:9}function Pt(t,e){h(null!=t&&!0===t._isBuffer,"data","buffer");const r=i.allocUnsafe(e);return t.copy(r,0),r}function Rt(t,e){return t<0&&(t=~t,0===e&&(t+=1)),0==(4292870144&t)}function xt(t,e,r,i){let s=!1;e<0&&(e=-e,s=!0);let n=e*a|0,o=0|e;return s&&(0===o?n=1+~n|0:(n=~n,o=1+~o)),r=i?wt(t,o,r=wt(t,n,r)):mt(t,n,r=mt(t,o,r))}function Bt(t,e,r,i){let s=!1;e<0&&(e=-e,s=!0);let n=e*a|0,o=0|e;return s&&(0===o?n=1+~n|0:(n=~n,o=1+~o)),r=i?wt(t,o,r=yt(t,n,r)):gt(t,n,r=mt(t,o,r))}class kt{constructor(t,e){this.size=t,this.value=e}}function Tt(t){return"number"==typeof t&&isFinite(t)}function Ut(t,e){if(!t)throw new f(e,"Out of bounds read",Ut)}function zt(t,e,r){if(!t)throw new f(e,r,zt)}t.readU=function(t,e,r){switch(r){case 8:return g(t,e);case 7:return w(t,e);case 6:return y(t,e);case 5:return S(t,e);case 4:return v(t,e);case 3:return I(t,e);case 2:return E(t,e);case 1:return _(t,e);default:throw new f(e,"Invalid read length")}},t.readU64=g,t.readU56=w,t.readU48=y,t.readU40=S,t.readU32=v,t.readU24=I,t.readU16=E,t.readU8=_,t.readUBE=function(t,e,r){switch(r){case 8:return O(t,e);case 7:return A(t,e);case 6:return M(t,e);case 5:return N(t,e);case 4:return P(t,e);case 3:return R(t,e);case 2:return x(t,e);case 1:return _(t,e);default:throw new f(e,"Invalid read length")}},t.readU64BE=O,t.readU56BE=A,t.readU48BE=M,t.readU40BE=N,t.readU32BE=P,t.readU24BE=R,t.readU16BE=x,t.readI=function(t,e,r){switch(r){case 8:return B(t,e);case 7:return k(t,e);case 6:return T(t,e);case 5:return U(t,e);case 4:return z(t,e);case 3:return C(t,e);case 2:return L(t,e);case 1:return q(t,e);default:throw new f(e,"Invalid read length")}},t.readI64=B,t.readI56=k,t.readI48=T,t.readI40=U,t.readI32=z,t.readI24=C,t.readI16=L,t.readI8=q,t.readIBE=function(t,e,r){switch(r){case 8:return F(t,e);case 7:return V(t,e);case 6:return D(t,e);case 5:return j(t,e);case 4:return H(t,e);case 3:return K(t,e);case 2:return W(t,e);case 1:return q(t,e);default:throw new f(e,"Invalid read length")}},t.readI64BE=F,t.readI56BE=V,t.readI48BE=D,t.readI40BE=j,t.readI32BE=H,t.readI24BE=K,t.readI16BE=W,t.readFloat=Z,t.readFloatBE=$,t.readDouble=Q,t.readDoubleBE=tt,t.writeU=function(t,e,r,i){switch(i){case 8:return et(t,e,r);case 7:return rt(t,e,r);case 6:return it(t,e,r);case 5:return st(t,e,r);case 4:return nt(t,e,r);case 3:return ot(t,e,r);case 2:return ht(t,e,r);case 1:return ft(t,e,r);default:throw new f(r,"Invalid write length")}},t.writeU64=et,t.writeU56=rt,t.writeU48=it,t.writeU40=st,t.writeU32=nt,t.writeU24=ot,t.writeU16=ht,t.writeU8=ft,t.writeUBE=function(t,e,r,i){switch(i){case 8:return at(t,e,r);case 7:return ut(t,e,r);case 6:return ct(t,e,r);case 5:return dt(t,e,r);case 4:return lt(t,e,r);case 3:return pt(t,e,r);case 2:return bt(t,e,r);case 1:return ft(t,e,r);default:throw new f(r,"Invalid write length")}},t.writeU64BE=at,t.writeU56BE=ut,t.writeU48BE=ct,t.writeU40BE=dt,t.writeU32BE=lt,t.writeU24BE=pt,t.writeU16BE=bt,t.writeI=function(t,e,r,i){switch(i){case 8:return et(t,e,r);case 7:return rt(t,e,r);case 6:return it(t,e,r);case 5:return st(t,e,r);case 4:return ot(t,e,r);case 3:return nt(t,e,r);case 2:return ht(t,e,r);case 1:return ft(t,e,r);default:throw new f(r,"Invalid write length")}},t.writeI64=function(t,e,r){return et(t,e,r)},t.writeI56=function(t,e,r){return rt(t,e,r)},t.writeI48=function(t,e,r){return it(t,e,r)},t.writeI40=function(t,e,r){return st(t,e,r)},t.writeI32=mt,t.writeI24=gt,t.writeI16=function(t,e,r){return ht(t,e,r)},t.writeI8=function(t,e,r){return ft(t,e,r)},t.writeIBE=function(t,e,r,i){switch(i){case 8:return at(t,e,r);case 7:return ut(t,e,r);case 6:return ct(t,e,r);case 5:return dt(t,e,r);case 4:return lt(t,e,r);case 3:return pt(t,e,r);case 2:return bt(t,e,r);case 1:return ft(t,e,r);default:throw new f(r,"Invalid write length")}},t.writeI64BE=function(t,e,r){return at(t,e,r)},t.writeI56BE=function(t,e,r){return ut(t,e,r)},t.writeI48BE=function(t,e,r){return ct(t,e,r)},t.writeI40BE=function(t,e,r){return dt(t,e,r)},t.writeI32BE=wt,t.writeI24BE=yt,t.writeI16BE=function(t,e,r){return bt(t,e,r)},t.writeFloat=_t,t.writeFloatBE=Ot,t.writeDouble=At,t.writeDoubleBE=Mt,t.readVarint=function(t,e){let r,i;switch(Ut(e<t.length,e),t[e]){case 255:Ut(e+(i=9)<=t.length,e),zt((r=g(t,e+1))>4294967295,e,"Non-canonical varint");break;case 254:Ut(e+(i=5)<=t.length,e),zt((r=v(t,e+1))>65535,e,"Non-canonical varint");break;case 253:Ut(e+(i=3)<=t.length,e),zt((r=E(t,e+1))>=253,e,"Non-canonical varint");break;default:i=1,r=t[e]}return new kt(i,r)},t.writeVarint=function(t,e,r){return h(Number.isSafeInteger(e),"num","integer"),e<253?(t[r++]=e,r):e<=65535?(t[r++]=253,ht(t,e,r)):e<=4294967295?(t[r++]=254,nt(t,e,r)):(t[r++]=255,et(t,e,r))},t.sizeVarint=Nt,t.readVarint2=function(t,e){let r=0,i=0;for(;;){Ut(e<t.length,e);const s=t[e++];if(i+=1,zt(r<=70368744177663-(127&s),e,"Number exceeds 2^53-1"),r=128*r+(127&s),0==(128&s))break;zt(r!==u,e,"Number exceeds 2^53-1"),r+=1}return new kt(i,r)},t.writeVarint2=function(t,e,r){h(Number.isSafeInteger(e),"num","integer");const i=[];let s=0;for(;i[s]=127&e|(s?128:0),!(e<=127);)e=(e-e%128)/128-1,s+=1;Ut(r+s+1<=t.length,r);do{t[r++]=i[s]}while(s--);return r},t.sizeVarint2=function(t){h(Number.isSafeInteger(t),"num","integer");let e=0;for(;e+=1,!(t<=127);)t=(t-t%128)/128-1;return e},t.sliceBytes=function(t,e,r){if(h(null!=t&&!0===t._isBuffer,"data","buffer"),h(e>>>0===e,"off","integer"),h(r>>>0===r,"size","integer"),e+r>t.length)throw new f(e,"Out of bounds read");return t.slice(e,e+r)},t.readBytes=function(t,e,r){if(h(null!=t&&!0===t._isBuffer,"data","buffer"),h(e>>>0===e,"off","integer"),h(r>>>0===r,"size","integer"),e+r>t.length)throw new f(e,"Out of bounds read");const s=i.allocUnsafe(r);return t.copy(s,0,e,e+r),s},t.writeBytes=function(t,e,r){if(h(null!=t&&!0===t._isBuffer,"data","buffer"),h(null!=e&&!0===e._isBuffer,"value","buffer"),h(r>>>0===r,"off","integer"),r+e.length>t.length)throw new f(r,"Out of bounds write");return e.copy(t,r,0,e.length)},t.readString=function(t,e,r,i){if(null==i&&(i="binary"),h(null!=t&&!0===t._isBuffer,"data","buffer"),h(e>>>0===e,"off","integer"),h(r>>>0===r,"size","integer"),h("string"==typeof i,"enc","string"),e+r>t.length)throw new f(e,"Out of bounds read");return t.toString(i,e,e+r)},t.writeString=function(t,e,r,s){if(null==s&&(s="binary"),h(null!=t&&!0===t._isBuffer,"data","buffer"),h("string"==typeof e,"str","string"),h(r>>>0===r,"off","integer"),h("string"==typeof s,"enc","string"),0===e.length)return 0;if(r+i.byteLength(e,s)>t.length)throw new f(r,"Out of bounds write");return t.write(e,r,s)},t.realloc=Pt,t.copy=function(t){return h(null!=t&&!0===t._isBuffer,"data","buffer"),Pt(t,t.length)},t.concat=function(t,e){h(null!=t&&!0===t._isBuffer,"a","buffer"),h(null!=e&&!0===e._isBuffer,"b","buffer");const r=t.length+e.length,s=i.allocUnsafe(r);return t.copy(s,0),e.copy(s,t.length),s},t.sizeVarBytes=function(t){return h(null!=t&&!0===t._isBuffer,"data","buffer"),Nt(t.length)+t.length},t.sizeVarlen=function(t){return Nt(t)+t},t.sizeVarString=function(t,e){if(null==e&&(e="binary"),h("string"==typeof t,"str","string"),h("string"==typeof e,"enc","string"),0===t.length)return 1;const r=i.byteLength(t,e);return Nt(r)+r}}],["bufio","/lib/enforce.js",function(t,e,r,i,s,n){"use strict";r.exports=function t(e,r,i){if(!e){const e=new TypeError(`'${r}' must be a(n) ${i}.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,t),e}}}],["bufio","/lib/error.js",function(t,e,r,i,s,n){"use strict";class o extends Error{constructor(t,e,r){super(),this.type="EncodingError",this.name="EncodingError",this.code="ERR_ENCODING",this.message=`${e} (offset=${t}).`,Error.captureStackTrace&&Error.captureStackTrace(this,r||o)}}r.exports=o}],["bufio","/lib/reader.js",function(t,e,r,s,n,o){"use strict";const h=d(20,r),f=d(19,r),a=d(21,r),u=i.alloc(0);r.exports=class{constructor(t,e=!1){h(null!=t&&!0===t._isBuffer,"data","buffer"),h("boolean"==typeof e,"zeroCopy","boolean"),this.data=t,this.offset=0,this.zeroCopy=e,this.stack=[]}check(t){if(this.offset+t>this.data.length)throw new a(this.offset,"Out of bounds read",this.check)}getSize(){return this.data.length}left(){return this.check(0),this.data.length-this.offset}seek(t){if(h(Number.isSafeInteger(t),"off","integer"),this.offset+t<0)throw new a(this.offset,"Out of bounds read");return this.check(t),this.offset+=t,this}start(){return this.stack.push(this.offset),this.offset}end(){if(0===this.stack.length)throw new Error("Cannot end without a stack item.");const t=this.stack.pop();return this.offset-t}endData(t=!1){if(h("boolean"==typeof t,"zeroCopy","boolean"),0===this.stack.length)throw new Error("Cannot end without a stack item.");const e=this.stack.pop(),r=this.offset,s=r-e,n=this.data;if(s===n.length)return n;if(this.zeroCopy||t)return n.slice(e,r);const o=i.allocUnsafe(s);return n.copy(o,0,e,r),o}destroy(){return this.data=u,this.offset=0,this.stack.length=0,this}readU8(){this.check(1);const t=this.data[this.offset];return this.offset+=1,t}readU16(){this.check(2);const t=f.readU16(this.data,this.offset);return this.offset+=2,t}readU16BE(){this.check(2);const t=f.readU16BE(this.data,this.offset);return this.offset+=2,t}readU24(){this.check(3);const t=f.readU24(this.data,this.offset);return this.offset+=3,t}readU24BE(){this.check(3);const t=f.readU24BE(this.data,this.offset);return this.offset+=3,t}readU32(){this.check(4);const t=f.readU32(this.data,this.offset);return this.offset+=4,t}readU32BE(){this.check(4);const t=f.readU32BE(this.data,this.offset);return this.offset+=4,t}readU40(){this.check(5);const t=f.readU40(this.data,this.offset);return this.offset+=5,t}readU40BE(){this.check(5);const t=f.readU40BE(this.data,this.offset);return this.offset+=5,t}readU48(){this.check(6);const t=f.readU48(this.data,this.offset);return this.offset+=6,t}readU48BE(){this.check(6);const t=f.readU48BE(this.data,this.offset);return this.offset+=6,t}readU56(){this.check(7);const t=f.readU56(this.data,this.offset);return this.offset+=7,t}readU56BE(){this.check(7);const t=f.readU56BE(this.data,this.offset);return this.offset+=7,t}readU64(){this.check(8);const t=f.readU64(this.data,this.offset);return this.offset+=8,t}readU64BE(){this.check(8);const t=f.readU64BE(this.data,this.offset);return this.offset+=8,t}readI8(){this.check(1);const t=f.readI8(this.data,this.offset);return this.offset+=1,t}readI16(){this.check(2);const t=f.readI16(this.data,this.offset);return this.offset+=2,t}readI16BE(){this.check(2);const t=f.readI16BE(this.data,this.offset);return this.offset+=2,t}readI24(){this.check(3);const t=f.readI24(this.data,this.offset);return this.offset+=3,t}readI24BE(){this.check(3);const t=f.readI24BE(this.data,this.offset);return this.offset+=3,t}readI32(){this.check(4);const t=f.readI32(this.data,this.offset);return this.offset+=4,t}readI32BE(){this.check(4);const t=f.readI32BE(this.data,this.offset);return this.offset+=4,t}readI40(){this.check(5);const t=f.readI40(this.data,this.offset);return this.offset+=5,t}readI40BE(){this.check(5);const t=f.readI40BE(this.data,this.offset);return this.offset+=5,t}readI48(){this.check(6);const t=f.readI48(this.data,this.offset);return this.offset+=6,t}readI48BE(){this.check(6);const t=f.readI48BE(this.data,this.offset);return this.offset+=6,t}readI56(){this.check(7);const t=f.readI56(this.data,this.offset);return this.offset+=7,t}readI56BE(){this.check(7);const t=f.readI56BE(this.data,this.offset);return this.offset+=7,t}readI64(){this.check(8);const t=f.readI64(this.data,this.offset);return this.offset+=8,t}readI64BE(){this.check(8);const t=f.readI64BE(this.data,this.offset);return this.offset+=8,t}readFloat(){this.check(4);const t=f.readFloat(this.data,this.offset);return this.offset+=4,t}readFloatBE(){this.check(4);const t=f.readFloatBE(this.data,this.offset);return this.offset+=4,t}readDouble(){this.check(8);const t=f.readDouble(this.data,this.offset);return this.offset+=8,t}readDoubleBE(){this.check(8);const t=f.readDoubleBE(this.data,this.offset);return this.offset+=8,t}readVarint(){const{size:t,value:e}=f.readVarint(this.data,this.offset);return this.offset+=t,e}readVarint2(){const{size:t,value:e}=f.readVarint2(this.data,this.offset);return this.offset+=t,e}readBytes(t,e=!1){let r;return h(t>>>0===t,"size","integer"),h("boolean"==typeof e,"zeroCopy","boolean"),this.check(t),this.zeroCopy||e?r=this.data.slice(this.offset,this.offset+t):(r=i.allocUnsafe(t),this.data.copy(r,0,this.offset,this.offset+t)),this.offset+=t,r}readVarBytes(t=!1){return this.readBytes(this.readVarint(),t)}readChild(t){h(t>>>0===t,"size","integer"),this.check(t);const e=this.data.slice(0,this.offset+t),r=new this.constructor(e);return r.offset=this.offset,this.offset+=t,r}readString(t,e){null==e&&(e="binary"),h(t>>>0===t,"size","integer"),h("string"==typeof e,"enc","string"),this.check(t);const r=this.data.toString(e,this.offset,this.offset+t);return this.offset+=t,r}readHash(t){return t?this.readString(32,t):this.readBytes(32)}readVarString(t,e=0){null==t&&(t="binary"),h("string"==typeof t,"enc","string"),h(e>>>0===e,"limit","integer");const r=this.readVarint();if(0!==e&&r>e)throw new a(this.offset,"String exceeds limit");return this.readString(r,t)}readNullString(t){null==t&&(t="binary"),h("string"==typeof t,"enc","string");let e=this.offset;for(;e<this.data.length&&0!==this.data[e];e++);if(e===this.data.length)throw new a(this.offset,"No NUL terminator");const r=this.readString(e-this.offset,t);return this.offset=e+1,r}createChecksum(t){h("function"==typeof t,"hash","function");let e=0;this.stack.length>0&&(e=this.stack[this.stack.length-1]);const r=this.data.slice(e,this.offset);return f.readU32(t(r),0)}verifyChecksum(t){const e=this.createChecksum(t);if(e!==this.readU32())throw new a(this.offset,"Checksum mismatch");return e}}}],["bufio","/lib/writer.js",function(t,e,r,s,n,o){"use strict";const h=d(20,r),f=d(19,r),a=d(21,r),u=0,c=1,l=2,p=3,b=4,m=5,g=6,w=7,y=8,S=9,v=10,I=11,E=12,_=13,O=14,A=15,M=16,N=17,P=18,R=19,x=20,B=21,k=22,T=23,U=24,z=25,C=26,L=27,q=28,F=29,V=30,D=31,j=32,H=33,K=34,W=35,Y=36,J=37,X=38,G=39,Z=40;class ${constructor(t){this.type=t}}class Q extends ${constructor(t,e){super(t),this.value=e}}class tt extends ${constructor(t,e){super(t),this.data=e}}class et extends ${constructor(t,e,r){super(t),this.value=e,this.enc=r}}class rt extends ${constructor(t,e){super(t),this.func=e}}class it extends ${constructor(t,e,r){super(t),this.value=e,this.size=r}}r.exports=class{constructor(){this.ops=[],this.offset=0}render(){const t=i.allocUnsafe(this.offset);let e=0;for(const r of this.ops)switch(r.type){case u:e+=r.value;break;case c:e=f.writeU8(t,r.value,e);break;case l:e=f.writeU16(t,r.value,e);break;case p:e=f.writeU16BE(t,r.value,e);break;case b:e=f.writeU24(t,r.value,e);break;case m:e=f.writeU24BE(t,r.value,e);break;case g:e=f.writeU32(t,r.value,e);break;case w:e=f.writeU32BE(t,r.value,e);break;case y:e=f.writeU40(t,r.value,e);break;case S:e=f.writeU40BE(t,r.value,e);break;case v:e=f.writeU48(t,r.value,e);break;case I:e=f.writeU48BE(t,r.value,e);break;case E:e=f.writeU56(t,r.value,e);break;case _:e=f.writeU56BE(t,r.value,e);break;case O:e=f.writeU64(t,r.value,e);break;case A:e=f.writeU64BE(t,r.value,e);break;case M:e=f.writeI8(t,r.value,e);break;case N:e=f.writeI16(t,r.value,e);break;case P:e=f.writeI16BE(t,r.value,e);break;case R:e=f.writeI24(t,r.value,e);break;case x:e=f.writeI24BE(t,r.value,e);break;case B:e=f.writeI32(t,r.value,e);break;case k:e=f.writeI32BE(t,r.value,e);break;case T:e=f.writeI40(t,r.value,e);break;case U:e=f.writeI40BE(t,r.value,e);break;case z:e=f.writeI48(t,r.value,e);break;case C:e=f.writeI48BE(t,r.value,e);break;case L:e=f.writeI56(t,r.value,e);break;case q:e=f.writeI56BE(t,r.value,e);break;case F:e=f.writeI64(t,r.value,e);break;case V:e=f.writeI64BE(t,r.value,e);break;case D:e=f.writeFloat(t,r.value,e);break;case j:e=f.writeFloatBE(t,r.value,e);break;case H:e=f.writeDouble(t,r.value,e);break;case K:e=f.writeDoubleBE(t,r.value,e);break;case W:e=f.writeVarint(t,r.value,e);break;case Y:e=f.writeVarint2(t,r.value,e);break;case J:e+=r.data.copy(t,e);break;case X:e+=t.write(r.value,e,r.enc);break;case G:e+=r.func(t.slice(0,e)).copy(t,e,0,4);break;case Z:t.fill(r.value,e,e+r.size),e+=r.size;break;default:throw new Error("Invalid type.")}if(e!==t.length)throw new a(e,"Out of bounds write");return this.destroy(),t}getSize(){return this.offset}seek(t){if(h(Number.isSafeInteger(t),"off","integer"),this.offset+t<0)throw new a(this.offset,"Out of bounds write");return this.offset+=t,this.ops.push(new Q(u,t)),this}destroy(){return this.ops.length=0,this.offset=0,this}writeU8(t){return this.offset+=1,this.ops.push(new Q(c,t)),this}writeU16(t){return this.offset+=2,this.ops.push(new Q(l,t)),this}writeU16BE(t){return this.offset+=2,this.ops.push(new Q(p,t)),this}writeU24(t){return this.offset+=3,this.ops.push(new Q(b,t)),this}writeU24BE(t){return this.offset+=3,this.ops.push(new Q(m,t)),this}writeU32(t){return this.offset+=4,this.ops.push(new Q(g,t)),this}writeU32BE(t){return this.offset+=4,this.ops.push(new Q(w,t)),this}writeU40(t){return this.offset+=5,this.ops.push(new Q(y,t)),this}writeU40BE(t){return this.offset+=5,this.ops.push(new Q(S,t)),this}writeU48(t){return this.offset+=6,this.ops.push(new Q(v,t)),this}writeU48BE(t){return this.offset+=6,this.ops.push(new Q(I,t)),this}writeU56(t){return this.offset+=7,this.ops.push(new Q(E,t)),this}writeU56BE(t){return this.offset+=7,this.ops.push(new Q(_,t)),this}writeU64(t){return this.offset+=8,this.ops.push(new Q(O,t)),this}writeU64BE(t){return this.offset+=8,this.ops.push(new Q(A,t)),this}writeI8(t){return this.offset+=1,this.ops.push(new Q(M,t)),this}writeI16(t){return this.offset+=2,this.ops.push(new Q(N,t)),this}writeI16BE(t){return this.offset+=2,this.ops.push(new Q(P,t)),this}writeI24(t){return this.offset+=3,this.ops.push(new Q(R,t)),this}writeI24BE(t){return this.offset+=3,this.ops.push(new Q(x,t)),this}writeI32(t){return this.offset+=4,this.ops.push(new Q(B,t)),this}writeI32BE(t){return this.offset+=4,this.ops.push(new Q(k,t)),this}writeI40(t){return this.offset+=5,this.ops.push(new Q(T,t)),this}writeI40BE(t){return this.offset+=5,this.ops.push(new Q(U,t)),this}writeI48(t){return this.offset+=6,this.ops.push(new Q(z,t)),this}writeI48BE(t){return this.offset+=6,this.ops.push(new Q(C,t)),this}writeI56(t){return this.offset+=7,this.ops.push(new Q(L,t)),this}writeI56BE(t){return this.offset+=7,this.ops.push(new Q(q,t)),this}writeI64(t){return this.offset+=8,this.ops.push(new Q(F,t)),this}writeI64BE(t){return this.offset+=8,this.ops.push(new Q(V,t)),this}writeFloat(t){return this.offset+=4,this.ops.push(new Q(D,t)),this}writeFloatBE(t){return this.offset+=4,this.ops.push(new Q(j,t)),this}writeDouble(t){return this.offset+=8,this.ops.push(new Q(H,t)),this}writeDoubleBE(t){return this.offset+=8,this.ops.push(new Q(K,t)),this}writeVarint(t){return this.offset+=f.sizeVarint(t),this.ops.push(new Q(W,t)),this}writeVarint2(t){return this.offset+=f.sizeVarint2(t),this.ops.push(new Q(Y,t)),this}writeBytes(t){return h(null!=t&&!0===t._isBuffer,"value","buffer"),0===t.length?this:(this.offset+=t.length,this.ops.push(new tt(J,t)),this)}writeVarBytes(t){return h(null!=t&&!0===t._isBuffer,"value","buffer"),this.offset+=f.sizeVarint(t.length),this.ops.push(new Q(W,t.length)),0===t.length?this:(this.offset+=t.length,this.ops.push(new tt(J,t)),this)}copy(t,e,r){h(null!=t&&!0===t._isBuffer,"value","buffer"),h(e>>>0===e,"start","integer"),h(r>>>0===r,"end","integer"),h(r>=e,"start","integer");const i=t.slice(e,r);return this.writeBytes(i),this}writeString(t,e){return null==e&&(e="binary"),h("string"==typeof t,"value","string"),h("string"==typeof e,"enc","string"),0===t.length?this:(this.offset+=i.byteLength(t,e),this.ops.push(new et(X,t,e)),this)}writeHash(t){return"string"!=typeof t?(h(null!=t&&!0===t._isBuffer,"value","buffer"),h(32===t.length,"value","32-byte hash"),this.writeBytes(t),this):(h(64===t.length,"value","32-byte hash"),this.writeString(t,"hex"),this)}writeVarString(t,e){if(null==e&&(e="binary"),h("string"==typeof t,"value","string"),h("string"==typeof e,"enc","string"),0===t.length)return this.ops.push(new Q(W,0)),this;const r=i.byteLength(t,e);return this.offset+=f.sizeVarint(r),this.offset+=r,this.ops.push(new Q(W,r)),this.ops.push(new et(X,t,e)),this}writeNullString(t,e){return this.writeString(t,e),this.writeU8(0),this}writeChecksum(t){return h("function"==typeof t,"hash","function"),this.offset+=4,this.ops.push(new rt(G,t)),this}fill(t,e){return h((255&t)===t,"value","byte"),h(e>>>0===e,"size","integer"),0===e?this:(this.offset+=e,this.ops.push(new it(Z,t,e)),this)}}}],["bufio","/lib/staticwriter.js",function(t,e,r,s,n,o){"use strict";const h=d(20,r),f=d(19,r),a=d(21,r),u=i.alloc(0),c=102400;let l=null;class p{constructor(t){this.data=u,this.offset=0,null!=t&&this.init(t)}check(t){if(this.offset+t>this.data.length)throw new a(this.offset,"Out of bounds write",this.check)}init(t){return null!=t&&!0===t._isBuffer?(this.data=t,this.offset=0,this):(h(t>>>0===t,"size","integer"),this.data=i.allocUnsafe(t),this.offset=0,this)}static pool(t){if(h(t>>>0===t,"size","integer"),t<=c){l||(l=i.allocUnsafe(c));const e=new p;return e.data=l.slice(0,t),e}return new p(t)}render(){const{data:t,offset:e}=this;if(e!==t.length)throw new a(e,"Out of bounds write");return this.destroy(),t}slice(){const{data:t,offset:e}=this;if(e>t.length)throw new a(e,"Out of bounds write");return this.destroy(),t.slice(0,e)}getSize(){return this.offset}seek(t){if(h(Number.isSafeInteger(t),"off","integer"),this.offset+t<0)throw new a(this.offset,"Out of bounds write");return this.check(t),this.offset+=t,this}destroy(){return this.data=u,this.offset=0,this}writeU8(t){return this.check(1),this.offset=f.writeU8(this.data,t,this.offset),this}writeU16(t){return this.check(2),this.offset=f.writeU16(this.data,t,this.offset),this}writeU16BE(t){return this.check(2),this.offset=f.writeU16BE(this.data,t,this.offset),this}writeU24(t){return this.check(3),this.offset=f.writeU24(this.data,t,this.offset),this}writeU24BE(t){return this.check(3),this.offset=f.writeU24BE(this.data,t,this.offset),this}writeU32(t){return this.check(4),this.offset=f.writeU32(this.data,t,this.offset),this}writeU32BE(t){return this.check(4),this.offset=f.writeU32BE(this.data,t,this.offset),this}writeU40(t){return this.check(5),this.offset=f.writeU40(this.data,t,this.offset),this}writeU40BE(t){return this.check(5),this.offset=f.writeU40BE(this.data,t,this.offset),this}writeU48(t){return this.check(6),this.offset=f.writeU48(this.data,t,this.offset),this}writeU48BE(t){return this.check(6),this.offset=f.writeU48BE(this.data,t,this.offset),this}writeU56(t){return this.check(7),this.offset=f.writeU56(this.data,t,this.offset),this}writeU56BE(t){return this.check(7),this.offset=f.writeU56BE(this.data,t,this.offset),this}writeU64(t){return this.check(8),this.offset=f.writeU64(this.data,t,this.offset),this}writeU64BE(t){return this.check(8),this.offset=f.writeU64BE(this.data,t,this.offset),this}writeI8(t){return this.check(1),this.offset=f.writeI8(this.data,t,this.offset),this}writeI16(t){return this.check(2),this.offset=f.writeI16(this.data,t,this.offset),this}writeI16BE(t){return this.check(2),this.offset=f.writeI16BE(this.data,t,this.offset),this}writeI24(t){return this.check(3),this.offset=f.writeI24(this.data,t,this.offset),this}writeI24BE(t){return this.check(3),this.offset=f.writeI24BE(this.data,t,this.offset),this}writeI32(t){return this.check(4),this.offset=f.writeI32(this.data,t,this.offset),this}writeI32BE(t){return this.check(4),this.offset=f.writeI32BE(this.data,t,this.offset),this}writeI40(t){return this.check(5),this.offset=f.writeI40(this.data,t,this.offset),this}writeI40BE(t){return this.check(5),this.offset=f.writeI40BE(this.data,t,this.offset),this}writeI48(t){return this.check(6),this.offset=f.writeI48(this.data,t,this.offset),this}writeI48BE(t){return this.check(6),this.offset=f.writeI48BE(this.data,t,this.offset),this}writeI56(t){return this.check(7),this.offset=f.writeI56(this.data,t,this.offset),this}writeI56BE(t){return this.check(7),this.offset=f.writeI56BE(this.data,t,this.offset),this}writeI64(t){return this.check(8),this.offset=f.writeI64(this.data,t,this.offset),this}writeI64BE(t){return this.check(8),this.offset=f.writeI64BE(this.data,t,this.offset),this}writeFloat(t){return this.check(4),this.offset=f.writeFloat(this.data,t,this.offset),this}writeFloatBE(t){return this.check(4),this.offset=f.writeFloatBE(this.data,t,this.offset),this}writeDouble(t){return this.check(8),this.offset=f.writeDouble(this.data,t,this.offset),this}writeDoubleBE(t){return this.check(8),this.offset=f.writeDoubleBE(this.data,t,this.offset),this}writeVarint(t){return this.offset=f.writeVarint(this.data,t,this.offset),this}writeVarint2(t){return this.offset=f.writeVarint2(this.data,t,this.offset),this}writeBytes(t){return h(null!=t&&!0===t._isBuffer,"value","buffer"),this.check(t.length),this.offset+=t.copy(this.data,this.offset),this}writeVarBytes(t){return h(null!=t&&!0===t._isBuffer,"value","buffer"),this.writeVarint(t.length),this.writeBytes(t),this}copy(t,e,r){return h(null!=t&&!0===t._isBuffer,"value","buffer"),h(e>>>0===e,"start","integer"),h(r>>>0===r,"end","integer"),h(r>=e,"start","integer"),this.check(r-e),this.offset+=t.copy(this.data,this.offset,e,r),this}writeString(t,e){if(null==e&&(e="binary"),h("string"==typeof t,"value","string"),h("string"==typeof e,"enc","string"),0===t.length)return this;const r=i.byteLength(t,e);return this.check(r),this.offset+=this.data.write(t,this.offset,e),this}writeHash(t){return"string"!=typeof t?(h(null!=t&&!0===t._isBuffer,"value","buffer"),h(32===t.length,"value","32-byte hash"),this.writeBytes(t),this):(h(64===t.length,"value","32-byte hash"),this.check(32),this.offset+=this.data.write(t,this.offset,"hex"),this)}writeVarString(t,e){if(null==e&&(e="binary"),h("string"==typeof t,"value","string"),h("string"==typeof e,"enc","string"),0===t.length)return this.writeVarint(0),this;const r=i.byteLength(t,e);return this.writeVarint(r),this.check(r),this.offset+=this.data.write(t,this.offset,e),this}writeNullString(t,e){return this.writeString(t,e),this.writeU8(0),this}writeChecksum(t){return h("function"==typeof t,"hash","function"),this.check(4),t(this.data.slice(0,this.offset)).copy(this.data,this.offset,0,4),this.offset+=4,this}fill(t,e){return h((255&t)===t,"value","byte"),h(e>>>0===e,"size","integer"),this.check(e),this.data.fill(t,this.offset,this.offset+e),this.offset+=e,this}}r.exports=p}],["bufio","/lib/struct.js",function(t,e,r,s,n,o){"use strict";const h=d(20,r),f=d(22,r),a=d(23,r),u=d(24,r),{custom:c}=d(18,r);r.exports=class{constructor(){}inject(t){return h(t instanceof this.constructor,"obj","struct"),this.decode(t.encode())}clone(){return(new this.constructor).inject(this)}getSize(t){return-1}write(t,e){return t}read(t,e){return this}toString(){return Object.prototype.toString.call(this)}fromString(t,e){return this}getJSON(){return this}fromJSON(t,e){return this}fromOptions(t,e){return this}from(t,e){return this.fromOptions(t,e)}format(){return this.getJSON()}encode(t){const e=this.getSize(t),r=-1===e?new a:new u(e);return this.write(r,t),r.render()}decode(t,e){const r=new f(t);return this.read(r,e),this}toHex(t){return this.encode(t).toString("hex")}fromHex(t,e){h("string"==typeof t,"str","string");const r=t.length>>>1,s=i.from(t,"hex");if(s.length!==r)throw new Error("Invalid hex string.");return this.decode(s,e)}toBase64(t){return this.encode(t).toString("base64")}fromBase64(t,e){h("string"==typeof t,"str","string");const r=i.from(t,"base64");if(t.length>(4*r.length/3+3&-4)>>>0)throw new Error("Invalid base64 string.");return this.decode(r,e)}toJSON(){return this.getJSON()}[c](){return this.format()}static read(t,e){return(new this).read(t,e)}static decode(t,e){return(new this).decode(t,e)}static fromHex(t,e){return(new this).fromHex(t,e)}static fromBase64(t,e){return(new this).fromBase64(t,e)}static fromString(t,e){return(new this).fromString(t,e)}static fromJSON(t,e){return(new this).fromJSON(t,e)}static fromOptions(t,e){return(new this).fromOptions(t,e)}static from(t,e){return(new this).from(t,e)}toWriter(t,e){return this.write(t,e)}fromReader(t,e){return this.read(t,e)}toRaw(t){return this.encode(t)}fromRaw(t,e){return this.decode(t,e)}static fromReader(t,e){return this.read(t,e)}static fromRaw(t,e){return this.decode(t,e)}}}],["bcrypto","/lib/hash256-browser.js",function(t,e,r,i,s,n){"use strict";r.exports=d(27,r)}],["bcrypto","/lib/js/hash256.js",function(t,e,r,s,n,o){"use strict";const h=d(28,r),f=d(29,r),a=d(30,r);class u{constructor(){this.ctx=new f}init(){return this.ctx.init(),this}update(t){return this.ctx.update(t),this}final(){const t=i.allocUnsafe(32);return this.ctx._final(t),this.ctx.init(),this.ctx.update(t),this.ctx._final(t),t}static hash(){return new u}static hmac(){return new a(u,64)}static digest(t){return u.ctx.init().update(t).final()}static root(t,e){return h(null!=t&&!0===t._isBuffer&&32===t.length),h(null!=e&&!0===e._isBuffer&&32===e.length),u.ctx.init().update(t).update(e).final()}static multi(t,e,r){const{ctx:i}=u;return i.init(),i.update(t),i.update(e),r&&i.update(r),i.final()}static mac(t,e){return u.hmac().init(e).update(t).final()}}u.native=0,u.id="HASH256",u.size=32,u.bits=256,u.blockSize=64,u.zero=i.alloc(32,0),u.ctx=new u,r.exports=u}],["bcrypto","/lib/internal/assert.js",function(t,e,r,i,s,n){"use strict";r.exports=function t(e,r){if(!e){const e=new Error(r||"Assertion failed");throw Error.captureStackTrace&&Error.captureStackTrace(e,t),e}}}],["bcrypto","/lib/js/sha256.js",function(t,e,r,s,n,o){"use strict";const h=d(28,r),f=d(30,r),a=-1,u=i.alloc(8,0),c=i.alloc(64,0);c[0]=128;const l=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);class p{constructor(){this.state=new Uint32Array(8),this.msg=new Uint32Array(64),this.block=i.allocUnsafe(64),this.size=a}init(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.size=0,this}update(t){return h(null!=t&&!0===t._isBuffer),this._update(t,t.length),this}final(){return this._final(i.allocUnsafe(32))}_update(t,e){h(this.size!==a,"Context is not initialized.");let r=63&this.size,i=0;if(this.size+=e,r>0){let s=64-r;if(s>e&&(s=e),t.copy(this.block,r,i,i+s),e-=s,i+=s,(r+=s)<64)return;this._transform(this.block,0)}for(;e>=64;)this._transform(t,i),i+=64,e-=64;e>0&&t.copy(this.block,0,i,i+e)}_final(t){h(this.size!==a,"Context is not initialized.");const e=63&this.size,r=8*this.size;S(u,r*(1/4294967296)>>>0,0),S(u,r>>>0,4),this._update(c,1+(119-e&63)),this._update(u,8);for(let e=0;e<8;e++)S(t,this.state[e],4*e),this.state[e]=0;for(let t=0;t<64;t++)this.msg[t]=0;for(let t=0;t<64;t++)this.block[t]=0;return this.size=a,t}_transform(t,e){const r=this.msg;let i=this.state[0],s=this.state[1],n=this.state[2],o=this.state[3],h=this.state[4],f=this.state[5],a=this.state[6],u=this.state[7],c=0;for(;c<16;c++)r[c]=(p=e+4*c,16777216*(d=t)[p++]+65536*d[p++]+256*d[p++]+d[p]);for(var d,p,S;c<64;c++)r[c]=(((S=r[c-2])>>>17|S<<15)^(S>>>19|S<<13)^S>>>10)+r[c-7]+g(r[c-15])+r[c-16];for(c=0;c<64;c++){const t=u+m(h)+w(h,f,a)+l[c]+r[c],e=b(i)+y(i,s,n);u=a,a=f,f=h,h=o+t>>>0,o=n,n=s,s=i,i=t+e>>>0}this.state[0]+=i,this.state[1]+=s,this.state[2]+=n,this.state[3]+=o,this.state[4]+=h,this.state[5]+=f,this.state[6]+=a,this.state[7]+=u}static hash(){return new p}static hmac(){return new f(p,64)}static digest(t){return p.ctx.init().update(t).final()}static root(t,e){return h(null!=t&&!0===t._isBuffer&&32===t.length),h(null!=e&&!0===e._isBuffer&&32===e.length),p.ctx.init().update(t).update(e).final()}static multi(t,e,r){const{ctx:i}=p;return i.init(),i.update(t),i.update(e),r&&i.update(r),i.final()}static mac(t,e){return p.hmac().init(e).update(t).final()}}function b(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function m(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function g(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function w(t,e,r){return r^t&(e^r)}function y(t,e,r){return t&e|r&(t|e)}function S(t,e,r){return t[r++]=e>>>24,t[r++]=e>>>16,t[r++]=e>>>8,t[r++]=e,r}p.native=0,p.id="SHA256",p.size=32,p.bits=256,p.blockSize=64,p.zero=i.alloc(32,0),p.ctx=new p,r.exports=p}],["bcrypto","/lib/internal/hmac.js",function(t,e,r,s,n,o){"use strict";const h=d(28,r);r.exports=class{constructor(t,e,r=[],i=[]){h("function"==typeof t),h(e>>>0===e),h(Array.isArray(r)),h(Array.isArray(i)),this.hash=t,this.size=e,this.x=r,this.y=i,this.inner=new t,this.outer=new t}init(t){if(h(null!=t&&!0===t._isBuffer),t.length>this.size){const e=new(0,this.hash);e.init(...this.x),e.update(t),t=e.final(...this.y),h(t.length<=this.size)}const e=i.allocUnsafe(this.size);for(let r=0;r<t.length;r++)e[r]=54^t[r];for(let r=t.length;r<e.length;r++)e[r]=54;this.inner.init(...this.x),this.inner.update(e);for(let r=0;r<t.length;r++)e[r]=92^t[r];for(let r=t.length;r<e.length;r++)e[r]=92;return this.outer.init(...this.x),this.outer.update(e),this}update(t){return this.inner.update(t),this}final(){return this.outer.update(this.inner.final(...this.y)),this.outer.final(...this.y)}}}],["bcrypto","/lib/secp256k1-browser.js",function(t,e,r,i,s,n){"use strict";r.exports=d(32,r)}],["bcrypto","/lib/js/secp256k1.js",function(t,e,r,i,s,n){"use strict";const o=d(33,r),h=d(44,r),f=d(47,r);r.exports=new o("SECP256K1",h,f)}],["bcrypto","/lib/js/ecdsa.js",function(t,e,r,s,n,o){"use strict";const h=d(28,r),f=d(8,r),a=d(34,r),u=d(36,r),c=d(40,r),l=d(45,r),p=d(46,r);r.exports=class{constructor(t,e,r){h("string"==typeof t),h(e),this.id=t,this.type="ecdsa",this.hash=e,this.native=0,this._pre=r||null,this._curve=null,this._schnorr=null}get curve(){return this._curve||(this._curve=p.curve(this.id,this._pre),this._curve.precompute(a),this._pre=null),this._curve}get schnorr(){return this._schnorr||(this._schnorr=new c(this.curve,this.hash)),this._schnorr}get size(){return this.curve.fieldSize}get bits(){return this.curve.fieldBits}privateKeyGenerate(){const t=this.curve.randomScalar(a);return this.curve.encodeScalar(t)}privateKeyVerify(t){let e;h(null!=t&&!0===t._isBuffer);try{e=this.curve.decodeScalar(t)}catch(t){return!1}return!e.isZero()&&e.cmp(this.curve.n)<0}privateKeyExport(t){const e=this.publicKeyCreate(t,!1),{x:r,y:s}=this.publicKeyExport(e);return{d:i.from(t),x:r,y:s}}privateKeyImport(t){h(t&&"object"==typeof t);const e=f.decode(t.d,this.curve.endian);if(e.isZero()||e.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");return this.curve.encodeScalar(e)}privateKeyTweakAdd(t,e){const r=this.curve.decodeScalar(e);if(r.cmp(this.curve.n)>=0)throw new Error("Invalid scalar.");const i=this.curve.decodeScalar(t);if(i.isZero()||i.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");const s=i.add(r).imod(this.curve.n);if(s.isZero())throw new Error("Invalid private key.");return this.curve.encodeScalar(s)}privateKeyTweakMul(t,e){const r=this.curve.decodeScalar(e);if(r.isZero()||r.cmp(this.curve.n)>=0)throw new Error("Invalid scalar.");const i=this.curve.decodeScalar(t);if(i.isZero()||i.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");const s=i.mul(r).imod(this.curve.n);if(s.isZero())throw new Error("Invalid private key.");return this.curve.encodeScalar(s)}privateKeyReduce(t){h(null!=t&&!0===t._isBuffer),t.length>this.curve.scalarSize&&(t=t.slice(0,this.curve.scalarSize));const e=f.decode(t,this.curve.endian).imod(this.curve.n);if(e.isZero())throw new Error("Invalid private key.");return this.curve.encodeScalar(e)}privateKeyNegate(t){const e=this.curve.decodeScalar(t);if(e.isZero()||e.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");const r=e.neg().imod(this.curve.n);return this.curve.encodeScalar(r)}privateKeyInvert(t){const e=this.curve.decodeScalar(t);if(e.isZero()||e.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");const r=e.invert(this.curve.n);return this.curve.encodeScalar(r)}publicKeyCreate(t,e){const r=this.curve.decodeScalar(t);if(r.isZero()||r.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");return this.curve.g.mulBlind(r).encode(e)}publicKeyConvert(t,e){return this.curve.decodePoint(t).encode(e)}publicKeyFromUniform(t,e){const r=this.curve.decodeUniform(t);return this.curve.pointFromUniform(r).encode(e)}publicKeyToUniform(t,e=a.randomInt()){const r=this.curve.decodePoint(t),i=this.curve.pointToUniform(r,e);return this.curve.encodeUniform(i,a)}publicKeyFromHash(t,e){return this.curve.pointFromHash(t).encode(e)}publicKeyToHash(t){const e=this.curve.decodePoint(t);return this.curve.pointToHash(e,a)}publicKeyVerify(t){h(null!=t&&!0===t._isBuffer);try{this.curve.decodePoint(t)}catch(t){return!1}return!0}publicKeyExport(t){const{x:e,y:r}=this.curve.decodePoint(t);return{x:this.curve.encodeField(e.fromRed()),y:this.curve.encodeField(r.fromRed())}}publicKeyImport(t,e){h(t&&"object"==typeof t);const r=f.decode(t.x,this.curve.endian);if(r.cmp(this.curve.p)>=0)throw new Error("Invalid point.");if(null!=t.y){const i=f.decode(t.y,this.curve.endian);if(i.cmp(this.curve.p)>=0)throw new Error("Invalid point.");const s=this.curve.point(r,i);if(!s.validate())throw new Error("Invalid point.");return s.encode(e)}return this.curve.pointFromX(r,t.sign).encode(e)}publicKeyTweakAdd(t,e,r){const i=this.curve.decodeScalar(e);if(i.cmp(this.curve.n)>=0)throw new Error("Invalid scalar.");const s=this.curve.decodePoint(t);return this.curve.g.jmul(i).add(s).encode(r)}publicKeyTweakMul(t,e,r){const i=this.curve.decodeScalar(e);if(i.isZero()||i.cmp(this.curve.n)>=0)throw new Error("Invalid scalar.");return this.curve.decodePoint(t).mul(i).encode(r)}publicKeyCombine(t,e){h(Array.isArray(t));let r=this.curve.jpoint();for(const e of t){const t=this.curve.decodePoint(e);r=r.add(t)}return r.encode(e)}publicKeyNegate(t,e){return this.curve.decodePoint(t).neg().encode(e)}signatureNormalize(t){const[e,r]=this._decodeCompact(t);return r.cmp(this.curve.nh)>0&&r.ineg().imod(this.curve.n),this._encodeCompact(e,r)}signatureNormalizeDER(t){const[e,r]=this._decodeDER(t,!1);return r.cmp(this.curve.nh)>0&&r.ineg().imod(this.curve.n),this._encodeDER(e,r)}signatureExport(t){const[e,r]=this._decodeCompact(t);return this._encodeDER(e,r)}signatureImport(t){const[e,r]=this._decodeDER(t,!1);return this._encodeCompact(e,r)}isLowS(t){let e;h(null!=t&&!0===t._isBuffer);try{[,e]=this._decodeCompact(t)}catch(t){return!1}return e.cmp(this.curve.nh)<=0}isLowDER(t){let e;h(null!=t&&!0===t._isBuffer);try{[,e]=this._decodeDER(t,!1)}catch(t){return!1}return e.cmp(this.curve.nh)<=0}sign(t,e){const[r,i]=this._sign(t,e);return this._encodeCompact(r,i)}signRecoverable(t,e){const[r,i,s]=this._sign(t,e);return[this._encodeCompact(r,i),s]}signDER(t,e){const[r,i]=this._sign(t,e);return this._encodeDER(r,i)}signRecoverableDER(t,e){const[r,i,s]=this._sign(t,e);return[this._encodeDER(r,i),s]}_sign(t,e){const{n:r,nh:i}=this.curve,s=this.curve.g,n=this.curve.decodeScalar(e);if(n.isZero()||n.cmp(r)>=0)throw new Error("Invalid private key.");const o=this._reduce(t),h=this.curve.encodeScalar(o),f=new l(this.hash,e,h);for(;;){const t=f.generate(this.curve.scalarSize),e=this._truncate(t);if(e.isZero()||e.cmp(r)>=0)continue;const h=s.mulBlind(e);if(h.isInfinity())continue;const u=h.getX(),c=u.mod(r);if(c.isZero())continue;const d=this.curve.randomScalar(a),l=e.mul(d).fermat(r),p=n.mul(d).imod(r),b=o.mul(d).imod(r),m=c.mul(p).iadd(b).imod(r).mul(l).imod(r);if(m.isZero())continue;let g=h.isOdd()|!u.eq(c)<<1;return m.cmp(i)>0&&(m.ineg().imod(r),g^=1),[c,m,g]}}verify(t,e,r){let i,s;h(null!=t&&!0===t._isBuffer),h(null!=e&&!0===e._isBuffer),h(null!=r&&!0===r._isBuffer);try{[i,s]=this._decodeCompact(e)}catch(t){return!1}try{return this._verify(t,i,s,r)}catch(t){return!1}}verifyDER(t,e,r){let i,s;h(null!=t&&!0===t._isBuffer),h(null!=e&&!0===e._isBuffer),h(null!=r&&!0===r._isBuffer);try{[i,s]=this._decodeDER(e,!1)}catch(t){return!1}try{return this._verify(t,i,s,r)}catch(t){return!1}}_verify(t,e,r,i){const{n:s}=this.curve,n=this.curve.g,o=this._reduce(t),h=this.curve.decodePoint(i);if(e.isZero()||e.cmp(s)>=0)return!1;if(r.isZero()||r.cmp(s)>=0)return!1;const f=r.invert(s),a=o.mul(f).imod(s),u=e.mul(f).imod(s);return n.jmulAdd(a,h,u).eqXToP(e)}recover(t,e,r,i){let s,n,o;h(null!=t&&!0===t._isBuffer),h(null!=e&&!0===e._isBuffer),h(r>>>0===r),h((3&r)===r,"The recovery param is more than two bits.");try{[s,n]=this._decodeCompact(e)}catch(t){return null}try{o=this._recover(t,s,n,r)}catch(t){return null}return o.encode(i)}recoverDER(t,e,r,i){let s,n,o;h(null!=t&&!0===t._isBuffer),h(null!=e&&!0===e._isBuffer),h(r>>>0===r),h((3&r)===r,"The recovery param is more than two bits.");try{[s,n]=this._decodeDER(e,!1)}catch(t){return null}try{o=this._recover(t,s,n,r)}catch(t){return null}return o.encode(i)}_recover(t,e,r,i){const{p:s,n:n}=this.curve,o=this.curve.g,h=this._reduce(t);if(e.isZero()||e.cmp(n)>=0)throw new Error("Invalid R value.");if(r.isZero()||r.cmp(n)>=0)throw new Error("Invalid S value.");const f=0!=(1&i);let a=e;if(i>>>1){if(a.cmp(s.mod(n))>=0)throw new Error("Invalid R value.");a=a.add(n)}const u=this.curve.pointFromX(a,f),c=e.invert(n),d=h.mul(c).ineg().imod(n),l=r.mul(c).imod(n),p=o.mulAdd(d,u,l);if(p.isInfinity())throw new Error("Invalid point.");return p}derive(t,e,r){const i=this.curve.decodePoint(t),s=this.curve.decodeScalar(e);if(s.isZero()||s.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");if(this.curve.h.cmpn(1)>0&&i.isSmall())throw new Error("Invalid point.");return i.mulConst(s,a).encode(r)}schnorrSign(t,e){return this.schnorr.sign(t,e)}schnorrVerify(t,e,r){return this.schnorr.verify(t,e,r)}schnorrVerifyBatch(t){return this.schnorr.verifyBatch(t)}_encodeCompact(t,e){return i.concat([this.curve.encodeScalar(t),this.curve.encodeScalar(e)])}_decodeCompact(t){h(null!=t&&!0===t._isBuffer);const{n:e}=this.curve,r=this.curve.scalarSize;if(t.length!==2*r)throw new Error("Invalid signature size.");const i=t.slice(0,r),s=t.slice(r,2*r),n=this.curve.decodeScalar(i),o=this.curve.decodeScalar(s);if(n.cmp(e)>=0||o.cmp(e)>=0)throw new Error("Invalid signature.");return[n,o]}_encodeDER(t,e){const r=u.sizeInt(t)+u.sizeInt(e),s=i.alloc(u.sizeSeq(r));let n=0;return n=u.writeSeq(s,n,r),n=u.writeInt(s,n,t),n=u.writeInt(s,n,e),h(n===s.length),s}_decodeDER(t,e){h(null!=t&&!0===t._isBuffer),h("boolean"==typeof e);const{n:r}=this.curve;let i,s,n=0;if(n=u.readSeq(t,n,e),[i,n]=u.readInt(t,n,e),[s,n]=u.readInt(t,n,e),e&&n!==t.length)throw new Error("Trailing bytes.");if(i.cmp(r)>=0||s.cmp(r)>=0)throw new Error("Invalid signature.");return[i,s]}_truncate(t){h(null!=t&&!0===t._isBuffer);const e=this.curve.n.bitLength(),r=e+7>>>3;t.length>r&&(t=t.slice(0,r));const i=f.decode(t,this.curve.endian),s=8*t.length-e;return s>0&&i.iushrn(s),i}_reduce(t){return this._truncate(t).imod(this.curve.n)}}}],["bcrypto","/lib/random-browser.js",function(t,e,r,i,s,n){"use strict";r.exports=d(35,r)}],["bcrypto","/lib/js/random.js",function(e,r,s,n,o,h){"use strict";const f=d(28,s),a=t.crypto||t.msCrypto,u=a&&"function"==typeof a.getRandomValues,c=u?a.getRandomValues.bind(a):null,l=new Uint32Array(1),p=65536;function b(){m(l);const t=l[0];return l[0]=0,t}function m(t){if(!u)throw new Error("Entropy source not available.");return c(t)}function g(t,e,r){if(f(null!=t&&!0===t._isBuffer),f(t.buffer instanceof ArrayBuffer),f(t.byteOffset>>>0===t.byteOffset),f(t.byteLength>>>0===t.byteLength),f(e>>>0===e),f(r>>>0===r),f(e+r<=t.byteLength),r>2**31-1)throw new RangeError('The value "size" is out of range.');const i=t.byteOffset+e,s=new Uint8Array(t.buffer,i,r);if(s.length>p)for(let t=0;t<s.length;t+=p){let e=t+p;e>s.length&&(e=s.length),m(s.subarray(t,e))}else s.length>0&&m(s)}e.native=0,e.randomBytes=function(t){f(t>>>0===t);const e=i.alloc(t);return g(e,0,t),e},e.randomFill=function(t,e,r){return f(null!=t&&!0===t._isBuffer),null==e&&(e=0),f(e>>>0===e),null==r&&(r=t.length-e),f(r>>>0===r),f(e+r<=t.length),t.fill(0,e,e+r),g(t,e,r),t},e.randomInt=b,e.randomRange=function(t,e){f(t>>>0===t),f(e>>>0===e),f(e>=t);const r=e-t;if(0===r)return t;const i=-r>>>0;let s,n;do{n=(s=b())%r}while(s-n>i);return n+t}}],["bcrypto","/lib/internal/asn1.js",function(t,e,r,i,s,n){"use strict";const o=d(37,r),h=d(8,r);function f(t,e,r){if(o(null!=t&&!0===t._isBuffer),o(e>>>0===e),o("boolean"==typeof r),e>=t.length)throw new Error("Invalid size.");const i=t[e],s=127&i;if(e+=1,0==(128&i))return[s,e];if(r&&0===s)throw new Error("Indefinite length.");let n=0;for(let i=0;i<s;i++){o(e<t.length);const i=t[e];if(e+=1,n>=1<<24)throw new Error("Length too large.");if(n*=256,n+=i,r&&0===n)throw new Error("Unexpected leading zeroes.")}if(r&&n<128)throw new Error("Non-minimal length.");return[n,e]}function a(t,e,r=!0){if(o(null!=t&&!0===t._isBuffer),o(e>>>0===e),o("boolean"==typeof r),e>=t.length||2!==t[e])throw new Error("Invalid integer tag.");let i;if(e+=1,[i,e]=f(t,e,r),e+i>t.length)throw new Error("Integer body out of bounds.");if(r){if(0===i)throw new Error("Zero length integer.");if(128&t[e])throw new Error("Integers must be positive.");if(i>1&&0===t[e]&&0==(128&t[e+1]))throw new Error("Unexpected leading zeroes.")}for(;i>1&&0===t[e];)e+=1,i-=1;if(i>2048)throw new Error("Invalid integer size.");return[h.decode(t.slice(e,e+i)),e+=i]}function u(t){return o(t>>>0===t),t<=127?1:t<=255?2:(o(t<=65535),3)}function c(t,e,r){return o(null!=t&&!0===t._isBuffer),o(e>>>0===e),o(r>>>0===r),r<=127?t[e++]=r:r<=255?(t[e++]=129,t[e++]=r):(o(r<=65535),t[e++]=130,t[e++]=r>>8,t[e++]=255&r),o(e<=t.length),e}t.readSize=f,t.readSeq=function(t,e,r=!0){if(o(null!=t&&!0===t._isBuffer),o(e>>>0===e),o("boolean"==typeof r),e>=t.length||48!==t[e])throw new Error("Invalid sequence tag.");let i;if(e+=1,[i,e]=f(t,e,r),r&&e+i!==t.length)throw new Error("Trailing bytes.");return e},t.readInt=a,t.readVersion=function(t,e,r,i=!0){let s;if(o(null!=t&&!0===t._isBuffer),o(e>>>0===e),o((255&r)===r),o("boolean"==typeof i),[s,e]=a(t,e,i),0!==s.cmpn(r))throw new Error("Invalid version.");return e},t.sizeSize=u,t.sizeSeq=function(t){return 1+u(t)+t},t.sizeInt=function(t){o(t instanceof h);const e=t.bitLength();let r=e+7>>>3;return e>0&&0==(7&e)&&(r+=t.testn(e-1)),0===e&&(r=1),1+u(r)+r},t.sizeVersion=function(t){return o((255&t)===t),3},t.writeSize=c,t.writeSeq=function(t,e,r){return o(null!=t&&!0===t._isBuffer),o(e>>>0===e),t[e++]=48,c(t,e,r)},t.writeInt=function(t,e,r){o(null!=t&&!0===t._isBuffer),o(e>>>0===e),o(r instanceof h);const i=r.bitLength();let s=i+7>>>3,n=0;return i>0&&0==(7&i)&&(n=r.testn(i-1)),0===i&&(s=1),t[e++]=2,e=c(t,e,n+s),n&&(t[e++]=0),0!==i?r.encode().copy(t,e):t[e]=0,o((e+=s)<=t.length),e},t.writeVersion=function(t,e,r){return o(null!=t&&!0===t._isBuffer),o(e>>>0===e),o((255&r)===r),o(e+3<=t.length),t[e++]=2,t[e++]=1,t[e++]=r,e}}],["bpkg","/lib/builtins/assert.js",function(t,r,i,s,n,o){"use strict";var h=d(38,i),f=d(39,i),a=f.isDeepEqual,u=f.isDeepStrictEqual,c={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},l={};function p(t){if("object"!=typeof t||null===t)throw new h.ArgError("options",t,"Object");var e=null,r="fail";null!=t.message&&(e=String(t.message)),"string"==typeof t.operator&&(r=t.operator),null==e&&(e="fail"===r?"Assertion failed.":c[r]+" "+h.stringify(t.actual)+" "+r+" "+h.stringify(t.expected)),Error.call(this,e);var i=p;"function"==typeof t.stackStartFn&&(i=t.stackStartFn),this.name="AssertionError [ERR_ASSERTION]",this.code="ERR_ASSERTION",this.message=e,this.generatedMessage=!t.message,this.actual=t.actual,this.expected=t.expected,this.operator=r,Error.captureStackTrace&&Error.captureStackTrace(this,i)}h.inherits(p,Error);var b=function t(e,r){g(t,arguments.length,e,r)};function m(t){if(t.message instanceof Error)throw t.message;throw new p(t)}function g(t,e,r,i){if(!r){var s=!1;if(0===e)s=!0,i="No value argument passed to `assert.ok()`";else if(null==i)s=!0,i="Assertion failed.";else if(i instanceof Error)throw i;var n=new p({actual:r,expected:!0,message:i,operator:"==",stackStartFn:t});throw n.generatedMessage=s,n}}function w(t,r,i){for(var s=0;s<r.length;s++){var n=r[s];n in t&&(i!==e&&"string"==typeof i[n]&&t[n]instanceof RegExp&&t[n].test(i[n])?this[n]=i[n]:this[n]=t[n])}}function y(t,e,r,i,s){if(!(r in t&&u(t[r],e[r]))){if(!i){var n=new p({actual:new w(t,s),expected:new w(e,s,t),operator:"deepStrictEqual",stackStartFn:b.throws});throw n.actual=t,n.expected=e,n.operator="throws",n}m({actual:t,expected:e,message:i,operator:"throws",stackStartFn:b.throws})}}function S(t,r,i){if("function"!=typeof r){if(r instanceof RegExp)return r.test(t);if(2===arguments.length)throw new h.ArgError("expected",r,["Function","RegExp"]);if("object"!=typeof t||null===t){var s=new p({actual:t,expected:r,message:i,operator:"deepStrictEqual",stackStartFn:b.throws});throw s.operator="throws",s}var n=h.getOwnKeys(r);if(r instanceof Error)n.push("name","message");else if(0===n.length)throw new h.ArgError("error",r,"may not be an empty object");for(var o=0;o<n.length;o++){var f=n[o];"string"==typeof t[f]&&r[f]instanceof RegExp&&r[f].test(t[f])||y(t,r,f,i,n)}return!0}return r.prototype!==e&&t instanceof r||!(r.prototype instanceof Error)&&!0===r.call({},t)}function v(t){if("function"!=typeof t)throw new h.ArgError("fn",t,"Function");try{t()}catch(t){return t}return l}function I(t){return null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch}function E(t){return new Promise(function(e,r){try{var i;if("function"==typeof t){if(!I(i=t()))throw new h.ArgError("promiseFn",i,"instance of Promise")}else{if(!I(t))throw new h.ArgError("promiseFn",t,["Function","Promise"]);i=t}i.then(function(){e(l)},e)}catch(t){e(t)}})}function _(t,r,i,s){if("string"==typeof i){if(4===arguments.length)throw new h.ArgError("error",i,["Object","Error","Function","RegExp"]);if("object"==typeof r&&null!==r){if(r.message===i)throw new h.NodeError("ERR_AMBIGUOUS_ARGUMENT",'The error message "'+r.message+'" is identical to the message.')}else if(r===i)throw new h.NodeError("ERR_AMBIGUOUS_ARGUMENT",'The error "'+r+'" is identical to the message.');s=i,i=e}else if(null!=i&&"object"!=typeof i&&"function"!=typeof i)throw new h.ArgError("error",i,["Object","Error","Function","RegExp"]);if(r===l){var n="";i&&i.name&&(n+=" ("+i.name+")"),n+=s?": "+s:".";var o="rejects"===t.name?"rejection":"exception";m({actual:e,expected:i,operator:t.name,message:"Missing expected "+o+n,stackStartFn:t})}if(i&&!1===S(r,i,s))throw r}function O(t,r,i,s){if(r!==l){if("string"==typeof i&&(s=i,i=e),!i||S(r,i)){var n=s?": "+s:".",o="doesNotReject"===t.name?"rejection":"exception";m({actual:r,expected:i,operator:t.name,message:"Got unwanted "+o+n+'\nActual message: "'+(r&&r.message)+'"',stackStartFn:t})}throw r}}b.AssertionError=p,b.ok=b,b.fail=function t(r,i,s,n,o){var h,f=arguments.length;if(0===f?h="Failed":1===f?(s=r,r=e):2===f&&(n="!="),s instanceof Error)throw s;var a={actual:r,expected:i,operator:n===e?"fail":n,stackStartFn:o||t};s!==e&&(a.message=s);var u=new p(a);throw h&&(u.message=h,u.generatedMessage=!0),u},b.equal=function t(e,r,i){e!=r&&m({actual:e,expected:r,message:i,operator:"==",stackStartFn:t})},b.notEqual=function t(e,r,i){e==r&&m({actual:e,expected:r,message:i,operator:"!=",stackStartFn:t})},b.deepEqual=function t(e,r,i){a(e,r)||m({actual:e,expected:r,message:i,operator:"deepEqual",stackStartFn:t})},b.notDeepEqual=function t(e,r,i){a(e,r)&&m({actual:e,expected:r,message:i,operator:"notDeepEqual",stackStartFn:t})},b.deepStrictEqual=function t(e,r,i){u(e,r)||m({actual:e,expected:r,message:i,operator:"deepStrictEqual",stackStartFn:t})},b.notDeepStrictEqual=function t(e,r,i){u(e,r)&&m({actual:e,expected:r,message:i,operator:"notDeepStrictEqual",stackStartFn:t})},b.strictEqual=function t(e,r,i){h.equals(e,r)||m({actual:e,expected:r,message:i,operator:"strictEqual",stackStartFn:t})},b.notStrictEqual=function t(e,r,i){h.equals(e,r)&&m({actual:e,expected:r,message:i,operator:"notStrictEqual",stackStartFn:t})},b.throws=function t(e,r,i){_(t,v(e),r,i)},b.rejects=function t(e,r,i){return new Promise(function(s,n){E(e).then(function(e){try{_(t,e,r,i)}catch(t){return void n(t)}s()})})},b.doesNotThrow=function t(e,r,i){O(t,v(e),r,i)},b.doesNotReject=function t(e,r,i){return new Promise(function(s,n){E(e).then(function(e){try{O(t,e,r,i)}catch(t){return void n(t)}s()})})},b.ifError=function t(r){if(null!==r&&r!==e){var i="ifError got unwanted exception: ";"object"==typeof r&&"string"==typeof r.message?0===r.message.length&&r.constructor?i+=r.constructor.name:i+=r.message:i+=h.stringify(r);var s=new p({actual:r,expected:null,operator:"ifError",message:i,stackStartFn:t}),n=r.stack;if("string"==typeof n){var o=n.split("\n");o.shift();for(var f=s.stack.split("\n"),a=0;a<o.length;a++){var u=f.indexOf(o[a]);if(-1!==u){f=f.slice(0,u);break}}s.stack=f.join("\n")+"\n"+o.join("\n")}throw s}},b.strict=h.assign(function t(e,r){g(t,arguments.length,e,r)},b,{equal:b.strictEqual,deepEqual:b.deepStrictEqual,notEqual:b.notStrictEqual,notDeepEqual:b.notDeepStrictEqual}),b.strict.strict=b.strict,i.exports=b}],["bpkg","/lib/builtins/internal/util.js",function(t,r,i,s,n,o){"use strict";var h="function"==typeof ArrayBuffer,f="function"==typeof SharedArrayBuffer,a="function"==typeof BigInt,u="function"==typeof Symbol,c="function"==typeof Float32Array,d="function"==typeof Float64Array,l="function"==typeof Map,p="function"==typeof Set,b=1==={__proto__:{a:1}}.a;function m(t){var e;try{e=t.name}catch(t){}return"string"!=typeof e||0===e.length?"Function":"Function: "+e}function g(t){if(Object.keys)return Object.keys(t);var e,r=[];for(e in t)S.call(t,e)&&r.push(e);return r}function w(t){return Object.getOwnPropertyNames?Object.getOwnPropertyNames(t):g(t)}function y(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]}function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function v(t){return!!(h&&t instanceof ArrayBuffer)||!!(f&&t instanceof SharedArrayBuffer)}function I(t){return Array.isArray?Array.isArray(t):t instanceof Array}function E(t){return a&&t instanceof BigInt}function _(t){return t instanceof Boolean}function O(t){return t instanceof Number}function A(t){return t instanceof String}function M(t){return u&&t instanceof Symbol}function N(t,e){if(Object.setPrototypeOf)return Object.setPrototypeOf(t,e),void Object.setPrototypeOf(t.prototype,e.prototype);if(b)return t.__proto__=e,void(t.prototype.__proto__=e.prototype);if(Object.create)t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});else{var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}function P(t,e){if(!Object.getOwnPropertyDescriptor)return S(t,e);var r=Object.getOwnPropertyDescriptor(t,e);return null!=r&&!0===r.enumerable}function R(t){return x(t).slice(8,-1)}function x(t){return t===e?"[object Undefined]":null===t?"[object Null]":Object.prototype.toString.call(t)}function B(t,e,r){var i;if(I(r)&&1===r.length&&(r=r[0]),I(r)){var s=r.pop();i='The "'+t+'" argument must be one of type '+r.join(", ")+", or "+s+". Received type "+typeof e}else i='The "'+t+'" argument must be of type '+r+". Received type "+typeof e;TypeError.call(this,i),this.name="TypeError [ERR_INVALID_ARG_TYPE]",this.code="ERR_INVALID_ARG_TYPE",this.message=i,Error.captureStackTrace&&Error.captureStackTrace(this,B)}function k(t,e){Error.call(this,e),this.name="Error ["+t+"]",this.code=t,this.message=e,Error.captureStackTrace&&Error.captureStackTrace(this,k)}N(B,TypeError),N(k,Error),t.assign=function(t){if(Object.assign)return Object.assign.apply(Object,arguments);for(var e=1;e<arguments.length;e++){var r=arguments[e];if(null!==r&&"object"==typeof r)for(var i=g(r),s=0;s<i.length;s++)t[i[s]]=r[i[s]]}return t},t.equals=function(t,e){return Object.is?Object.is(t,e):t===e?0!==t||1/t==1/e:t!=t&&e!=e},t.filter=function(t,e){if(t.filter)return t.filter(e);for(var r=[],i=0;i<t.length;i++)e(t[i])&&r.push(t[i]);return r},t.funcName=m,t.getOwnKeys=g,t.getOwnNonIndexProperties=function(t,e){var r,i,s,n=t.length>>>0===t.length,o=e?g(t):w(t),h=[];for(r=0;r<o.length;r++)i=o[r],n&&/^\d+$/.test(i)&&i>>>0<t.length||h.push(i);for(s=y(t),r=0;r<s.length;r++)i=s[r],e&&!P(t,i)||h.push(i);return h},t.getOwnPropertyNames=w,t.getOwnPropertySymbols=y,t.getPrototypeOf=function(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):null==t?e:b?t.__proto__:t.constructor?t.constructor.prototype:e},t.hasOwnProperty=S,t.isAnyArrayBuffer=v,t.isArray=I,t.isArrayBufferView=function(t){return!!h&&null!=t&&(ArrayBuffer.isView?ArrayBuffer.isView(t):v(t.buffer))},t.isBigIntObject=E,t.isBooleanObject=_,t.isBoxedPrimitive=function(t){return null!==t&&"object"==typeof t&&(O(t)||A(t)||_(t)||E(t)||M(t))},t.isDate=function(t){return t instanceof Date},t.isFloat32Array=function(t){return c&&t instanceof Float32Array},t.isFloat64Array=function(t){return d&&t instanceof Float64Array},t.isMap=function(t){return l&&t instanceof Map},t.isNaN=function(t){return t!=t},t.isNumberObject=O,t.isRegExp=function(t){return t instanceof RegExp},t.isSet=function(t){return p&&t instanceof Set},t.isStringObject=A,t.isSymbolObject=M,t.inherits=N,t.propertyIsEnumerable=P,t.stringify=function(t){switch(typeof t){case"undefined":case"boolean":case"number":case"symbol":return String(t);case"bigint":return t+"n";case"string":return t.length>20&&(t=t.substring(0,17)+"..."),'"'+t+'"';case"object":return null===t?"null":"["+R(t)+"]";case"function":return"["+m(t)+"]";default:return"["+typeof t+"]"}},t.toName=R,t.toString=x,t.ArgError=B,t.NodeError=k}],["bpkg","/lib/builtins/internal/comparisons.js",function(t,r,i,s,n,o){"use strict";var h=d(38,i),f=!0,a=!1,u=0,c=1,l=2,p=3;function b(t,e,r,i){if(t===e)return 0!==t||(!r||h.equals(t,e));if(r){if("object"!=typeof t)return"number"==typeof t&&h.isNaN(t)&&h.isNaN(e);if("object"!=typeof e||null===t||null===e)return!1;if(h.getPrototypeOf(t)!==h.getPrototypeOf(e))return!1}else{if(null===t||"object"!=typeof t)return(null===e||"object"!=typeof e)&&t==e;if(null===e||"object"!=typeof e)return!1}var s,n,o,f,a,d,b=h.toString(t);if(b!==h.toString(e))return!1;if(h.isArray(t))return t.length===e.length&&(s=h.getOwnNonIndexProperties(t,!0),n=h.getOwnNonIndexProperties(e,!0),s.length===n.length&&m(t,e,r,i,c,s));if("[object Object]"===b)return m(t,e,r,i,u);if(h.isDate(t)){if(t.getTime()!==e.getTime())return!1}else if(h.isRegExp(t)){if(d=e,(a=t).source!==d.source||a.flags!==d.flags)return!1}else if(t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else{if(h.isArrayBufferView(t)){if(r||!h.isFloat32Array(t)&&!h.isFloat64Array(t)){if(!function(t,e){return t.byteLength===e.byteLength&&E(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}(t,e))return!1}else if(!function(t,e){if(t.byteLength!==e.byteLength)return!1;for(var r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}(t,e))return!1;return s=h.getOwnNonIndexProperties(t,!0),n=h.getOwnNonIndexProperties(e,!0),s.length===n.length&&m(t,e,r,i,u,s)}if(h.isSet(t))return!(!h.isSet(e)||t.size!==e.size)&&m(t,e,r,i,l);if(h.isMap(t))return!(!h.isMap(e)||t.size!==e.size)&&m(t,e,r,i,p);if(h.isAnyArrayBuffer(t)){if(f=e,(o=t).byteLength!==f.byteLength||!E(new Uint8Array(o),new Uint8Array(f)))return!1}else if(h.isBoxedPrimitive(t)&&!function(t,e){if(h.isNumberObject(t))return h.isNumberObject(e)&&h.equals(t,e);if(h.isStringObject(t))return h.isStringObject(e)&&t.valueOf()===e.valueOf();if(h.isBooleanObject(t))return h.isBooleanObject(e)&&t.valueOf()===e.valueOf();return h.isBigIntObject(t)?h.isBigIntObject(e)&&t.valueOf()===e.valueOf():h.isSymbolObject(e)&&t.valueOf()===e.valueOf()}(t,e))return!1}return m(t,e,r,i,u)}function m(t,r,i,s,n,o){if(5===arguments.length){o=h.getOwnKeys(t);var f=h.getOwnKeys(r);if(o.length!==f.length)return!1}for(var a=0;a<o.length;a++)if(!h.hasOwnProperty(r,o[a]))return!1;if(i&&5===arguments.length){var d,m=h.getOwnPropertySymbols(t);if(0!==m.length){var I=0;for(a=0;a<m.length;a++){var E=m[a];if(h.propertyIsEnumerable(t,E)){if(!h.propertyIsEnumerable(r,E))return!1;o.push(E),I++}else if(h.propertyIsEnumerable(r,E))return!1}if(d=h.getOwnPropertySymbols(r),m.length!==d.length&&g(r,d).length!==I)return!1}else if(0!==(d=h.getOwnPropertySymbols(r)).length&&0!==g(r,d).length)return!1}if(0===o.length&&(n===u||n===c&&0===t.length||0===t.size))return!0;if(s===e)s={val1:_(),val2:_(),position:0};else{var O=s.val1.get(t);if(O!==e){var A=s.val2.get(r);if(A!==e)return O===A}s.position++}s.val1.set(t,s.position),s.val2.set(r,s.position);var M=function(t,r,i,s,n,o){var f,a=0;if(o===l){if(!function(t,e,r,i){var s,n,o,h=null;for(s=t.keys();!(n=s.next()).done;)if("object"==typeof(o=n.value)&&null!==o)null===h&&(h=new Set),h.add(o);else if(!e.has(o)){if(r)return!1;if(!y(t,e,o))return!1;null===h&&(h=new Set),h.add(o)}if(null!==h){for(s=e.keys();!(n=s.next()).done;)if("object"==typeof(o=n.value)&&null!==o){if(!w(h,o,r,i))return!1}else if(!r&&!t.has(o)&&!w(h,o,r,i))return!1;return 0===h.size}return!0}(t,r,i,n))return!1}else if(o===p){if(!function(t,r,i,s){var n,o,h=null;for(n=t.entries();!(o=n.next()).done;){var f=o.value[0],a=o.value[1];if("object"==typeof f&&null!==f)null===h&&(h=new Set),h.add(f);else{var u=r.get(f);if(u===e&&!r.has(f)||!b(a,u,i,s)){if(i)return!1;if(!S(t,r,f,a,s))return!1;null===h&&(h=new Set),h.add(f)}}}if(null!==h){for(n=r.entries();!(o=n.next()).done;){var c=o.value[0],d=o.value[1];if("object"==typeof c&&null!==c){if(!v(h,t,c,d,i,s))return!1}else if(!(i||t.has(c)&&b(t.get(c),d,!1,s)||v(h,t,c,d,!1,s)))return!1}return 0===h.size}return!0}(t,r,i,n))return!1}else if(o===c)for(;a<t.length;a++){if(!h.hasOwnProperty(t,a)){if(h.hasOwnProperty(r,a))return!1;for(var u=h.getOwnKeys(t);a<u.length;a++)if(f=u[a],!h.hasOwnProperty(r,f)||!b(t[f],r[f],i,n))return!1;return u.length===h.getOwnKeys(r).length}if(!h.hasOwnProperty(r,a)||!b(t[a],r[a],i,n))return!1}for(a=0;a<s.length;a++)if(f=s[a],!b(t[f],r[f],i,n))return!1;return!0}(t,r,i,o,s,n);return s.val1.delete(t),s.val2.delete(r),M}function g(t,e){return h.filter(e,function(e){return h.propertyIsEnumerable(t,e)})}function w(t,e,r,i){for(var s=t.keys();;){var n=s.next();if(n.done)break;var o=n.value;if(b(e,o,r,i))return t.delete(o),!0}return!1}function y(t,e,r){var i=I(r);return null!=i?i:e.has(i)&&!t.has(i)}function S(t,r,i,s,n){var o=I(i);if(null!=o)return o;var h=r.get(o);return!(h===e&&!r.has(o)||!b(s,h,!1,n))&&(!t.has(o)&&b(s,h,!1,n))}function v(t,e,r,i,s,n){for(var o=t.keys();;){var h=o.next();if(h.done)break;var f=h.value;if(b(r,f,s,n)&&b(i,e.get(f),s,n))return t.delete(f),!0}return!1}function I(t){switch(typeof t){case"undefined":return null;case"object":return e;case"symbol":return!1;case"string":t=Number(t);case"number":if(h.isNaN(t))return!1}return!0}function E(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function _(){return"function"==typeof Map?new Map:new O}function O(){this.keys=[],this.values=[]}O.prototype.get=function(t){var r=this.keys.indexOf(t);return-1!==r?this.values[r]:e},O.prototype.set=function(t,e){var r=this.keys.indexOf(t);if(-1===r)return this.keys.push(t),void this.values.push(e);this.values[r]=e},O.prototype.delete=function(t){var e=this.keys.indexOf(t);-1!==e&&(this.keys.splice(e,1),this.values.splice(e,1))},t.isDeepEqual=function(t,e){return b(t,e,a)},t.isDeepStrictEqual=function(t,e){return b(t,e,f)}}],["bcrypto","/lib/js/schnorr-legacy.js",function(t,e,r,s,n,o){"use strict";const h=d(28,r),f=d(41,r),a=d(8,r);r.exports=class{constructor(t,e){this.curve=t,this.hash=e,this.rng=new f(this.curve,this.encode.bind(this))}check(){if(3!==this.curve.p.andln(3))throw new Error(`Schnorr is not supported for ${this.curve.id}.`)}encode(t){h(null!=t&&!0===t._isBuffer);const{fieldSize:e}=this.curve;if(t.length===1+e)return t;if(t.length!==1+2*e)throw new Error("Invalid point.");const r=i.allocUnsafe(1+e);return r[0]=2|1&t[t.length-1],t.copy(r,1,1,1+e),r}hashInt(...t){const e=new this.hash;e.init();for(const r of t)e.update(r);let r=e.final();return r.length>this.curve.scalarSize&&(r=r.slice(0,this.curve.scalarSize)),a.decode(r,this.curve.endian).imod(this.curve.n)}hashNonce(t,e){return this.hashInt(t,e)}hashChallenge(t,e,r){return this.hashInt(t,this.encode(e),r)}sign(t,e){return h(null!=t&&!0===t._isBuffer),this.check(),this._sign(t,e)}_sign(t,e){const{n:r}=this.curve,s=this.curve.g,n=this.curve.decodeScalar(e);if(n.isZero()||n.cmp(r)>=0)throw new Error("Invalid private key.");const o=s.mulBlind(n),h=this.hashNonce(e,t);if(h.isZero())throw new Error("Signing failed (k' = 0).");const f=s.mulBlind(h);f.isSquare()||h.ineg().imod(r);const a=f.encodeX(),u=o.encode(),c=this.hashChallenge(a,u,t),d=h.add(c.mul(n)).imod(r);return i.concat([a,this.curve.encodeScalar(d)])}verify(t,e,r){if(h(null!=t&&!0===t._isBuffer),h(null!=e&&!0===e._isBuffer),h(null!=r&&!0===r._isBuffer),this.check(),e.length!==this.curve.fieldSize+this.curve.scalarSize)return!1;try{return this._verify(t,e,r)}catch(t){return!1}}_verify(t,e,r){const{p:i,n:s}=this.curve,n=this.curve.g,o=e.slice(0,this.curve.fieldSize),h=e.slice(this.curve.fieldSize),f=this.curve.decodeField(o),a=this.curve.decodeScalar(h),u=this.curve.decodePoint(r);if(f.cmp(i)>=0||a.cmp(s)>=0)return!1;const c=this.hashChallenge(o,r,t),d=n.jmulAdd(a,u,c.ineg().imod(s));return!!d.isSquare()&&!!d.eqX(f)}verifyBatch(t){h(Array.isArray(t)),this.check();for(const e of t){h(Array.isArray(e)&&3===e.length);const[t,r,i]=e;if(h(null!=t&&!0===t._isBuffer),h(null!=r&&!0===r._isBuffer),h(null!=i&&!0===i._isBuffer),r.length!==this.curve.fieldSize+this.curve.scalarSize)return!1}try{return this._verifyBatch(t)}catch(t){return!1}}_verifyBatch(t){const{n:e}=this.curve,r=this.curve.g,i=new Array(1+2*t.length),s=new Array(1+2*t.length),n=new a(0);this.rng.init(t),i[0]=r,s[0]=n;for(let r=0;r<t.length;r++){const[o,h,f]=t[r],a=h.slice(0,this.curve.fieldSize),u=h.slice(this.curve.fieldSize),c=this.curve.decodeSquare(a),d=this.curve.decodeScalar(u),l=this.curve.decodePoint(f);if(d.cmp(e)>=0)return!1;const p=this.hashChallenge(a,f,o),b=this.rng.generate(r),m=p.mul(b).imod(e);n.iadd(d.mul(b)).imod(e),i[1+2*r+0]=c,s[1+2*r+0]=b,i[1+2*r+1]=l,s[1+2*r+1]=m}return n.ineg().imod(e),this.curve.jmulAll(i,s).isInfinity()}}}],["bcrypto","/lib/js/batch-rng.js",function(t,e,r,s,n,o){"use strict";const h=d(28,r),f=d(8,r),a=d(42,r),u=d(44,r);r.exports=class{constructor(t,e=(t=>t)){this.curve=t,this.encode=e,this.hash=new u,this.chacha=new a,this.key=i.alloc(32,0),this.iv=i.alloc(8,0),this.cache=[new f(1),new f(1)]}init(t){h(Array.isArray(t)),this.hash.init();for(const[e,r,i]of t)this.hash.update(u.digest(e)),this.hash.update(r),this.hash.update(this.encode(i));return this.key=this.hash.final(),this.cache[0]=new f(1),this.cache[1]=new f(1),this}encrypt(t){const e=2*this.curve.scalarSize,r=i.alloc(e,0),s=r.slice(0,this.curve.scalarSize),n=r.slice(this.curve.scalarSize);return this.chacha.init(this.key,this.iv,t),this.chacha.encrypt(r),[this.curve.decodeScalar(s),this.curve.decodeScalar(n)]}refresh(t){let e=0;for(;;){this.iv[4]=e,this.iv[5]=e>>>8,this.iv[6]=e>>>16,this.iv[7]=e>>>24,e+=1;const[r,i]=this.encrypt(t);if(!(r.isZero()||r.cmp(this.curve.n)>=0||i.isZero()||i.cmp(this.curve.n)>=0)){this.cache[0]=r,this.cache[1]=i;break}}}generate(t){return h(t>>>0===t),1&t&&this.refresh(t>>>1),this.cache[1&t]}}}],["bcrypto","/lib/chacha20-browser.js",function(t,e,r,i,s,n){"use strict";r.exports=d(43,r)}],["bcrypto","/lib/js/chacha20.js",function(t,e,r,s,n,o){"use strict";const h=d(28,r),f=0===new Int8Array(new Int16Array([1]).buffer)[0];class a{constructor(){this.state=new Uint32Array(16),this.stream=new Uint32Array(16),this.bytes=new Uint8Array(this.stream.buffer),this.pos=-1,f&&(this.bytes=i.alloc(64))}init(t,e,r){if(null==r&&(r=0),h(null!=t&&!0===t._isBuffer),h(null!=e&&!0===e._isBuffer),h(Number.isSafeInteger(r)),16!==t.length&&32!==t.length)throw new RangeError("Invalid key size.");if(e.length>=24&&(t=a.derive(t,e.slice(0,16)),e=e.slice(16)),this.state[0]=1634760805,this.state[1]=t.length<32?824206446:857760878,this.state[2]=t.length<32?2036477238:2036477234,this.state[3]=1797285236,this.state[4]=l(t,0),this.state[5]=l(t,4),this.state[6]=l(t,8),this.state[7]=l(t,12),this.state[8]=l(t,16%t.length),this.state[9]=l(t,20%t.length),this.state[10]=l(t,24%t.length),this.state[11]=l(t,28%t.length),this.state[12]=r>>>0,8===e.length)this.state[13]=r/4294967296>>>0,this.state[14]=l(e,0),this.state[15]=l(e,4);else if(12===e.length)this.state[13]=l(e,0),this.state[14]=l(e,4),this.state[15]=l(e,8);else{if(16!==e.length)throw new RangeError("Invalid nonce size.");this.state[12]=l(e,0),this.state[13]=l(e,4),this.state[14]=l(e,8),this.state[15]=l(e,12)}return this.pos=0,this}encrypt(t){if(h(null!=t&&!0===t._isBuffer),-1===this.pos)throw new Error("Context is not initialized.");for(let e=0;e<t.length;e++)0==(63&this.pos)&&(this._block(),this.pos=0),t[e]^=this.bytes[this.pos++];return t}_block(){for(let t=0;t<16;t++)this.stream[t]=this.state[t];for(let t=0;t<10;t++)u(this.stream,0,4,8,12),u(this.stream,1,5,9,13),u(this.stream,2,6,10,14),u(this.stream,3,7,11,15),u(this.stream,0,5,10,15),u(this.stream,1,6,11,12),u(this.stream,2,7,8,13),u(this.stream,3,4,9,14);for(let t=0;t<16;t++)this.stream[t]+=this.state[t];if(f)for(let t=0;t<16;t++)p(this.bytes,this.stream[t],4*t);this.state[12]+=1,0===this.state[12]&&(this.state[13]+=1)}destroy(){for(let t=0;t<16;t++)this.state[t]=0,this.stream[t]=0;if(f)for(let t=0;t<64;t++)this.bytes[t]=0;return this.pos=-1,this}static derive(t,e){if(h(null!=t&&!0===t._isBuffer),h(null!=e&&!0===e._isBuffer),16!==t.length&&32!==t.length)throw new RangeError("Invalid key size.");if(16!==e.length)throw new RangeError("Invalid nonce size.");const r=new Uint32Array(16);r[0]=1634760805,r[1]=t.length<32?824206446:857760878,r[2]=t.length<32?2036477238:2036477234,r[3]=1797285236,r[4]=l(t,0),r[5]=l(t,4),r[6]=l(t,8),r[7]=l(t,12),r[8]=l(t,16%t.length),r[9]=l(t,20%t.length),r[10]=l(t,24%t.length),r[11]=l(t,28%t.length),r[12]=l(e,0),r[13]=l(e,4),r[14]=l(e,8),r[15]=l(e,12);for(let t=0;t<10;t++)u(r,0,4,8,12),u(r,1,5,9,13),u(r,2,6,10,14),u(r,3,7,11,15),u(r,0,5,10,15),u(r,1,6,11,12),u(r,2,7,8,13),u(r,3,4,9,14);const s=i.alloc(32);return p(s,r[0],0),p(s,r[1],4),p(s,r[2],8),p(s,r[3],12),p(s,r[12],16),p(s,r[13],20),p(s,r[14],24),p(s,r[15],28),s}}function u(t,e,r,i,s){t[e]+=t[r],t[s]=c(t[s]^t[e],16),t[i]+=t[s],t[r]=c(t[r]^t[i],12),t[e]+=t[r],t[s]=c(t[s]^t[e],8),t[i]+=t[s],t[r]=c(t[r]^t[i],7)}function c(t,e){return t<<e|t>>>32-e}function l(t,e){return t[e++]+256*t[e++]+65536*t[e++]+16777216*t[e]}function p(t,e,r){return t[r++]=e,e>>>=8,t[r++]=e,e>>>=8,t[r++]=e,e>>>=8,t[r++]=e,r}a.native=0,r.exports=a}],["bcrypto","/lib/sha256-browser.js",function(t,e,r,i,s,n){"use strict";r.exports=d(29,r)}],["bcrypto","/lib/hmac-drbg.js",function(t,e,r,s,n,o){"use strict";const h=d(28,r),f=281474976710656,a=i.from([0]),u=i.from([1]);class c{constructor(t,e,r,s){h(t&&"string"==typeof t.id),this.hash=t,this.minEntropy="SHA1"===t.id?10:24,this.K=i.allocUnsafe(t.size),this.V=i.allocUnsafe(t.size),this.rounds=0,e&&this.init(e,r,s)}init(t,e=null,r=null){h(null!=t&&!0===t._isBuffer),h(!e||null!=e&&!0===e._isBuffer),h(!r||null!=r&&!0===r._isBuffer);for(let t=0;t<this.V.length;t++)this.K[t]=0,this.V[t]=1;const i=l(t,e,r);if(i.length<this.minEntropy)throw new Error("Not enough entropy.");return this.update(i),this.rounds=1,this}reseed(t,e=null){if(h(null!=t&&!0===t._isBuffer),h(!e||null!=e&&!0===e._isBuffer),0===this.rounds)throw new Error("DRBG not initialized.");const r=l(t,e);if(r.length<this.minEntropy)throw new Error("Not enough entropy.");return this.update(r),this.rounds=1,this}generate(t,e=null){if(h(t>>>0===t),h(!e||null!=e&&!0===e._isBuffer),0===this.rounds)throw new Error("DRBG not initialized.");if(this.rounds>f)throw new Error("Reseed is required.");e&&0===e.length&&(e=null),e&&this.update(e);const r=Math.ceil(t/this.hash.size),s=i.allocUnsafe(r*this.hash.size);for(let t=0;t<r;t++)this.V=this.mac(this.V),this.V.copy(s,t*this.hash.size);return this.update(e),this.rounds+=1,s.slice(0,t)}randomBytes(t){return this.generate(t)}mac(t){return this.hash.mac(t,this.K)}hmac(){return this.hash.hmac().init(this.K)}update(t=null){h(!t||null!=t&&!0===t._isBuffer);const e=this.hmac();if(e.update(this.V),e.update(a),t&&e.update(t),this.K=e.final(),this.V=this.mac(this.V),t){const e=this.hmac();e.update(this.V),e.update(u),e.update(t),this.K=e.final(),this.V=this.mac(this.V)}return this}}function l(t,e=null,r=null){if(!e&&!r)return t;let s=t.length,n=0;e&&(s+=e.length),r&&(s+=r.length);const o=i.allocUnsafe(s);return n+=t.copy(o,n),e&&(n+=e.copy(o,n)),r&&r.copy(o,n),o}c.native=0,r.exports=c}],["bcrypto","/lib/js/elliptic.js",function(t,r,s,n,o,h){"use strict";const{custom:f}=d(10,s),a=d(8,s),u={AFFINE:0,JACOBIAN:1,PROJECTIVE:2,EXTENDED:3},c=[-3,-1,-5,-7,0,7,5,1,3];class l{constructor(t,e,r){this.Point=null,this.id=null,this.ossl=null,this.type="base",this.endian="be",this.hash=null,this.prefix=null,this.context=!1,this.prime=null,this.p=null,this.red=null,this.fieldSize=0,this.fieldBits=0,this.signBit=0,this.n=null,this.h=null,this.q=null,this.z=null,this.g=null,this.nh=null,this.scalarSize=0,this.scalarBits=0,this.mask=null,this.zero=null,this.one=null,this.two=null,this.three=null,this.four=null,this.i2=null,this.i3=null,this.i4=null,this.i6=null,this.endo=null,this.hi=null,this._init(t,e,r)}_init(t,e,r){return T("function"==typeof t),T("string"==typeof e),T(r&&"object"==typeof r),T(null==r.red||r.red instanceof a.Red),T(null!=r.p,"Must pass a prime."),T(null==r.id||"string"==typeof r.id),T(null==r.ossl||"string"==typeof r.ossl),T(null==r.endian||"string"==typeof r.endian),T(null==r.hash||"string"==typeof r.hash),T(null==r.prefix||"string"==typeof r.prefix),T(null==r.context||"boolean"==typeof r.context),T(null==r.prime||"string"==typeof r.prime),this.Point=t,this.id=r.id||null,this.ossl=r.ossl||null,this.type=e,this.endian=r.endian||("short"===e?"be":"le"),this.hash=r.hash||null,this.prefix=r.prefix?i.from(r.prefix,"binary"):null,this.context=r.context||!1,this.prime=r.prime||null,this.p=a.fromJSON(r.p),r.red?this.red=r.red:(this.red=r.prime?a.red(r.prime):a.mont(this.p),this.red.precompute()),this.fieldSize=this.p.byteLength(),this.fieldBits=this.p.bitLength(),this.signBit=8*this.fieldSize-1,"edwards"===this.type&&this.p.testn(this.signBit)&&(this.fieldSize+=1,this.signBit+=8),this.n=a.fromJSON(r.n||"0"),this.h=a.fromJSON(r.h||"1"),this.q=this.n.mul(this.h),this.z=a.fromJSON(r.z||"0").toRed(this.red),this.g=null,this.nh=this.n.ushrn(1),this.scalarSize=Math.max(this.n.byteLength(),this.p.byteLength()),this.scalarBits=this.n.bitLength(),this.mask=null,this.zero=new a(0).toRed(this.red),this.one=new a(1).toRed(this.red),this.two=new a(2).toRed(this.red),this.three=new a(3).toRed(this.red),this.four=new a(4).toRed(this.red),this.i2=this.two.redInvert(),this.i3=this.three.redInvert(),this.i4=this.i2.redSqr(),this.i6=this.i2.redMul(this.i3),this.endo=null,this.hi=null,this._scale=L(this._scale,this),this.isIsomorphic=L(this.isIsomorphic,this),this.isIsogenous=L(this.isIsogenous,this),T(this.p.sign()>0&&this.p.isOdd()),T(this.n.sign()>=0),T(this.h.sign()>0&&this.h.cmpn(255)<=0),T("be"===this.endian||"le"===this.endian),this}_finalize(t){return T(t&&"object"==typeof t),this.mask=new E(this),this.g=t.g?this.pointFromJSON(t.g):this.point(),this}_simpleMul(t,e){T(t instanceof p),T(e instanceof a),T(!e.red);const r=e.bitLength();e.isNeg()&&(t=t.neg());let i=this.jpoint();for(let s=r-1;s>=0;s--){const r=e.utestn(s);i=i.dbl(),1===r&&(i=i.add(t))}return i}_simpleMulAdd(t,e){T(Array.isArray(t)),T(Array.isArray(e)),T(t.length===e.length);const r=t.length,i=new Array(r),s=e;let n=0;for(let s=0;s<r;s++){const r=t[s],o=e[s];if(T(r instanceof p),T(o instanceof a),T(!o.red),s>0&&r.type!==t[s-1].type)throw new Error("Cannot mix points.");i[s]=o.isNeg()?r.neg():r,n=Math.max(n,o.bitLength())}let o=this.jpoint();for(let t=n-1;t>=0;t--){o=o.dbl();for(let e=0;e<r;e++){const r=i[e];1===s[e].utestn(t)&&(o=o.add(r))}}return o}_constMul(t,e,r){return T(t instanceof p),this.n.isZero()?this._simpleMul(t,e):"short"===this.type&&0===this.h.cmpn(1)?this._coZLadderMul(t,e):this._ladderMul(t,e)}_ladderMul(t,e){T(t instanceof p),T(e instanceof a),T(!e.red);const[r,i,s]=function(t,e){T(t instanceof a),T(e instanceof a);const r=t.abs().add(e),i=r.add(e),s=r.bitLength(),n=e.bitLength();r.cinject(i,s-n-1>>>31);const o=1&t.isNeg(),h=r.bitLength(),f=r.toArray("le");return[o,h,f]}(e,this.q);let n=t.toJ().clone(),o=this.jpoint().clone(),h=0;for(let t=i-1;t>=0;t--){const e=s[t>>3]>>(7&t)&1;n.swap(o,h^e),n=n.uadd(o),o=o.udbl(),h=e}return n.swap(o,h),o.swap(o.neg(),r),o}_coZLadderMul(t,e){T(t instanceof p),T(e instanceof a),T(!e.red);const r=t.toJ().clone(),[i,s,n,o]=function(t,e){T(t instanceof a),T(e instanceof a);const r=t.mod(e),i=e.sub(r),s=r.bitLength(),n=i.bitLength(),o=s-n>>>31;r.cinject(i,o);const h=r.bitLength(),f=r.toArray("le"),u=r.ceq(e.subn(1));return[o,h,f,u]}(e,this.n);let[h,f]=r.zdblu(),u=0;for(let t=s-2;t>=0;t--){const e=n[t>>3]>>(7&t)&1;h.swap(f,u^e),[h,f]=f.zaddc(h),[f,h]=h.zaddu(f),u=e}return h.swap(f,u),f.swap(r.neg(),o),f.swap(f.neg(),i),f}_fixedNafMul(t,e){T(t instanceof p),T(e instanceof a),T(t.pre);const{step:r,points:i}=t._getDoubles(0,0),s=function(t,e,r,i){T(i>>>0===i);const s=B(t,e,r),n=Math.ceil(s.length/i),o=new Array(n);let h=0;for(let t=0;t<s.length;t+=i){let e=0;for(let r=t+i-1;r>=t;r--)e=(e<<1)+s[r];o[h++]=e}return T(h===n),o}(e,1,e.bitLength()+1,r),n=((1<<r+1)-(r%2==0?2:1))/3;let o=this.jpoint(),h=this.jpoint();for(let t=n;t>0;t--){for(let e=0;e<s.length;e++){const r=s[e];r===t?h=h.add(i[e]):r===-t&&(h=h.add(i[e].neg()))}o=o.add(h)}return o}_wnafMul(t,e,r){T(e instanceof p),T(r instanceof a);const{width:i,points:s}=e._safeNAF(t),n=B(r,i,r.bitLength()+1);let o=this.jpoint();for(let t=n.length-1;t>=0;t--){let e=0;for(;t>=0&&0===n[t];t--)e+=1;if(t>=0&&(e+=1),o=o.dblp(e),t<0)break;const r=n[t];T(0!==r),o=r>0?o.add(s[r-1>>1]):o.add(s[-r-1>>1].neg())}return o}_wnafMulAdd(t,e,r){T(t>>>0===t),T(Array.isArray(e)),T(Array.isArray(r)),T(e.length===r.length);const i=e.length,s=new Array(i),n=new Array(i),o=new Array(i);let h=0;for(let t=0;t<i;t++){const i=e[t],f=r[t];if(T(i instanceof p),T(f instanceof a),t>0&&i.type!==e[t-1].type)throw new Error("Cannot mix points.");s[t]=null,n[t]=null,o[t]=0,h=Math.max(h,f.bitLength()+1)}let f=null,u=null,c=0;for(let t=0;t<i;t++){const i=e[t],o=r[t],a=i._getNAF(0);a?(s[c]=a.points,n[c]=B(o,a.width,h),c+=1):f?(s[c]=f._getJNAF(i),n[c]=k(u,o,h),f=null,u=null,c+=1):(f=i,u=o)}if(f){const e=f._safeNAF(t);s[c]=e.points,n[c]=B(u,e.width,h),c+=1}let d=this.jpoint();for(let t=h-1;t>=0;t--){let e=0;for(;t>=0;){let r=!0;for(let e=0;e<c;e++)o[e]=n[e][t],0!==o[e]&&(r=!1);if(!r)break;e+=1,t-=1}if(t>=0&&(e+=1),d=d.dblp(e),t<0)break;for(let t=0;t<c;t++){const e=o[t];0!==e&&(d=e>0?d.add(s[t][e-1>>1]):d.add(s[t][-e-1>>1].neg()))}}return d}_endoWnafMulAdd(t,e){throw new Error("Not implemented.")}_scale(t,e){switch(T(t instanceof l),T(t.p.eq(this.p)),t.type){case"short":return this._scaleShort(t,e);case"mont":return this._scaleMont(t,e);case"edwards":return this._scaleEdwards(t,e);default:throw new Error("Not implemented.")}}_scaleShort(t,e){throw new Error("Not implemented.")}_scaleMont(t,e){throw new Error("Not implemented.")}_scaleEdwards(t,e){throw new Error("Not implemented.")}isElliptic(){throw new Error("Not implemented.")}jinv(){throw new Error("Not implemented.")}precompute(t){return T(!this.g.isInfinity(),"Must have base point."),T(!this.n.isZero(),"Must have order."),this.g.precompute(this.n.bitLength()+1,t),this}scalar(t,e,r){const i=new a(t,e,r);return T(!i.red),this.n.isZero()?i:i.imod(this.n)}field(t,e,r){const i=a.cast(t,e,r);return i.red?i.forceRed(this.red):i.toRed(this.red)}point(t,e){throw new Error("Not implemented.")}jpoint(t,e,r){throw new Error("Not implemented.")}xpoint(t,e){throw new Error("Not implemented.")}cpoint(t,e,r,i){if(T(t instanceof a),T(e instanceof a),T(r instanceof a),T(i instanceof a),e.isZero()||i.isZero())return this.point();const s=e.redMul(i).redInvert(),n=t.redMul(i).redMul(s),o=r.redMul(e).redMul(s);return this.point(n,o)}solveX2(t){throw new Error("Not implemented.")}solveX(t){return this.solveX2(t).redSqrt()}solveY2(t){throw new Error("Not implemented.")}solveY(t){return this.solveY2(t).redSqrt()}validate(t){throw new Error("Not implemented.")}pointFromX(t,e){throw new Error("Not implemented.")}pointFromY(t,e){throw new Error("Not implemented.")}isIsomorphic(t){throw new Error("Not implemented.")}isIsogenous(t){throw new Error("Not implemented.")}pointFromShort(t){throw new Error("Not implemented.")}pointFromMont(t,e){throw new Error("Not implemented.")}pointFromEdwards(t){throw new Error("Not implemented.")}pointFromUniform(t){throw new Error("Not implemented.")}pointToUniform(t){throw new Error("Not implemented.")}pointFromHash(t,e=!1){T(null!=t&&!0===t._isBuffer),T("boolean"==typeof e);const r=this.fieldBits+7>>>3;if(t.length!==2*r)throw new Error("Invalid hash size.");const i=t.slice(0,r),s=t.slice(r),n=this.decodeUniform(i),o=this.decodeUniform(s),h=this.pointFromUniform(n),f=this.pointFromUniform(o),a=h.uadd(f);return e?a.mulH():a}pointToHash(t,e){for(T(t instanceof this.Point);;){const r=this.randomField(e),s=this.pointFromUniform(r);if(s.neg().eq(s))continue;const n=t.uadd(s.neg()),o=C(e);let h;try{h=this.pointToUniform(n,o)}catch(t){if("Invalid point."===t.message)continue;throw t}const f=this.encodeUniform(r,e),a=this.encodeUniform(h,e);return i.concat([f,a])}}randomScalar(t){const e=this.n.isZero()?this.p:this.n;return a.random(t,1,e)}randomField(t){return a.random(t,1,this.p).toRed(this.red)}randomPoint(t){let e;for(;;){const r=this.randomField(t),i=0!=(1&C(t));try{e=this.pointFromX(r,i)}catch(t){continue}return T(e.validate()),e.mulH()}}mulAll(t,e){return this.jmulAll(t,e)}mulAllSimple(t,e){return this.jmulAllSimple(t,e)}jmulAll(t,e){return T(Array.isArray(t)),T(0===t.length||t[0]instanceof p),this.endo&&t.length>0&&t[0].type===u.AFFINE?this._endoWnafMulAdd(t,e):this._wnafMulAdd(1,t,e)}jmulAllSimple(t,e){return this._simpleMulAdd(t,e)}mulH(t){return T(t instanceof a),this.imulH(t.clone())}imulH(t){T(t instanceof a),T(!t.red);const e=this.h.word(0);if(0==(e&e-1)){const e=this.h.bitLength();return t.iushln(e-1).imod(this.n)}return t.imuln(e).imod(this.n)}reduce(t){return this.mask.reduce(t)}splitHash(t){return this.mask.splitHash(t)}clamp(t){return this.mask.clamp(t)}encodeField(t){return T(t instanceof a),T(!t.red),t.encode(this.endian,this.fieldSize)}decodeField(t){if(T(null!=t&&!0===t._isBuffer),t.length!==this.fieldSize)throw new Error("Invalid field element size.");return a.decode(t,this.endian)}encodeScalar(t){return T(t instanceof a),T(!t.red),t.encode(this.endian,this.scalarSize)}decodeScalar(t){if(T(null!=t&&!0===t._isBuffer),t.length!==this.scalarSize)throw new Error("Invalid scalar size.");return a.decode(t,this.endian)}encodeUniform(t,e){T(t instanceof a);const r=this.fieldBits,i=r+7>>>3,s=8*i-r,n=t.fromRed();if(null!=e&&0!==s){const t=a.randomBits(e,s);n.iuor(t.iushln(r))}return n.encode(this.endian,i)}decodeUniform(t){T(null!=t&&!0===t._isBuffer);const e=this.fieldBits,r=e+7>>>3;if(t.length!==r)throw new Error("Invalid field size.");return a.decode(t,this.endian).iumaskn(e).toRed(this.red)}encodePoint(t,e){return T(t instanceof p),t.encode(e)}decodePoint(t){throw new Error("Not implemented.")}encodeX(t){throw new Error("Not implemented.")}decodeX(t){throw new Error("Not implemented.")}decodeEven(t){throw new Error("Not implemented.")}decodeSquare(t){throw new Error("Not implemented.")}toShort(){throw new Error("Not implemented.")}toMont(t){throw new Error("Not implemented.")}toEdwards(t){throw new Error("Not implemented.")}pointToJSON(t,e){return T(t instanceof p),t.toJSON(e)}pointFromJSON(t){throw new Error("Not implemented.")}toJSON(t){let r,i,s,n,o;return"edwards"===this.type&&(r=this.prefix?this.prefix.toString():null,i=this.context),this.n.isZero()||(s=this.n.toJSON()),this.z.isZero()||(n=this.z.fromRed(),this.z.redIsHigh()&&n.isub(this.p),n=n.toString(16)),this.endo&&(o=this.endo.toJSON()),{id:this.id,ossl:this.ossl,type:this.type,endian:this.endian,hash:this.hash,prefix:r,context:i,prime:this.prime,p:this.p.toJSON(),a:e,b:e,d:e,n:s,h:this.h.toString(16),s:e,z:n,c:e,g:this.g.toJSON(t),endo:o}}static fromJSON(t){return new this(t)}}class p{constructor(t,e){T(t instanceof l),T(e>>>0===e),this.curve=t,this.type=e,this.pre=null}_init(){throw new Error("Not implemented.")}_getNAF(t){if(T(t>>>0===t),this.pre&&this.pre.naf)return this.pre.naf;if(0===t)return null;const e=1<<t-1,r=new Array(e),i=1===e?null:this.dbl();r[0]=this;for(let t=1;t<e;t++)r[t]=r[t-1].add(i);return new O(t,r)}_safeNAF(t){return this._getNAF(t)}_getDoubles(t,e){if(T(t>>>0===t),T(e>>>0===e),this.pre&&this.pre.doubles)return this.pre.doubles;if(0===t)return null;const r=Math.ceil(e/t)+1,i=new Array(r);let s=this,n=0;i[n++]=s;for(let r=0;r<e;r+=t){for(let e=0;e<t;e++)s=s.dbl();i[n++]=s}return T(n===r),new A(t,i)}_getBeta(){return null}_getBlinding(t){if(this.pre&&this.pre.blinding)return this.pre.blinding;if(!t)return null;if(this.curve.n.isZero())return null;const e=this.curve.randomScalar(t),r=this.mul(e);return new M(e,r)}_hasDoubles(t){if(T(t instanceof a),!this.pre||!this.pre.doubles)return!1;const{step:e,points:r}=this.pre.doubles,i=t.bitLength()+1;return r.length>=Math.ceil(i/e)+1}_getJNAF(t){return T(t instanceof p),T(t.type===this.type),[this,this.add(t),this.add(t.neg()),t]}_blind(t,e){if(T(t instanceof a),T(!t.red),this.pre&&this.pre.blinding){const{blind:e,unblind:r}=this.pre.blinding;return[this,t.sub(e),r]}if(!e)return[this,t,null];if(this.pre){if(this.curve.n.isZero())return[this,t,null];return[this,this.curve.randomScalar(e).mul(this.curve.n).iadd(t),null]}return[this.randomize(e),t,null]}clone(){throw new Error("Not implemented.")}swap(t,e){throw new Error("Not implemented.")}precompute(t,e){return T(t>>>0===t),this.pre||(this.pre=new _),this.pre.naf||(this.pre.naf=this._getNAF(8)),this.pre.doubles||(this.pre.doubles=this._getDoubles(4,t)),this.pre.beta||(this.pre.beta=this._getBeta()),this.pre.blinding||(this.pre.blinding=this._getBlinding(e)),this}validate(){return this.curve.validate(this)}normalize(){return this}scale(t){throw new Error("Not implemented.")}randomize(t){const e=this.curve.randomField(t);return this.scale(e)}neg(){throw new Error("Not implemented.")}add(t){throw new Error("Not implemented.")}sub(t){return T(t instanceof p),this.add(t.neg())}dbl(){throw new Error("Not implemented.")}dblp(t){T(t>>>0===t);let e=this;for(let r=0;r<t;r++)e=e.dbl();return e}uadd(t){throw new Error("Not implemented.")}usub(t){return T(t instanceof p),this.uadd(t.neg())}udbl(){throw new Error("Not implemented.")}zaddu(t){throw new Error("Not implemented.")}zaddc(t){throw new Error("Not implemented.")}zdblu(){throw new Error("Not implemented.")}diffAdd(t,e){throw new Error("Not implemented.")}diffAddDbl(t,e){throw new Error("Not implemented.")}recover(){throw new Error("Not implemented.")}getX(){throw new Error("Not implemented.")}getY(){throw new Error("Not implemented.")}eq(t){throw new Error("Not implemented.")}isInfinity(){throw new Error("Not implemented.")}isOdd(){throw new Error("Not implemented.")}isEven(){throw new Error("Not implemented.")}isSquare(){throw new Error("Not implemented.")}eqX(t){throw new Error("Not implemented.")}eqXToP(t){throw new Error("Not implemented.")}isSmall(){return!this.isInfinity()&&this.jmulH().isInfinity()}hasTorsion(){return!this.isInfinity()&&!this.jmul(this.curve.n).isInfinity()}mul(t){return this.jmul(t)}muln(t){return this.jmuln(t)}mulSimple(t){return this.jmulSimple(t)}mulBlind(t,e){return this.jmulBlind(t,e)}mulConst(t,e){return this.jmulConst(t,e)}mulAdd(t,e,r){return this.jmulAdd(t,e,r)}mulAddSimple(t,e,r){return this.jmulAddSimple(t,e,r)}mulH(){return this.jmulH()}div(t){return this.jdiv(t)}divn(t){return this.jdivn(t)}divH(){return this.jdivH()}jmul(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo&&this.type===u.AFFINE?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(4,this,t)}jmuln(t){return T((0|t)===t),this.jmulSimple(new a(t))}jmulSimple(t){return this.curve._simpleMul(this,t)}jmulBlind(t,e=null){const[r,i,s]=this._blind(t,e),n=r.jmul(i);return s?n.add(s):n}jmulConst(t,e=null){const[r,i,s]=this._blind(t,e),n=this.curve._constMul(r,i,e);return s?n.uadd(s):n}jmulAdd(t,e,r){return this.curve.endo&&this.type===u.AFFINE?this.curve._endoWnafMulAdd([this,e],[t,r]):this.curve._wnafMulAdd(1,[this,e],[t,r])}jmulAddSimple(t,e,r){return this.curve._simpleMulAdd([this,e],[t,r])}jmulH(){const t=this.curve.h.word(0);if(0==(t&t-1)){const t=this.curve.h.bitLength();return this.toJ().dblp(t-1)}return this.jmulSimple(this.curve.h)}jdiv(t){return T(t instanceof a),T(!t.red),this.jmul(t.invert(this.curve.n))}jdivn(t){return T(!this.curve.n.isZero()),0===this.curve.h.cmpn(t)?this.jdivH():this.jdiv(new a(t))}jdivH(){return this.curve.n.isZero()?this.toJ():0===this.curve.h.cmpn(1)?this.toJ():(null===this.curve.hi&&(this.curve.hi=this.curve.h.invert(this.curve.n)),this.jmul(this.curve.hi))}ladder(t){throw new Error("Not implemented.")}ladderSimple(t){throw new Error("Not implemented.")}ladderBlind(t,e){throw new Error("Not implemented.")}ladderConst(t,e){throw new Error("Not implemented.")}toP(){return this.normalize()}toJ(){return this}toX(){return this}encode(t){throw new Error("Not implemented.")}static decode(t,e){throw new Error("Not implemented.")}encodeX(){throw new Error("Not implemented.")}static decodeX(t,e){throw new Error("Not implemented.")}static decodeEven(t,e){throw new Error("Not implemented.")}static decodeSquare(t,e){throw new Error("Not implemented.")}toJSON(t){throw new Error("Not implemented.")}static fromJSON(t,e){throw new Error("Not implemented.")}[f](){return"<Point>"}}class b extends l{constructor(t){super(m,"short",t),this.a=a.fromJSON(t.a).toRed(this.red),this.b=a.fromJSON(t.b).toRed(this.red),this.c=a.fromJSON(t.c||"0").toRed(this.red),this.ai=this.a.isZero()?this.zero:this.a.redInvert(),this.zi=this.z.isZero()?this.zero:this.z.redInvert(),this.zeroA=this.a.isZero(),this.threeA=this.a.eq(this.three.redNeg()),this.redN=this.n.toRed(this.red),this.smallGap=!1,this._finalize(t)}_finalize(t){return super._finalize(t),null!=t.endo?this.endo=N.fromJSON(this,t.endo):this.endo=this._getEndomorphism(),!this.n.isZero()&&this.n.cmp(this.p)<0&&(this.smallGap=this.p.div(this.n).cmpn(100)<=0),this}static _isomorphism(t,e,r,i){T(t instanceof a),T(e instanceof a),T(r instanceof a),T(null==i||"boolean"==typeof i),T(!t.isZero()&&!e.isZero());const s=r.redDiv(t),n=s.redSqrt();if(null!=i?n.redIsOdd()!==i&&n.redINeg():1!==n.redJacobi()&&n.redINeg(),1!==n.redJacobi())throw new Error("Invalid `a` coefficient.");const o=s.redMul(n),h=t.redMul(s),f=e.redMul(o);return T(h.eq(r)),[h,f]}_short(t,e){return b._isomorphism(this.a,this.b,t,e)}_mont(t,e){const[r,i]=this._findRS(e),s=i.redInvert(),n=r.redMuln(3).redMul(s);return null!=t?w._isomorphism(n,s,t):[n,s]}_edwards(t,e){const[r,i]=this._findRS(e),s=r.redMuln(3),n=i.redMuln(2),o=s.redAdd(n),h=s.redSub(n);return null!=t?v._isomorphism(o,h,t):[o,h]}_findRS(t){T(null==t||"boolean"==typeof t),T(this.h.word(0)>=4),T(!this.n.isZero());const e=this.one.redNeg();let r;for(;;){e.redIAdd(this.one);try{r=this.pointFromX(e)}catch(t){continue}if(!(r=r.mul(this.n)).isInfinity()&&r.y.isZero())break}const i=r.x,s=i.redSqr().redMuln(3).redIAdd(this.a).redSqrt();return null!=t&&s.redIsOdd()!==t&&s.redINeg(),[i,s]}_scale0(t,e){const r=this.a.redDiv(this.field(t)),i=this.b.redDiv(this.field(e)),s=r.redSqrt();r.redMul(s).eq(i)||s.redINeg(),T(r.redMul(s).eq(i));const n=s.redSqrt(),o=s.redMul(n);return T(!n.isZero()),[s,o]}_scale1(t,e){const r=this.g.x.redDiv(this.field(t)),i=this.g.y.redDiv(this.field(e)),s=r.redSqrt();return r.redMul(s).eq(i)||s.redINeg(),T(r.redMul(s).eq(i)),T(!s.isZero()),[r,i]}_scaleShort(t){return T(t instanceof b),this.g.isInfinity()||t.g.isInfinity()?this._scale0(t.a,t.b):this._scale1(t.g.x,t.g.y)}_scaleMont(t){if(T(t instanceof w),this.g.isInfinity()||t.g.isInfinity()){const[e,r]=t._short();return this._scale0(e,r)}const{x:e,y:r}=t.g,i=e.redAdd(t.a3).redMul(t.bi),s=r.redMul(t.bi);return this._scale1(i,s)}_scaleEdwards(t){if(T(t instanceof v),this.g.isInfinity()||t.g.isInfinity()){const[e,r]=t._short();return this._scale0(e,r)}const{x:e,y:r,z:i}=t.g,s=t.a.redMuln(5),n=t.d.redMuln(5),o=t.d.redSub(t.a),h=n.redSub(t.a),f=t.d.redSub(s),a=r.redAdd(i),u=r.redSub(i),c=h.redMul(r).redIAdd(f.redMul(i)),d=u.redMuln(12),l=o.redMul(a).redMul(i),p=u.redMul(e).redIMuln(4),b=d.redMul(p).redInvert(),m=c.redMul(p).redMul(b),g=l.redMul(d).redMul(b);return this._scale1(m,g)}_getEndomorphism(t=0){if(this.n.isZero()||this.g.isInfinity())return null;if(!this.zeroA||1!==this.p.modrn(3)||1!==this.n.modrn(3))return null;const[e,r]=this._getEndoRoots(this.p),i=[e,r][1&t].toRed(this.red),[s,n]=this._getEndoRoots(this.n),o=this.point(this.g.x.redMul(i),this.g.y);let h;this.g.mul(s).eq(o)?h=s:(T(this.g.mul(n).eq(o)),h=n);const f=this._getEndoBasis(h),a=this._getEndoPrecomp(f);return new N(i,h,f,a)}_getEndoRoots(t){const e=t===this.p?this.red:a.mont(t),r=new a(2).toRed(e),i=new a(3).toRed(e),s=r.redInvert(),n=i.redNeg().redSqrt().redMul(s),o=n.redNeg();return[n.redSub(s).fromRed(),o.redSub(s).fromRed()].sort(a.cmp)}_getEndoBasis(t){const[e,r,i,s,n,o]=this._egcdSqrt(t),h=i,f=s.neg(),a=e.sqr().iadd(r.sqr()),u=n.sqr().iadd(o.sqr());let c,d;return a.cmp(u)<=0?(c=e,d=r.neg()):(c=n,d=o.neg()),[new P(h,f),new P(c,d)]}_egcdSqrt(t){T(t instanceof a),T(!t.red),T(t.sign()>0),T(this.n.sign()>0);const e=this.n.ushrn(this.n.bitLength()>>>1);let r,i,s,n,o,h=t,f=this.n.clone(),u=new a(1),c=new a(0),d=new a(0),l=new a(1),p=0,b=0;for(;!h.isZero()&&p<2;){const t=f.quo(h),a=f.sub(t.mul(h)),m=d.sub(t.mul(u)),g=l.sub(t.mul(c));0===b&&a.cmp(e)<0&&(r=o,i=u,s=a,n=m,b=1),o=a,f=h,h=a,d=u,u=m,l=c,c=g,p+=b}return T(0!==b,"Could not find r < sqrt(n)."),[r,i,s,n,d,u]}_getEndoPrecomp(t){T(Array.isArray(t)),T(2===t.length),T(t[0]instanceof P),T(t[1]instanceof P);const[e,r]=t,i=e.a.mul(r.b).isub(e.b.mul(r.a)),s=i.bitLength()+16,n=a.shift(1,s),o=n.mul(r.b).divRound(i),h=n.mul(e.b).divRound(i);return T(i.eq(this.n)),[o,h]}_endoSplit(t){T(t instanceof a),T(!t.red),T(!this.n.isZero());const[e,r]=this.endo.basis,i=r.b.mul(t).divRound(this.n),s=e.b.neg().mul(t).divRound(this.n),n=i.mul(e.a),o=s.mul(r.a),h=i.ineg().mul(e.b),f=s.mul(r.b);return[t.sub(n).isub(o),h.isub(f)]}_endoBeta(t){return T(t instanceof m),[t,t._getBeta()]}_endoWnafMulAdd(t,e){T(Array.isArray(t)),T(Array.isArray(e)),T(t.length===e.length),T(null!=this.endo);const r=t.length,i=new Array(2*r),s=new Array(2*r);for(let n=0;n<r;n++){const[r,o]=this._endoBeta(t[n]),[h,f]=this._endoSplit(e[n]);i[2*n+0]=r,s[2*n+0]=h,i[2*n+1]=o,s[2*n+1]=f}return this._wnafMulAdd(1,i,s)}_icart(t){const{a:e,b:r,i3:i,one:s}=this,n=i.redSqr().redMul(i),o=this.p.ushln(1).isubn(1).idivn(3),h=t.clone();h.cinject(s,h.czero());const f=h.redSqr(),a=f.redSqr(),u=a.redMul(f),c=h.redMuln(6).redFermat(),d=e.redMuln(3).redISub(a).redMul(c),l=d.redSqr(),p=u.redMul(n),b=f.redMul(i),m=l.redISub(r).redISub(p).redPow(o).redIAdd(b),g=h.redMul(m).redIAdd(d);return this.point(m,g)}_sswu(t){const{b:e,z:r,ai:i,zi:s,one:n}=this,o=this.p.subn(2),h=r.redSqr(),f=e.redNeg().redMul(i),a=e.redMul(s).redMul(i),u=t.redSqr(),c=u.redSqr(),d=h.redMul(c).redIAdd(r.redMul(u)).redPow(o),l=f.redMul(n.redAdd(d));l.cinject(a,d.czero());const p=r.redMul(u).redMul(l),b=this.solveY2(l),m=this.solveY2(p),g=0|b.redIsSquare(),w=l.cinject(p,1^g),y=b.cinject(m,1^g).redSqrt();return y.cinject(y.redNeg(),y.redIsOdd()^t.redIsOdd()),this.point(w,y)}_sswui(t,e){const{a:r,b:i,z:s}=this,{x:n,y:o}=t,h=3&e,f=r.redSqr().redMul(n.redSqr()),a=r.redMul(i).redMul(n).redIMuln(2),u=i.redSqr().redMuln(3),c=r.redMul(n).redIAdd(i),[d,l]=U(f.redISub(a).redISub(u)),p=c.redSub(l).redINeg(),b=c.redAdd(l).redINeg(),m=c.redMul(s).redIMuln(2),g=i.redMul(s).redIMuln(2);p.cinject(b,1&h),m.cinject(g,h>>>1);const[w,y]=z(p,m);if(y.cinject(y.redNeg(),y.redIsOdd()^o.redIsOdd()),!(d&w))throw new Error("Invalid point.");return y}_svdwf(t){const{c:e,z:r,zi:i,i2:s,i3:n}=this,o=this.p.subn(2),h=this.solveY2(r),f=n.redMul(i.redSqr()),a=t.redSqr(),u=a.redSqr(),c=a.redAdd(h),d=a.redMul(c).redPow(o),l=u.redMul(d).redMul(e),p=c.redSqr().redMul(c),b=e.redSub(r).redMul(s).redISub(l),m=l.redSub(e.redAdd(r).redMul(s)),g=r.redSub(p.redMul(d).redMul(f)),w=this.solveY2(b),y=this.solveY2(m),S=this.solveY2(g),v=0|w.redIsSquare(),I=0|y.redIsSquare();return b.cinject(m,(1^v)&I),w.cinject(y,(1^v)&I),b.cinject(g,(1^v)&(1^I)),w.cinject(S,(1^v)&(1^I)),[b,w]}_svdw(t){const[e,r]=this._svdwf(t),i=r.redSqrt();return i.cinject(i.redNeg(),i.redIsOdd()^t.redIsOdd()),this.point(e,i)}_svdwi(t,e){const{b:r,c:i,z:s,two:n}=this,{x:o,y:h}=t,f=3&e,a=s.redSqr(),u=a.redMul(s),c=a.redSqr(),d=u.redAdd(r),l=d.redMuln(2),p=o.redSqr(),b=o.redMuln(2).redIAdd(s),m=o.redMul(a),g=i.redSub(b),w=i.redAdd(b),y=p.redMul(a).redIAdd(c).redIMuln(9),S=o.redMul(u).redIMuln(18),v=d.redMul(o.redSub(s)).redIMuln(12),[I,E]=U(y.redISub(S).redIAdd(v)),_=f-2>>>31|I,O=E.redMul(s),A=u.redISub(m).redIMuln(3).redISub(l),M=d.redMul(g),N=d.redMul(w),P=A.redAdd(O),R=A.redSub(O),x=n.clone();M.cinject(N,(1^f)-1>>>31),M.cinject(P,(2^f)-1>>>31),M.cinject(R,(3^f)-1>>>31),x.cinject(w,(0^f)-1>>>31),x.cinject(g,(1^f)-1>>>31);const[B,k]=z(M,x),[T]=this._svdwf(k),C=T.ceq(o);if(k.cinject(k.redNeg(),k.redIsOdd()^h.redIsOdd()),!(_&B&C))throw new Error("Invalid point.");return k}isElliptic(){const{a:t,b:e}=this,r=t.redSqr().redMul(t);return!e.redSqr().redMuln(27).redIAdd(r.redMuln(4)).isZero()}jinv(){const{a:t,b:e}=this,r=t.redSqr().redMul(t),i=e.redSqr(),s=r.redMuln(4),n=s.redMuln(1728),o=i.redMuln(27).redIAdd(s);if(o.isZero())throw new Error("Curve is not elliptic.");return n.redDiv(o).fromRed()}point(t,e,r=0){return new m(this,t,e,r)}jpoint(t,e,r){return new g(this,t,e,r)}solveY2(t){T(t instanceof a);const e=t.redSqr().redMul(t).redIAdd(this.b);return this.zeroA||(this.threeA?e.redIAdd(t.redMuln(-3)):e.redIAdd(this.a.redMul(t))),e}validate(t){if(T(t instanceof m),t.inf)return!0;const{x:e,y:r}=t,i=this.solveY2(e);return r.redSqr().eq(i)}pointFromX(t,e=null){T(t instanceof a),T(null==e||"boolean"==typeof e),t.red||(t=t.toRed(this.red));const r=this.solveY(t);return null!=e&&r.redIsOdd()!==e&&r.redINeg(),this.point(t,r)}isIsomorphic(t){if(T(t instanceof l),!t.p.eq(this.p))return!1;let e,r;try{[e,r]=this._scale(t)}catch(t){return!1}if("short"===t.type){const i=this.field(t.a).redMul(e.redSqr()),s=this.field(t.b).redMul(r.redSqr());return this.a.eq(i)&&this.b.eq(s)}if("mont"===t.type){const{a3:r,bi:i}=t,s=this.field(r.redMul(i)).redMul(e);return this.solveY2(s).isZero()}if("edwards"===t.type){const r=this.field(t.ad6).redMul(e);return this.solveY2(r).isZero()}return!1}isIsogenous(t){return T(t instanceof l),!1}pointFromShort(t){if(T(t instanceof m),this.isIsomorphic(t.curve)){if(t.isInfinity())return this.point();const[e,r]=this._scale(t.curve),i=this.field(t.x),s=this.field(t.y),n=i.redMul(e),o=s.redMul(r);return this.point(n,o)}throw new Error("Not implemented.")}pointFromMont(t){if(T(t instanceof y),this.isIsomorphic(t.curve)){if(t.isInfinity())return this.point();const{a3:e,bi:r}=t.curve,[i,s]=this._scale(t.curve),n=t.x.redAdd(e).redMul(r),o=t.y.redMul(r);return this.point(this.field(n).redMul(i),this.field(o).redMul(s))}throw new Error("Not implemented.")}pointFromEdwards(t){if(T(t instanceof I),this.isIsomorphic(t.curve)){const{a:e,d:r,ad6:i}=t.curve,[s,n]=this._scale(t.curve);if(t.isInfinity())return this.point();if(t.x.isZero()){const t=this.field(i).redMul(s);return this.point(t,this.zero)}const{x:o,y:h,z:f}=t,a=e.redMuln(5),u=r.redMuln(5),c=r.redSub(e),d=u.redSub(e),l=r.redSub(a),p=h.redAdd(f),b=h.redSub(f),m=d.redMul(h).redIAdd(l.redMul(f)),g=b.redMuln(12),w=c.redMul(p).redMul(f),y=b.redMul(o).redIMuln(4);return this.cpoint(this.field(m).redMul(s),this.field(g),this.field(w).redMul(n),this.field(y))}throw new Error("Not implemented.")}pointFromUniform(t){if(T(t instanceof a),this.z.isZero()||this.b.isZero())throw new Error("Not implemented.");if(!this.a.isZero())return this._sswu(t);if(!this.c.isZero())return this._svdw(t);throw new Error("Not implemented.")}pointToUniform(t,e){if(T(t instanceof m),T(e>>>0===e),this.z.isZero()||this.b.isZero())throw new Error("Not implemented.");if(t.isInfinity())throw new Error("Invalid point.");if(!this.a.isZero())return this._sswui(t,e);if(!this.c.isZero())return this._svdwi(t,e);throw new Error("Not implemented.")}mulAll(t,e){return super.mulAll(t,e).toP()}mulAllSimple(t,e){return super.mulAllSimple(t,e).toP()}decodePoint(t){return m.decode(this,t)}encodeX(t){return T(t instanceof p),t.encodeX()}decodeEven(t){return m.decodeEven(this,t)}decodeSquare(t){return m.decodeSquare(this,t)}toShort(t,e,r=null){const[i,s]=this._short(t,e),n=new b({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h});if(null!=r){const[,t]=n._scale(this);t.redIsOdd()!==r&&t.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromShort(this.g)),n}toMont(t,e,r=null){const[i,s]=this._mont(t,e),n=new w({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h});if(null!=r){const[,t]=this._scale(n);t.redIsOdd()!==r&&t.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromShort(this.g)),n}toEdwards(t,e,r=null){const[i,s]=this._edwards(t,e),n=new v({red:this.red,prime:this.prime,p:this.p,a:i,d:s,n:this.n,h:this.h});if(null!=r){const[,t]=this._scale(n);t.redIsOdd()!==r&&t.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromShort(this.g),n.g.normalize()),n}pointFromJSON(t){return m.fromJSON(this,t)}toJSON(t){const e=super.toJSON(t);return e.a=this.a.fromRed().toJSON(),e.b=this.b.fromRed().toJSON(),this.c.isZero()||(e.c=this.c.fromRed().toJSON()),e}}class m extends p{constructor(t,e,r,i){T(t instanceof b),super(t,u.AFFINE),this.x=this.curve.zero,this.y=this.curve.zero,this.inf=1,null!=e&&this._init(e,r,i)}_init(t,e,r){T(t instanceof a),T(e instanceof a),this.x=t,this.y=e,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=0|r}_safeNAF(t){return T(t>>>0===t),this.pre&&this.pre.naf?this.pre.naf:t>1?this.toJ()._getNAF(t):this._getNAF(t)}_getBeta(){if(!this.curve.endo)return null;if(this.pre&&this.pre.beta)return this.pre.beta;const t=this.x.redMul(this.curve.endo.beta),e=this.curve.point(t,this.y);return this.pre&&(e.pre=this.pre.map(t=>{const e=t.x.redMul(this.curve.endo.beta);return this.curve.point(e,t.y)}),this.pre.beta=e),e}_getJNAF(t){if(T(t instanceof m),this.inf|t.inf)return super._getJNAF(t);const e=[this,null,null,t];return this.y.eq(t.y)?(e[1]=this.add(t),e[2]=this.toJ().add(t.neg())):this.y.eq(t.y.redNeg())?(e[1]=this.toJ().add(t),e[2]=this.add(t.neg())):(e[1]=this.toJ().add(t),e[2]=this.toJ().add(t.neg())),e}clone(){return this.curve.point(this.x.clone(),this.y.clone(),this.inf)}swap(t,e){T(t instanceof m);const r=1&(e>>31|-e>>31),i=this.inf,s=t.inf;return this.x.cswap(t.x,e),this.y.cswap(t.y,e),this.inf=i&(1^r)|s&r,t.inf=s&(1^r)|i&r,this}scale(t){return this.toJ().scale(t)}neg(){return this.inf?this:this.curve.point(this.x,this.y.redNeg())}add(t){if(T(t instanceof m),this.inf)return t;if(t.inf)return this;if(this.x.eq(t.x))return this.y.eq(t.y)?this.dbl():this.curve.point();if(this.y.eq(t.y)){const e=this.x.redNeg().redISub(t.x),r=this.y.redNeg();return this.curve.point(e,r)}const e=this.x.redSub(t.x),r=this.y.redSub(t.y).redDiv(e),i=r.redSqr().redISub(this.x).redISub(t.x),s=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}dbl(){if(this.inf)return this;if(this.y.isZero())return this.curve.point();const t=this.x.redSqr().redIMuln(3).redIAdd(this.curve.a),e=this.y.redMuln(2),r=t.redDiv(e),i=r.redSqr().redISub(this.x).redISub(this.x),s=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}uadd(t){T(t instanceof m);const e=this.y.redAdd(t.y),r=this.x.redAdd(t.x).redSqr(),i=this.x.redMul(t.x),s=r.redISub(i).redIAdd(this.curve.a),n=e.czero()&s.czero();e.cinject(this.x.redSub(t.x),n),s.cinject(this.y.redSub(t.y),n);const o=e.czero()&(1^(this.inf|t.inf));e.cinject(this.curve.one,e.czero());const h=s.redMul(e.redFermat()),f=h.redSqr().redISub(this.x).redISub(t.x),a=h.redMul(this.x.redSub(f)).redISub(this.y),u=o|this.inf&t.inf;return f.cinject(t.x,this.inf),a.cinject(t.y,this.inf),f.cinject(this.x,t.inf),a.cinject(this.y,t.inf),f.cinject(this.curve.zero,u),a.cinject(this.curve.zero,u),this.curve.point(f,a,u)}udbl(){return this.uadd(this)}recover(t,e,r,i){if(T(t instanceof a),T(e instanceof a),T(r instanceof a),T(i instanceof a),this.inf)return this.curve.jpoint();const s=e.redMul(i),n=s.redSqr(),o=n.redMul(s),h=this.x.redMul(s),f=t.redMul(i),u=r.redMul(e),c=this.curve.b.redMul(o).redIMuln(2),d=h.redMul(f).redIAdd(this.curve.a.redMul(n)),l=h.redAdd(f),p=h.redISub(f),b=c.redIAdd(d.redMul(l)),m=u.redMul(p.redSqr()),g=b.redISub(m),w=this.y.redMul(o).redIMuln(2),y=t.redMul(w),S=g.redMul(e),v=e.redMul(w),I=y.redMul(v),E=S.redMul(v.redSqr()),_=v;return this.curve.jpoint(I,E,_)}getX(){if(this.inf)throw new Error("Invalid point.");return this.x.fromRed()}getY(){if(this.inf)throw new Error("Invalid point.");return this.y.fromRed()}eq(t){return T(t instanceof m),this===t||(this.inf?0!==t.inf:!t.inf&&(this.x.eq(t.x)&&this.y.eq(t.y)))}isInfinity(){return 0!==this.inf}isOdd(){return!this.inf&&this.y.redIsOdd()}isEven(){return!this.inf&&this.y.redIsEven()}isSquare(){return!this.inf&&-1!==this.y.redJacobi()}eqX(t){return T(t instanceof a),T(!t.red),!this.inf&&this.getX().eq(t)}eqXToP(t){return T(t instanceof a),T(!t.red),T(!this.curve.n.isZero()),!this.inf&&this.getX().imod(this.curve.n).eq(t)}mul(t){return super.mul(t).toP()}muln(t){return super.muln(t).toP()}mulSimple(t){return super.mulSimple(t).toP()}mulBlind(t,e){return super.mulBlind(t,e).toP()}mulConst(t,e){return super.mulConst(t,e).toP()}mulAdd(t,e,r){return super.mulAdd(t,e,r).toP()}mulAddSimple(t,e,r){return super.mulAddSimple(t,e,r).toP()}mulH(){return super.mulH().toP()}div(t){return super.div(t).toP()}divn(t){return super.divn(t).toP()}divH(){return super.divH().toP()}toP(){return this}toJ(){return this.inf?this.curve.jpoint():this.curve.jpoint(this.x,this.y,this.curve.one)}encode(t){null==t&&(t=!0),T("boolean"==typeof t);const{fieldSize:e}=this.curve;if(this.inf)throw new Error("Invalid point.");if(t){const t=i.allocUnsafe(1+e),r=this.curve.encodeField(this.getX());return t[0]=2|this.y.redIsOdd(),r.copy(t,1),t}const r=i.allocUnsafe(1+2*e),s=this.curve.encodeField(this.getX()),n=this.curve.encodeField(this.getY());return r[0]=4,s.copy(r,1),n.copy(r,1+e),r}static decode(t,e){T(t instanceof b),T(null!=e&&!0===e._isBuffer);const r=t.fieldSize;if(e.length<1+r)throw new Error("Not a point.");const i=e[0];switch(i){case 2:case 3:{if(e.length!==1+r)throw new Error("Invalid point size for compressed.");const s=t.decodeField(e.slice(1,1+r));if(s.cmp(t.p)>=0)throw new Error("Invalid point.");const n=t.pointFromX(s,3===i);return T(!n.isInfinity()),n}case 4:case 6:case 7:{if(e.length!==1+2*r)throw new Error("Invalid point size for uncompressed.");const s=t.decodeField(e.slice(1,1+r)),n=t.decodeField(e.slice(1+r,1+2*r));if(s.cmp(t.p)>=0||n.cmp(t.p)>=0)throw new Error("Invalid point.");if(4!==i&&i!==(6|n.isOdd()))throw new Error("Invalid hybrid encoding.");const o=t.point(s,n);if(!o.validate())throw new Error("Invalid point.");return T(!o.isInfinity()),o}default:throw new Error("Unknown point format.")}}encodeX(){return this.curve.encodeField(this.getX())}static decodeEven(t,e){T(t instanceof b);const r=t.decodeField(e);if(r.cmp(t.p)>=0)throw new Error("Invalid point.");return t.pointFromX(r,!1)}static decodeSquare(t,e){T(t instanceof b);const r=t.decodeField(e);if(r.cmp(t.p)>=0)throw new Error("Invalid point.");return t.pointFromX(r)}toJSON(t){if(this.inf)return[];const e=this.getX().toJSON(),r=this.getY().toJSON();return!0===t&&this.pre?[e,r,this.pre.toJSON()]:[e,r]}static fromJSON(t,e){if(T(t instanceof b),T(Array.isArray(e)),T(0===e.length||2===e.length||3===e.length),0===e.length)return t.point();const r=a.fromJSON(e[0]),i=a.fromJSON(e[1]),s=t.point(r,i);return e.length>2&&null!=e[2]&&(s.pre=_.fromJSON(s,e[2])),s}[f](){return this.inf?"<ShortPoint: Infinity>":"<ShortPoint: x="+this.x.fromRed().toString(16,2)+" y="+this.y.fromRed().toString(16,2)+">"}}class g extends p{constructor(t,e,r,i){T(t instanceof b),super(t,u.JACOBIAN),this.x=this.curve.one,this.y=this.curve.one,this.z=this.curve.zero,this.zOne=0,null!=e&&this._init(e,r,i)}_init(t,e,r){T(t instanceof a),T(e instanceof a),T(null==r||r instanceof a),this.x=t,this.y=e,this.z=r||this.curve.one,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=0|this.z.eq(this.curve.one)}clone(){return this.curve.jpoint(this.x.clone(),this.y.clone(),this.z.clone())}swap(t,e){T(t instanceof g);const r=1&(e>>31|-e>>31),i=this.zOne,s=t.zOne;return this.x.cswap(t.x,e),this.y.cswap(t.y,e),this.z.cswap(t.z,e),this.zOne=i&(1^r)|s&r,t.zOne=s&(1^r)|i&r,this}validate(){const{a:t,b:e}=this.curve;if(this.isInfinity())return!0;if(this.zOne)return this.curve.validate(this.toP());const r=this.y.redSqr(),i=this.x.redSqr().redMul(this.x),s=this.z.redSqr(),n=s.redSqr(),o=n.redMul(s),h=i.redIAdd(e.redMul(o));return this.curve.zeroA||(this.curve.threeA?h.redIAdd(n.redIMuln(-3).redMul(this.x)):h.redIAdd(t.redMul(n).redMul(this.x))),r.eq(h)}normalize(){if(this.zOne)return this;if(this.isInfinity())return this;const t=this.z.redInvert(),e=t.redSqr();return this.x=this.x.redMul(e),this.y=this.y.redMul(e).redMul(t),this.z=this.curve.one,this.zOne=1,this}scale(t){if(T(t instanceof a),this.isInfinity())return this.curve.jpoint();const e=t.redSqr(),r=this.x.redMul(e),i=this.y.redMul(e).redMul(t),s=this.z.redMul(t);return this.curve.jpoint(r,i,s)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){return T(t instanceof p),t.type===u.AFFINE?this._mixedAdd(t):this._add(t)}_add(t){return T(t instanceof g),this.isInfinity()?t:t.isInfinity()?this:this.zOne&&t.zOne?this._addAA(t):this.zOne?t._addJA(this):t.zOne?this._addJA(t):this._addJJ(t)}_mixedAdd(t){return T(t instanceof m),this.isInfinity()?t.toJ():t.isInfinity()?this:this.zOne?this._addAA(t):this._addJA(t)}_addJJ(t){const e=this.z.redSqr(),r=t.z.redSqr(),i=this.x.redMul(r),s=t.x.redMul(e),n=this.y.redMul(t.z).redMul(r),o=t.y.redMul(this.z).redMul(e),h=s.redISub(i),f=o.redISub(n);if(h.isZero())return f.isZero()?this.dbl():this.curve.jpoint();const a=h.redSqr(),u=h.redMul(a),c=i.redMul(a),d=f.redSqr().redISub(u).redISub(c).redISub(c),l=f.redMul(c.redISub(d)).redISub(n.redMul(u)),p=this.z.redMul(t.z).redMul(h);return this.curve.jpoint(d,l,p)}_addJA(t){const e=this.z.redSqr(),r=t.x.redMul(e),i=t.y.redMul(this.z).redMul(e),s=r.redISub(this.x),n=i.redISub(this.y).redIMuln(2);if(s.isZero())return n.isZero()?this.dbl():this.curve.jpoint();const o=s.redMuln(2).redSqr(),h=s.redMul(o),f=this.x.redMul(o),a=n.redSqr().redISub(h).redISub(f).redISub(f),u=n.redMul(f.redISub(a)).redISub(this.y.redMul(h).redIMuln(2)),c=this.z.redMul(s).redIMuln(2);return this.curve.jpoint(a,u,c)}_addAA(t){const e=t.x.redSub(this.x),r=t.y.redSub(this.y).redIMuln(2);if(e.isZero())return r.isZero()?this.dbl():this.curve.jpoint();const i=e.redSqr().redIMuln(4),s=e.redMul(i),n=this.x.redMul(i),o=r.redSqr().redISub(s).redISub(n).redISub(n),h=r.redMul(n.redISub(o)).redISub(this.y.redMul(s).redIMuln(2)),f=e.redIMuln(2);return this.curve.jpoint(o,h,f)}dbl(){return this.isInfinity()?this:this.y.isZero()?this.curve.jpoint():this.zOne?this._dblA():this.curve.zeroA?this._dbl0():this.curve.threeA?this._dbl3():this._dblJ()}_dblJ(){const t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),i=this.x.redMul(e).redIMuln(4),s=t.redIMuln(3).redIAdd(this.curve.a.redMul(r.redSqr())),n=s.redSqr().redISub(i).redISub(i),o=n,h=s.redMul(i.redISub(n)).redISub(e.redSqr().redIMuln(8)),f=this.y.redMul(this.z).redIMuln(2);return this.curve.jpoint(o,h,f)}_dblA(){const t=this.x.redSqr(),e=this.y.redSqr(),r=e.redSqr(),i=e.redIAdd(this.x).redSqr().redISub(t).redISub(r).redIMuln(2),s=t.redIMuln(3).redIAdd(this.curve.a),n=s.redSqr().redISub(i).redISub(i),o=n,h=s.redMul(i.redISub(n)).redISub(r.redIMuln(8)),f=this.y.redMuln(2);return this.curve.jpoint(o,h,f)}_dbl0(){const t=this.x.redSqr(),e=this.y.redSqr(),r=e.redSqr(),i=e.redIAdd(this.x).redSqr().redISub(t).redISub(r).redIMuln(2),s=t.redIMuln(3),n=s.redSqr().redISub(i).redISub(i),o=s.redMul(i.redISub(n)).redISub(r.redIMuln(8)),h=this.y.redMul(this.z).redIMuln(2);return this.curve.jpoint(n,o,h)}_dbl3(){const t=this.z.redSqr(),e=this.y.redSqr(),r=this.x.redMul(e),i=this.x.redSub(t),s=this.x.redAdd(t),n=i.redMul(s).redIMuln(3),o=r.redIMuln(4),h=o.redMuln(2),f=e.redSqr().redIMuln(8),a=n.redSqr().redISub(h),u=this.y.redAdd(this.z).redSqr().redISub(e).redISub(t),c=n.redMul(o.redISub(a)).redISub(f);return this.curve.jpoint(a,c,u)}dblp(t){return T(t>>>0===t),this.curve.zeroA||this.curve.threeA?super.dblp(t):0===t?this:this.isInfinity()?this:this._dblp(t)}_dblp(t){const{a:e,i2:r}=this.curve;let i=this.x,s=this.z,n=this.y.redMuln(2),o=s.redPown(4);for(let r=0;r<t;r++){if(n.isZero())return this.curve.jpoint();const h=i.redSqr(),f=n.redSqr(),a=f.redSqr(),u=h.redIMuln(3).redIAdd(e.redMul(o)),c=i.redMul(f),d=u.redSqr().redISub(c).redISub(c),l=d,p=u.redMul(c.redISub(d)).redIMuln(2).redISub(a),b=n.redMul(s);r+1<t&&(o=o.redMul(a)),i=l,n=p,s=b}return this.curve.jpoint(i,n.redMul(r),s)}uadd(t){return T(t instanceof p),t.type===u.AFFINE?this._uadd(t.toJ()):this._uadd(t)}_uadd(t){T(t instanceof g);const{zero:e,one:r}=this.curve,i=this.z.redSqr(),s=t.z.redSqr(),n=this.x.redMul(s),o=t.x.redMul(i),h=this.y.redMul(s).redMul(t.z),f=t.y.redMul(i).redMul(this.z),a=this.z.redMul(t.z),u=n.redAdd(o),c=h.redAdd(f),d=u.redSqr().redISub(n.redMul(o));if(!this.curve.zeroA){const t=a.redPown(4);this.curve.threeA?d.redIAdd(t.redIMuln(-3)):d.redIAdd(this.curve.a.redMul(t))}const l=c.czero()&d.czero();c.cinject(n.redSub(o),l),d.cinject(h.redSub(f),l);const p=c.redSqr(),b=u.redMul(p),m=p.redSqr();m.cinject(e,l);const w=d.redSqr(),y=a.redMul(c),S=b.redMuln(3).redISub(w).redISub(w),v=w.redISub(b).redIMuln(4),I=d.redMul(S).redISub(m).redIMuln(4),E=y.redIMuln(2),_=this.z.czero(),O=t.z.czero(),A=E.czero()&(1^(_|O));return v.cinject(t.x,_),I.cinject(t.y,_),E.cinject(t.z,_),v.cinject(this.x,O),I.cinject(this.y,O),E.cinject(this.z,O),v.cinject(r,A),I.cinject(r,A),E.cinject(e,A),this.curve.jpoint(v,I,E)}udbl(){const t=this._udbl(),e=this.z.czero()|this.y.czero();return t.x.cinject(this.curve.one,e),t.y.cinject(this.curve.one,e),t.z.cinject(this.curve.zero,e),t}_udbl(){return this.curve.zeroA?this._dbl0():this.curve.threeA?this._dbl3():this._dblJ()}zaddu(t){T(t instanceof g);const e=this.x.redSub(t.x),r=this.y.redSub(t.y),i=e.redSqr(),s=this.x.redMul(i),n=t.x.redMul(i),o=s,h=r.redSqr().redISub(s).redISub(n),f=this.y.redMul(s.redSub(n)),a=r.redMul(o.redSub(h)).redISub(f),u=this.z.redMul(e),c=u;return[this.curve.jpoint(h,a,c),this.curve.jpoint(o,f,u)]}zaddc(t){T(t instanceof g);const e=this.x.redSub(t.x),r=this.y.redSub(t.y),i=this.y.redAdd(t.y),s=e.redSqr(),n=this.x.redMul(s),o=t.x.redMul(s),h=i.redSqr().redISub(n).redISub(o),f=r.redSqr().redISub(n).redISub(o),a=this.y.redMul(o.redISub(n)),u=t.y.redMuln(2).redIAdd(r),c=n.redISub(h),d=h.redAdd(c).redISub(f),l=u.redMul(c).redIAdd(a),p=r.redMul(d).redIAdd(a),b=this.z.redMul(e),m=b;return[this.curve.jpoint(f,p,m),this.curve.jpoint(h,l,b)]}zdblu(){const t=this.x.redSqr(),e=this.y.redSqr(),r=e.redSqr(),i=this.x.redAdd(e).redSqr(),s=t.redMuln(3);if(!this.curve.zeroA){const t=this.z.redPown(4);this.curve.threeA?s.redIAdd(t.redIMuln(-3)):s.redIAdd(this.curve.a.redMul(t))}const n=i.redISub(t).redISub(r).redIMuln(2),o=s.redSqr().redISub(n).redISub(n),h=r.redIMuln(8),f=n.redSub(o).redMul(s).redISub(h),a=this.y.redMul(this.z).redIMuln(2),u=a;return[this.curve.jpoint(o,f,u),this.curve.jpoint(n,h,a)]}recover(t,e,r,i){return this.toP().recover(t,e,r,i)}getX(){if(this.isInfinity())throw new Error("Invalid point.");return this.normalize(),this.x.fromRed()}getY(){if(this.isInfinity())throw new Error("Invalid point.");return this.normalize(),this.y.fromRed()}eq(t){if(T(t instanceof g),this===t)return!0;if(this.isInfinity())return t.isInfinity();if(t.isInfinity())return!1;if(this.z.eq(t.z))return this.x.eq(t.x)&&this.y.eq(t.y);const e=this.z.redSqr(),r=t.z.redSqr(),i=this.x.redMul(r),s=t.x.redMul(e);if(!i.eq(s))return!1;const n=e.redMul(this.z),o=r.redMul(t.z),h=this.y.redMul(o),f=t.y.redMul(n);return h.eq(f)}isInfinity(){return this.z.isZero()}isOdd(){return!this.isInfinity()&&(this.normalize(),this.y.redIsOdd())}isEven(){return!this.isInfinity()&&(this.normalize(),this.y.redIsEven())}isSquare(){return!this.isInfinity()&&-1!==this.y.redMul(this.z).redJacobi()}eqX(t){if(T(t instanceof a),T(!t.red),this.isInfinity())return!1;const e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);return this.x.eq(r)}eqXToP(t){if(T(t instanceof a),T(!t.red),!this.curve.smallGap)return this.toP().eqXToP(t);if(this.isInfinity())return!1;const e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(this.x.eq(r))return!0;const i=t.clone(),s=this.curve.redN.redMul(e);for(;;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),this.x.eq(r))break}return!0}toP(){return this.isInfinity()?this.curve.point():(this.normalize(),this.curve.point(this.x,this.y))}toJ(){return this}encode(t){return this.toP().encode(t)}static decode(t,e){return m.decode(t,e).toJ()}encodeX(){return this.toP().encodeX()}static decodeEven(t,e){return m.decodeEven(t,e).toJ()}static decodeSquare(t,e){return m.decodeSquare(t,e).toJ()}toJSON(t){return this.toP().toJSON(t)}static fromJSON(t,e){return m.fromJSON(t,e).toJ()}[f](){return this.isInfinity()?"<JPoint: Infinity>":"<JPoint: x="+this.x.fromRed().toString(16,2)+" y="+this.y.fromRed().toString(16,2)+" z="+this.z.fromRed().toString(16,2)+">"}}class w extends l{constructor(t){super(y,"mont",t),this.a=a.fromJSON(t.a).toRed(this.red),this.b=a.fromJSON(t.b).toRed(this.red),this.bi=this.b.redInvert(),this.a2=this.a.redAdd(this.two),this.a24=this.a2.redMul(this.i4),this.a3=this.a.redMul(this.i3),this.a0=this.a.redMul(this.bi),this.b0=this.bi.redSqr(),this._finalize(t)}static _isomorphism(t,e,r){T(t instanceof a),T(e instanceof a),T(r instanceof a);const i=t.clone(),s=r.clone();if(1!==e.redDiv(r).redJacobi())throw new Error("Invalid `b` coefficient.");return[i,s]}_short(t,e){const{a:r,b:i,three:s}=this,n=r.redSqr(),o=n.redMul(r),h=i.redSqr(),f=h.redMul(i),a=s.redSub(n),u=h.redMuln(3),c=o.redMuln(2).redISub(r.redMuln(9)),d=f.redMuln(27),l=a.redDiv(u),p=c.redDiv(d);return null!=t?b._isomorphism(l,p,t,e):[l,p]}_mont(t){return w._isomorphism(this.a,this.b,t)}_edwards(t,e=!1){T("boolean"==typeof e);const{two:r,bi:i}=this,s=this.a.redAdd(r).redMul(i),n=this.a.redSub(r).redMul(i);return e&&s.swap(n),null!=t?v._isomorphism(s,n,t):[s,n]}_scaleShort(t){T(t instanceof b);const[e,r]=t._scale(this);return[this.field(e.redInvert()),this.field(r.redInvert())]}_scaleMont(t){return T(t instanceof w),this.g.isInfinity()||t.g.isInfinity()?this.field(t.b).redDivSqrt(this.b):this.g.y.redDiv(this.field(t.g.y))}_scaleEdwards(t,e){T(t instanceof v);const r=t._scale(this,e);return this.field(r)}_solveY0(t){T(t instanceof a);const e=this.a0,r=this.b0,i=t.redSqr();return i.redMul(t).redIAdd(e.redMul(i)).redIAdd(r.redMul(t))}_elligator2(t){const e=this.a0.redNeg(),r=this.one.redAdd(this.z.redMul(t.redSqr()));r.cinject(this.one,r.czero());const i=e.redMul(r.redFermat()),s=i.redNeg().redISub(this.a0),n=this._solveY0(i),o=this._solveY0(s),h=0|n.redIsSquare(),f=i.cinject(s,1^h),a=n.cinject(o,1^h).redSqrt();a.cinject(a.redNeg(),a.redIsOdd()^t.redIsOdd());const u=this.b.redMul(f),c=this.b.redMul(a);return this.point(u,c)}_invert2(t,e){const{x:r,y:i}=t,s=1&e,n=r.redMul(this.bi),o=i.redMul(this.bi),h=n.redAdd(this.a0),f=n;h.cswap(f,s);const a=h.redINeg(),u=f.redMul(this.z),[c,d]=z(a,u);if(d.cinject(d.redNeg(),d.redIsOdd()^o.redIsOdd()),!c)throw new Error("Invalid point.");return d}_constMul(t,e,r){T(t instanceof y);const i=t.toX(),[s,n]=i.ladderConst(e,r),o=t.recover(n,s);return e.isNeg()?o.neg():o}isElliptic(){const t=this.a.redSqr();return!this.b.redMul(t.redSub(this.four)).isZero()}jinv(){const{a:t,three:e,four:r}=this,i=t.redSqr(),s=i.redSub(e).redPown(3).redIMuln(256),n=i.redSub(r);if(n.isZero())throw new Error("Curve is not elliptic.");return s.redDiv(n).fromRed()}point(t,e,r=0){return new y(this,t,e,r)}jpoint(t,e,r){return T(null==t&&null==e&&null==r),this.point()}xpoint(t,e){return new S(this,t,e)}solveY2(t){T(t instanceof a);const e=t.redSqr();return e.redMul(t).redIAdd(this.a.redMul(e)).redIAdd(t).redMul(this.bi)}validate(t){if(T(t instanceof y),t.isInfinity())return!0;const{x:e,y:r}=t,i=this.solveY2(e);return r.redSqr().eq(i)}pointFromX(t,e=null){T(t instanceof a),T(null==e||"boolean"==typeof e),t.red||(t=t.toRed(this.red));const r=this.solveY(t);return null!=e&&r.redIsOdd()!==e&&r.redINeg(),this.point(t,r)}isIsomorphic(t,e){if(T(t instanceof l),!t.p.eq(this.p))return!1;if("mont"===t.type){const e=this.field(t.a),r=this.field(t.b);return!!this.a.eq(e)&&(!this.b.isZero()&&1===r.redDiv(this.b).redJacobi())}return t.isIsomorphic(this,e)}isIsogenous(t){return T(t instanceof l),"mont"!==t.type&&t.isIsogenous(this)}pointFromShort(t){if(T(t instanceof m),this.isIsomorphic(t.curve)){if(t.isInfinity())return this.point();const{a3:e,b:r}=this,[i,s]=this._scale(t.curve),n=this.field(t.x).redMul(i),o=this.field(t.y).redMul(s),h=r.redMul(n).redISub(e),f=r.redMul(o);return this.point(h,f)}throw new Error("Not implemented.")}pointFromMont(t){if(T(t instanceof y),this.isIsomorphic(t.curve)){if(t.isInfinity())return this.point();const e=this._scale(t.curve),r=this.field(t.x),i=this.field(t.y),s=r,n=e.redMul(i);return this.point(s,n)}throw new Error("Not implemented.")}pointFromEdwards(t){T(t instanceof I),T(t.curve.p.eq(this.p));const e=this.field(t.x),r=this.field(t.y),i=this.field(t.z);if(this.isIsogenous(t.curve)){if(t.isInfinity())return this.point();if(t.x.isZero())return this.point(this.zero,this.zero);const s=i.redSqr().redIMuln(2),n=r.redSqr(),o=e.redSqr(),h=s.redISub(o).redISub(n).redMul(r),f=o.redMul(e);return this.cpoint(n,o,h,f)}if(this.isIsomorphic(t.curve,!0)){if(t.isInfinity())return this.point();if(t.x.isZero())return this.point(this.zero,this.zero);const s=this._scale(t.curve,!0),n=r.redAdd(i),o=r.redSub(i),h=s.redMul(i).redMul(n),f=e.redMul(o);return this.cpoint(n,o,h,f)}if(this.isIsomorphic(t.curve,!1)){if(t.isInfinity())return this.point();if(t.x.isZero())return this.point(this.zero,this.zero);const s=this._scale(t.curve,!1),n=i.redAdd(r),o=i.redSub(r),h=s.redMul(i).redMul(n),f=e.redMul(o);return this.cpoint(n,o,h,f)}throw new Error("Not implemented.")}pointFromUniform(t){if(T(t instanceof a),this.z.isZero()||this.a.isZero())throw new Error("Not implemented.");return this._elligator2(t)}pointToUniform(t,e){if(T(t instanceof y),T(e>>>0===e),this.z.isZero()||this.a.isZero())throw new Error("Not implemented.");if(t.isInfinity())throw new Error("Invalid point.");return this._invert2(t,e)}decodePoint(t,e){return y.decode(this,t,e)}encodeX(t){return T(t instanceof S),t.encode()}decodeX(t){return S.decode(this,t)}toShort(t,e,r=null){const[i,s]=this._short(t,e),n=new b({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h});if(null!=r){const[,t]=n._scale(this);t.redIsOdd()!==r&&t.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromMont(this.g)),n}toMont(t,e=null){const[r,i]=this._mont(t),s=new w({red:this.red,prime:this.prime,p:this.p,a:r,b:i,n:this.n,h:this.h,z:this.z});if(null!=e){const t=s._scale(this);t.redIsOdd()!==e&&t.redINeg()}return this.g.isInfinity()||(s.g=s.pointFromMont(this.g)),s}toEdwards(t,e,r=null){const[i,s]=this._edwards(t,e),n=new v({red:this.red,prime:this.prime,p:this.p,a:i,d:s,n:this.n,h:this.h,z:this.z});if(null!=r){const t=n._scale(this,e);t.redIsOdd()!==r&&t.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromMont(this.g),n.g.normalize()),n}pointFromJSON(t){return y.fromJSON(this,t)}toJSON(t){const e=super.toJSON(t);return e.a=this.a.fromRed().toJSON(),e.b=this.b.fromRed().toJSON(),e}}class y extends p{constructor(t,e,r,i){T(t instanceof w),super(t,u.AFFINE),this.x=this.curve.zero,this.y=this.curve.zero,this.inf=1,null!=e&&this._init(e,r,i)}_init(t,e,r){T(t instanceof a),T(e instanceof a),this.x=t,this.y=e,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=0|r}clone(){return this.curve.point(this.x.clone(),this.y.clone(),this.inf)}swap(t,e){T(t instanceof y);const r=1&(e>>31|-e>>31),i=this.inf,s=t.inf;return this.x.cswap(t.x,e),this.y.cswap(t.y,e),this.inf=i&(1^r)|s&r,t.inf=s&(1^r)|i&r,this}scale(t){return this.clone()}randomize(t){return this.clone()}neg(){return this.inf?this:this.curve.point(this.x,this.y.redNeg())}add(t){if(T(t instanceof y),this.inf)return t;if(t.inf)return this;if(this.x.eq(t.x))return this.y.eq(t.y)?this.dbl():this.curve.point();const e=t.x.redSub(this.x),r=t.y.redSub(this.y).redDiv(e),i=this.curve.b.redMul(r.redSqr()).redISub(this.curve.a).redISub(this.x).redISub(t.x),s=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}dbl(){if(this.inf)return this;if(this.y.isZero())return this.curve.point();const t=this.x.redSqr().redIMuln(3),e=this.curve.a.redMul(this.x).redIMuln(2),r=t.redIAdd(e).redIAdd(this.curve.one),i=this.curve.b.redMul(this.y).redIMuln(2),s=r.redDiv(i),n=this.curve.b.redMul(s.redSqr()).redISub(this.curve.a).redISub(this.x).redISub(this.x),o=s.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,o)}uadd(t){T(t instanceof y);const e=t.x.redSub(this.x),r=t.y.redSub(this.y),i=this.x.redSqr().redIMuln(3),s=this.curve.a.redMul(this.x).redIMuln(2),n=i.redIAdd(s).redIAdd(this.curve.one),o=this.curve.b.redMul(this.y).redIMuln(2),h=e.czero()&r.czero();r.cinject(n,h),e.cinject(o,h);const f=e.czero()&(1^(this.inf|t.inf));e.cinject(this.curve.one,e.czero());const a=r.redMul(e.redFermat()),u=this.curve.b.redMul(a.redSqr()).redISub(this.curve.a).redISub(this.x).redISub(t.x),c=a.redMul(this.x.redSub(u)).redISub(this.y),d=f|this.inf&t.inf;return u.cinject(t.x,this.inf),c.cinject(t.y,this.inf),u.cinject(this.x,t.inf),c.cinject(this.y,t.inf),u.cinject(this.curve.zero,d),c.cinject(this.curve.zero,d),this.curve.point(u,c,d)}udbl(){return this.uadd(this)}recover(t,e){if(T(t instanceof S),T(e instanceof S),this.inf)return this.curve.point();const r=this.x.redMul(t.z),i=t.x.redAdd(r),s=t.x.redSub(r).redSqr().redMul(e.x),n=this.curve.a.redMul(t.z).redIMuln(2),o=i.redIAdd(n),h=this.x.redMul(t.x).redIAdd(t.z),f=o.redMul(h),a=n.redMul(t.z),u=f.redISub(a).redMul(e.z),c=this.curve.b.redMul(this.y).redIMuln(2).redMul(t.z).redMul(e.z),d=c.redMul(t.x),l=u.redISub(s),p=c.redMul(t.z);if(p.isZero())return this.curve.point();const b=p.redInvert(),m=d.redMul(b),g=l.redMul(b);return this.curve.point(m,g)}getX(){if(this.inf)throw new Error("Invalid point.");return this.x.fromRed()}getY(){if(this.inf)throw new Error("Invalid point.");return this.y.fromRed()}eq(t){return T(t instanceof y),this===t||(this.inf?0!==t.inf:!t.inf&&(this.x.eq(t.x)&&this.y.eq(t.y)))}isInfinity(){return 0!==this.inf}isOdd(){return!this.inf&&this.y.redIsOdd()}isEven(){return!this.inf&&this.y.redIsEven()}toP(){return this}toJ(){return this}toX(){return this.inf?this.curve.xpoint():this.curve.xpoint(this.x,this.curve.one)}encode(){return this.toX().encode()}static decode(t,e,r){return T(t instanceof w),t.decodeX(e).toP(r)}toJSON(t){if(this.inf)return[];return[this.getX().toJSON(),this.getY().toJSON()]}static fromJSON(t,e){if(T(t instanceof w),T(Array.isArray(e)),T(0===e.length||2===e.length||3===e.length),0===e.length)return t.point();const r=a.fromJSON(e[0]),i=a.fromJSON(e[1]);return t.point(r,i)}[f](){return this.inf?"<MontPoint: Infinity>":"<MontPoint: x="+this.x.fromRed().toString(16,2)+" y="+this.y.fromRed().toString(16,2)+">"}}class S extends p{constructor(t,e,r){T(t instanceof w),super(t,u.PROJECTIVE),this.x=this.curve.one,this.z=this.curve.zero,null!=e&&this._init(e,r)}_init(t,e){T(t instanceof a),T(null==e||e instanceof a),this.x=t,this.z=e||this.curve.one,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red))}clone(){return this.curve.xpoint(this.x.clone(),this.z.clone())}swap(t,e){return T(t instanceof S),this.x.cswap(t.x,e),this.z.cswap(t.z,e),this}precompute(t,e){return this}validate(){if(this.isInfinity())return!0;const{x:t,z:e}=this,r=t.redSqr(),i=r.redMul(t),s=e.redSqr(),n=this.curve.a.redMul(r).redMul(e);return-1!==i.redIAdd(n).redIAdd(t.redMul(s)).redMul(this.curve.bi).redMul(e).redJacobi()}normalize(){return this.isInfinity()?this:this.z.eq(this.curve.one)?this:(this.x=this.x.redDiv(this.z),this.z=this.curve.one,this)}scale(t){if(T(t instanceof a),this.isInfinity())return this.curve.xpoint();const e=this.x.redMul(t),r=this.z.redMul(t);return this.curve.xpoint(e,r)}neg(){return this}dbl(){const t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),r=t.redSub(e),i=t.redMul(e),s=r.redMul(e.redIAdd(this.curve.a24.redMul(r)));return this.curve.xpoint(i,s)}diffAdd(t,e){T(t instanceof S),T(e instanceof S);const r=t.x.redAdd(t.z),i=t.x.redSub(t.z),s=e.x.redAdd(e.z),n=e.x.redSub(e.z).redMul(r),o=s.redMul(i),h=this.z.redMul(n.redAdd(o).redSqr()),f=this.x.redMul(n.redISub(o).redSqr());return this.curve.xpoint(h,f)}diffAddDbl(t,e){T(t instanceof S),T(e instanceof S);const r=e.x.redAdd(e.z),i=r.redSqr(),s=e.x.redSub(e.z),n=s.redSqr(),o=i.redSub(n),h=t.x.redAdd(t.z),f=t.x.redSub(t.z).redMul(r),a=h.redMul(s),u=this.z.redMul(f.redAdd(a).redSqr()),c=this.x.redMul(f.redISub(a).redSqr()),d=i.redMul(n),l=o.redMul(n.redIAdd(this.curve.a24.redMul(o)));return[this.curve.xpoint(u,c),this.curve.xpoint(d,l)]}getX(){if(this.isInfinity())throw new Error("Invalid point.");return this.normalize(),this.x.fromRed()}getY(t){return this.toP(t).getY()}eq(t){if(T(t instanceof S),this===t)return!0;if(this.isInfinity())return t.isInfinity();if(t.isInfinity())return!1;if(this.z.eq(t.z))return this.x.eq(t.x);const e=this.x.redMul(t.z),r=t.x.redMul(this.z);return e.eq(r)}isInfinity(){return this.z.isZero()}isOdd(){return!1}isEven(){return!1}hasTorsion(){return!this.isInfinity()&&(!!this.x.isZero()||super.hasTorsion())}jmul(t){return this.ladder(t)[1]}jmulSimple(t){return this.ladderSimple(t)[1]}jmulBlind(t,e){return this.ladderBlind(t,e)[1]}jmulConst(t,e){return this.ladderConst(t,e)[1]}jmulAdd(t,e,r){throw new Error("Not implemented.")}jmulAddSimple(t,e,r){throw new Error("Not implemented.")}ladder(t){T(t instanceof a),T(!t.red);const e=t.bitLength();let r=this,i=this.curve.xpoint();for(let s=e-1;s>=0;s--){0===t.utestn(s)?[r,i]=this.diffAddDbl(r,i):[i,r]=this.diffAddDbl(i,r)}return[r,i]}ladderSimple(t){T(t instanceof a),T(!t.red);const e=t.bitLength();let r=this,i=this.curve.xpoint();for(let s=e-1;s>=0;s--){0===t.utestn(s)?(r=this.diffAdd(r,i),i=i.dbl()):(i=this.diffAdd(i,r),r=r.dbl())}return[r,i]}ladderBlind(t,e){return e?this.randomize(e).ladder(t):this.ladder(t)}ladderConst(t,e){T(t instanceof a),T(!t.red);const r=Math.max(t.bitLength(),this.curve.fieldBits),i=r+7>>>3,s=t.toArray("le",i),n=e?this.randomize(e):this;let o=n.clone(),h=this.curve.xpoint().clone(),f=0;for(let t=r-1;t>=0;t--){const e=s[t>>3]>>(7&t)&1;o.swap(h,f^e),[o,h]=n.diffAddDbl(o,h),f=e}return o.swap(h,f),[o,h]}toP(t=null){return T(null==t||"boolean"==typeof t),this.isInfinity()?this.curve.point():(this.normalize(),this.curve.pointFromX(this.x,t))}toJ(){return this}toX(){return this}encode(){return this.curve.encodeField(this.getX())}static decode(t,e){T(t instanceof w);const r=t.decodeField(e);r.iumaskn(t.fieldBits);const i=t.xpoint(r,t.one);return T(!i.isInfinity()),i}toJSON(t){return this.toP().toJSON(t)}static fromJSON(t,e){return y.fromJSON(t,e).toX()}[f](){return this.isInfinity()?"<XPoint: Infinity>":"<XPoint: x="+this.x.fromRed().toString(16,2)+" z="+this.z.fromRed().toString(16,2)+">"}}class v extends l{constructor(t){super(I,"edwards",t),this.a=a.fromJSON(t.a).toRed(this.red),this.d=a.fromJSON(t.d).toRed(this.red),this.s=a.fromJSON(t.s||"0").toRed(this.red),this.si=this.s.isZero()?this.zero:this.s.redInvert(),this.k=this.d.redMuln(2),this.smi=-this.d.redNeg().word(0),this.ad6=this.a.redAdd(this.d).redMul(this.i6),this.twisted=!this.a.eq(this.one),this.oneA=this.a.eq(this.one),this.mOneA=this.a.eq(this.one.redNeg()),this.smallD=null!=this.prime&&1===this.d.redNeg().length,this.alt=null,this._finalize(t)}static _isomorphism(t,e,r){T(t instanceof a),T(e instanceof a),T(r instanceof a);const i=r.clone(),s=r.redMul(e).redDiv(t);if(1!==t.redDiv(r).redJacobi())throw new Error("Invalid `a` coefficient.");return[i,s]}_short(t,e){const{a:r,d:i}=this,s=r.redSqr(),n=s.redMul(r),o=i.redSqr(),h=o.redMul(i),f=r.redMul(i).redIMuln(14),a=s.redMul(i),u=r.redMul(o),c=a.redIAdd(u).redIMuln(33),d=s.redAdd(f).redIAdd(o).redDivn(-48),l=c.redISub(n).redISub(h).redDivn(864);return null!=t?b._isomorphism(d,l,t,e):[d,l]}_mont(t,e=!1){let r,i;T("boolean"==typeof e),e?(r=this.d.redAdd(this.a),i=this.d.redSub(this.a)):(r=this.a.redAdd(this.d),i=this.a.redSub(this.d));const s=i.redInvert(),n=r.redMuln(2).redMul(s),o=s.redMuln(4);return null!=t?w._isomorphism(n,o,t):[n,o]}_edwards(t){return v._isomorphism(this.a,this.d,t)}_scaleShort(t){T(t instanceof b);const[e,r]=t._scale(this);return[this.field(e.redInvert()),this.field(r.redInvert())]}_scaleMont(t,e=!1){if(T(t instanceof w),T("boolean"==typeof e),this.g.isInfinity()||t.g.isInfinity()){const[r]=t._edwards(null,e);return this.field(r).redDivSqrt(this.a)}const r=t.g.x.redDiv(t.g.y);return this.g.x.redDiv(this.field(r))}_scaleEdwards(t){return T(t instanceof v),this.g.isInfinity()||t.g.isInfinity()?this.field(t.a).redDivSqrt(this.a):this.g.x.redDiv(this.field(t.g.x))}_mulA(t){return T(t instanceof a),this.oneA?t.clone():this.mOneA?t.redNeg():this.a.redMul(t)}_mulD(t){return T(t instanceof a),this.smallD?t.redMuln(this.smi):this.d.redMul(t)}_elligator1(t){const{s:e,si:r,i2:i,one:s,two:n}=this,o=r.redSqr().redIMuln(2),h=e.redSqr().redMul(i),f=h.redSqr(),a=o.redAdd(h),u=a.redSqr().redISub(n),c=o.redSub(s),d=this.p.subn(2),l=this.p.subn(1).iushrn(1),p=this.p.addn(1).iushrn(2),b=s.redSub(t),m=s.redAdd(t),g=b.redMul(m.redPow(d)),w=g.redSqr(),y=w.redMul(g),S=y.redMul(w).redAdd(u.redMul(y)).redIAdd(g),v=S.redPow(l),I=w.redAdd(f).redPow(l),E=v.redMul(I),_=v.redMul(g),O=v.redMul(S).redPow(p).redMul(E),A=s.redAdd(_),M=a.redMul(_),N=A.redSqr(),P=c.redMul(e).redMul(_).redMul(A),R=O.cinject(this.one,g.czero()),x=M.redSub(N),B=M.redAdd(N);return this.cpoint(P,R,x,B)}_invert1(t,e){const{s:r,si:i,i2:s,one:n}=this,{x:o,y:h,z:f}=t,a=1&e,u=i.redSqr().redIMuln(2),c=r.redSqr().redMul(s),d=c.redSqr(),l=u.redAdd(c),p=u.redSub(n),b=this.p.subn(2),m=this.p.subn(1).iushrn(1),g=this.p.addn(1).iushrn(2),w=h.redSub(f),y=h.redAdd(f).redIMuln(2),S=w.redMul(y.redPow(b)),v=n.redAdd(S.redMul(l)),I=v.redSqr().redISub(n),E=I.redPow(g),_=E.redSqr().ceq(I),O=E.redSub(v),A=n.redAdd(O),M=p.redMul(r).redMul(O).redMul(A).redMul(o.redMul(f)),N=O.redSqr().redIAdd(d),P=M.redMul(N).redPow(m).redMul(O),R=n.redSub(P),x=n.redAdd(P),B=R.redMul(x.redPow(b));if(B.cinject(B.redNeg(),B.redIsOdd()^a),!_)throw new Error("Invalid point.");return B}_alt(){return this.alt||(this.alt=this.toMont()),this.alt}isElliptic(){const t=this.a.redMul(this.d),e=this.a.redSub(this.d);return!t.redMul(e).isZero()}jinv(){const{a:t,d:e}=this,r=t.redMul(e),i=t.redSub(e).redPown(4),s=t.redSqr(),n=e.redSqr(),o=s.redAdd(r.redMuln(14)).redIAdd(n).redPown(3).redIMuln(16),h=r.redMul(i);if(h.isZero())throw new Error("Curve is not elliptic.");return o.redDiv(h).fromRed()}point(t,e,r,i){return new I(this,t,e,r,i)}jpoint(t,e,r){return T(null==t&&null==e&&null==r),this.point()}cpoint(t,e,r,i){T(t instanceof a),T(e instanceof a),T(r instanceof a),T(i instanceof a);const s=t.redMul(i),n=r.redMul(e),o=e.redMul(i),h=t.redMul(r);return this.point(s,n,o,h)}solveX2(t){T(t instanceof a);const e=t.redSqr(),r=this._mulD(e).redISub(this.a);return e.redISub(this.one).redDiv(r)}solveX(t){const e=t.redSqr(),r=this._mulD(e).redISub(this.a);return e.redISub(this.one).redDivSqrt(r)}solveY2(t){T(t instanceof a);const e=t.redSqr(),r=this._mulA(e).redISub(this.one),i=this._mulD(e).redISub(this.one);return r.redDiv(i)}solveY(t){const e=t.redSqr(),r=this._mulA(e).redISub(this.one),i=this._mulD(e).redISub(this.one);return r.redDivSqrt(i)}validate(t){if(T(t instanceof I),t.zOne){const e=t.x.redSqr(),r=t.y.redSqr(),i=this._mulD(e).redMul(r),s=this._mulA(e).redIAdd(r),n=this.one.redAdd(i),o=t.t,h=t.x.redMul(t.y);return s.eq(n)&&o.eq(h)}const e=t.x.redSqr(),r=t.y.redSqr(),i=t.z.redSqr(),s=i.redSqr(),n=this._mulD(e).redMul(r),o=this._mulA(e).redIAdd(r).redMul(i),h=s.redIAdd(n),f=t.t.redMul(t.z),a=t.x.redMul(t.y);return o.eq(h)&&f.eq(a)}pointFromX(t,e=null){T(t instanceof a),T(null==e||"boolean"==typeof e),t.red||(t=t.toRed(this.red));const r=this.solveY(t);if(null!=e){if(r.isZero()&&e)throw new Error("Invalid point.");r.redIsOdd()!==e&&r.redINeg()}return this.point(t,r)}pointFromY(t,e=null){T(t instanceof a),T(null==e||"boolean"==typeof e),t.red||(t=t.toRed(this.red));const r=this.solveX(t);if(null!=e){if(r.isZero()&&e)throw new Error("Invalid point.");r.redIsOdd()!==e&&r.redINeg()}return this.point(r,t)}isIsomorphic(t,e=!1){if(T(t instanceof l),T("boolean"==typeof e),!t.p.eq(this.p))return!1;if("short"===t.type)return t.isIsomorphic(this);if("mont"===t.type){const r=this.field(t.a);let i,s;return e?(i=this.d.redAdd(this.a),s=this.d.redSub(this.a)):(i=this.a.redAdd(this.d),s=this.a.redSub(this.d)),r.redMul(s).eq(i.redIMuln(2))}if("edwards"===t.type){const e=this.field(t.a),r=this.field(t.d);return this.a.redMul(r).eq(e.redMul(this.d))}return!1}isIsogenous(t){if(T(t instanceof l),!t.p.eq(this.p))return!1;if("mont"===t.type){if(!this.a.eq(this.one))return!1;const e=this.field(t.a),r=this.field(t.b),i=this.two.redSub(this.d.redMuln(4));return e.eq(i)&&r.eq(this.one)}if("edwards"===t.type){const e=this.field(t.a),r=this.field(t.d);return e.eq(this.a.redNeg())&&r.eq(this.d.redSub(this.a))}return!1}pointFromShort(t){if(T(t instanceof m),this.isIsomorphic(t.curve)){if(t.isInfinity())return this.point();if(t.y.isZero())return this.point(this.zero,this.one.redNeg());const{a:e,d:r}=this,[i,s]=this._scale(t.curve),n=e.redMuln(5),o=r.redMuln(5),h=this.field(t.x).redMul(i),f=this.field(t.y).redMul(s),a=h.redMuln(6),u=h.redMuln(12),c=a.redSub(e).redISub(r),d=f.redMuln(6),l=u.redSub(n).redIAdd(r),p=u.redAdd(e).redISub(o);return this.cpoint(c,d,l,p)}throw new Error("Not implemented.")}pointFromMont(t){T(t instanceof y),T(t.curve.p.eq(this.p));const e=this.field(t.x),r=this.field(t.y);if(this.isIsogenous(t.curve)){if(t.isInfinity())return this.point();if(t.x.isZero())return this.point();const i=e.redSqr(),s=i.redMul(e),n=s.redMul(e),o=n.redMul(e),h=r.redSqr(),f=r.redMuln(4),a=i.redSub(this.one),u=i.redMuln(2),c=h.redMuln(4),d=s.redIMuln(2),l=e.redMul(h).redIMuln(4),p=i.redMul(h).redIMuln(2),b=h.redIMuln(2),m=f.redMul(a),g=n.redISub(u).redIAdd(c).redIAdd(this.one),w=o.redSub(d).redISub(l).redIAdd(e).redINeg(),y=o.redISub(p).redISub(d).redISub(b).redIAdd(e);return this.cpoint(m,g,w,y).divn(4)}if(this.isIsomorphic(t.curve,!0)){if(t.isInfinity())return this.point();if(t.x.isZero())return this.point(this.zero,this.one.redNeg());const i=this._scale(t.curve,!0).redMul(e),s=r,n=e.redAdd(this.one),o=e.redSub(this.one);return this.cpoint(i,s,n,o)}if(this.isIsomorphic(t.curve,!1)){if(t.isInfinity())return this.point();if(t.x.isZero())return this.point(this.zero,this.one.redNeg());const i=this._scale(t.curve,!1).redMul(e),s=r,n=e.redSub(this.one),o=e.redAdd(this.one);return this.cpoint(i,s,n,o)}throw new Error("Not implemented.")}pointFromEdwards(t){T(t instanceof I),T(t.curve.p.eq(this.p));const e=this.field(t.curve.a),r=this.field(t.x),i=this.field(t.y),s=this.field(t.z),n=this.field(t.t);if(this.isIsogenous(t.curve)){const t=r.redMul(i),n=r.redSqr(),o=i.redSqr(),h=s.redSqr(),f=e.redMul(n),a=t.redIMuln(2),u=o.redSub(f),c=o.redAdd(f),d=h.redIMuln(2).redISub(c),l=this.cpoint(a,u,c,d);return this.twisted?l:l.divn(4)}if(this.isIsomorphic(t.curve)){const e=this._scale(t.curve),o=e.redMul(r),h=i,f=s,a=e.redMul(n);return this.point(o,h,f,a)}throw new Error("Not implemented.")}pointFromUniform(t,e=null){T(t instanceof a),T(t.red===this.red),T(null==e||e instanceof w),e||(e=this._alt());const r=e.field(t),i=e.pointFromUniform(r);return this.pointFromMont(i)}pointToUniform(t,e,r=null){T(t instanceof I),T(e>>>0===e),T(null==r||r instanceof w),r||(r=this._alt());const i=r.pointFromEdwards(t),s=r.pointToUniform(i,e);return this.field(s)}pointFromHash(t,e,r=null){T(null==r||r instanceof w),r||(r=this._alt());const i=r.pointFromHash(t,e);return this.pointFromMont(i)}pointToHash(t,e,r=null){T(null==r||r instanceof w),r||(r=this._alt());const i=r.pointFromEdwards(t);return r.pointToHash(i,e)}decodePoint(t){return I.decode(this,t)}toShort(t,e,r=null){const[i,s]=this._short(t,e),n=new b({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h});if(null!=r){const[,t]=n._scale(this);t.redIsOdd()!==r&&t.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromEdwards(this.g)),n}toMont(t,e,r=null){const[i,s]=this._mont(t,e),n=new w({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h,z:this.z});if(null!=r){const t=this._scale(n,e);t.redIsOdd()!==r&&t.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromEdwards(this.g)),n}toEdwards(t,e=null){const[r,i]=this._edwards(t),s=new v({red:this.red,prime:this.prime,p:this.p,a:r,d:i,n:this.n,h:this.h,z:this.z});if(null!=e){const t=s._scale(this);t.redIsOdd()!==e&&t.redINeg()}return this.g.isInfinity()||(s.g=s.pointFromEdwards(this.g),s.g.normalize()),s}pointFromJSON(t){return I.fromJSON(this,t)}toJSON(t){const e=super.toJSON(t);return e.a=this.a.fromRed().toJSON(),e.d=this.d.fromRed().toJSON(),this.s.isZero()||(e.s=this.s.fromRed().toJSON()),e}}class I extends p{constructor(t,e,r,i,s){T(t instanceof v),super(t,u.EXTENDED),this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=1,null!=e&&this._init(e,r,i,s)}_init(t,e,r,i){T(t instanceof a),T(e instanceof a),T(null==r||r instanceof a),T(null==i||i instanceof a),this.x=t,this.y=e,this.z=r||this.curve.one,this.t=i||null,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=0|this.z.eq(this.curve.one),this._check(),this.t||(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redDiv(this.z)))}_check(){if(this.z.isZero())throw new Error("Invalid point.")}clone(){return this.curve.point(this.x.clone(),this.y.clone(),this.z.clone(),this.t.clone())}swap(t,e){T(t instanceof I);const r=1&(e>>31|-e>>31),i=this.zOne,s=t.zOne;return this.x.cswap(t.x,e),this.y.cswap(t.y,e),this.z.cswap(t.z,e),this.t.cswap(t.t,e),this.zOne=i&(1^r)|s&r,t.zOne=s&(1^r)|i&r,this}normalize(){if(this.zOne)return this;const t=this.z.redInvert();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t=this.t.redMul(t),this.z=this.curve.one,this.zOne=1,this}scale(t){T(t instanceof a);const e=this.x.redMul(t),r=this.y.redMul(t),i=this.z.redMul(t),s=this.t.redMul(t);return this.curve.point(e,r,i,s)}neg(){const t=this.x.redNeg(),e=this.y,r=this.z,i=this.t.redNeg();return this.curve.point(t,e,r,i)}add(t){return T(t instanceof I),this.isInfinity()?t:t.isInfinity()?this:this.zOne?t._add(this,0):this._add(t,0)}_add(t,e){return this.curve.mOneA?this._addM1(t,e):this._addA(t,e)}_addM1(t,e){const r=t.zOne&(1^e),i=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),s=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),n=this.t.redMul(this.curve.k).redMul(t.t),o=r?this.z.redAdd(this.z):this.z.redMul(t.z).redIMuln(2),h=s.redSub(i),f=o.redSub(n),a=o.redIAdd(n),u=s.redIAdd(i),c=h.redMul(f),d=a.redMul(u),l=h.redMul(u),p=f.redMul(a);return this.curve.point(c,d,p,l)}_addA(t,e){const r=t.zOne&(1^e),i=this.x.redMul(t.x),s=this.y.redMul(t.y),n=this.curve._mulD(this.t).redMul(t.t),o=r?this.z.clone():this.z.redMul(t.z),h=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(i).redISub(s),f=o.redSub(n),a=o.redIAdd(n),u=s.redISub(this.curve._mulA(i)),c=h.redMul(f),d=a.redMul(u),l=h.redMul(u),p=f.redMul(a);return this.curve.point(c,d,p,l)}dbl(){return this.isInfinity()?this:this._dbl(0)}_dbl(t){const e=this.zOne&(1^t),r=this.x.redSqr(),i=this.y.redSqr(),s=e?this.curve.two:this.z.redSqr().redIMuln(2),n=this.curve._mulA(r),o=this.x.redAdd(this.y).redSqr().redISub(r).redISub(i),h=n.redAdd(i),f=h.redSub(s),a=n.redISub(i),u=o.redMul(f),c=h.redMul(a),d=o.redMul(a),l=f.redMul(h);return this.curve.point(u,c,l,d)}uadd(t){return T(t instanceof I),this._add(t,1)}udbl(){return this._dbl(1)}getX(){return this.normalize(),this.x.fromRed()}getY(){return this.normalize(),this.y.fromRed()}eq(t){if(T(t instanceof I),T(!this.z.isZero()),T(!t.z.isZero()),this===t)return!0;if(this.z.eq(t.z))return this.x.eq(t.x)&&this.y.eq(t.y);const e=this.x.redMul(t.z),r=t.x.redMul(this.z);if(!e.eq(r))return!1;const i=this.y.redMul(t.z),s=t.y.redMul(this.z);return i.eq(s)}isInfinity(){return T(!this.z.isZero()),!!this.x.isZero()&&this.y.eq(this.z)}isOdd(){return this.normalize(),this.x.redIsOdd()}isEven(){return this.normalize(),this.x.redIsEven()}toP(){return this.normalize()}toJ(){return this}encode(){const t=this.getY();return t.setn(this.curve.signBit,this.x.redIsOdd()),this.curve.encodeField(t)}static decode(t,e){T(t instanceof v);const r=t.decodeField(e),i=0!==r.testn(t.signBit);if(r.setn(t.signBit,0),r.cmp(t.p)>=0)throw new Error("Invalid point.");return t.pointFromY(r,i)}toJSON(t){if(this.isInfinity())return[];const e=this.getX().toJSON(),r=this.getY().toJSON();return!0===t&&this.pre?[e,r,this.pre.toJSON()]:[e,r]}static fromJSON(t,e){if(T(t instanceof v),T(Array.isArray(e)),T(0===e.length||2===e.length||3===e.length),0===e.length)return t.point();const r=a.fromJSON(e[0]),i=a.fromJSON(e[1]),s=t.point(r,i);return e.length>2&&null!=e[2]&&(s.pre=_.fromJSON(s,e[2])),s}[f](){return this.isInfinity()?"<EdwardsPoint: Infinity>":"<EdwardsPoint: x="+this.x.fromRed().toString(16,2)+" y="+this.y.fromRed().toString(16,2)+" z="+this.z.fromRed().toString(16,2)+">"}}class E{constructor(t){T(t instanceof l);const e=t.fieldBits,r=7&e||8;this.curve=t,this.h=255&-t.h.word(0),this.n=(1<<r)-1,this.b=1<<r-1,this.and=a.mask(e).iuxorn(255^this.h),this.or=a.shift(1,e-1)}reduce(t){return T(t instanceof a),T(!t.red),t.iuand(this.and),t.iuor(this.or),t}clamp(t){T(null!=t&&!0===t._isBuffer),T(t.length===this.curve.scalarSize);let e=0,r=this.curve.scalarSize-1;return"be"===this.curve.endian&&([e,r]=[r,e]),t[e]&=this.h,t[r]&=this.n,t[r]|=this.b,t}splitHash(t){T(null!=t&&!0===t._isBuffer),T(t.length===2*this.curve.fieldSize);let e=0;"be"===this.curve.endian&&(e=this.curve.fieldSize-this.curve.scalarSize);const r=t.slice(e,e+this.curve.scalarSize),i=t.slice(this.curve.fieldSize);return this.clamp(r),[r,i]}}class _{constructor(){this.naf=null,this.doubles=null,this.blinding=null,this.beta=null}map(t){T("function"==typeof t);const e=new this.constructor;return this.naf&&(e.naf=this.naf.map(t)),this.doubles&&(e.doubles=this.doubles.map(t)),e}toJSON(){return{naf:this.naf?this.naf.toJSON():null,doubles:this.doubles?this.doubles.toJSON():null,blinding:this.blinding?this.blinding.toJSON():e}}fromJSON(t,e){return T(t instanceof p),T(e&&"object"==typeof e),null!=e.naf&&(this.naf=O.fromJSON(t,e.naf)),null!=e.doubles&&(this.doubles=A.fromJSON(t,e.doubles)),null!=e.blinding&&(this.blinding=M.fromJSON(t,e.blinding)),this}static fromJSON(t,e){return(new this).fromJSON(t,e)}}class O{constructor(t,e){this.width=t,this.points=e}map(t){T("function"==typeof t);const{width:e}=this,r=[];for(const e of this.points)r.push(t(e));return new this.constructor(e,r)}toJSON(){return{width:this.width,points:this.points.slice(1).map(t=>t.toJSON())}}static fromJSON(t,e){T(t instanceof p),T(e&&"object"==typeof e),T(e.width>>>0===e.width),T(Array.isArray(e.points));const{curve:r}=t,{width:i}=e,s=[t];for(const t of e.points)s.push(r.pointFromJSON(t));return new this(i,s)}}class A{constructor(t,e){this.step=t,this.points=e}map(t){T("function"==typeof t);const{step:e}=this,r=[];for(const e of this.points)r.push(t(e));return new this.constructor(e,r)}toJSON(){return{step:this.step,points:this.points.slice(1).map(t=>t.toJSON())}}static fromJSON(t,e){T(t instanceof p),T(e&&"object"==typeof e),T(e.step>>>0===e.step),T(Array.isArray(e.points));const{curve:r}=t,{step:i}=e,s=[t];for(const t of e.points)s.push(r.pointFromJSON(t));return new this(i,s)}}class M{constructor(t,e){this.blind=t,this.unblind=e}toJSON(){return{blind:this.blind.toJSON(),unblind:this.unblind.toJSON()}}static fromJSON(t,e){T(t instanceof p),T(e&&"object"==typeof e);const{curve:r}=t;return new this(a.fromJSON(e.blind),r.pointFromJSON(e.unblind))}}class N{constructor(t,e,r,i){this.beta=t,this.lambda=e,this.basis=r,this.pre=i}toJSON(){return{beta:this.beta.fromRed().toJSON(),lambda:this.lambda.toJSON(),basis:[this.basis[0].toJSON(),this.basis[1].toJSON()],pre:[this.pre[0].toJSON(),this.pre[1].toJSON()]}}static fromJSON(t,e){return T(t instanceof l),T(e&&"object"==typeof e),T(Array.isArray(e.basis)),T(Array.isArray(e.pre)),T(2===e.basis.length),T(2===e.pre.length),new this(a.fromJSON(e.beta).toRed(t.red),a.fromJSON(e.lambda),[P.fromJSON(e.basis[0]),P.fromJSON(e.basis[1])],[a.fromJSON(e.pre[0]),a.fromJSON(e.pre[1])])}}class P{constructor(t,e){this.a=t,this.b=e}toJSON(){return{a:this.a.toJSON(),b:this.b.toJSON()}}static fromJSON(t){return T(t&&"object"==typeof t),new this(a.fromJSON(t.a),a.fromJSON(t.b))}}const R={__proto__:null,P192:class extends b{constructor(t){super({id:"P192",ossl:"prime192v1",type:"short",endian:"be",hash:"SHA256",prime:"p192",p:["ffffffff ffffffff ffffffff fffffffe","ffffffff ffffffff"],a:["ffffffff ffffffff ffffffff fffffffe","ffffffff fffffffc"],b:["64210519 e59c80e7 0fa7e9ab 72243049","feb8deec c146b9b1"],n:["ffffffff ffffffff ffffffff 99def836","146bc9b1 b4d22831"],h:"1",z:"-5",g:[["188da80e b03090f6 7cbf20eb 43a18800","f4ff0afd 82ff1012"],["07192b95 ffc8da78 631011ed 6b24cdd5","73f977a1 1e794811"],t]})}},P224:class extends b{constructor(t){super({id:"P224",ossl:"secp224r1",type:"short",endian:"be",hash:"SHA256",prime:"p224",p:["ffffffff ffffffff ffffffff ffffffff","00000000 00000000 00000001"],a:["ffffffff ffffffff ffffffff fffffffe","ffffffff ffffffff fffffffe"],b:["b4050a85 0c04b3ab f5413256 5044b0b7","d7bfd8ba 270b3943 2355ffb4"],n:["ffffffff ffffffff ffffffff ffff16a2","e0b8f03e 13dd2945 5c5c2a3d"],h:"1",z:"1f",g:[["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3","56c21122 343280d6 115c1d21"],["bd376388 b5f723fb 4c22dfe6 cd4375a0","5a074764 44d58199 85007e34"],t]})}},P256:class extends b{constructor(t){super({id:"P256",ossl:"prime256v1",type:"short",endian:"be",hash:"SHA256",prime:null,p:["ffffffff 00000001 00000000 00000000","00000000 ffffffff ffffffff ffffffff"],a:["ffffffff 00000001 00000000 00000000","00000000 ffffffff ffffffff fffffffc"],b:["5ac635d8 aa3a93e7 b3ebbd55 769886bc","651d06b0 cc53b0f6 3bce3c3e 27d2604b"],n:["ffffffff 00000000 ffffffff ffffffff","bce6faad a7179e84 f3b9cac2 fc632551"],h:"1",z:"-a",g:[["6b17d1f2 e12c4247 f8bce6e5 63a440f2","77037d81 2deb33a0 f4a13945 d898c296"],["4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16","2bce3357 6b315ece cbb64068 37bf51f5"],t]})}},P384:class extends b{constructor(t){super({id:"P384",ossl:"secp384r1",type:"short",endian:"be",hash:"SHA384",prime:null,p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff fffffffe","ffffffff 00000000 00000000 ffffffff"],a:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff fffffffe","ffffffff 00000000 00000000 fffffffc"],b:["b3312fa7 e23ee7e4 988e056b e3f82d19","181d9c6e fe814112 0314088f 5013875a","c656398d 8a2ed19d 2a85c8ed d3ec2aef"],n:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff c7634d81 f4372ddf","581a0db2 48b0a77a ecec196a ccc52973"],h:"1",z:"-c",g:[["aa87ca22 be8b0537 8eb1c71e f320ad74","6e1d3b62 8ba79b98 59f741e0 82542a38","5502f25d bf55296c 3a545e38 72760ab7"],["3617de4a 96262c6f 5d9e98bf 9292dc29","f8f41dbd 289a147c e9da3113 b5f0b8c0","0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"],t]})}},P521:class extends b{constructor(t){super({id:"P521",ossl:"secp521r1",type:"short",endian:"be",hash:"SHA512",prime:"p521",p:["000001ff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff"],a:["000001ff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","fffffffc"],b:["00000051 953eb961 8e1c9a1f 929a21a0","b68540ee a2da725b 99b315f3 b8b48991","8ef109e1 56193951 ec7e937b 1652c0bd","3bb1bf07 3573df88 3d2c34f1 ef451fd4","6b503f00"],n:["000001ff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","fffffffa 51868783 bf2f966b 7fcc0148","f709a5d0 3bb5c9b8 899c47ae bb6fb71e","91386409"],h:"1",z:"-4",g:[["000000c6 858e06b7 0404e9cd 9e3ecb66","2395b442 9c648139 053fb521 f828af60","6b4d3dba a14b5e77 efe75928 fe1dc127","a2ffa8de 3348b3c1 856a429b f97e7e31","c2e5bd66"],["00000118 39296a78 9a3bc004 5c8a5fb4","2c7d1bd9 98f54449 579b4468 17afbd17","273e662c 97ee7299 5ef42640 c550b901","3fad0761 353c7086 a272c240 88be9476","9fd16650"],t]})}},SECP256K1:class extends b{constructor(t){super({id:"SECP256K1",ossl:"secp256k1",type:"short",endian:"be",hash:"SHA256",prime:"k256",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe fffffc2f"],a:"0",b:"7",n:["ffffffff ffffffff ffffffff fffffffe","baaedce6 af48a03b bfd25e8c d0364141"],h:"1",z:"1",c:["0a2d2ba9 3507f1df 233770c2 a797962c","c61f6d15 da14ecd4 7d8d27ae 1cd5f852"],g:[["79be667e f9dcbbac 55a06295 ce870b07","029bfcdb 2dce28d9 59f2815b 16f81798"],["483ada77 26a3c465 5da4fbfc 0e1108a8","fd17b448 a6855419 9c47d08f fb10d4b8"],t],endo:{beta:["7ae96a2b 657c0710 6e64479e ac3434e9","9cf04975 12f58995 c1396c28 719501ee"],lambda:["5363ad4c c05c30e0 a5261c02 8812645a","122e22ea 20816678 df02967c 1b23bd72"],basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],pre:["3086d221a7d46bcde86c90e49284eb153dab","-e4437ed6010e88286f547fa90abfe4c42212"]}})}},BRAINPOOLP256:class extends b{constructor(t){super({id:"BRAINPOOLP256",ossl:"brainpoolP256r1",type:"short",endian:"be",hash:"SHA256",prime:null,p:["a9fb57db a1eea9bc 3e660a90 9d838d72","6e3bf623 d5262028 2013481d 1f6e5377"],a:["7d5a0975 fc2c3057 eef67530 417affe7","fb8055c1 26dc5c6c e94a4b44 f330b5d9"],b:["26dc5c6c e94a4b44 f330b5d9 bbd77cbf","95841629 5cf7e1ce 6bccdc18 ff8c07b6"],n:["a9fb57db a1eea9bc 3e660a90 9d838d71","8c397aa3 b561a6f7 901e0e82 974856a7"],h:"1",z:"-2",g:[["8bd2aeb9 cb7e57cb 2c4b482f fc81b7af","b9de27e1 e3bd23c2 3a4453bd 9ace3262"],["547ef835 c3dac4fd 97f8461a 14611dc9","c2774513 2ded8e54 5c1d54c7 2f046997"],t]})}},BRAINPOOLP384:class extends b{constructor(t){super({id:"BRAINPOOLP384",ossl:"brainpoolP384r1",type:"short",endian:"be",hash:"SHA384",prime:null,p:["8cb91e82 a3386d28 0f5d6f7e 50e641df","152f7109 ed5456b4 12b1da19 7fb71123","acd3a729 901d1a71 87470013 3107ec53"],a:["7bc382c6 3d8c150c 3c72080a ce05afa0","c2bea28e 4fb22787 139165ef ba91f90f","8aa5814a 503ad4eb 04a8c7dd 22ce2826"],b:["04a8c7dd 22ce2826 8b39b554 16f0447c","2fb77de1 07dcd2a6 2e880ea5 3eeb62d5","7cb43902 95dbc994 3ab78696 fa504c11"],n:["8cb91e82 a3386d28 0f5d6f7e 50e641df","152f7109 ed5456b3 1f166e6c ac0425a7","cf3ab6af 6b7fc310 3b883202 e9046565"],h:"1",z:"-5",g:[["1d1c64f0 68cf45ff a2a63a81 b7c13f6b","8847a3e7 7ef14fe3 db7fcafe 0cbd10e8","e826e034 36d646aa ef87b2e2 47d4af1e"],["8abe1d75 20f9c2a4 5cb1eb8e 95cfd552","62b70b29 feec5864 e19c054f f9912928","0e464621 77918111 42820341 263c5315"],t]})}},BRAINPOOLP512:class extends b{constructor(t){super({id:"BRAINPOOLP512",ossl:"brainpoolP512r1",type:"short",endian:"be",hash:"SHA512",prime:null,p:["aadd9db8 dbe9c48b 3fd4e6ae 33c9fc07","cb308db3 b3c9d20e d6639cca 70330871","7d4d9b00 9bc66842 aecda12a e6a380e6","2881ff2f 2d82c685 28aa6056 583a48f3"],a:["7830a331 8b603b89 e2327145 ac234cc5","94cbdd8d 3df91610 a83441ca ea9863bc","2ded5d5a a8253aa1 0a2ef1c9 8b9ac8b5","7f1117a7 2bf2c7b9 e7c1ac4d 77fc94ca"],b:["3df91610 a83441ca ea9863bc 2ded5d5a","a8253aa1 0a2ef1c9 8b9ac8b5 7f1117a7","2bf2c7b9 e7c1ac4d 77fc94ca dc083e67","984050b7 5ebae5dd 2809bd63 8016f723"],n:["aadd9db8 dbe9c48b 3fd4e6ae 33c9fc07","cb308db3 b3c9d20e d6639cca 70330870","553e5c41 4ca92619 41866119 7fac1047","1db1d381 085ddadd b5879682 9ca90069"],h:"1",z:"7",g:[["81aee4bd d82ed964 5a21322e 9c4c6a93","85ed9f70 b5d916c1 b43b62ee f4d0098e","ff3b1f78 e2d0d48d 50d1687b 93b97d5f","7c6d5047 406a5e68 8b352209 bcb9f822"],["7dde385d 566332ec c0eabfa9 cf7822fd","f209f700 24a57b1a a000c55b 881f8111","b2dcde49 4a5f485e 5bca4bd8 8a2763ae","d1ca2b2f a8f05406 78cd1e0f 3ad80892"],t]})}},X25519:class extends w{constructor(){super({id:"X25519",ossl:"X25519",type:"mont",endian:"le",hash:"SHA512",prime:"p25519",p:["7fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffed"],a:"76d06",b:"1",n:["10000000 00000000 00000000 00000000","14def9de a2f79cd6 5812631a 5cf5d3ed"],h:"8",z:"2",g:[["00000000 00000000 00000000 00000000","00000000 00000000 00000000 00000009"],["5f51e65e 475f794b 1fe122d3 88b72eb3","6dc2b281 92839e4d d6163a5d 81312c14"]]})}},X448:class extends w{constructor(){super({id:"X448",ossl:"X448",type:"mont",endian:"le",hash:"SHAKE256",prime:"p448",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff"],a:"262a6",b:"1",n:["3fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 7cca23e9","c44edb49 aed63690 216cc272 8dc58f55","2378c292 ab5844f3"],h:"4",z:"-1",g:[["00000000 00000000 00000000 00000000","00000000 00000000 00000000 00000000","00000000 00000000 00000000 00000000","00000000 00000005"],["7d235d12 95f5b1f6 6c98ab6e 58326fce","cbae5d34 f55545d0 60f75dc2 8df3f6ed","b8027e23 46430d21 1312c4b1 50677af7","6fd7223d 457b5b1a"]]})}},MONT448:class extends w{constructor(){super({id:"MONT448",ossl:null,type:"mont",endian:"le",hash:"SHAKE256",prime:"p448",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff"],a:["b2cf97d2 d43459a9 31ed36b1 fc4e3cb5","5d93f8d2 22746997 60ccffc6 49961ed6","c5b05fca c24864ed 6fb59697 931b78da","84ddecd8 ca2b5cfb"],b:"1",n:["3fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 7cca23e9","c44edb49 aed63690 216cc272 8dc58f55","2378c292 ab5844f3"],h:"4",z:"-1",g:[["ac0d24cc c6c75cb0 eb71f81e 7a6edf51","48e88aee 009a2a24 e795687e c28e125a","3e6730a6 0d46367b aa7fe99d 152128dc","41321bc7 7817f059"],["5a4437f6 80c0d0db 9b061276 d5d0ffcc","e786ff33 b6a53d30 98746425 82e66f09","4433dae7 7244a6e2 6b11e905 7228f483","556c41a5 913f55fe"]]})}},ED25519:class extends v{constructor(t){super({id:"ED25519",ossl:"ED25519",type:"edwards",endian:"le",hash:"SHA512",prefix:"SigEd25519 no Ed25519 collisions",context:!1,prime:"p25519",p:["7fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffed"],a:"-1",d:["52036cee 2b6ffe73 8cc74079 7779e898","00700a4d 4141d8ab 75eb4dca 135978a3"],n:["10000000 00000000 00000000 00000000","14def9de a2f79cd6 5812631a 5cf5d3ed"],h:"8",z:"2",g:[["216936d3 cd6e53fe c0a4e231 fdd6dc5c","692cc760 9525a7b2 c9562d60 8f25d51a"],["66666666 66666666 66666666 66666666","66666666 66666666 66666666 66666658"],t]})}},ISO448:class extends v{constructor(t){super({id:"ISO448",ossl:null,type:"edwards",endian:"le",hash:"SHAKE256",prefix:"SigEd448",context:!0,prime:"p448",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff"],a:"1",d:["d78b4bdc 7f0daf19 f24f38c2 9373a2cc","ad461572 42a50f37 809b1da3 412a12e7","9ccc9c81 264cfe9a d0809970 58fb61c4","243cc32d baa156b9"],n:["3fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 7cca23e9","c44edb49 aed63690 216cc272 8dc58f55","2378c292 ab5844f3"],h:"4",z:"-1",g:[["79a70b2b 70400553 ae7c9df4 16c792c6","1128751a c9296924 0c25a07d 728bdc93","e21f7787 ed697224 9de732f3 8496cd11","69871309 3e9c04fc"],["7fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 80000000","00000000 00000000 00000000 00000000","00000000 00000001"],t]})}},ED448:class extends v{constructor(t){super({id:"ED448",ossl:"ED448",type:"edwards",endian:"le",hash:"SHAKE256",prefix:"SigEd448",context:!0,prime:"p448",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff"],a:"1",d:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffff6756"],n:["3fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 7cca23e9","c44edb49 aed63690 216cc272 8dc58f55","2378c292 ab5844f3"],h:"4",z:"-1",g:[["4f1970c6 6bed0ded 221d15a6 22bf36da","9e146570 470f1767 ea6de324 a3d3a464","12ae1af7 2ab66511 433b80e1 8b00938e","2626a82b c70cc05e"],["693f4671 6eb6bc24 88762037 56c9c762","4bea7373 6ca39840 87789c1e 05a0c2d7","3ad3ff1c e67c39c4 fdbd132c 4ed7c8ad","9808795b f230fa14"],t]})}}},x={__proto__:null,P192:null,P224:null,P256:null,P384:null,P521:null,SECP256K1:null,BRAINPOOLP256:null,BRAINPOOLP384:null,BRAINPOOLP512:null,X25519:null,X448:null,MONT448:null,ED25519:null,ISO448:null,ED448:null};function B(t,e,r){T(t instanceof a),T(!t.red),T(e>>>0===e),T(r>>>0===r);const i=new Array(r),s=1<<e+1,n=t.abs(),o=1|t.sign();let h=0;for(;!n.isZero();){let t=0;n.isOdd()&&((t=n.andln(s-1))&s>>>1&&(t-=s),n.isubn(t)),i[h++]=t*o;let r=1;n.isZero()||0!==n.andln(s-1)||(r=e+1);for(let t=1;t<r;t++)i[h++]=0;n.iushrn(r)}for(T(h<=r);h<r;h++)i[h]=0;return i}function k(t,e,r){const i=function(t,e,r){T(t instanceof a),T(e instanceof a),T(!t.red),T(!e.red),T(r>>>0===r);const i=[new Array(r),new Array(r)],s=t.abs(),n=e.abs(),o=1|t.sign(),h=1|e.sign();let f=0,u=0,c=0;for(;s.cmpn(-u)>0||n.cmpn(-c)>0;){let t=s.andln(3)+u&3,e=n.andln(3)+c&3,r=0,a=0;if(3===t&&(t=-1),3===e&&(e=-1),1&t){const i=s.andln(7)+u&7;r=3!==i&&5!==i||2!==e?t:-t}if(1&e){const r=n.andln(7)+c&7;a=3!==r&&5!==r||2!==t?e:-e}i[0][f]=r*o,i[1][f]=a*h,2*u===r+1&&(u=1-u),2*c===a+1&&(c=1-c),s.iushrn(1),n.iushrn(1),f+=1}for(T(f<=r);f<r;f++)i[0][f]=0,i[1][f]=0;return i}(t,e,r),s=new Array(r);for(let t=0;t<r;t++){const e=i[0][t],r=i[1][t];s[t]=c[3*(e+1)+(r+1)]}return s}function T(t,e){if(!t){const t=new Error(e||"Assertion failed");throw Error.captureStackTrace&&Error.captureStackTrace(t,T),t}}function U(t){T(t instanceof a);try{return[1,t.redSqrt()]}catch(e){if("X is not a square mod P."===e.message)return[0,t.clone()];throw e}}function z(t,e){T(t instanceof a),T(e instanceof a);try{return[1,t.redDivSqrt(e)]}catch(e){if("Not invertible."===e.message||"X is not a square mod P."===e.message)return[0,t.clone()];throw e}}function C(t){return a.randomBits(t,32).toNumber()}function L(t,e){const r=new WeakMap;return function(i,s){const n=1&s,o=r.get(i);if(o&&null!==o[n])return o[n];const h=t.call(e,i,s);return r.has(i)||r.set(i,[null,null]),r.get(i)[n]=h,h}}t.Curve=l,t.Point=p,t.ShortCurve=b,t.ShortPoint=m,t.JPoint=g,t.MontCurve=w,t.MontPoint=y,t.XPoint=S,t.EdwardsCurve=v,t.EdwardsPoint=I,t.curves=R,t.curve=function(t,...e){T("string"==typeof t);const r=t.toUpperCase();let i=x[r];if(!i){const s=R[r];if(!s)throw new Error(`Curve not found: "${t}".`);i=new s(...e),x[r]=i}return i},t.register=function(t,e){T("string"==typeof t),T("function"==typeof e);const r=t.toUpperCase();if(R[r])throw new Error(`Curve already registered: "${t}".`);R[r]=e,x[r]=null}}],["bcrypto","/lib/js/precomputed/secp256k1.json",function(t,e,r,i,s,n){r.exports={naf:{width:8,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","0ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","02de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","02972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","0d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["049370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","091b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","0673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","0a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","09414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["078c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","04f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","073867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["0336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","060660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","0b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["04e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["0c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","021ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","0c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","09731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","0cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","0712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]},doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","04e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["06f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["0948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","0e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","067c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["0928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","0d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["08ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]}}}],["bcoin","/lib/workers/jobs.js",function(t,e,r,i,s,n){"use strict";const o=d(31,r),{derive:h}=d(49,r),f=d(53,r),a=d(54,r),u=t;u.execute=function(t){try{return u.handle(t)}catch(t){return new a.ErrorResultPacket(t)}},u.handle=function(t){switch(t.cmd){case a.types.CHECK:return u.check(t.tx,t.view,t.flags);case a.types.CHECKINPUT:return u.checkInput(t.tx,t.index,t.coin,t.flags);case a.types.SIGN:return u.sign(t.tx,t.rings,t.type);case a.types.SIGNINPUT:return u.signInput(t.tx,t.index,t.coin,t.ring,t.type);case a.types.ECVERIFY:return u.ecVerify(t.msg,t.sig,t.key);case a.types.ECSIGN:return u.ecSign(t.msg,t.key);case a.types.MINE:return u.mine(t.data,t.target,t.min,t.max);case a.types.SCRYPT:return u.scrypt(t.passwd,t.salt,t.N,t.r,t.p,t.len);default:throw new Error(`Unknown command: "${t.cmd}".`)}},u.check=function(t,e,r){try{t.check(e,r)}catch(t){if("ScriptError"===t.type)return new a.CheckResultPacket(t);throw t}return new a.CheckResultPacket},u.checkInput=function(t,e,r,i){try{t.checkInput(e,r,i)}catch(t){if("ScriptError"===t.type)return new a.CheckInputResultPacket(t);throw t}return new a.CheckInputResultPacket},u.sign=function(t,e,r){const i=t.sign(e,r);return a.SignResultPacket.fromTX(t,i)},u.signInput=function(t,e,r,i,s){const n=t.signInput(t,e,r,i,s);return a.SignInputResultPacket.fromTX(t,e,n)},u.ecVerify=function(t,e,r){const i=o.verifyDER(t,e,r);return new a.ECVerifyResultPacket(i)},u.ecSign=function(t,e){const r=o.signDER(t,e);return new a.ECSignResultPacket(r)},u.mine=function(t,e,r,i){const s=f(t,e,r,i);return new a.MineResultPacket(s)},u.scrypt=function(t,e,r,i,s,n){const o=h(t,e,r,i,s,n);return new a.ScryptResultPacket(o)}}],["bcrypto","/lib/scrypt-browser.js",function(t,e,r,i,s,n){"use strict";r.exports=d(50,r)}],["bcrypto","/lib/js/scrypt.js",function(t,e,r,s,n,h){"use strict";const f=d(28,r),a=d(51,r),u=d(44,r),c=i.alloc(64),l=new Uint32Array(16),p=new Uint32Array(16);function b(t){const e=l,r=p;for(let r=0;r<16;r++)e[r]=O(t,4*r);for(let t=0;t<16;t++)r[t]=e[t];for(let t=0;t<8;t+=2)r[4]^=m(r[0]+r[12],7),r[8]^=m(r[4]+r[0],9),r[12]^=m(r[8]+r[4],13),r[0]^=m(r[12]+r[8],18),r[9]^=m(r[5]+r[1],7),r[13]^=m(r[9]+r[5],9),r[1]^=m(r[13]+r[9],13),r[5]^=m(r[1]+r[13],18),r[14]^=m(r[10]+r[6],7),r[2]^=m(r[14]+r[10],9),r[6]^=m(r[2]+r[14],13),r[10]^=m(r[6]+r[2],18),r[3]^=m(r[15]+r[11],7),r[7]^=m(r[3]+r[15],9),r[11]^=m(r[7]+r[3],13),r[15]^=m(r[11]+r[7],18),r[1]^=m(r[0]+r[3],7),r[2]^=m(r[1]+r[0],9),r[3]^=m(r[2]+r[1],13),r[0]^=m(r[3]+r[2],18),r[6]^=m(r[5]+r[4],7),r[7]^=m(r[6]+r[5],9),r[4]^=m(r[7]+r[6],13),r[5]^=m(r[4]+r[7],18),r[11]^=m(r[10]+r[9],7),r[8]^=m(r[11]+r[10],9),r[9]^=m(r[8]+r[11],13),r[10]^=m(r[9]+r[8],18),r[12]^=m(r[15]+r[14],7),r[13]^=m(r[12]+r[15],9),r[14]^=m(r[13]+r[12],13),r[15]^=m(r[14]+r[13],18);for(let t=0;t<16;t++)e[t]+=r[t];for(let r=0;r<16;r++)A(t,e[r],4*r)}function m(t,e){return t<<e|t>>>32-e}function g(t,e,r,i){const s=c;v(s,t,0,64*(2*i-1),64);for(let n=0;n<2*i;n++)I(s,t,0,64*n,64),b(s),v(e,s,r+64*n,0,64);for(let s=0;s<i;s++)v(t,e,64*s,r+2*s*64,64);for(let s=0;s<i;s++)v(t,e,64*(s+i),r+64*(2*s+1),64)}function w(t,e){return O(t,64*(2*e-1))}function y(t,e,r,i,s,n){const o=n,h=n;v(o,t,0,e,128*r);for(let t=0;t<i;t++)v(s,o,t*(128*r),0,128*r),g(o,h,128*r,r);for(let t=0;t<i;t++){I(o,s,0,(w(o,r)&i-1)*(128*r),128*r),g(o,h,128*r,r)}v(t,o,e,0,128*r)}async function S(t,e,r,i,s,n){const o=n,h=n;v(o,t,0,e,128*r);for(let t=0;t<i;t++)v(s,o,t*(128*r),0,128*r),g(o,h,128*r,r),await E();for(let t=0;t<i;t++){I(o,s,0,(w(o,r)&i-1)*(128*r),128*r),g(o,h,128*r,r),await E()}v(t,o,e,0,128*r)}function v(t,e,r,i,s){e.copy(t,r,i,i+s)}function I(t,e,r,i,s){for(let n=0;n<s;n++)t[r+n]^=e[i+n]}function E(){return new Promise(t=>o(t))}function _(){for(let t=0;t<64;t++)c[t]=0;for(let t=0;t<16;t++)l[t]=0,p[t]=0}function O(t,e){return t[e++]+256*t[e++]+65536*t[e++]+16777216*t[e]}function A(t,e,r){return t[r++]=e,e>>>=8,t[r++]=e,e>>>=8,t[r++]=e,e>>>=8,t[r++]=e,r}t.native=0,t.derive=function(t,e,r,s,n,o){if("string"==typeof t&&(t=i.from(t,"utf8")),"string"==typeof e&&(e=i.from(e,"utf8")),null==e&&(e=i.alloc(0)),f(null!=t&&!0===t._isBuffer),f(null!=e&&!0===e._isBuffer),f(r>>>0===r),f(s>>>0===s),f(n>>>0===n),f(o>>>0===o),s*n>=1<<30)throw new Error("EFBIG");if(0!=(r&r-1)||0===r)throw new Error("EINVAL");if(r>4294967295)throw new Error("EINVAL");const h=i.allocUnsafe(256*s),c=i.allocUnsafe(128*s*r),d=a.derive(u,t,e,1,128*n*s);for(let t=0;t<n;t++)y(d,128*t*s,s,r,c,h);return _(),a.derive(u,t,d,1,o)},t.deriveAsync=async function(t,e,r,s,n,o){if("string"==typeof t&&(t=i.from(t,"utf8")),"string"==typeof e&&(e=i.from(e,"utf8")),null==e&&(e=i.alloc(0)),f(null!=t&&!0===t._isBuffer),f(null!=e&&!0===e._isBuffer),f(r>>>0===r),f(s>>>0===s),f(n>>>0===n),f(o>>>0===o),s*n>=1<<30)throw new Error("EFBIG");if(0!=(r&r-1)||0===r)throw new Error("EINVAL");if(r>4294967295)throw new Error("EINVAL");const h=i.allocUnsafe(256*s),c=i.allocUnsafe(128*s*r),d=await a.deriveAsync(u,t,e,1,128*n*s);for(let t=0;t<n;t++)await S(d,128*t*s,s,r,c,h);return _(),a.deriveAsync(u,t,d,1,o)}}],["bcrypto","/lib/pbkdf2-browser.js",function(t,e,r,i,s,n){"use strict";r.exports=d(52,r)}],["bcrypto","/lib/js/pbkdf2.js",function(e,r,s,n,o,h){"use strict";const f=d(28,s),a=(t.crypto||t.msCrypto||{}).subtle||{};function u(t,e,r,s,n){"string"==typeof e&&(e=i.from(e,"utf8")),"string"==typeof r&&(r=i.from(r,"utf8")),null==r&&(r=i.alloc(0)),f(t&&"string"==typeof t.id),f(null!=e&&!0===e._isBuffer),f(null!=r&&!0===r._isBuffer),f(s>>>0===s),f(n>>>0===n);const o=t.size,h=Math.ceil(n/o),a=i.allocUnsafe(h*o),u=i.allocUnsafe(r.length+4);r.copy(u,0),e.length>t.blockSize&&(e=t.digest(e),f(e.length<=t.blockSize));for(let i=0;i<h;i++){const n=i+1;u[r.length+0]=n>>>24,u[r.length+1]=n>>>16,u[r.length+2]=n>>>8,u[r.length+3]=n;const h=t.mac(u,e);let f=h;for(let r=1;r<s;r++){f=t.mac(f,e);for(let t=0;t<o;t++)h[t]^=f[t]}h.copy(a,i*o)}return a.slice(0,n)}e.native=0,e.derive=u,e.deriveAsync=async function(t,e,r,s,n){"string"==typeof e&&(e=i.from(e,"utf8")),"string"==typeof r&&(r=i.from(r,"utf8")),null==r&&(r=i.alloc(0)),f(t&&"string"==typeof t.id),f(null!=e&&!0===e._isBuffer),f(null!=r&&!0===r._isBuffer),f(s>>>0===s),f(n>>>0===n);const o=function(t){switch(t.id){case"SHA1":return"SHA-1";case"SHA256":return"SHA-256";case"SHA384":return"SHA-384";case"SHA512":return"SHA-512";default:return null}}(t);if(!a.importKey||!a.deriveBits||!o)return u(t,e,r,s,n);const h={name:"PBKDF2",salt:r,iterations:s,hash:o},c=await a.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]),d=await a.deriveBits(h,c,8*n);return i.from(d)}}],["bcoin","/lib/mining/mine.js",function(t,e,r,i,s,n){"use strict";const o=d(2,r),h=d(26,r);function f(t,e){o(t.length===e.length);for(let r=t.length-1;r>=0;r--){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return 0}r.exports=function(t,e,r,i){let s=r;for(t.writeUInt32LE(s,76,!0);s<=i;){if(f(h.digest(t),e)<=0)return s;s+=1,t.writeUInt32LE(s,76,!0)}return-1}}],["bcoin","/lib/workers/packets.js",function(t,e,r,i,s,n){"use strict";const o=d(2,r),h=d(17,r),f=d(55,r),a=d(75,r),u=d(76,r),c=d(78,r),l=d(81,r),p=d(91,r),b=d(86,r),m=d(67,r),{encoding:g}=h,w={ENV:0,EVENT:1,LOG:2,ERROR:3,ERRORRESULT:4,CHECK:5,CHECKRESULT:6,SIGN:7,SIGNRESULT:8,CHECKINPUT:9,CHECKINPUTRESULT:10,SIGNINPUT:11,SIGNINPUTRESULT:12,ECVERIFY:13,ECVERIFYRESULT:14,ECSIGN:15,ECSIGNRESULT:16,MINE:17,MINERESULT:18,SCRYPT:19,SCRYPTRESULT:20};class y{constructor(){this.id=++y.id>>>0,this.cmd=-1}getSize(){throw new Error("Abstract method.")}toWriter(){throw new Error("Abstract method.")}fromRaw(){throw new Error("Abstract method.")}static fromRaw(){throw new Error("Abstract method.")}}y.id=0;class S extends y{constructor(t){super(),this.cmd=w.ENV,this.env=t||{},this.json=JSON.stringify(this.env)}getSize(){return g.sizeVarString(this.json,"utf8")}toWriter(t){return t.writeVarString(this.json,"utf8"),t}fromRaw(t){const e=h.read(t,!0);return this.json=e.readVarString("utf8"),this.env=JSON.parse(this.json),this}static fromRaw(t){return(new S).fromRaw(t)}}class v extends y{constructor(t){super(),this.cmd=w.EVENT,this.items=t||[],this.json=JSON.stringify(this.items)}getSize(){return g.sizeVarString(this.json,"utf8")}toWriter(t){return t.writeVarString(this.json,"utf8"),t}fromRaw(t){const e=h.read(t,!0);return this.json=e.readVarString("utf8"),this.items=JSON.parse(this.json),this}static fromRaw(t){return(new v).fromRaw(t)}}class I extends y{constructor(t){super(),this.cmd=w.LOG,this.text=t||""}getSize(){return g.sizeVarString(this.text,"utf8")}toWriter(t){return t.writeVarString(this.text,"utf8"),t}fromRaw(t){const e=h.read(t,!0);return this.text=e.readVarString("utf8"),this}static fromRaw(t){return(new I).fromRaw(t)}}class E extends y{constructor(t){super(),this.cmd=w.ERROR,this.error=t||new Error}getSize(){const t=this.error;let e=0;switch(e+=g.sizeVarString(V(t.message),"utf8"),e+=g.sizeVarString(V(t.stack),"utf8"),e+=g.sizeVarString(V(t.type),"utf8"),typeof t.code){case"number":e+=1,e+=4;break;case"string":e+=1,e+=g.sizeVarString(t.code,"utf8");break;default:e+=1}return e}toWriter(t){const e=this.error;switch(t.writeVarString(V(e.message),"utf8"),t.writeVarString(V(e.stack),"utf8"),t.writeVarString(V(e.type),"utf8"),typeof e.code){case"number":t.writeU8(2),t.writeI32(e.code);break;case"string":t.writeU8(1),t.writeVarString(e.code,"utf8");break;default:t.writeU8(0)}return t}fromRaw(t){const e=h.read(t,!0),r=this.error;switch(r.message=e.readVarString("utf8"),r.stack=e.readVarString("utf8"),r.type=e.readVarString("utf8"),e.readU8()){case 2:r.code=e.readI32();break;case 1:r.code=e.readVarString("utf8");break;default:r.code=null}return this}static fromRaw(t){return(new E).fromRaw(t)}}class _ extends E{constructor(t){super(t),this.cmd=w.ERRORRESULT}static fromRaw(t){return(new _).fromRaw(t)}}class O extends y{constructor(t,e,r){super(),this.cmd=w.CHECK,this.tx=t||null,this.view=e||null,this.flags=null!=r?r:null}getSize(){return this.tx.getSize()+this.view.getSize(this.tx)+4}toWriter(t){return this.tx.toWriter(t),this.view.toWriter(t,this.tx),t.writeI32(null!=this.flags?this.flags:-1),t}fromRaw(t){const e=h.read(t,!0);return this.tx=l.fromReader(e),this.view=b.fromReader(e,this.tx),this.flags=e.readI32(),-1===this.flags&&(this.flags=null),this}static fromRaw(t){return(new O).fromRaw(t)}}class A extends y{constructor(t){super(),this.cmd=w.CHECKRESULT,this.error=t||null}getSize(){const t=this.error;let e=0;return t?(e+=1,e+=g.sizeVarString(V(t.message),"utf8"),e+=g.sizeVarString(V(t.stack),"utf8"),e+=g.sizeVarString(V(t.code),"utf8"),e+=1,e+=4):e+=1}toWriter(t){const e=this.error;return e?(t.writeU8(1),t.writeVarString(V(e.message),"utf8"),t.writeVarString(V(e.stack),"utf8"),t.writeVarString(V(e.code),"utf8"),t.writeU8(-1===e.op?255:e.op),t.writeU32(-1===e.ip?4294967295:e.ip),t):(t.writeU8(0),t)}fromRaw(t){const e=h.read(t,!0);if(0===e.readU8())return this;const r=new m("");return r.message=e.readVarString("utf8"),r.stack=e.readVarString("utf8"),r.code=e.readVarString("utf8"),r.op=e.readU8(),r.ip=e.readU32(),255===r.op&&(r.op=-1),4294967295===r.ip&&(r.ip=-1),this.error=r,this}static fromRaw(t){return(new A).fromRaw(t)}}class M extends y{constructor(t,e,r){super(),this.cmd=w.SIGN,this.tx=t||null,this.rings=e||[],this.type=null!=r?r:1}getSize(){let t=0;t+=this.tx.getSize(),t+=this.tx.view.getSize(this.tx),t+=g.sizeVarint(this.rings.length);for(const e of this.rings)t+=e.getSize();return t+=1}toWriter(t){this.tx.toWriter(t),this.tx.view.toWriter(t,this.tx),t.writeVarint(this.rings.length);for(const e of this.rings)e.toWriter(t);return t.writeU8(this.type),t}fromRaw(t){const e=h.read(t,!0);this.tx=c.fromReader(e),this.tx.view.fromReader(e,this.tx);const r=e.readVarint();for(let t=0;t<r;t++){const t=p.fromReader(e);this.rings.push(t)}return this.type=e.readU8(),this}static fromRaw(t){return(new M).fromRaw(t)}}class N extends y{constructor(t,e,r){super(),this.cmd=w.SIGNRESULT,this.total=t||0,this.script=r||[],this.witness=e||[]}fromTX(t,e){this.total=e;for(const e of t.inputs)this.script.push(e.script),this.witness.push(e.witness);return this}static fromTX(t,e){return(new N).fromTX(t,e)}getSize(){let t=0;t+=g.sizeVarint(this.total),t+=g.sizeVarint(this.script.length);for(let e=0;e<this.script.length;e++){const r=this.script[e],i=this.witness[e];t+=r.getVarSize(),t+=i.getVarSize()}return t}toWriter(t){o(this.script.length===this.witness.length),t.writeVarint(this.total),t.writeVarint(this.script.length);for(let e=0;e<this.script.length;e++)this.script[e].toWriter(t),this.witness[e].toWriter(t);return t}inject(t){o(this.script.length===t.inputs.length),o(this.witness.length===t.inputs.length);for(let e=0;e<t.inputs.length;e++){const r=t.inputs[e];r.script=this.script[e],r.witness=this.witness[e]}}fromRaw(t){const e=h.read(t,!0);this.total=e.readVarint();const r=e.readVarint();for(let t=0;t<r;t++)this.script.push(f.fromReader(e)),this.witness.push(a.fromReader(e));return this}static fromRaw(t){return(new N).fromRaw(t)}}class P extends y{constructor(t,e,r,i){super(),this.cmd=w.CHECKINPUT,this.tx=t||null,this.index=e,this.coin=r||null,this.flags=null!=i?i:null}getSize(){let t=0;return t+=this.tx.getSize(),t+=g.sizeVarint(this.index),t+=g.sizeVarint(this.coin.value),t+=this.coin.script.getVarSize(),t+=4}toWriter(t){return this.tx.toWriter(t),t.writeVarint(this.index),t.writeVarint(this.coin.value),this.coin.script.toWriter(t),t.writeI32(null!=this.flags?this.flags:-1),t}fromRaw(t){const e=h.read(t,!0);return this.tx=l.fromReader(e),this.index=e.readVarint(),this.coin=new u,this.coin.value=e.readVarint(),this.coin.script.fromReader(e),this.flags=e.readI32(),-1===this.flags&&(this.flags=null),this}static fromRaw(t){return(new P).fromRaw(t)}}class R extends A{constructor(t){super(t),this.cmd=w.CHECKINPUTRESULT}static fromRaw(t){return(new R).fromRaw(t)}}class x extends y{constructor(t,e,r,i,s){super(),this.cmd=w.SIGNINPUT,this.tx=t||null,this.index=e,this.coin=r||null,this.ring=i||null,this.type=null!=s?s:1}getSize(){let t=0;return t+=this.tx.getSize(),t+=g.sizeVarint(this.index),t+=g.sizeVarint(this.coin.value),t+=this.coin.script.getVarSize(),t+=this.ring.getSize(),t+=1}toWriter(t){return this.tx.toWriter(t),t.writeVarint(this.index),t.writeVarint(this.coin.value),this.coin.script.toWriter(t),this.ring.toWriter(t),t.writeU8(this.type),t}fromRaw(t){const e=h.read(t,!0);return this.tx=c.fromReader(e),this.index=e.readVarint(),this.coin=new u,this.coin.value=e.readVarint(),this.coin.script.fromReader(e),this.ring=p.fromReader(e),this.type=e.readU8(),this}static fromRaw(t){return(new x).fromRaw(t)}}class B extends y{constructor(t,e,r){super(),this.cmd=w.SIGNINPUTRESULT,this.value=t||!1,this.script=r||null,this.witness=e||null}fromTX(t,e,r){const i=t.inputs[e];return o(i),this.value=r,this.script=i.script,this.witness=i.witness,this}static fromTX(t,e,r){return(new B).fromTX(t,e,r)}getSize(){return 1+this.script.getVarSize()+this.witness.getVarSize()}toWriter(t){return t.writeU8(this.value?1:0),this.script.toWriter(t),this.witness.toWriter(t),t}inject(t,e){const r=t.inputs[e];o(r),r.script=this.script,r.witness=this.witness}fromRaw(t){const e=h.read(t,!0);return this.value=1===e.readU8(),this.script=f.fromReader(e),this.witness=a.fromReader(e),this}static fromRaw(t){return(new B).fromRaw(t)}}class k extends y{constructor(t,e,r){super(),this.cmd=w.ECVERIFY,this.msg=t||null,this.sig=e||null,this.key=r||null}getSize(){let t=0;return t+=g.sizeVarBytes(this.msg),t+=g.sizeVarBytes(this.sig),t+=g.sizeVarBytes(this.key)}toWriter(t){return t.writeVarBytes(this.msg),t.writeVarBytes(this.sig),t.writeVarBytes(this.key),t}fromRaw(t){const e=h.read(t,!0);return this.msg=e.readVarBytes(),this.sig=e.readVarBytes(),this.key=e.readVarBytes(),this}static fromRaw(t){return(new k).fromRaw(t)}}class T extends y{constructor(t){super(),this.cmd=w.ECVERIFYRESULT,this.value=t}getSize(){return 1}toWriter(t){return t.writeU8(this.value?1:0),t}fromRaw(t){const e=h.read(t,!0);return this.value=1===e.readU8(),this}static fromRaw(t){return(new T).fromRaw(t)}}class U extends y{constructor(t,e){super(),this.cmd=w.ECSIGN,this.msg=t||null,this.key=e||null}getSize(){let t=0;return t+=g.sizeVarBytes(this.msg),t+=g.sizeVarBytes(this.key)}toWriter(t){return t.writeVarBytes(this.msg),t.writeVarBytes(this.key),t}fromRaw(t){const e=h.read(t,!0);return this.msg=e.readVarBytes(),this.key=e.readVarBytes(),this}static fromRaw(t){return(new U).fromRaw(t)}}class z extends y{constructor(t){super(),this.cmd=w.ECSIGNRESULT,this.sig=t}getSize(){return g.sizeVarBytes(this.sig)}toWriter(t){return t.writeVarBytes(this.sig),t}fromRaw(t){const e=h.read(t,!0);return this.sig=e.readVarBytes(),this}static fromRaw(t){return(new z).fromRaw(t)}}class C extends y{constructor(t,e,r,i){super(),this.cmd=w.MINE,this.data=t||null,this.target=e||null,this.min=null!=r?r:-1,this.max=null!=i?i:-1}getSize(){return 120}toWriter(t){return t.writeBytes(this.data),t.writeBytes(this.target),t.writeU32(this.min),t.writeU32(this.max),t}fromRaw(t){const e=h.read(t,!0);return this.data=e.readBytes(80),this.target=e.readBytes(32),this.min=e.readU32(),this.max=e.readU32(),this}static fromRaw(t){return(new C).fromRaw(t)}}class L extends y{constructor(t){super(),this.cmd=w.MINERESULT,this.nonce=null!=t?t:-1}getSize(){return 5}toWriter(t){return t.writeU8(-1!==this.nonce?1:0),t.writeU32(this.nonce),t}fromRaw(t){const e=h.read(t,!0);return this.nonce=-1,1===e.readU8()&&(this.nonce=e.readU32()),this}static fromRaw(t){return(new L).fromRaw(t)}}class q extends y{constructor(t,e,r,i,s,n){super(),this.cmd=w.SCRYPT,this.passwd=t||null,this.salt=e||null,this.N=null!=r?r:-1,this.r=null!=i?i:-1,this.p=null!=s?s:-1,this.len=null!=n?n:-1}getSize(){let t=0;return t+=g.sizeVarBytes(this.passwd),t+=g.sizeVarBytes(this.salt),t+=16}toWriter(t){return t.writeVarBytes(this.passwd),t.writeVarBytes(this.salt),t.writeU32(this.N),t.writeU32(this.r),t.writeU32(this.p),t.writeU32(this.len),t}fromRaw(t){const e=h.read(t,!0);return this.passwd=e.readVarBytes(),this.salt=e.readVarBytes(),this.N=e.readU32(),this.r=e.readU32(),this.p=e.readU32(),this.len=e.readU32(),this}static fromRaw(t){return(new q).fromRaw(t)}}class F extends y{constructor(t){super(),this.cmd=w.SCRYPTRESULT,this.key=t||null}getSize(){return g.sizeVarBytes(this.key)}toWriter(t){return t.writeVarBytes(this.key),t}fromRaw(t){const e=h.read(t,!0);return this.key=e.readVarBytes(),this}static fromRaw(t){return(new F).fromRaw(t)}}function V(t){return"string"!=typeof t?"":t}t.types=w,t.EnvPacket=S,t.EventPacket=v,t.LogPacket=I,t.ErrorPacket=E,t.ErrorResultPacket=_,t.CheckPacket=O,t.CheckResultPacket=A,t.SignPacket=M,t.SignResultPacket=N,t.CheckInputPacket=P,t.CheckInputResultPacket=R,t.SignInputPacket=x,t.SignInputResultPacket=B,t.ECVerifyPacket=k,t.ECVerifyResultPacket=T,t.ECSignPacket=U,t.ECSignResultPacket=z,t.MinePacket=C,t.MineResultPacket=L,t.ScryptPacket=q,t.ScryptResultPacket=F}],["bcoin","/lib/script/script.js",function(t,e,r,s,n,o){"use strict";const h=d(2,r),f=d(17,r),a=d(56,r),u=d(58,r),c=d(44,r),l=d(60,r),p=d(26,r),b=d(31,r),m=d(11,r),g=d(62,r),w=d(63,r),y=d(68,r),S=d(69,r),v=d(67,r),I=d(65,r),E=d(64,r),_=d(70,r),O=E.opcodes,A=E.types,{encoding:M}=f,{inspectSymbol:N}=d(14,r),P=i.alloc(0);class R{constructor(t){this.raw=P,this.code=[],t&&this.fromOptions(t)}get length(){return this.code.length}set length(t){this.code.length=t}fromOptions(t){if(h(t,"Script data is required."),null!=t&&!0===t._isBuffer)return this.fromRaw(t);if(Array.isArray(t))return this.fromArray(t);if(t.raw){if(!t.code)return this.fromRaw(t.raw);h(null!=t.raw&&!0===t.raw._isBuffer,"Raw must be a Buffer."),this.raw=t.raw}if(t.code){if(!t.raw)return this.fromArray(t.code);h(Array.isArray(t.code),"Code must be an array."),this.code=t.code}return this}static fromOptions(t){return(new this).fromOptions(t)}values(){return this.code.values()}entries(){return this.code.entries()}[Symbol.iterator](){return this.code[Symbol.iterator]()}toArray(){return this.code.slice()}fromArray(t){h(Array.isArray(t)),this.clear();for(const e of t)this.push(e);return this.compile()}static fromArray(t){return(new this).fromArray(t)}toItems(){const t=[];for(const e of this.code){const r=e.toPush();if(!r)throw new Error("Non-push opcode in script.");t.push(r)}return t}fromItems(t){h(Array.isArray(t)),this.clear();for(const e of t)this.pushData(e);return this.compile()}static fromItems(t){return(new this).fromItems(t)}toStack(){return new S(this.toItems())}fromStack(t){return this.fromItems(t.items)}static fromStack(t){return(new this).fromStack(t)}clone(){return(new this.constructor).inject(this)}inject(t){return this.raw=t.raw,this.code=t.code.slice(),this}equals(t){return h(R.isScript(t)),this.raw.equals(t.raw)}compare(t){return h(R.isScript(t)),this.raw.compare(t.raw)}clear(){return this.raw=P,this.code.length=0,this}[N](){return`<Script: ${this.toString()}>`}toString(){const t=[];for(const e of this.code)t.push(e.toFormat());return t.join(" ")}toASM(t){this.isNulldata()&&(t=!1);const e=[];for(const r of this.code)e.push(r.toASM(t));return e.join(" ")}compile(){if(0===this.code.length)return this.clear();let t=0;for(const e of this.code)t+=e.getSize();const e=f.write(t);for(const t of this.code)t.toWriter(e);return this.raw=e.render(),this}toWriter(t){return t.writeVarBytes(this.raw),t}toRaw(){return this.raw}toJSON(){return this.toRaw().toString("hex")}fromJSON(t){return h("string"==typeof t,"Code must be a string."),this.fromRaw(i.from(t,"hex"))}static fromJSON(t){return(new this).fromJSON(t)}getSubscript(t){if(0===t)return this.clone();const e=new R;for(let r=t;r<this.code.length;r++){const t=this.code[r];if(-1===t.value)break;e.code.push(t)}return e.compile()}removeSeparators(){let t=!1;for(const e of this.code){if(-1===e.value)break;if(e.value===O.OP_CODESEPARATOR){t=!0;break}}if(!t)return this;const e=new R;for(const t of this.code){if(-1===t.value)break;t.value!==O.OP_CODESEPARATOR&&e.code.push(t)}return e.compile()}execute(t,e,r,i,s,n){if(null==e&&(e=R.flags.STANDARD_VERIFY_FLAGS),null==n&&(n=0),this.raw.length>m.MAX_SCRIPT_SIZE)throw new v("SCRIPT_SIZE");const o=[],f=[];let d=0,b=0,g=0,w=!1;e&R.flags.VERIFY_MINIMALDATA&&(w=!0);for(let y=0;y<this.code.length;y++){const S=this.code[y];if(-1===S.value)throw new v("BAD_OPCODE",S,y);if(S.data&&S.data.length>m.MAX_SCRIPT_PUSH)throw new v("PUSH_SIZE",S,y);if(S.value>O.OP_16&&++b>m.MAX_SCRIPT_OPS)throw new v("OP_COUNT",S,y);if(S.isDisabled())throw new v("DISABLED_OPCODE",S,y);if(S.value===O.OP_CODESEPARATOR&&0===n&&e&R.flags.VERIFY_CONST_SCRIPTCODE)throw new v("OP_CODESEPARATOR",S,y);if(!g||S.isBranch())if(S.data){if(w&&!S.isMinimal())throw new v("MINIMALDATA",S,y);if(t.push(S.data),t.length+f.length>m.MAX_SCRIPT_STACK)throw new v("STACK_SIZE",S,y)}else{switch(S.value){case O.OP_0:t.pushInt(0);break;case O.OP_1NEGATE:t.pushInt(-1);break;case O.OP_1:case O.OP_2:case O.OP_3:case O.OP_4:case O.OP_5:case O.OP_6:case O.OP_7:case O.OP_8:case O.OP_9:case O.OP_10:case O.OP_11:case O.OP_12:case O.OP_13:case O.OP_14:case O.OP_15:case O.OP_16:t.pushInt(S.value-80);break;case O.OP_NOP:break;case O.OP_CHECKLOCKTIMEVERIFY:{if(!(e&R.flags.VERIFY_CHECKLOCKTIMEVERIFY))break;if(!r)throw new v("UNKNOWN_ERROR","No TX passed in.");if(0===t.length)throw new v("INVALID_STACK_OPERATION",S,y);const s=t.getNum(-1,w,5);if(s.isNeg())throw new v("NEGATIVE_LOCKTIME",S,y);const n=s.toDouble();if(!r.verifyLocktime(i,n))throw new v("UNSATISFIED_LOCKTIME",S,y);break}case O.OP_CHECKSEQUENCEVERIFY:{if(!(e&R.flags.VERIFY_CHECKSEQUENCEVERIFY))break;if(!r)throw new v("UNKNOWN_ERROR","No TX passed in.");if(0===t.length)throw new v("INVALID_STACK_OPERATION",S,y);const s=t.getNum(-1,w,5);if(s.isNeg())throw new v("NEGATIVE_LOCKTIME",S,y);const n=s.toDouble();if(!r.verifySequence(i,n))throw new v("UNSATISFIED_LOCKTIME",S,y);break}case O.OP_NOP1:case O.OP_NOP4:case O.OP_NOP5:case O.OP_NOP6:case O.OP_NOP7:case O.OP_NOP8:case O.OP_NOP9:case O.OP_NOP10:if(e&R.flags.VERIFY_DISCOURAGE_UPGRADABLE_NOPS)throw new v("DISCOURAGE_UPGRADABLE_NOPS",S,y);break;case O.OP_IF:case O.OP_NOTIF:{let r=!1;if(!g){if(t.length<1)throw new v("UNBALANCED_CONDITIONAL",S,y);if(1===n&&e&R.flags.VERIFY_MINIMALIF){const e=t.get(-1);if(e.length>1)throw new v("MINIMALIF");if(1===e.length&&1!==e[0])throw new v("MINIMALIF")}r=t.getBool(-1),S.value===O.OP_NOTIF&&(r=!r),t.pop()}o.push(r),r||(g+=1);break}case O.OP_ELSE:if(0===o.length)throw new v("UNBALANCED_CONDITIONAL",S,y);o[o.length-1]=!o[o.length-1],o[o.length-1]?g-=1:g+=1;break;case O.OP_ENDIF:if(0===o.length)throw new v("UNBALANCED_CONDITIONAL",S,y);o.pop()||(g-=1);break;case O.OP_VERIFY:if(0===t.length)throw new v("INVALID_STACK_OPERATION",S,y);if(!t.getBool(-1))throw new v("VERIFY",S,y);t.pop();break;case O.OP_RETURN:throw new v("OP_RETURN",S,y);case O.OP_TOALTSTACK:if(0===t.length)throw new v("INVALID_STACK_OPERATION",S,y);f.push(t.pop());break;case O.OP_FROMALTSTACK:if(0===f.length)throw new v("INVALID_ALTSTACK_OPERATION",S,y);t.push(f.pop());break;case O.OP_2DROP:if(t.length<2)throw new v("INVALID_STACK_OPERATION",S,y);t.pop(),t.pop();break;case O.OP_2DUP:{if(t.length<2)throw new v("INVALID_STACK_OPERATION",S,y);const e=t.get(-2),r=t.get(-1);t.push(e),t.push(r);break}case O.OP_3DUP:{if(t.length<3)throw new v("INVALID_STACK_OPERATION",S,y);const e=t.get(-3),r=t.get(-2),i=t.get(-1);t.push(e),t.push(r),t.push(i);break}case O.OP_2OVER:{if(t.length<4)throw new v("INVALID_STACK_OPERATION",S,y);const e=t.get(-4),r=t.get(-3);t.push(e),t.push(r);break}case O.OP_2ROT:{if(t.length<6)throw new v("INVALID_STACK_OPERATION",S,y);const e=t.get(-6),r=t.get(-5);t.erase(-6,-4),t.push(e),t.push(r);break}case O.OP_2SWAP:if(t.length<4)throw new v("INVALID_STACK_OPERATION",S,y);t.swap(-4,-2),t.swap(-3,-1);break;case O.OP_IFDUP:if(0===t.length)throw new v("INVALID_STACK_OPERATION",S,y);if(t.getBool(-1)){const e=t.get(-1);t.push(e)}break;case O.OP_DEPTH:t.pushInt(t.length);break;case O.OP_DROP:if(0===t.length)throw new v("INVALID_STACK_OPERATION",S,y);t.pop();break;case O.OP_DUP:if(0===t.length)throw new v("INVALID_STACK_OPERATION",S,y);t.push(t.get(-1));break;case O.OP_NIP:if(t.length<2)throw new v("INVALID_STACK_OPERATION",S,y);t.remove(-2);break;case O.OP_OVER:if(t.length<2)throw new v("INVALID_STACK_OPERATION",S,y);t.push(t.get(-2));break;case O.OP_PICK:case O.OP_ROLL:{if(t.length<2)throw new v("INVALID_STACK_OPERATION",S,y);const e=t.getInt(-1,w,4);if(t.pop(),e<0||e>=t.length)throw new v("INVALID_STACK_OPERATION",S,y);const r=t.get(-e-1);S.value===O.OP_ROLL&&t.remove(-e-1),t.push(r);break}case O.OP_ROT:if(t.length<3)throw new v("INVALID_STACK_OPERATION",S,y);t.swap(-3,-2),t.swap(-2,-1);break;case O.OP_SWAP:if(t.length<2)throw new v("INVALID_STACK_OPERATION",S,y);t.swap(-2,-1);break;case O.OP_TUCK:if(t.length<2)throw new v("INVALID_STACK_OPERATION",S,y);t.insert(-2,t.get(-1));break;case O.OP_SIZE:if(t.length<1)throw new v("INVALID_STACK_OPERATION",S,y);t.pushInt(t.get(-1).length);break;case O.OP_EQUAL:case O.OP_EQUALVERIFY:{if(t.length<2)throw new v("INVALID_STACK_OPERATION",S,y);const e=t.get(-2),r=t.get(-1),i=e.equals(r);if(t.pop(),t.pop(),t.pushBool(i),S.value===O.OP_EQUALVERIFY){if(!i)throw new v("EQUALVERIFY",S,y);t.pop()}break}case O.OP_1ADD:case O.OP_1SUB:case O.OP_NEGATE:case O.OP_ABS:case O.OP_NOT:case O.OP_0NOTEQUAL:{if(t.length<1)throw new v("INVALID_STACK_OPERATION",S,y);let e,r=t.getNum(-1,w,4);switch(S.value){case O.OP_1ADD:r.iaddn(1);break;case O.OP_1SUB:r.isubn(1);break;case O.OP_NEGATE:r.ineg();break;case O.OP_ABS:r.iabs();break;case O.OP_NOT:e=r.isZero(),r=I.fromBool(e);break;case O.OP_0NOTEQUAL:e=!r.isZero(),r=I.fromBool(e);break;default:h(!1,"Fatal script error.")}t.pop(),t.pushNum(r);break}case O.OP_ADD:case O.OP_SUB:case O.OP_BOOLAND:case O.OP_BOOLOR:case O.OP_NUMEQUAL:case O.OP_NUMEQUALVERIFY:case O.OP_NUMNOTEQUAL:case O.OP_LESSTHAN:case O.OP_GREATERTHAN:case O.OP_LESSTHANOREQUAL:case O.OP_GREATERTHANOREQUAL:case O.OP_MIN:case O.OP_MAX:{if(t.length<2)throw new v("INVALID_STACK_OPERATION",S,y);const e=t.getNum(-2,w,4),r=t.getNum(-1,w,4);let i,s;switch(S.value){case O.OP_ADD:i=e.iadd(r);break;case O.OP_SUB:i=e.isub(r);break;case O.OP_BOOLAND:s=e.toBool()&&r.toBool(),i=I.fromBool(s);break;case O.OP_BOOLOR:s=e.toBool()||r.toBool(),i=I.fromBool(s);break;case O.OP_NUMEQUAL:case O.OP_NUMEQUALVERIFY:s=e.eq(r),i=I.fromBool(s);break;case O.OP_NUMNOTEQUAL:s=!e.eq(r),i=I.fromBool(s);break;case O.OP_LESSTHAN:s=e.lt(r),i=I.fromBool(s);break;case O.OP_GREATERTHAN:s=e.gt(r),i=I.fromBool(s);break;case O.OP_LESSTHANOREQUAL:s=e.lte(r),i=I.fromBool(s);break;case O.OP_GREATERTHANOREQUAL:s=e.gte(r),i=I.fromBool(s);break;case O.OP_MIN:i=I.min(e,r);break;case O.OP_MAX:i=I.max(e,r);break;default:h(!1,"Fatal script error.")}if(t.pop(),t.pop(),t.pushNum(i),S.value===O.OP_NUMEQUALVERIFY){if(!t.getBool(-1))throw new v("NUMEQUALVERIFY",S,y);t.pop()}break}case O.OP_WITHIN:{if(t.length<3)throw new v("INVALID_STACK_OPERATION",S,y);const e=t.getNum(-3,w,4),r=t.getNum(-2,w,4),i=t.getNum(-1,w,4),s=r.lte(e)&&e.lt(i);t.pop(),t.pop(),t.pop(),t.pushBool(s);break}case O.OP_RIPEMD160:if(0===t.length)throw new v("INVALID_STACK_OPERATION",S,y);t.push(a.digest(t.pop()));break;case O.OP_SHA1:if(0===t.length)throw new v("INVALID_STACK_OPERATION",S,y);t.push(u.digest(t.pop()));break;case O.OP_SHA256:if(0===t.length)throw new v("INVALID_STACK_OPERATION",S,y);t.push(c.digest(t.pop()));break;case O.OP_HASH160:if(0===t.length)throw new v("INVALID_STACK_OPERATION",S,y);t.push(l.digest(t.pop()));break;case O.OP_HASH256:if(0===t.length)throw new v("INVALID_STACK_OPERATION",S,y);t.push(p.digest(t.pop()));break;case O.OP_CODESEPARATOR:d=y+1;break;case O.OP_CHECKSIG:case O.OP_CHECKSIGVERIFY:{if(!r)throw new v("UNKNOWN_ERROR","No TX passed in.");if(t.length<2)throw new v("INVALID_STACK_OPERATION",S,y);const o=t.get(-2),h=t.get(-1),f=this.getSubscript(d);if(0===n){if(f.findAndDelete(o)>0&&e&R.flags.VERIFY_CONST_SCRIPTCODE)throw new v("SIG_FINDANDDELETE",S,y)}B(o,e),x(h,e,n);let a=!1;if(o.length>0){const t=o[o.length-1];a=k(r.signatureHash(i,f,s,t,n),o,h)}if(!a&&e&R.flags.VERIFY_NULLFAIL&&0!==o.length)throw new v("NULLFAIL",S,y);if(t.pop(),t.pop(),t.pushBool(a),S.value===O.OP_CHECKSIGVERIFY){if(!a)throw new v("CHECKSIGVERIFY",S,y);t.pop()}break}case O.OP_CHECKMULTISIG:case O.OP_CHECKMULTISIGVERIFY:{if(!r)throw new v("UNKNOWN_ERROR","No TX passed in.");let o=1;if(t.length<o)throw new v("INVALID_STACK_OPERATION",S,y);let h,f,a=t.getInt(-o,w,4),u=a+2;if(a<0||a>m.MAX_MULTISIG_PUBKEYS)throw new v("PUBKEY_COUNT",S,y);if((b+=a)>m.MAX_SCRIPT_OPS)throw new v("OP_COUNT",S,y);if(h=o+=1,o+=a,t.length<o)throw new v("INVALID_STACK_OPERATION",S,y);let c=t.getInt(-o,w,4);if(c<0||c>a)throw new v("SIG_COUNT",S,y);if(f=o+=1,o+=c,t.length<o)throw new v("INVALID_STACK_OPERATION",S,y);const l=this.getSubscript(d);for(let r=0;r<c;r++){const i=t.get(-f-r);if(0===n){if(l.findAndDelete(i)>0&&e&R.flags.VERIFY_CONST_SCRIPTCODE)throw new v("SIG_FINDANDDELETE",S,y)}}let p=!0;for(;p&&c>0;){const o=t.get(-f),u=t.get(-h);if(B(o,e),x(u,e,n),o.length>0){const t=o[o.length-1];k(r.signatureHash(i,l,s,t,n),o,u)&&(f+=1,c-=1)}h+=1,c>(a-=1)&&(p=!1)}for(;o>1;){if(!p&&e&R.flags.VERIFY_NULLFAIL&&0===u&&0!==t.get(-1).length)throw new v("NULLFAIL",S,y);u>0&&(u-=1),t.pop(),o-=1}if(t.length<1)throw new v("INVALID_STACK_OPERATION",S,y);if(e&R.flags.VERIFY_NULLDUMMY&&0!==t.get(-1).length)throw new v("SIG_NULLDUMMY",S,y);if(t.pop(),t.pushBool(p),S.value===O.OP_CHECKMULTISIGVERIFY){if(!p)throw new v("CHECKMULTISIGVERIFY",S,y);t.pop()}break}default:throw new v("BAD_OPCODE",S,y)}if(t.length+f.length>m.MAX_SCRIPT_STACK)throw new v("STACK_SIZE",S,y)}else if(t.length+f.length>m.MAX_SCRIPT_STACK)throw new v("STACK_SIZE",S,y)}if(0!==o.length)throw new v("UNBALANCED_CONDITIONAL")}findAndDelete(t){const e=y.fromPush(t);if(this.raw.length<e.getSize())return 0;let r=!1;for(const t of this.code){if(-1===t.value)break;if(t.equals(e)){r=!0;break}}if(!r)return 0;const i=[];let s=0;for(const t of this.code){if(-1===t.value)break;t.equals(e)?s+=1:i.push(t)}return this.code=i,this.compile(),s}indexOf(t){for(let e=0;e<this.code.length;e++){const r=this.code[e];if(-1===r.value)break;if(r.data&&r.data.equals(t))return e}return-1}isCode(){for(const t of this.code){if(-1===t.value)return!1;if(t.isDisabled())return!1;switch(t.value){case O.OP_RESERVED:case O.OP_NOP:case O.OP_VER:case O.OP_VERIF:case O.OP_VERNOTIF:case O.OP_RESERVED1:case O.OP_RESERVED2:case O.OP_NOP1:return!1}if(t.value>O.OP_CHECKSEQUENCEVERIFY)return!1}return!0}fromPubkey(t){return h(null!=t&&!0===t._isBuffer&&(33===t.length||65===t.length)),this.raw=i.allocUnsafe(1+t.length+1),this.raw[0]=t.length,t.copy(this.raw,1),this.raw[1+t.length]=O.OP_CHECKSIG,t=this.raw.slice(1,1+t.length),this.code.length=0,this.code.push(y.fromPush(t)),this.code.push(y.fromOp(O.OP_CHECKSIG)),this}static fromPubkey(t){return(new this).fromPubkey(t)}fromPubkeyhash(t){return h(null!=t&&!0===t._isBuffer&&20===t.length),this.raw=i.allocUnsafe(25),this.raw[0]=O.OP_DUP,this.raw[1]=O.OP_HASH160,this.raw[2]=20,t.copy(this.raw,3),this.raw[23]=O.OP_EQUALVERIFY,this.raw[24]=O.OP_CHECKSIG,t=this.raw.slice(3,23),this.code.length=0,this.code.push(y.fromOp(O.OP_DUP)),this.code.push(y.fromOp(O.OP_HASH160)),this.code.push(y.fromPush(t)),this.code.push(y.fromOp(O.OP_EQUALVERIFY)),this.code.push(y.fromOp(O.OP_CHECKSIG)),this}static fromPubkeyhash(t){return(new this).fromPubkeyhash(t)}fromMultisig(t,e,r){h((255&t)===t&&(255&e)===e),h(Array.isArray(r)),h(r.length===e,"`n` keys are required for multisig."),h(t>=1&&t<=e),h(e>=1&&e<=15),this.clear(),this.pushSmall(t);for(const t of function(t){return t.slice().sort((t,e)=>t.compare(e))}(r))this.pushData(t);return this.pushSmall(e),this.pushOp(O.OP_CHECKMULTISIG),this.compile()}static fromMultisig(t,e,r){return(new this).fromMultisig(t,e,r)}fromScripthash(t){return h(null!=t&&!0===t._isBuffer&&20===t.length),this.raw=i.allocUnsafe(23),this.raw[0]=O.OP_HASH160,this.raw[1]=20,t.copy(this.raw,2),this.raw[22]=O.OP_EQUAL,t=this.raw.slice(2,22),this.code.length=0,this.code.push(y.fromOp(O.OP_HASH160)),this.code.push(y.fromPush(t)),this.code.push(y.fromOp(O.OP_EQUAL)),this}static fromScripthash(t){return(new this).fromScripthash(t)}fromNulldata(t){return h(null!=t&&!0===t._isBuffer),h(t.length<=g.MAX_OP_RETURN,"Nulldata too large."),this.clear(),this.pushOp(O.OP_RETURN),this.pushData(t),this.compile()}static fromNulldata(t){return(new this).fromNulldata(t)}fromProgram(t,e){return h((255&t)===t&&t>=0&&t<=16),h(null!=e&&!0===e._isBuffer&&e.length>=2&&e.length<=40),this.raw=i.allocUnsafe(2+e.length),this.raw[0]=0===t?0:t+80,this.raw[1]=e.length,e.copy(this.raw,2),e=this.raw.slice(2,2+e.length),this.code.length=0,this.code.push(y.fromSmall(t)),this.code.push(y.fromPush(e)),this}static fromProgram(t,e){return(new this).fromProgram(t,e)}fromAddress(t){if("string"==typeof t&&(t=_.fromString(t)),h(t instanceof _,"Not an address."),t.isPubkeyhash())return this.fromPubkeyhash(t.hash);if(t.isScripthash())return this.fromScripthash(t.hash);if(t.isProgram())return this.fromProgram(t.version,t.hash);throw new Error("Unknown address type.")}static fromAddress(t){return(new this).fromAddress(t)}fromCommitment(t,e){const r=f.write(36);return r.writeU32BE(2854332909),r.writeHash(t),this.clear(),this.pushOp(O.OP_RETURN),this.pushData(r.render()),e&&this.pushData(e),this.compile()}static fromCommitment(t,e){return(new this).fromCommitment(t,e)}getRedeem(){let t=null;for(const e of this.code){if(-1===e.value)return null;if(e.value>O.OP_16)return null;t=e.data}return t?R.fromRaw(t):null}getType(){return this.isPubkey()?A.PUBKEY:this.isPubkeyhash()?A.PUBKEYHASH:this.isScripthash()?A.SCRIPTHASH:this.isWitnessPubkeyhash()?A.WITNESSPUBKEYHASH:this.isWitnessScripthash()?A.WITNESSSCRIPTHASH:this.isMultisig()?A.MULTISIG:this.isNulldata()?A.NULLDATA:A.NONSTANDARD}isUnknown(){return this.getType()===A.NONSTANDARD}isStandard(){const[t,e]=this.getMultisig();return-1!==t?!(e<1||e>3)&&!(t<1||t>e):this.isNulldata()?this.raw.length<=g.MAX_OP_RETURN_BYTES:this.getType()!==A.NONSTANDARD}getSize(){return this.raw.length}getVarSize(){return M.sizeVarBytes(this.raw)}getInputAddress(){return _.fromInputScript(this)}getAddress(){return _.fromScript(this)}hash160(t){let e=l.digest(this.toRaw());return"hex"===t&&(e=e.toString("hex")),e}sha256(t){let e=c.digest(this.toRaw());return"hex"===t&&(e=e.toString("hex")),e}isPubkey(t){if(t)return this.raw.length>=35&&(33===this.raw[0]||65===this.raw[0])&&this.raw[0]+2===this.raw.length&&this.raw[this.raw.length-1]===O.OP_CHECKSIG;if(2!==this.code.length)return!1;const e=this.getLength(0);return(33===e||65===e)&&this.getOp(1)===O.OP_CHECKSIG}getPubkey(t){return this.isPubkey(t)?t?this.raw.slice(1,1+this.raw[0]):this.getData(0):null}isPubkeyhash(t){return t||25===this.raw.length?25===this.raw.length&&this.raw[0]===O.OP_DUP&&this.raw[1]===O.OP_HASH160&&20===this.raw[2]&&this.raw[23]===O.OP_EQUALVERIFY&&this.raw[24]===O.OP_CHECKSIG:5===this.code.length&&(this.getOp(0)===O.OP_DUP&&this.getOp(1)===O.OP_HASH160&&20===this.getLength(2)&&this.getOp(3)===O.OP_EQUALVERIFY&&this.getOp(4)===O.OP_CHECKSIG)}getPubkeyhash(t){return this.isPubkeyhash(t)?t?this.raw.slice(3,23):this.getData(2):null}isMultisig(t){if(this.code.length<4||this.code.length>19)return!1;if(this.getOp(-1)!==O.OP_CHECKMULTISIG)return!1;const e=this.getSmall(0);if(e<1)return!1;const r=this.getSmall(-2);if(r<1||e>r)return!1;if(this.code.length!==r+3)return!1;for(let e=1;e<r+1;e++){const r=this.code[e],i=r.toLength();if(33!==i&&65!==i)return!1;if(t&&!r.isMinimal())return!1}return!0}getMultisig(t){return this.isMultisig(t)?[this.getSmall(0),this.getSmall(-2)]:[-1,-1]}isScripthash(){return 23===this.raw.length&&this.raw[0]===O.OP_HASH160&&20===this.raw[1]&&this.raw[22]===O.OP_EQUAL}getScripthash(){return this.isScripthash()?this.getData(1):null}isNulldata(t){if(0===this.code.length)return!1;if(this.getOp(0)!==O.OP_RETURN)return!1;if(1===this.code.length)return!0;if(t&&this.raw.length>g.MAX_OP_RETURN_BYTES)return!1;for(let e=1;e<this.code.length;e++){const r=this.code[e];if(-1===r.value)return!1;if(r.value>O.OP_16)return!1;if(t&&!r.isMinimal())return!1}return!0}getNulldata(t){if(!this.isNulldata(t))return null;for(let t=1;t<this.code.length;t++){const e=this.code[t].toPush();if(e)return e}return P}isCommitment(){return this.raw.length>=38&&this.raw[0]===O.OP_RETURN&&36===this.raw[1]&&2854332909===this.raw.readUInt32BE(2,!0)}getCommitment(){return this.isCommitment()?this.raw.slice(6,38):null}isProgram(){return!(this.raw.length<4||this.raw.length>42)&&((this.raw[0]===O.OP_0||!(this.raw[0]<O.OP_1||this.raw[0]>O.OP_16))&&this.raw[1]+2===this.raw.length)}getProgram(){if(!this.isProgram())return null;const t=this.getSmall(0),e=this.getData(1);return new w(t,e)}forWitness(){if(this.isProgram())return this.clone();const t=this.getPubkey();if(t){const e=l.digest(t);return R.fromProgram(0,e)}const e=this.getPubkeyhash();return e?R.fromProgram(0,e):R.fromProgram(0,this.sha256())}isWitnessPubkeyhash(){return 22===this.raw.length&&this.raw[0]===O.OP_0&&20===this.raw[1]}getWitnessPubkeyhash(){return this.isWitnessPubkeyhash()?this.getData(1):null}isWitnessScripthash(){return 34===this.raw.length&&this.raw[0]===O.OP_0&&32===this.raw[1]}getWitnessScripthash(){return this.isWitnessScripthash()?this.getData(1):null}isUnspendable(){return this.raw.length>m.MAX_SCRIPT_SIZE||this.raw.length>0&&this.raw[0]===O.OP_RETURN}getInputType(){return this.isPubkeyInput()?A.PUBKEY:this.isPubkeyhashInput()?A.PUBKEYHASH:this.isScripthashInput()?A.SCRIPTHASH:this.isMultisigInput()?A.MULTISIG:A.NONSTANDARD}isUnknownInput(){return this.getInputType()===A.NONSTANDARD}isPubkeyInput(){if(1!==this.code.length)return!1;const t=this.getLength(0);return t>=9&&t<=73}getPubkeyInput(){return this.isPubkeyInput()?this.getData(0):null}isPubkeyhashInput(){if(2!==this.code.length)return!1;const t=this.getLength(0),e=this.getLength(1);return t>=9&&t<=73&&(33===e||65===e)}getPubkeyhashInput(){return this.isPubkeyhashInput()?[this.getData(0),this.getData(1)]:[null,null]}isMultisigInput(){if(this.code.length<2)return!1;if(this.getOp(0)!==O.OP_0)return!1;if(this.getOp(1)>O.OP_PUSHDATA4)return!1;if(this.isScripthashInput())return!1;for(let t=1;t<this.code.length;t++){const e=this.getLength(t);if(e<9||e>73)return!1}return!0}getMultisigInput(){if(!this.isMultisigInput())return null;const t=[];for(let e=1;e<this.code.length;e++)t.push(this.getData(e));return t}isScripthashInput(){if(this.code.length<1)return!1;const t=this.getData(-1);if(!t)return!1;if(0===t.length)return!1;if(E.isSignatureEncoding(t))return!1;if(E.isKeyEncoding(t))return!1;const e=R.fromRaw(t);return!!e.isCode()&&(!e.isUnspendable()&&!!this.isPushOnly())}getScripthashInput(){return this.isScripthashInput()?this.getData(-1):null}getCoinbaseHeight(){return R.getCoinbaseHeight(this.raw)}static getCoinbaseHeight(t){if(0===t.length)return-1;if(t[0]>=O.OP_1&&t[0]<=O.OP_16)return t[0]-80;if(t[0]>6)return-1;const e=y.fromRaw(t),r=e.toNum();return r?r.isNeg()?-1:e.equals(y.fromNum(r))?r.toDouble():-1:1}test(t){for(const e of this.code){if(-1===e.value)break;if(e.data&&0!==e.data.length&&t.test(e.data))return!0}return!1}isPushOnly(){for(const t of this.code){if(-1===t.value)return!1;if(t.value>O.OP_16)return!1}return!0}getSigops(t){let e=0,r=-1;for(const i of this.code){if(-1===i.value)break;switch(i.value){case O.OP_CHECKSIG:case O.OP_CHECKSIGVERIFY:e+=1;break;case O.OP_CHECKMULTISIG:case O.OP_CHECKMULTISIGVERIFY:t&&r>=O.OP_1&&r<=O.OP_16?e+=r-80:e+=m.MAX_MULTISIG_PUBKEYS}r=i.value}return e}getScripthashSigops(t){if(!this.isScripthash())return this.getSigops(!0);const e=t.getRedeem();return e?e.getSigops(!0):0}getWitnessSigops(t,e){let r=this.getProgram();if(!r&&this.isScripthash()){const e=t.getRedeem();e&&(r=e.getProgram())}if(!r)return 0;if(0===r.version){if(20===r.data.length)return 1;if(32===r.data.length&&e.items.length>0){return e.getRedeem().getSigops(!0)}}return 0}get(t){return t<0&&(t+=this.code.length),t<0||t>=this.code.length?null:this.code[t]}pop(){return this.code.pop()||null}shift(){return this.code.shift()||null}remove(t){if(t<0&&(t+=this.code.length),t<0||t>=this.code.length)return null;const e=this.code.splice(t,1);return 0===e.length?null:e[0]}set(t,e){return t<0&&(t+=this.code.length),h(y.isOpcode(e)),h(t>=0&&t<=this.code.length),this.code[t]=e,this}push(t){return h(y.isOpcode(t)),this.code.push(t),this}unshift(t){return h(y.isOpcode(t)),this.code.unshift(t),this}insert(t,e){return t<0&&(t+=this.code.length),h(y.isOpcode(e)),h(t>=0&&t<=this.code.length),this.code.splice(t,0,e),this}getOp(t){const e=this.get(t);return e?e.value:-1}popOp(){const t=this.pop();return t?t.value:-1}shiftOp(){const t=this.shift();return t?t.value:-1}removeOp(t){const e=this.remove(t);return e?e.value:-1}setOp(t,e){return this.set(t,y.fromOp(e))}pushOp(t){return this.push(y.fromOp(t))}unshiftOp(t){return this.unshift(y.fromOp(t))}insertOp(t,e){return this.insert(t,y.fromOp(e))}getData(t){const e=this.get(t);return e?e.data:null}popData(){const t=this.pop();return t?t.data:null}shiftData(){const t=this.shift();return t?t.data:null}removeData(t){const e=this.remove(t);return e?e.data:null}setData(t,e){return this.set(t,y.fromData(e))}pushData(t){return this.push(y.fromData(t))}unshiftData(t){return this.unshift(y.fromData(t))}insertData(t,e){return this.insert(t,y.fromData(e))}getLength(t){const e=this.get(t);return e?e.toLength():-1}getPush(t){const e=this.get(t);return e?e.toPush():null}popPush(){const t=this.pop();return t?t.toPush():null}shiftPush(){const t=this.shift();return t?t.toPush():null}removePush(t){const e=this.remove(t);return e?e.toPush():null}setPush(t,e){return this.set(t,y.fromPush(e))}pushPush(t){return this.push(y.fromPush(t))}unshiftPush(t){return this.unshift(y.fromPush(t))}insertPush(t,e){return this.insert(t,y.fromPush(e))}getString(t,e){const r=this.get(t);return r?r.toString(e):null}popString(t){const e=this.pop();return e?e.toString(t):null}shiftString(t){const e=this.shift();return e?e.toString(t):null}removeString(t,e){const r=this.remove(t);return r?r.toString(e):null}setString(t,e,r){return this.set(t,y.fromString(e,r))}pushString(t,e){return this.push(y.fromString(t,e))}unshiftString(t,e){return this.unshift(y.fromString(t,e))}insertString(t,e,r){return this.insert(t,y.fromString(e,r))}getSmall(t){const e=this.get(t);return e?e.toSmall():-1}popSmall(){const t=this.pop();return t?t.toSmall():-1}shiftSmall(){const t=this.shift();return t?t.toSmall():-1}removeSmall(t){const e=this.remove(t);return e?e.toSmall():-1}setSmall(t,e){return this.set(t,y.fromSmall(e))}pushSmall(t){return this.push(y.fromSmall(t))}unshiftSmall(t){return this.unshift(y.fromSmall(t))}insertSmall(t,e){return this.insert(t,y.fromSmall(e))}getNum(t,e,r){const i=this.get(t);return i?i.toNum(e,r):null}popNum(t,e){const r=this.pop();return r?r.toNum(t,e):null}shiftNum(t,e){const r=this.shift();return r?r.toNum(t,e):null}removeNum(t,e,r){const i=this.remove(t);return i?i.toNum(e,r):null}setNum(t,e){return this.set(t,y.fromNum(e))}pushNum(t){return this.push(y.fromNum(t))}unshiftNum(t){return this.unshift(y.fromNum(t))}insertNum(t,e){return this.insert(t,y.fromNum(e))}getInt(t,e,r){const i=this.get(t);return i?i.toInt(e,r):-1}popInt(t,e){const r=this.pop();return r?r.toInt(t,e):-1}shiftInt(t,e){const r=this.shift();return r?r.toInt(t,e):-1}removeInt(t,e,r){const i=this.remove(t);return i?i.toInt(e,r):-1}setInt(t,e){return this.set(t,y.fromInt(e))}pushInt(t){return this.push(y.fromInt(t))}unshiftInt(t){return this.unshift(y.fromInt(t))}insertInt(t,e){return this.insert(t,y.fromInt(e))}getBool(t){const e=this.get(t);return!!e&&e.toBool()}popBool(){const t=this.pop();return!!t&&t.toBool()}shiftBool(){const t=this.shift();return!!t&&t.toBool()}removeBool(t){const e=this.remove(t);return!!e&&e.toBool()}setBool(t,e){return this.set(t,y.fromBool(e))}pushBool(t){return this.push(y.fromBool(t))}unshiftBool(t){return this.unshift(y.fromBool(t))}insertBool(t,e){return this.insert(t,y.fromBool(e))}getSym(t){const e=this.get(t);return e?e.toSymbol():null}popSym(){const t=this.pop();return t?t.toSymbol():null}shiftSym(){const t=this.shift();return t?t.toSymbol():null}removeSym(t){const e=this.remove(t);return e?e.toSymbol():null}setSym(t,e){return this.set(t,y.fromSymbol(e))}pushSym(t){return this.push(y.fromSymbol(t))}unshiftSym(t){return this.unshift(y.fromSymbol(t))}insertSym(t,e){return this.insert(t,y.fromSymbol(e))}fromString(t){if(h("string"==typeof t),0===(t=t.trim()).length)return this;const e=t.split(/\s+/),r=f.write();for(const t of e){let e=t;32&e.charCodeAt(0)&&(e=e.toUpperCase()),/^OP_/.test(e)||(e=`OP_${e}`);const s=O[e];if(null!=s)r.writeU8(s);else{if("'"===t[0]){h("'"===t[t.length-1],"Invalid string.");const e=t.slice(1,-1),i=y.fromString(e);r.writeBytes(i.toRaw());continue}if(/^-?\d+$/.test(t)){const e=I.fromString(t,10),i=y.fromNum(e);r.writeBytes(i.toRaw());continue}h(0===t.indexOf("0x"),"Unknown opcode.");const e=t.substring(2),s=i.from(e,"hex");h(s.length===e.length/2,"Invalid hex string."),r.writeBytes(s)}}return this.fromRaw(r.render())}static fromString(t){return(new this).fromString(t)}static verify(t,e,r,i,s,n,o){if(null==o&&(o=R.flags.STANDARD_VERIFY_FLAGS),o&R.flags.VERIFY_SIGPUSHONLY&&!t.isPushOnly())throw new v("SIG_PUSHONLY");let f,a=new S;if(t.execute(a,o,i,s,n,0),o&R.flags.VERIFY_P2SH&&(f=a.clone()),r.execute(a,o,i,s,n,0),0===a.length||!a.getBool(-1))throw new v("EVAL_FALSE");let u=!1;if(o&R.flags.VERIFY_WITNESS&&r.isProgram()){if(u=!0,0!==t.raw.length)throw new v("WITNESS_MALLEATED");R.verifyProgram(e,r,o,i,s,n),a.length=1}if(o&R.flags.VERIFY_P2SH&&r.isScripthash()){if(!t.isPushOnly())throw new v("SIG_PUSHONLY");if(0===(a=f).length)throw new v("EVAL_FALSE");const r=a.pop(),h=R.fromRaw(r);if(h.execute(a,o,i,s,n,0),0===a.length||!a.getBool(-1))throw new v("EVAL_FALSE");if(o&R.flags.VERIFY_WITNESS&&h.isProgram()){if(u=!0,!t.raw.equals(y.fromPush(r).toRaw()))throw new v("WITNESS_MALLEATED_P2SH");R.verifyProgram(e,h,o,i,s,n),a.length=1}}if(o&R.flags.VERIFY_CLEANSTACK&&(h(0!=(o&R.flags.VERIFY_P2SH)),1!==a.length))throw new v("CLEANSTACK");if(o&R.flags.VERIFY_WITNESS&&(h(0!=(o&R.flags.VERIFY_P2SH)),!u&&e.items.length>0))throw new v("WITNESS_UNEXPECTED")}static verifyProgram(t,e,r,i,s,n){const o=e.getProgram();h(o,"verifyProgram called on non-witness-program."),h(0!=(r&R.flags.VERIFY_WITNESS));const f=t.toStack();let a;if(0===o.version){if(32===o.data.length){if(0===f.length)throw new v("WITNESS_PROGRAM_WITNESS_EMPTY");const t=f.pop();if(!c.digest(t).equals(o.data))throw new v("WITNESS_PROGRAM_MISMATCH");a=R.fromRaw(t)}else{if(20!==o.data.length)throw new v("WITNESS_PROGRAM_WRONG_LENGTH");if(2!==f.length)throw new v("WITNESS_PROGRAM_MISMATCH");a=R.fromPubkeyhash(o.data)}for(let t=0;t<f.length;t++)if(f.get(t).length>m.MAX_SCRIPT_PUSH)throw new v("PUSH_SIZE");if(a.execute(f,r,i,s,n,1),1!==f.length)throw new v("CLEANSTACK");if(!f.getBool(-1))throw new v("EVAL_FALSE")}else if(r&R.flags.VERIFY_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM)throw new v("DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM")}fromReader(t){return this.fromRaw(t.readVarBytes())}fromRaw(t){const e=f.read(t);for(this.raw=t;e.left();)this.code.push(y.fromReader(e));return this}static fromReader(t){return(new this).fromReader(t)}static fromRaw(t,e){return"string"==typeof t&&(t=i.from(t,e)),(new this).fromRaw(t)}static isScript(t){return t instanceof R}}function x(t,e,r){if(h(null!=t&&!0===t._isBuffer),h("number"==typeof e),h("number"==typeof r),e&R.flags.VERIFY_STRICTENC&&!E.isKeyEncoding(t))throw new v("PUBKEYTYPE");if(1===r&&e&R.flags.VERIFY_WITNESS_PUBKEYTYPE&&!E.isCompressedEncoding(t))throw new v("WITNESS_PUBKEYTYPE");return!0}function B(t,e){if(h(null!=t&&!0===t._isBuffer),h("number"==typeof e),0===t.length)return!0;if((e&R.flags.VERIFY_DERSIG||e&R.flags.VERIFY_LOW_S||e&R.flags.VERIFY_STRICTENC)&&!E.isSignatureEncoding(t))throw new v("SIG_DER");if(e&R.flags.VERIFY_LOW_S&&!E.isLowDER(t))throw new v("SIG_HIGH_S");if(e&R.flags.VERIFY_STRICTENC&&!E.isHashType(t))throw new v("SIG_HASHTYPE");return!0}function k(t,e,r){return b.verifyDER(t,e.slice(0,-1),r)}R.opcodes=E.opcodes,R.opcodesByVal=E.opcodesByVal,R.flags=E.flags,R.hashType=E.hashType,R.hashTypeByVal=E.hashTypeByVal,R.types=E.types,R.typesByVal=E.typesByVal,r.exports=R}],["bcrypto","/lib/ripemd160-browser.js",function(t,e,r,i,s,n){"use strict";r.exports=d(57,r)}],["bcrypto","/lib/js/ripemd160.js",function(t,e,r,s,n,o){"use strict";const h=d(28,r),f=d(30,r),a=-1,u=i.alloc(8,0),c=i.alloc(64,0);c[0]=128;const l=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=new Uint8Array([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),b=new Uint8Array([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=new Uint8Array([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]);class g{constructor(){this.state=new Uint32Array(5),this.msg=new Uint32Array(16),this.block=i.allocUnsafe(64),this.size=a}init(){return this.state[0]=1732584193,this.state[1]=4023233417,this.state[2]=2562383102,this.state[3]=271733878,this.state[4]=3285377520,this.size=0,this}update(t){return h(null!=t&&!0===t._isBuffer),this._update(t,t.length),this}final(){return this._final(i.allocUnsafe(20))}_update(t,e){h(this.size!==a,"Context is not initialized.");let r=63&this.size,i=0;if(this.size+=e,r>0){let s=64-r;if(s>e&&(s=e),t.copy(this.block,r,i,i+s),e-=s,i+=s,(r+=s)<64)return;this._transform(this.block,0)}for(;e>=64;)this._transform(t,i),i+=64,e-=64;e>0&&t.copy(this.block,0,i,i+e)}_final(t){h(this.size!==a,"Context is not initialized.");const e=63&this.size,r=8*this.size;I(u,r>>>0,0),I(u,r*(1/4294967296)>>>0,4),this._update(c,1+(119-e&63)),this._update(u,8);for(let e=0;e<5;e++)I(t,this.state[e],4*e),this.state[e]=0;for(let t=0;t<16;t++)this.msg[t]=0;for(let t=0;t<64;t++)this.block[t]=0;return this.size=a,t}_transform(t,e){const r=this.msg;let i=this.state[0],s=this.state[1],n=this.state[2],o=this.state[3],h=this.state[4],f=i,a=s,u=n,c=o,d=h;for(let i=0;i<16;i++)r[i]=(I=e+4*i,(g=t)[I++]+256*g[I++]+65536*g[I++]+16777216*g[I]);var g,I;for(let t=0;t<80;t++){let e=i+y(t,s,n,o)+r[l[t]]+S(t),g=w(e,b[t]),I=g+h;i=h,h=o,o=w(n,10),n=s,s=I,I=(g=w(e=f+y(79-t,a,u,c)+r[p[t]]+v(t),m[t]))+d,f=d,d=c,c=w(u,10),u=a,a=I}const E=this.state[1]+n+c;this.state[1]=this.state[2]+o+d,this.state[2]=this.state[3]+h+f,this.state[3]=this.state[4]+i+a,this.state[4]=this.state[0]+s+u,this.state[0]=E}static hash(){return new g}static hmac(){return new f(g,64)}static digest(t){return g.ctx.init().update(t).final()}static root(t,e){return h(null!=t&&!0===t._isBuffer&&20===t.length),h(null!=e&&!0===e._isBuffer&&20===e.length),g.ctx.init().update(t).update(e).final()}static multi(t,e,r){const{ctx:i}=g;return i.init(),i.update(t),i.update(e),r&&i.update(r),i.final()}static mac(t,e){return g.hmac().init(e).update(t).final()}}function w(t,e){return t<<e|t>>>32-e}function y(t,e,r,i){return t<=15?e^r^i:t<=31?e&r|~e&i:t<=47?(e|~r)^i:t<=63?e&i|r&~i:e^(r|~i)}function S(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function v(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}function I(t,e,r){return t[r++]=e,e>>>=8,t[r++]=e,e>>>=8,t[r++]=e,e>>>=8,t[r++]=e,r}g.native=0,g.id="RIPEMD160",g.size=20,g.bits=160,g.blockSize=64,g.zero=i.alloc(20,0),g.ctx=new g,r.exports=g}],["bcrypto","/lib/sha1-browser.js",function(t,e,r,i,s,n){"use strict";r.exports=d(59,r)}],["bcrypto","/lib/js/sha1.js",function(t,e,r,s,n,o){"use strict";const h=d(28,r),f=d(30,r),a=-1,u=i.alloc(8,0),c=i.alloc(64,0);c[0]=128;const l=new Uint32Array([1518500249,1859775393,2400959708,3395469782]);class p{constructor(){this.state=new Uint32Array(5),this.msg=new Uint32Array(80),this.block=i.allocUnsafe(64),this.size=a}init(){return this.state[0]=1732584193,this.state[1]=4023233417,this.state[2]=2562383102,this.state[3]=271733878,this.state[4]=3285377520,this.size=0,this}update(t){return h(null!=t&&!0===t._isBuffer),this._update(t,t.length),this}final(){return this._final(i.allocUnsafe(20))}_update(t,e){h(this.size!==a,"Context is not initialized.");let r=63&this.size,i=0;if(this.size+=e,r>0){let s=64-r;if(s>e&&(s=e),t.copy(this.block,r,i,i+s),e-=s,i+=s,(r+=s)<64)return;this._transform(this.block,0)}for(;e>=64;)this._transform(t,i),i+=64,e-=64;e>0&&t.copy(this.block,0,i,i+e)}_final(t){h(this.size!==a,"Context is not initialized.");const e=63&this.size,r=8*this.size;g(u,r*(1/4294967296)>>>0,0),g(u,r>>>0,4),this._update(c,1+(119-e&63)),this._update(u,8);for(let e=0;e<5;e++)g(t,this.state[e],4*e),this.state[e]=0;for(let t=0;t<80;t++)this.msg[t]=0;for(let t=0;t<64;t++)this.block[t]=0;return this.size=a,t}_transform(t,e){const r=this.msg;let i=this.state[0],s=this.state[1],n=this.state[2],o=this.state[3],h=this.state[4],f=0;for(;f<16;f++)r[f]=(u=e+4*f,16777216*(a=t)[u++]+65536*a[u++]+256*a[u++]+a[u]);for(var a,u;f<80;f++)r[f]=b(r[f-3]^r[f-8]^r[f-14]^r[f-16],1);for(f=0;f<80;f++){const t=f/20|0,e=b(i,5)+m(t,s,n,o)+h+r[f]+l[t];h=o,o=n,n=b(s,30),s=i,i=e>>>0}this.state[0]+=i,this.state[1]+=s,this.state[2]+=n,this.state[3]+=o,this.state[4]+=h}static hash(){return new p}static hmac(){return new f(p,64)}static digest(t){return p.ctx.init().update(t).final()}static root(t,e){return h(null!=t&&!0===t._isBuffer&&20===t.length),h(null!=e&&!0===e._isBuffer&&20===e.length),p.ctx.init().update(t).update(e).final()}static multi(t,e,r){const{ctx:i}=p;return i.init(),i.update(t),i.update(e),r&&i.update(r),i.final()}static mac(t,e){return p.hmac().init(e).update(t).final()}}function b(t,e){return t<<e|t>>>32-e}function m(t,e,r,i){return 0===t?function(t,e,r){return t&e^~t&r}(e,r,i):1===t||3===t?function(t,e,r){return t^e^r}(e,r,i):2===t?function(t,e,r){return t&e^t&r^e&r}(e,r,i):0}function g(t,e,r){return t[r++]=e>>>24,t[r++]=e>>>16,t[r++]=e>>>8,t[r++]=e,r}p.native=0,p.id="SHA1",p.size=20,p.bits=160,p.blockSize=64,p.zero=i.alloc(20,0),p.ctx=new p,r.exports=p}],["bcrypto","/lib/hash160-browser.js",function(t,e,r,i,s,n){"use strict";r.exports=d(61,r)}],["bcrypto","/lib/js/hash160.js",function(t,e,r,s,n,o){"use strict";const h=d(28,r),f=d(29,r),a=d(57,r),u=d(30,r),c=new a;class l{constructor(){this.ctx=new f}init(){return this.ctx.init(),this}update(t){return this.ctx.update(t),this}final(){const t=i.allocUnsafe(32);return this.ctx._final(t),c.init(),c.update(t),c._final(t),t.slice(0,20)}static hash(){return new l}static hmac(){return new u(l,64)}static digest(t){return l.ctx.init().update(t).final()}static root(t,e){return h(null!=t&&!0===t._isBuffer&&20===t.length),h(null!=e&&!0===e._isBuffer&&20===e.length),l.ctx.init().update(t).update(e).final()}static multi(t,e,r){const{ctx:i}=l;return i.init(),i.update(t),i.update(e),r&&i.update(r),i.final()}static mac(t,e){return l.hmac().init(e).update(t).final()}}l.native=0,l.id="HASH160",l.size=20,l.bits=160,l.blockSize=64,l.zero=i.alloc(20,0),l.ctx=new l,r.exports=l}],["bcoin","/lib/protocol/policy.js",function(t,e,r,i,s,n){"use strict";const o=d(2,r),h=d(11,r);t.MAX_TX_VERSION=2,t.MAX_TX_SIZE=h.MAX_BLOCK_SIZE/10,t.MAX_TX_WEIGHT=h.MAX_BLOCK_WEIGHT/10,t.MAX_TX_SIGOPS=h.MAX_BLOCK_SIGOPS/5,t.MAX_TX_SIGOPS_COST=h.MAX_BLOCK_SIGOPS_COST/5,t.BYTES_PER_SIGOP=20,t.MIN_RELAY=1e3,t.BARE_MULTISIG=!0,t.FREE_THRESHOLD=144*h.COIN/250,t.MAX_P2SH_SIGOPS=15,t.MAX_OP_RETURN_BYTES=83,t.MAX_OP_RETURN=80,t.MAX_P2WSH_STACK=100,t.MAX_P2WSH_PUSH=80,t.MAX_P2WSH_SIZE=3600,t.MEMPOOL_MAX_ANCESTORS=25,t.MEMPOOL_MAX_SIZE=1e8,t.MEMPOOL_EXPIRY_TIME=259200,t.MEMPOOL_MAX_ORPHANS=100,t.MIN_BLOCK_WEIGHT=0,t.MAX_BLOCK_WEIGHT=1e6*h.WITNESS_SCALE_FACTOR,t.BLOCK_PRIORITY_WEIGHT=0,t.BLOCK_PRIORITY_THRESHOLD=t.FREE_THRESHOLD,t.getMinFee=function(e,r){if(null==r&&(r=t.MIN_RELAY),o(e>=0),o(r>=0),0===e)return 0;let i=Math.floor(r*e/1e3);return 0===i&&r>0&&(i=r),i},t.getRoundFee=function(e,r){if(null==r&&(r=t.MIN_RELAY),o(e>=0),o(r>=0),0===e)return 0;let i=r*Math.ceil(e/1e3);return 0===i&&r>0&&(i=r),i},t.getRate=function(t,e){return o(t>=0),o(e>=0),0===t?0:Math.floor(1e3*e/t)}}],["bcoin","/lib/script/program.js",function(t,e,r,i,s,n){"use strict";const o=d(2,r),h=d(64,r),f=h.types,{inspectSymbol:a}=d(14,r);r.exports=class{constructor(t,e){o((255&t)===t),o(t>=0&&t<=16),o(null!=e&&!0===e._isBuffer),o(e.length>=2&&e.length<=40),this.version=t,this.data=e}getType(){return 0===this.version?20===this.data.length?f.WITNESSPUBKEYHASH:32===this.data.length?f.WITNESSSCRIPTHASH:f.WITNESSMALFORMED:f.NONSTANDARD}isUnknown(){const t=this.getType();return t===f.WITNESSMALFORMED||t===f.NONSTANDARD}isMalformed(){return this.getType()===f.WITNESSMALFORMED}[a](){const t=this.data.toString("hex"),e=h.typesByVal[this.getType()].toLowerCase();return`<Program: version=${this.version} data=${t} type=${e}>`}}}],["bcoin","/lib/script/common.js",function(t,e,r,s,n,o){"use strict";const h=d(2,r),f=d(31,r),a=d(65,r);t.opcodes={OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_CHECKLOCKTIMEVERIFY:177,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_INVALIDOPCODE:255},t.opcodesByVal={0:"OP_0",76:"OP_PUSHDATA1",77:"OP_PUSHDATA2",78:"OP_PUSHDATA4",79:"OP_1NEGATE",80:"OP_RESERVED",81:"OP_1",82:"OP_2",83:"OP_3",84:"OP_4",85:"OP_5",86:"OP_6",87:"OP_7",88:"OP_8",89:"OP_9",90:"OP_10",91:"OP_11",92:"OP_12",93:"OP_13",94:"OP_14",95:"OP_15",96:"OP_16",97:"OP_NOP",98:"OP_VER",99:"OP_IF",100:"OP_NOTIF",101:"OP_VERIF",102:"OP_VERNOTIF",103:"OP_ELSE",104:"OP_ENDIF",105:"OP_VERIFY",106:"OP_RETURN",107:"OP_TOALTSTACK",108:"OP_FROMALTSTACK",109:"OP_2DROP",110:"OP_2DUP",111:"OP_3DUP",112:"OP_2OVER",113:"OP_2ROT",114:"OP_2SWAP",115:"OP_IFDUP",116:"OP_DEPTH",117:"OP_DROP",118:"OP_DUP",119:"OP_NIP",120:"OP_OVER",121:"OP_PICK",122:"OP_ROLL",123:"OP_ROT",124:"OP_SWAP",125:"OP_TUCK",126:"OP_CAT",127:"OP_SUBSTR",128:"OP_LEFT",129:"OP_RIGHT",130:"OP_SIZE",131:"OP_INVERT",132:"OP_AND",133:"OP_OR",134:"OP_XOR",135:"OP_EQUAL",136:"OP_EQUALVERIFY",137:"OP_RESERVED1",138:"OP_RESERVED2",139:"OP_1ADD",140:"OP_1SUB",141:"OP_2MUL",142:"OP_2DIV",143:"OP_NEGATE",144:"OP_ABS",145:"OP_NOT",146:"OP_0NOTEQUAL",147:"OP_ADD",148:"OP_SUB",149:"OP_MUL",150:"OP_DIV",151:"OP_MOD",152:"OP_LSHIFT",153:"OP_RSHIFT",154:"OP_BOOLAND",155:"OP_BOOLOR",156:"OP_NUMEQUAL",157:"OP_NUMEQUALVERIFY",158:"OP_NUMNOTEQUAL",159:"OP_LESSTHAN",160:"OP_GREATERTHAN",161:"OP_LESSTHANOREQUAL",162:"OP_GREATERTHANOREQUAL",163:"OP_MIN",164:"OP_MAX",165:"OP_WITHIN",166:"OP_RIPEMD160",167:"OP_SHA1",168:"OP_SHA256",169:"OP_HASH160",170:"OP_HASH256",171:"OP_CODESEPARATOR",172:"OP_CHECKSIG",173:"OP_CHECKSIGVERIFY",174:"OP_CHECKMULTISIG",175:"OP_CHECKMULTISIGVERIFY",176:"OP_NOP1",177:"OP_CHECKLOCKTIMEVERIFY",178:"OP_CHECKSEQUENCEVERIFY",179:"OP_NOP4",180:"OP_NOP5",181:"OP_NOP6",182:"OP_NOP7",183:"OP_NOP8",184:"OP_NOP9",185:"OP_NOP10",255:"OP_INVALIDOPCODE"},t.small=[i.from([129]),i.from([]),i.from([1]),i.from([2]),i.from([3]),i.from([4]),i.from([5]),i.from([6]),i.from([7]),i.from([8]),i.from([9]),i.from([10]),i.from([11]),i.from([12]),i.from([13]),i.from([14]),i.from([15]),i.from([16])],t.flags={VERIFY_NONE:0,VERIFY_P2SH:1,VERIFY_STRICTENC:2,VERIFY_DERSIG:4,VERIFY_LOW_S:8,VERIFY_NULLDUMMY:16,VERIFY_SIGPUSHONLY:32,VERIFY_MINIMALDATA:64,VERIFY_DISCOURAGE_UPGRADABLE_NOPS:128,VERIFY_CLEANSTACK:256,VERIFY_CHECKLOCKTIMEVERIFY:512,VERIFY_CHECKSEQUENCEVERIFY:1024,VERIFY_WITNESS:2048,VERIFY_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM:4096,VERIFY_MINIMALIF:8192,VERIFY_NULLFAIL:16384,VERIFY_WITNESS_PUBKEYTYPE:32768,VERIFY_CONST_SCRIPTCODE:65536},t.flags.MANDATORY_VERIFY_FLAGS=t.flags.VERIFY_P2SH,t.flags.STANDARD_VERIFY_FLAGS=0|t.flags.MANDATORY_VERIFY_FLAGS|t.flags.VERIFY_DERSIG|t.flags.VERIFY_STRICTENC|t.flags.VERIFY_MINIMALDATA|t.flags.VERIFY_NULLDUMMY|t.flags.VERIFY_DISCOURAGE_UPGRADABLE_NOPS|t.flags.VERIFY_CLEANSTACK|t.flags.VERIFY_MINIMALIF|t.flags.VERIFY_NULLFAIL|t.flags.VERIFY_CHECKLOCKTIMEVERIFY|t.flags.VERIFY_CHECKSEQUENCEVERIFY|t.flags.VERIFY_LOW_S|t.flags.VERIFY_WITNESS|t.flags.VERIFY_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM|t.flags.VERIFY_WITNESS_PUBKEYTYPE|t.flags.VERIFY_CONST_SCRIPTCODE,t.flags.ONLY_STANDARD_VERIFY_FLAGS=t.flags.STANDARD_VERIFY_FLAGS&~t.flags.MANDATORY_VERIFY_FLAGS,t.hashType={ALL:1,NONE:2,SINGLE:3,ANYONECANPAY:128},t.hashTypeByVal={1:"ALL",2:"NONE",3:"SINGLE",128:"ANYONECANPAY"},t.types={NONSTANDARD:0,PUBKEY:1,PUBKEYHASH:2,SCRIPTHASH:3,MULTISIG:4,NULLDATA:5,WITNESSMALFORMED:128,WITNESSSCRIPTHASH:129,WITNESSPUBKEYHASH:130},t.typesByVal={0:"NONSTANDARD",1:"PUBKEY",2:"PUBKEYHASH",3:"SCRIPTHASH",4:"MULTISIG",5:"NULLDATA",128:"WITNESSMALFORMED",129:"WITNESSSCRIPTHASH",130:"WITNESSPUBKEYHASH"},t.isHashType=function(e){if(h(null!=e&&!0===e._isBuffer),0===e.length)return!1;const r=e[e.length-1]&~t.hashType.ANYONECANPAY;return!(r<t.hashType.ALL||r>t.hashType.SINGLE)},t.isLowDER=function(e){return!!t.isSignatureEncoding(e)&&f.isLowDER(e.slice(0,-1))},t.isKeyEncoding=function(t){if(h(null!=t&&!0===t._isBuffer),t.length<33)return!1;if(4===t[0]){if(65!==t.length)return!1}else{if(2!==t[0]&&3!==t[0])return!1;if(33!==t.length)return!1}return!0},t.isCompressedEncoding=function(t){return h(null!=t&&!0===t._isBuffer),33===t.length&&(2===t[0]||3===t[0])},t.isSignatureEncoding=function(t){if(h(null!=t&&!0===t._isBuffer),t.length<9)return!1;if(t.length>73)return!1;if(48!==t[0])return!1;if(t[1]!==t.length-3)return!1;const e=t[3];if(5+e>=t.length)return!1;const r=t[5+e];return e+r+7===t.length&&(2===t[2]&&(0!==e&&(!(128&t[4])&&(!(e>1&&0===t[4]&&!(128&t[5]))&&(2===t[e+4]&&(0!==r&&(!(128&t[e+6])&&!(r>1&&0===t[e+6]&&!(128&t[e+7])))))))))},t.toASM=function(e,r){if(e.length<=4){return a.decode(e).toString(10)}if(r&&t.isSignatureEncoding(e)){const r=e[e.length-1];let i=t.hashTypeByVal[31&r]||"";return i&&(r&t.hashType.ANYONECANPAY&&(i+="|ANYONECANPAY"),i=`[${i}]`),e.slice(0,-1).toString("hex")+i}return e.toString("hex")}}],["bcoin","/lib/script/scriptnum.js",function(t,e,r,s,n,o){"use strict";const h=d(2,r),{I64:f}=d(66,r),a=d(67,r),{inspectSymbol:u}=d(14,r),c=i.alloc(0);class l extends f{constructor(t,e){super(t,e)}getInt(){return this.lt(f.INT32_MIN)?f.LONG_MIN:this.gt(f.INT32_MAX)?f.LONG_MAX:this.toInt()}toRaw(){let t=this;if(t.isZero())return c;let e=!1;t.isNeg()&&(t=t.neg(),e=!0);const r=t.byteLength();let s=0;t.testn(8*r-1)&&(s=1);const n=i.allocUnsafe(r+s);switch(r){case 8:n[7]=t.hi>>>24&255;case 7:n[6]=t.hi>>16&255;case 6:n[5]=t.hi>>8&255;case 5:n[4]=255&t.hi;case 4:n[3]=t.lo>>>24&255;case 3:n[2]=t.lo>>16&255;case 2:n[1]=t.lo>>8&255;case 1:n[0]=255&t.lo}return 128&n[r-1]?(h(1===s),h(n.length===r+s),n[r]=e?128:0):e?(h(0===s),h(n.length===r),n[r-1]|=128):(h(0===s),h(n.length===r)),n}fromRaw(t){if(h(null!=t&&!0===t._isBuffer),0===t.length)return this;switch(t.length){case 8:this.hi|=t[7]<<24;case 7:this.hi|=t[6]<<16;case 6:this.hi|=t[5]<<8;case 5:this.hi|=t[4];case 4:this.lo|=t[3]<<24;case 3:this.lo|=t[2]<<16;case 2:this.lo|=t[1]<<8;case 1:this.lo|=t[0];break;default:for(let e=0;e<t.length;e++)this.orb(e,t[e])}return 128&t[t.length-1]&&(this.setn(8*t.length-1,0),this.ineg()),this}encode(){return this.toRaw()}decode(t,e,r){if(h(null!=t&&!0===t._isBuffer),null!=r&&t.length>r)throw new a("UNKNOWN_ERROR","Script number overflow.");if(e&&!l.isMinimal(t))throw new a("UNKNOWN_ERROR","Non-minimal script number.");return this.fromRaw(t)}[u](){return`<ScriptNum: ${this.toString(10)}>`}static isMinimal(t){if(h(null!=t&&!0===t._isBuffer),0===t.length)return!0;if(0==(127&t[t.length-1])){if(1===t.length)return!1;if(0==(128&t[t.length-2]))return!1}return!0}static decode(t,e,r){return(new this).decode(t,e,r)}static isScriptNum(t){return t instanceof l}}r.exports=l}],["n64","/lib/n64.js",function(t,e,r,i,s,n){"use strict";function o(t){c(this instanceof o,"this","N64"),c(0===t||1===t,"sign","bit"),this.hi=0,this.lo=0,this.sign=t}function h(t,e){if(!(this instanceof h))return new h(t,e);o.call(this,0),this.from(t,e)}function f(t,e){if(!(this instanceof f))return new f(t,e);o.call(this,1),this.from(t,e)}function a(t){if(null==t)return 10;if("number"==typeof t)return t;switch(t){case"bin":return 2;case"oct":return 8;case"dec":return 10;case"hex":return 16}return 0}function u(t){if(Math.clz32)return 32-Math.clz32(t);let e=31;for(;e>=0&&0==(t&1<<e);e--);return e+1}function c(t,e,r){if(!t){const t=new TypeError(`'${e}' must be a(n) ${r}.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,c),t}}function d(t){return"number"==typeof t&&isFinite(t)}function l(t){return Array.isArray?Array.isArray(t):"Array"==={}.toString.call(t).slice(8,-1)}function p(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}function b(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24}function m(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function g(t,e,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255}function w(t,e,r){t[r]=e>>>24&255,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}o.prototype._add=function(t,e){const r=this.hi,i=this.lo,s=i+e|0,n=i>>31,o=e>>31,h=(r+t|0)+(1&(n&o|~(s>>31)&(n^o)));return this.hi=0|h,this.lo=s,this},o.prototype.iadd=function(t){return c(o.isN64(t),"operand","int64"),this._add(t.hi,t.lo)},o.prototype.iaddn=function(t){return c(d(t),"operand","number"),this._add(t>>31&-this.sign,0|t)},o.prototype.add=function(t){return this.clone().iadd(t)},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype._sub=function(t,e){return t=~t,-1===(e=~e)?(e=0,t+=1,t|=0):e+=1,this._add(t,e)},o.prototype.isub=function(t){return c(o.isN64(t),"operand","int64"),this._sub(t.hi,t.lo)},o.prototype.isubn=function(t){return c(d(t),"operand","number"),this._sub(t>>31&-this.sign,0|t)},o.prototype.sub=function(t){return this.clone().isub(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype._mul=function(t,e){const r=this.hi,i=this.lo,s=65535&r,n=i>>>16,o=65535&i,h=65535&t,f=e>>>16,a=65535&e;let u=0,c=0,d=0,l=0;d+=(l+=o*a)>>>16,c+=(d+=n*a)>>>16,d&=65535,c+=(d+=o*f)>>>16,u+=(c+=s*a)>>>16,c&=65535,u+=(c+=n*f)>>>16,c&=65535,u+=(c+=o*h)>>>16,u+=(r>>>16)*a+s*f+n*h+o*(t>>>16);const p=(u&=65535)<<16|(c&=65535),b=(d&=65535)<<16|(l&=65535);return this.hi=p,this.lo=b,this},o.prototype.imul=function(t){return c(o.isN64(t),"multiplicand","int64"),this._mul(t.hi,t.lo)},o.prototype.imuln=function(t){return c(d(t),"multiplicand","number"),this._mul(t>>31&-this.sign,0|t)},o.prototype.mul=function(t){return this.clone().imul(t)},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.idiv=function(t){let e=this;if(c(o.isN64(t),"divisor","int64"),t.isZero())throw new Error("Cannot divide by zero.");if(e.isZero())return e;if(e.eq(t))return e.set(1);if(e.isSafe()&&t.isSafe()){const r=function(t){return t<0?-Math.floor(-t):Math.floor(t)}(e.toDouble()/t.toDouble());return e.set(r)}let r=!1;e.sign&&(e.hi<0?t.hi<0?(e=e.ineg(),t=t.neg()):(e=e.ineg(),r=!0):t.hi<0&&(t=t.neg(),r=!0));const i=e.toU64(),s=t.toU64();if(i.lt(s))return e.set(0);if(i.ushrn(1).lt(s))return e.set(r?-1:1);const n=new h,f=new h;let a=i.bitLength();for(;a--;)f.ishln(1),f.lo|=i.testn(a),f.gte(s)&&(f.isub(s),n.setn(a,1));return e.hi=n.hi,e.lo=n.lo,r&&e.ineg(),e},o.prototype.idivn=function(t){return c(d(t),"divisor","number"),this.idiv(this._small(t))},o.prototype.div=function(t){return this.clone().idiv(t)},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.imod=function(t){const e=this;if(c(o.isN64(t),"divisor","int64"),t.isZero())throw new Error("Cannot divide by zero.");if(e.isZero())return e;if(e.eq(t))return e.set(0);if(e.isSafe()&&t.isSafe()){const r=e.toDouble()%t.toDouble();return e.set(r)}return e.isub(e.div(t).imul(t))},o.prototype.imodn=function(t){return c(d(t),"divisor","number"),this.imod(this._small(t))},o.prototype.mod=function(t){return this.clone().imod(t)},o.prototype.modn=function(t){return this.clone().imodn(t)},o.prototype.ipow=function(t){return c(o.isN64(t),"exponent","int64"),this.ipown(t.lo)},o.prototype.ipown=function(t){if(c(d(t),"exponent","number"),this.isZero())return this;const e=this.clone(),r=this;let i=t>>>0;for(r.set(1);i>0;)1&i&&r.imul(e),i>>>=1,e.imul(e);return r},o.prototype.pow=function(t){return this.clone().ipow(t)},o.prototype.pown=function(t){return this.clone().ipown(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this)},o.prototype.iand=function(t){return c(o.isN64(t),"operand","int64"),this.hi&=t.hi,this.lo&=t.lo,this},o.prototype.iandn=function(t){return c(d(t),"operand","number"),this.hi&=t>>31&-this.sign,this.lo&=0|t,this},o.prototype.and=function(t){return this.clone().iand(t)},o.prototype.andn=function(t){return this.clone().iandn(t)},o.prototype.ior=function(t){return c(o.isN64(t),"operand","int64"),this.hi|=t.hi,this.lo|=t.lo,this},o.prototype.iorn=function(t){return c(d(t),"operand","number"),this.hi|=t>>31&-this.sign,this.lo|=0|t,this},o.prototype.or=function(t){return this.clone().ior(t)},o.prototype.orn=function(t){return this.clone().iorn(t)},o.prototype.ixor=function(t){return c(o.isN64(t),"operand","int64"),this.hi^=t.hi,this.lo^=t.lo,this},o.prototype.ixorn=function(t){return c(d(t),"operand","number"),this.hi^=t>>31&-this.sign,this.lo^=0|t,this},o.prototype.xor=function(t){return this.clone().ixor(t)},o.prototype.xorn=function(t){return this.clone().ixorn(t)},o.prototype.inot=function(){return this.hi=~this.hi,this.lo=~this.lo,this},o.prototype.not=function(){return this.clone().inot()},o.prototype.ishl=function(t){return c(o.isN64(t),"bits","int64"),this.ishln(t.lo)},o.prototype.ishln=function(t){if(c(d(t),"bits","number"),0===(t&=63))return this;let e=this.hi,r=this.lo;return t<32?(e<<=t,e|=r>>>32-t,r<<=t):(e=r<<t-32,r=0),this.hi=e,this.lo=r,this},o.prototype.shl=function(t){return this.clone().ishl(t)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ishr=function(t){return c(o.isN64(t),"bits","int64"),this.ishrn(t.lo)},o.prototype.ishrn=function(t){if(!this.sign)return this.iushrn(t);if(c(d(t),"bits","number"),0===(t&=63))return this;let e=this.hi,r=this.lo;return t<32?(r>>>=t,r|=e<<32-t,e>>=t):(r=e>>t-32,e>>=31),this.hi=e,this.lo=r,this},o.prototype.shr=function(t){return this.clone().ishr(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.iushr=function(t){return c(o.isN64(t),"bits","int64"),this.iushrn(t.lo)},o.prototype.iushrn=function(t){if(c(d(t),"bits","number"),0===(t&=63))return this;let e=this.hi,r=this.lo;return t<32?(r>>>=t,r|=e<<32-t,e>>>=t):(r=e>>>t-32,e=0),this.hi=0|e,this.lo=0|r,this},o.prototype.ushr=function(t){return this.clone().iushr(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.setn=function(t,e){return c(d(t),"bit","number"),(t&=63)<32?e?this.lo|=1<<t:this.lo&=~(1<<t):e?this.hi|=1<<t-32:this.hi&=~(1<<t-32),this},o.prototype.testn=function(t){return c(d(t),"bit","number"),(t&=63)<32?this.lo>>>t&1:this.hi>>>t-32&1},o.prototype.setb=function(t,e){return c(d(t),"pos","number"),c(d(e),"ch","number"),e&=255,(t&=7)<4?(this.lo&=~(255<<8*t),this.lo|=e<<8*t):(this.hi&=~(255<<8*(t-4)),this.hi|=e<<8*(t-4)),this},o.prototype.orb=function(t,e){return c(d(t),"pos","number"),c(d(e),"ch","number"),e&=255,(t&=7)<4?this.lo|=e<<8*t:this.hi|=e<<8*(t-4),this},o.prototype.getb=function(t){return c(d(t),"pos","number"),(t&=7)<4?this.lo>>8*t&255:this.hi>>8*(t-4)&255},o.prototype.imaskn=function(t){return c(d(t),"bit","number"),(t&=63)<32?(this.hi=0,this.lo&=(1<<t)-1):(this.hi&=(1<<t-32)-1,this.lo&=4294967295),this},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.andln=function(t){return c(d(t),"operand","number"),this.lo&t},o.prototype.ineg=function(){let t=~this.hi,e=~this.lo;return-1===e?(e=0,t+=1,t|=0):e+=1,this.hi=t,this.lo=e,this},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.iabs=function(){return this.isNeg()&&this.ineg(),this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._cmp=function(t,e){const r=this;let i=r.hi,s=r.lo;if(i===t&&s===e)return 0;let n=!1;if(r.sign){const e=i<0,r=t<0;if(e&&!r)return-1;if(!e&&r)return 1;n=e}return n||(i>>>=0,t>>>=0),i<t?-1:i>t?1:(s>>>=0)<(e>>>=0)?-1:1},o.prototype.cmp=function(t){return c(o.isN64(t),"value","int64"),this._cmp(t.hi,t.lo)},o.prototype.cmpn=function(t){return c(d(t),"value","number"),this._cmp(t>>31&-this.sign,0|t)},o.prototype.eq=function(t){return c(o.isN64(t),"value","int64"),this.hi===t.hi&&this.lo===t.lo},o.prototype.eqn=function(t){return c(d(t),"value","number"),this.hi===(t>>31&-this.sign)&&this.lo===(0|t)},o.prototype.gt=function(t){return this.cmp(t)>0},o.prototype.gtn=function(t){return this.cmpn(t)>0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.lt=function(t){return this.cmp(t)<0},o.prototype.ltn=function(t){return this.cmpn(t)<0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.isZero=function(){return 0===this.hi&&0===this.lo},o.prototype.isNeg=function(){return 1===this.sign&&this.hi<0},o.prototype.isOdd=function(){return 1==(1&this.lo)},o.prototype.isEven=function(){return 0==(1&this.lo)},o.prototype.clone=function(){const t=new this.constructor;return t.hi=this.hi,t.lo=this.lo,t},o.prototype.inject=function(t){return c(o.isN64(t),"value","int64"),this.hi=t.hi,this.lo=t.lo,this},o.prototype.set=function(t){c(function(t){return Number.isSafeInteger?Number.isSafeInteger(t):d(t)&&Math.floor(t)===t&&t>=-9007199254740991&&t<=9007199254740991}(t),"number","integer");let e=!1;return t<0&&(t=-t,e=!0),this.hi=t*(1/4294967296)|0,this.lo=0|t,e&&this.ineg(),this},o.prototype.join=function(t,e){return c(d(t),"hi","number"),c(d(e),"lo","number"),this.hi=0|t,this.lo=0|e,this},o.prototype._small=function(t){const e=new this.constructor;return e.hi=t>>31&-this.sign,e.lo=0|t,e},o.prototype.bitLength=function(){let t=this;return this.isNeg()&&(t=this.neg()),0===t.hi?u(t.lo):u(t.hi)+32},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.isSafe=function(){let t=this.hi;return this.isNeg()&&(t=~t,0===this.lo&&(t+=1)),0==(4292870144&t)},o.prototype.inspect=function(){let t="I64";return this.sign||(t="U64"),`<${t}: ${this.toString(10)}>`},o.prototype.readLE=function(t,e){return c(t&&"number"==typeof t.length,"data","arraylike"),c(e>>0===e,"offset","integer"),c(e+8<=t.length,"offset","valid offset"),this.lo=b(t,e),this.hi=b(t,e+4),e+8},o.prototype.readBE=function(t,e){return c(t&&"number"==typeof t.length,"data","arraylike"),c(e>>0===e,"offset","integer"),c(e+8<=t.length,"offset","valid offset"),this.hi=m(t,e),this.lo=m(t,e+4),e+8},o.prototype.readRaw=function(t,e){return this.readLE(t,e)},o.prototype.writeLE=function(t,e){return c(t&&"number"==typeof t.length,"data","arraylike"),c(e>>0===e,"offset","integer"),c(e+8<=t.length,"offset","valid offset"),g(t,this.lo,e),g(t,this.hi,e+4),e+8},o.prototype.writeBE=function(t,e){return c(t&&"number"==typeof t.length,"data","arraylike"),c(e>>0===e,"offset","integer"),c(e+8<=t.length,"offset","valid offset"),w(t,this.hi,e),w(t,this.lo,e+4),e+8},o.prototype.writeRaw=function(t,e){return this.writeLE(t,e)},o.prototype.toU64=function(){const t=new h;return t.hi=this.hi,t.lo=this.lo,t},o.prototype.toI64=function(){const t=new f;return t.hi=this.hi,t.lo=this.lo,t},o.prototype.toNumber=function(){if(!this.isSafe())throw new Error("Number exceeds 53 bits.");return this.toDouble()},o.prototype.toDouble=function(){let t=this.hi;return this.sign||(t>>>=0),4294967296*t+(this.lo>>>0)},o.prototype.toInt=function(){return this.sign?this.lo:this.lo>>>0},o.prototype.toBool=function(){return!this.isZero()},o.prototype.toBits=function(){return[this.hi,this.lo]},o.prototype.toObject=function(){return{hi:this.hi,lo:this.lo}},o.prototype.toString=function(t,e){if(t=a(t),null==e&&(e=0),c(t>>>0===t,"base","integer"),c(e>>>0===e,"pad","integer"),t<2||t>16)throw new Error("Base ranges between 2 and 16.");if(e>64)throw new Error("Maximum padding is 64 characters.");let r=this,i=!1;r.isNeg()&&(r=r.neg(),i=!0);let s=r.hi>>>0,n=r.lo>>>0,o="";do{const e=s%t;s-=e,s/=t;const r=(n+=4294967296*e)%t;n-=r,n/=t;let i=r;i+=i<10?48:87,o=String.fromCharCode(i)+o}while(n>0||s>0);for(;o.length<e;)o="0"+o;return i&&(o="-"+o),o},o.prototype.toJSON=function(){return this.toString(16,16)},o.prototype.toBN=function(t){const e=this.isNeg();let r=this.hi,i=this.lo;e&&(r=~r,-1===(i=~i)?(i=0,r+=1,r|=0):i+=1),i>>>=0;const s=new t(r>>>=0);return s.ishln(32),s.iadd(new t(i)),e&&s.ineg(),s},o.prototype.toLE=function(t){c("function"==typeof t,"ArrayLike","constructor");const e=p(t,8);return this.writeLE(e,0),e},o.prototype.toBE=function(t){c("function"==typeof t,"ArrayLike","constructor");const e=p(t,8);return this.writeBE(e,0),e},o.prototype.toRaw=function(t){return this.toLE(t)},o.prototype.fromNumber=function(t){return this.set(t)},o.prototype.fromInt=function(t){return c(d(t),"integer","number"),this.join(t>>31&-this.sign,t)},o.prototype.fromBool=function(t){return c("boolean"==typeof t,"value","boolean"),this.hi=0,this.lo=t?1:0,this},o.prototype.fromBits=function(t,e){return this.join(t,e)},o.prototype.fromObject=function(t){return c(t&&"object"==typeof t,"number","object"),this.fromBits(t.hi,t.lo)},o.prototype.fromString=function(t,e){if(e=a(e),c("string"==typeof t,"string","string"),c(e>>>0===e,"base","integer"),e<2||e>16)throw new Error("Base ranges between 2 and 16.");let r=!1,i=0;if(t.length>0&&"-"===t[0]&&(i+=1,r=!0),t.length===i||t.length>i+64)throw new Error("Invalid string (bad length).");let s=0,n=0;for(;i<t.length;i++){let r=t.charCodeAt(i);if(r>=48&&r<=57?r-=48:r>=65&&r<=90?r-=55:r>=97&&r<=122?r-=87:r=e,r>=e)throw new Error("Invalid string (parse error).");if(n*=e,s*=e,(n+=r)>4294967295&&(s+=(n-(r=n%4294967296))/4294967296,n=r),s>4294967295)throw new Error("Invalid string (overflow).")}return this.hi=0|s,this.lo=0|n,r&&this.ineg(),this},o.prototype.fromJSON=function(t){return this.fromString(t,16)},o.prototype.fromBN=function(t){c(t&&l(t.words),"number","big number");const e=this,r=t.clone(),i=r.isNeg();if(e.sign&&r.testn(63))throw new Error("Big number overflow.");let s=0;for(;!r.isZero();){if(8===s)throw new Error("Big number overflow.");e.orb(s,r.andln(255)),r.iushrn(8),s++}return i&&e.ineg(),e},o.prototype.fromLE=function(t){return this.readLE(t,0),this},o.prototype.fromBE=function(t){return this.readBE(t,0),this},o.prototype.fromRaw=function(t){return this.fromLE(t)},o.prototype.from=function(t,e){if(null==t)return this;if("number"==typeof t)return"number"==typeof e?this.fromBits(t,e):this.fromNumber(t);if("string"==typeof t)return this.fromString(t,e);if("object"==typeof t)return l(t.words)?this.fromBN(t):"number"==typeof t.length?this.fromRaw(t):this.fromObject(t);if("boolean"==typeof t)return this.fromBool(t);throw new TypeError("Non-numeric object passed to N64.")},o.min=function(t,e){return t.cmp(e)<0?t:e},o.max=function(t,e){return t.cmp(e)>0?t:e},o.random=function(){const t=new this;return t.hi=4294967296*Math.random()|0,t.lo=4294967296*Math.random()|0,t},o.pow=function(t,e){return(new this).fromInt(t).ipown(e)},o.shift=function(t,e){return(new this).fromInt(t).ishln(e)},o.readLE=function(t,e){const r=new this;return r.readLE(t,e),r},o.readBE=function(t,e){const r=new this;return r.readBE(t,e),r},o.readRaw=function(t,e){const r=new this;return r.readRaw(t,e),r},o.fromNumber=function(t){return(new this).fromNumber(t)},o.fromInt=function(t){return(new this).fromInt(t)},o.fromBool=function(t){return(new this).fromBool(t)},o.fromBits=function(t,e){return(new this).fromBits(t,e)},o.fromObject=function(t){return(new this).fromObject(t)},o.fromString=function(t,e){return(new this).fromString(t,e)},o.fromJSON=function(t){return(new this).fromJSON(t)},o.fromBN=function(t){return(new this).fromBN(t)},o.fromLE=function(t){return(new this).fromLE(t)},o.fromBE=function(t){return(new this).fromBE(t)},o.fromRaw=function(t){return(new this).fromRaw(t)},o.from=function(t,e){return(new this).from(t,e)},o.isN64=function(t){return t instanceof o},o.isU64=function(t){return t instanceof h},o.isI64=function(t){return t instanceof f},h.__proto__=o,h.prototype.__proto__=o.prototype,h.ULONG_MIN=0,h.ULONG_MAX=4294967295,h.UINT32_MIN=h(0,0),h.UINT32_MAX=h(0,4294967295),h.UINT64_MIN=h(0,0),h.UINT64_MAX=h(4294967295,4294967295),f.__proto__=o,f.prototype.__proto__=o.prototype,f.LONG_MIN=-2147483648,f.LONG_MAX=2147483647,f.INT32_MIN=f(4294967295,2147483648),f.INT32_MAX=f(0,2147483647),f.INT64_MIN=f(2147483648,0),f.INT64_MAX=f(2147483647,4294967295),t.N64=o,t.U64=h,t.I64=f}],["bcoin","/lib/script/scripterror.js",function(t,e,r,i,s,n){"use strict";class o extends Error{constructor(t,e,r){super(),this.type="ScriptError",this.code=t,this.message=t,this.op=-1,this.ip=-1,"string"==typeof e?this.message=e:e&&(this.message=`${t} (op=${e.toSymbol()}, ip=${r})`,this.op=e.value,this.ip=r),Error.captureStackTrace&&Error.captureStackTrace(this,o)}}r.exports=o}],["bcoin","/lib/script/opcode.js",function(t,e,r,s,n,o){"use strict";const h=d(2,r),f=d(17,r),a=d(65,r),u=d(64,r),c=u.opcodes,l=[];let p=null;class b{constructor(t,e){this.value=t||0,this.data=e||null}isMinimal(){if(!this.data)return!0;if(1===this.data.length){if(129===this.data[0])return!1;if(this.data[0]>=1&&this.data[0]<=16)return!1}return this.data.length<=75?this.value===this.data.length:this.data.length<=255?this.value===c.OP_PUSHDATA1:this.data.length<=65535?this.value===c.OP_PUSHDATA2:(h(this.value===c.OP_PUSHDATA4),!0)}isDisabled(){switch(this.value){case c.OP_CAT:case c.OP_SUBSTR:case c.OP_LEFT:case c.OP_RIGHT:case c.OP_INVERT:case c.OP_AND:case c.OP_OR:case c.OP_XOR:case c.OP_2MUL:case c.OP_2DIV:case c.OP_MUL:case c.OP_DIV:case c.OP_MOD:case c.OP_LSHIFT:case c.OP_RSHIFT:return!0}return!1}isBranch(){return this.value>=c.OP_IF&&this.value<=c.OP_ENDIF}equals(t){return h(b.isOpcode(t)),this.value===t.value&&(this.data?(h(t.data),this.data.equals(t.data)):(h(!t.data),!0))}toOp(){return this.value}toData(){return this.data}toLength(){return this.data?this.data.length:-1}toPush(){return this.value===c.OP_0?u.small[1]:this.value===c.OP_1NEGATE?u.small[0]:this.value>=c.OP_1&&this.value<=c.OP_16?u.small[this.value-80+1]:this.toData()}toString(t){const e=this.toPush();return e?e.toString(t||"utf8"):null}toSmall(){return this.value===c.OP_0?0:this.value>=c.OP_1&&this.value<=c.OP_16?this.value-80:-1}toNum(t,e){return this.value===c.OP_0?a.fromInt(0):this.value===c.OP_1NEGATE?a.fromInt(-1):this.value>=c.OP_1&&this.value<=c.OP_16?a.fromInt(this.value-80):this.data?a.decode(this.data,t,e):null}toInt(t,e){const r=this.toNum(t,e);return r?r.getInt():-1}toBool(){const t=this.toSmall();return-1!==t&&1===t}toSymbol(){if(-1===this.value)return"OP_INVALIDOPCODE";const t=u.opcodesByVal[this.value];return t||`0x${m(this.value)}`}getSize(){if(!this.data)return 1;switch(this.value){case c.OP_PUSHDATA1:return 2+this.data.length;case c.OP_PUSHDATA2:return 3+this.data.length;case c.OP_PUSHDATA4:return 5+this.data.length;default:return 1+this.data.length}}toWriter(t){if(-1===this.value)throw new Error("Cannot reserialize a parse error.");if(!this.data)return t.writeU8(this.value),t;switch(this.value){case c.OP_PUSHDATA1:t.writeU8(this.value),t.writeU8(this.data.length),t.writeBytes(this.data);break;case c.OP_PUSHDATA2:t.writeU8(this.value),t.writeU16(this.data.length),t.writeBytes(this.data);break;case c.OP_PUSHDATA4:t.writeU8(this.value),t.writeU32(this.data.length),t.writeBytes(this.data);break;default:h(this.value===this.data.length),t.writeU8(this.value),t.writeBytes(this.data)}return t}toRaw(){const t=this.getSize();return this.toWriter(f.write(t)).render()}toFormat(){if(-1===this.value)return"0x01";if(this.data){if(this.data.length<=4){const t=this.toNum();if(this.equals(b.fromNum(t)))return t.toString(10)}const t=u.opcodesByVal[this.value],e=this.data.toString("hex");if(!t){return`0x${m(this.value)} 0x${e}`}let r=this.data.length.toString(16);for(;r.length%2!=0;)r="0"+r;return`${t} 0x${r} 0x${e}`}const t=u.opcodesByVal[this.value];return t||`0x${m(this.value)}`}toASM(t){return-1===this.value?"[error]":this.data?u.toASM(this.data,t):u.opcodesByVal[this.value]||"OP_UNKNOWN"}static fromOp(t){h("number"==typeof t);const e=l[t];return h(e,"Bad opcode."),e}static fromData(t){if(h(null!=t&&!0===t._isBuffer),1===t.length){if(129===t[0])return this.fromOp(c.OP_1NEGATE);if(t[0]>=1&&t[0]<=16)return this.fromOp(t[0]+80)}return this.fromPush(t)}static fromPush(t){if(h(null!=t&&!0===t._isBuffer),0===t.length)return this.fromOp(c.OP_0);if(t.length<=75)return new this(t.length,t);if(t.length<=255)return new this(c.OP_PUSHDATA1,t);if(t.length<=65535)return new this(c.OP_PUSHDATA2,t);if(t.length<=4294967295)return new this(c.OP_PUSHDATA4,t);throw new Error("Pushdata size too large.")}static fromString(t,e){h("string"==typeof t);const r=i.from(t,e||"utf8");return this.fromData(r)}static fromSmall(t){return h((255&t)===t&&t>=0&&t<=16),this.fromOp(0===t?0:t+80)}static fromNum(t){return h(a.isScriptNum(t)),this.fromData(t.encode())}static fromInt(t){return h(Number.isSafeInteger(t)),0===t?this.fromOp(c.OP_0):-1===t?this.fromOp(c.OP_1NEGATE):t>=1&&t<=16?this.fromOp(t+80):this.fromNum(a.fromNumber(t))}static fromBool(t){return h("boolean"==typeof t),this.fromSmall(t?1:0)}static fromSymbol(t){h("string"==typeof t),h(t.length>0),32&t.charCodeAt(0)&&(t=t.toUpperCase()),/^OP_/.test(t)||(t=`OP_${t}`);const e=u.opcodes[t];if(null!=e)return this.fromOp(e);h(/^OP_0X/.test(t),"Unknown opcode."),h(7===t.length,"Unknown opcode.");const r=parseInt(t.substring(5),16);return h((255&r)===r,"Unknown opcode."),this.fromOp(r)}static fromReader(t){const e=t.readU8(),r=l[e];if(r)return r;switch(e){case c.OP_PUSHDATA1:{if(t.left()<1)return p;const r=t.readU8();return t.left()<r?(t.seek(t.left()),p):new this(e,t.readBytes(r))}case c.OP_PUSHDATA2:{if(t.left()<2)return t.seek(t.left()),p;const r=t.readU16();return t.left()<r?(t.seek(t.left()),p):new this(e,t.readBytes(r))}case c.OP_PUSHDATA4:{if(t.left()<4)return t.seek(t.left()),p;const r=t.readU32();return t.left()<r?(t.seek(t.left()),p):new this(e,t.readBytes(r))}default:if(t.left()<e)return t.seek(t.left()),p;return new this(e,t.readBytes(e))}}static fromRaw(t){return this.fromReader(f.read(t))}static isOpcode(t){return t instanceof b}}function m(t){return t<=15?"0"+t.toString(16):t.toString(16)}p=Object.freeze(new b(-1));for(let t=0;t<=255;t++){if(t>=1&&t<=78){l.push(null);continue}const e=new b(t);l.push(Object.freeze(e))}r.exports=b}],["bcoin","/lib/script/stack.js",function(t,e,r,s,n,o){"use strict";const h=d(2,r),f=d(64,r),a=d(65,r),{inspectSymbol:u}=d(14,r);class c{constructor(t){this.items=t||[]}get length(){return this.items.length}set length(t){this.items.length=t}[Symbol.iterator](){return this.items[Symbol.iterator]()}values(){return this.items.values()}entries(){return this.items.entries()}[u](){return`<Stack: ${this.toString()}>`}toString(){const t=[];for(const e of this.items)t.push(e.toString("hex"));return t.join(" ")}toASM(t){const e=[];for(const r of this.items)e.push(f.toASM(r,t));return e.join(" ")}clone(){return new this.constructor(this.items.slice())}clear(){return this.items.length=0,this}get(t){return t<0&&(t+=this.items.length),t<0||t>=this.items.length?null:this.items[t]}pop(){return this.items.pop()||null}shift(){return this.items.shift()||null}remove(t){if(t<0&&(t+=this.items.length),t<0||t>=this.items.length)return null;const e=this.items.splice(t,1);return 0===e.length?null:e[0]}set(t,e){return t<0&&(t+=this.items.length),h(null!=e&&!0===e._isBuffer),h(t>=0&&t<=this.items.length),this.items[t]=e,this}push(t){return h(null!=t&&!0===t._isBuffer),this.items.push(t),this}unshift(t){return h(null!=t&&!0===t._isBuffer),this.items.unshift(t),this}insert(t,e){return t<0&&(t+=this.items.length),h(null!=e&&!0===e._isBuffer),h(t>=0&&t<=this.items.length),this.items.splice(t,0,e),this}erase(t,e){t<0&&(t=this.items.length+t),e<0&&(e=this.items.length+e),this.items.splice(t,e-t)}swap(t,e){t<0&&(t=this.items.length+t),e<0&&(e=this.items.length+e);const r=this.items[t],i=this.items[e];this.items[t]=i,this.items[e]=r}getData(t){return this.get(t)}popData(){return this.pop()}shiftData(){return this.shift()}removeData(t){return this.remove(t)}setData(t,e){return this.set(t,e)}pushData(t){return this.push(t)}unshiftData(t){return this.unshift(t)}insertData(t,e){return this.insert(t,e)}getLength(t){const e=this.get(t);return e?e.length:-1}getString(t,e){const r=this.get(t);return r?c.toString(r,e):null}popString(t){const e=this.pop();return e?c.toString(e,t):null}shiftString(t){const e=this.shift();return e?c.toString(e,t):null}removeString(t,e){const r=this.remove(t);return r?c.toString(r,e):null}setString(t,e,r){return this.set(t,c.fromString(e,r))}pushString(t,e){return this.push(c.fromString(t,e))}unshiftString(t,e){return this.unshift(c.fromString(t,e))}insertString(t,e,r){return this.insert(t,c.fromString(e,r))}getNum(t,e,r){const i=this.get(t);return i?c.toNum(i,e,r):null}popNum(t,e){const r=this.pop();return r?c.toNum(r,t,e):null}shiftNum(t,e){const r=this.shift();return r?c.toNum(r,t,e):null}removeNum(t,e,r){const i=this.remove(t);return i?c.toNum(i,e,r):null}setNum(t,e){return this.set(t,c.fromNum(e))}pushNum(t){return this.push(c.fromNum(t))}unshiftNum(t){return this.unshift(c.fromNum(t))}insertNum(t,e){return this.insert(t,c.fromNum(e))}getInt(t,e,r){const i=this.get(t);return i?c.toInt(i,e,r):-1}popInt(t,e){const r=this.pop();return r?c.toInt(r,t,e):-1}shiftInt(t,e){const r=this.shift();return r?c.toInt(r,t,e):-1}removeInt(t,e,r){const i=this.remove(t);return i?c.toInt(i,e,r):-1}setInt(t,e){return this.set(t,c.fromInt(e))}pushInt(t){return this.push(c.fromInt(t))}unshiftInt(t){return this.unshift(c.fromInt(t))}insertInt(t,e){return this.insert(t,c.fromInt(e))}getBool(t){const e=this.get(t);return!!e&&c.toBool(e)}popBool(){const t=this.pop();return!!t&&c.toBool(t)}shiftBool(){const t=this.shift();return!!t&&c.toBool(t)}removeBool(t){const e=this.remove(t);return!!e&&c.toBool(e)}setBool(t,e){return this.set(t,c.fromBool(e))}pushBool(t){return this.push(c.fromBool(t))}unshiftBool(t){return this.unshift(c.fromBool(t))}insertBool(t,e){return this.insert(t,c.fromBool(e))}static isStack(t){return t instanceof c}static toString(t,e){return h(null!=t&&!0===t._isBuffer),t.toString(e||"utf8")}static fromString(t,e){return h("string"==typeof t),i.from(t,e||"utf8")}static toNum(t,e,r){return a.decode(t,e,r)}static fromNum(t){return h(a.isScriptNum(t)),t.encode()}static toInt(t,e,r){return c.toNum(t,e,r).getInt()}static fromInt(t){if(h("number"==typeof t),t>=-1&&t<=16)return f.small[t+1];const e=a.fromNumber(t);return c.fromNum(e)}static toBool(t){h(null!=t&&!0===t._isBuffer);for(let e=0;e<t.length;e++)if(0!==t[e])return e!==t.length-1||128!==t[e];return!1}static fromBool(t){return h("boolean"==typeof t),c.fromInt(t?1:0)}}r.exports=c}],["bcoin","/lib/primitives/address.js",function(t,e,r,s,n,o){"use strict";const h=d(2,r),f=d(17,r),a=d(71,r),u=d(73,r),c=d(44,r),l=d(60,r),p=d(26,r),b=d(5,r),m=d(11,r),{inspectSymbol:g}=d(14,r),w=i.alloc(20,0);class y{constructor(t,e){this.type=y.types.PUBKEYHASH,this.version=-1,this.hash=w,t&&this.fromOptions(t,e)}fromOptions(t,e){if("string"==typeof t)return this.fromString(t,e);h(t);const{hash:r,type:i,version:s}=t;return this.fromHash(r,i,s)}static fromOptions(t,e){return(new this).fromOptions(t,e)}getHash(t){return"hex"===t?this.hash.toString("hex"):this.hash}isNull(){if(20===this.hash.length)return this.hash.equals(w);if(32===this.hash.length)return this.hash.equals(m.ZERO_HASH);for(let t=0;t<this.hash.length;t++)if(0!==this.hash[t])return!1;return!0}equals(t){return h(t instanceof y),this.type===t.type&&this.version===t.version&&this.hash.equals(t.hash)}getType(){return y.typesByVal[this.type].toLowerCase()}getPrefix(t){const e=(t=b.get(t)).addressPrefix;switch(this.type){case y.types.PUBKEYHASH:return e.pubkeyhash;case y.types.SCRIPTHASH:return e.scripthash;case y.types.WITNESS:if(20===this.hash.length)return e.witnesspubkeyhash;if(32===this.hash.length)return e.witnessscripthash}return-1}getSize(){let t=5+this.hash.length;return-1!==this.version&&(t+=2),t}toRaw(t){const e=this.getSize(),r=f.write(e),i=this.getPrefix(t);return h(-1!==i,"Not a valid address prefix."),r.writeU8(i),-1!==this.version&&(r.writeU8(this.version),r.writeU8(0)),r.writeBytes(this.hash),r.writeChecksum(p.digest),r.render()}toBase58(t){return a.encode(this.toRaw(t))}toBech32(t){const e=this.version,r=this.hash;h(-1!==e,"Cannot convert non-program address to bech32.");const i=(t=b.get(t)).addressPrefix.bech32;return u.encode(i,e,r)}fromString(t,e){if(h("string"==typeof t),h(t.length>0),h(t.length<=100),function(t){let e=!1,r=!1;for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);if(!(s>=48&&s<=57)&&(32&s?(h(s>=97&&s<=122),e=!0):(h(s>=65&&s<=90),r=!0),e&&r))return!0}return!1}(t))return this.fromBase58(t,e);try{return this.fromBech32(t,e)}catch(r){return this.fromBase58(t,e)}}static fromString(t,e){return(new this).fromString(t,e)}toString(t){return-1!==this.version?this.toBech32(t):this.toBase58(t)}[g](){return"<Address:"+` type=${this.getType()}`+` version=${this.version}`+` str=${this.toString()}`+">"}fromRaw(t,e){const r=f.read(t,!0),i=r.readU8();e=b.fromAddress(i,e);const s=y.getType(i,e);let n=-1;if(s===y.types.WITNESS){if(t.length>38)throw new Error("Address is too long.");if(n=r.readU8(),0!==r.readU8())throw new Error("Address version padding is non-zero.")}else if(25!==t.length)throw new Error("Address is too long.");const o=r.readBytes(r.left()-4);return r.verifyChecksum(p.digest),this.fromHash(o,s,n)}static fromRaw(t,e){return(new this).fromRaw(t,e)}fromBase58(t,e){if(h("string"==typeof t),t.length>55)throw new Error("Address is too long.");return this.fromRaw(a.decode(t),e)}static fromBase58(t,e){return(new this).fromBase58(t,e)}fromBech32(t,e){const r=y.types.WITNESS;h("string"==typeof t);const[i,s,n]=u.decode(t);return b.fromBech32(i,e),this.fromHash(n,r,s)}static fromBech32(t,e){return(new this).fromBech32(t,e)}fromScript(t){const e=t.getPubkey();if(e)return this.hash=l.digest(e),this.type=y.types.PUBKEYHASH,this.version=-1,this;const r=t.getPubkeyhash();if(r)return this.hash=r,this.type=y.types.PUBKEYHASH,this.version=-1,this;const i=t.getScripthash();if(i)return this.hash=i,this.type=y.types.SCRIPTHASH,this.version=-1,this;const s=t.getProgram();return s&&!s.isMalformed()?(this.hash=s.data,this.type=y.types.WITNESS,this.version=s.version,this):t.isMultisig()?(this.hash=t.hash160(),this.type=y.types.SCRIPTHASH,this.version=-1,this):null}fromWitness(t){const[,e]=t.getPubkeyhashInput();if(e)return this.hash=l.digest(e),this.type=y.types.WITNESS,this.version=0,this;const r=t.getScripthashInput();return r?(this.hash=c.digest(r),this.type=y.types.WITNESS,this.version=0,this):null}fromInputScript(t){const[,e]=t.getPubkeyhashInput();if(e)return this.hash=l.digest(e),this.type=y.types.PUBKEYHASH,this.version=-1,this;const r=t.getScripthashInput();return r?(this.hash=l.digest(r),this.type=y.types.SCRIPTHASH,this.version=-1,this):null}static fromWitness(t){return(new this).fromWitness(t)}static fromInputScript(t){return(new this).fromInputScript(t)}static fromScript(t){return(new this).fromScript(t)}fromHash(t,e,r){return"string"==typeof e&&(e=y.types[e.toUpperCase()],h(null!=e,"Not a valid address type.")),null==e&&(e=y.types.PUBKEYHASH),null==r&&(r=-1),h(null!=t&&!0===t._isBuffer),h(e>>>0===e),h((0|r)===r),h(e>=y.types.PUBKEYHASH&&e<=y.types.WITNESS,"Not a valid address type."),-1===r?(h(e!==y.types.WITNESS,"Wrong version (witness)"),h(20===t.length,"Hash is the wrong size.")):(h(e===y.types.WITNESS,"Wrong version (non-witness)."),h(r>=0&&r<=16,"Bad program version."),0===r&&e===y.types.WITNESS&&h(20===t.length||32===t.length,"Witness program hash is the wrong size."),h(t.length>=2&&t.length<=40,"Hash is the wrong size.")),this.hash=t,this.type=e,this.version=r,this}static fromHash(t,e,r){return(new this).fromHash(t,e,r)}fromPubkeyhash(t){const e=y.types.PUBKEYHASH;return h(20===t.length,"P2PKH must be 20 bytes."),this.fromHash(t,e,-1)}static fromPubkeyhash(t){return(new this).fromPubkeyhash(t)}fromScripthash(t){const e=y.types.SCRIPTHASH;return h(t&&20===t.length,"P2SH must be 20 bytes."),this.fromHash(t,e,-1)}static fromScripthash(t){return(new this).fromScripthash(t)}fromWitnessPubkeyhash(t){const e=y.types.WITNESS;return h(t&&20===t.length,"P2WPKH must be 20 bytes."),this.fromHash(t,e,0)}static fromWitnessPubkeyhash(t){return(new this).fromWitnessPubkeyhash(t)}fromWitnessScripthash(t){const e=y.types.WITNESS;return h(t&&32===t.length,"P2WPKH must be 32 bytes."),this.fromHash(t,e,0)}static fromWitnessScripthash(t){return(new this).fromWitnessScripthash(t)}fromProgram(t,e){const r=y.types.WITNESS;return h(t>=0,"Bad version for witness program."),this.fromHash(e,r,t)}static fromProgram(t,e){return(new this).fromProgram(t,e)}isPubkeyhash(){return this.type===y.types.PUBKEYHASH}isScripthash(){return this.type===y.types.SCRIPTHASH}isWitnessPubkeyhash(){return 0===this.version&&20===this.hash.length}isWitnessScripthash(){return 0===this.version&&32===this.hash.length}isProgram(){return-1!==this.version}isUnknown(){return-1!==this.version&&(this.version>0||20!==this.hash.length&&32!==this.hash.length)}static getHash(t,e){if(!t)throw new Error("Object is not an address.");let r;if(null!=t&&!0===t._isBuffer){if(20!==t.length&&32!==t.length)throw new Error("Object is not an address.");r=t}else{if(!(t instanceof y))throw new Error("Object is not an address.");r=t.hash}return"hex"===e?r.toString("hex"):r}static getType(t,e){const r=e.addressPrefix;switch(t){case r.pubkeyhash:return y.types.PUBKEYHASH;case r.scripthash:return y.types.SCRIPTHASH;case r.witnesspubkeyhash:case r.witnessscripthash:return y.types.WITNESS;default:throw new Error("Unknown address prefix.")}}}y.types={PUBKEYHASH:0,SCRIPTHASH:1,WITNESS:2},y.typesByVal=["PUBKEYHASH","SCRIPTHASH","WITNESS"],r.exports=y}],["bcrypto","/lib/encoding/base58-browser.js",function(t,e,r,i,s,n){"use strict";r.exports=d(72,r)}],["bcrypto","/lib/js/base58.js",function(t,e,r,s,n,o){"use strict";const h=d(28,r),f="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",a=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,-1,-1,-1,-1,-1,-1,-1,9,10,11,12,13,14,15,16,-1,17,18,19,20,21,-1,22,23,24,25,26,27,28,29,30,31,32,-1,-1,-1,-1,-1,-1,33,34,35,36,37,38,39,40,41,42,43,-1,44,45,46,47,48,49,50,51,52,53,54,55,56,57,-1,-1,-1,-1,-1];t.native=0,t.encode=function(t){h(null!=t&&!0===t._isBuffer);let e=0,r=0;for(;r<t.length&&0===t[r];r++)e+=1;const s=i.allocUnsafe(1+(138*t.length/100|0));s.fill(0);let n=0;for(;r<t.length;r++){let e=t[r],i=0;for(let t=s.length-1;t>=0&&!(0===e&&i>=n);t--,i++)e+=256*s[t],s[t]=e%58,e=e/58|0;h(0===e),n=i}for(r=s.length-n;r<s.length&&0===s[r];)r+=1;let o="";for(let t=0;t<e;t++)o+="1";for(;r<s.length;r++)o+=f[s[r]];return o},t.decode=function(t){h("string"==typeof t);let e=0,r=0;for(;r<t.length&&"1"===t[r];r++)e+=1;const s=i.allocUnsafe(1+(733*t.length/1e3|0));s.fill(0);let n=0;for(;r<t.length;r++){const e=t.charCodeAt(r),i=65408&e?-1:a[e];if(-1===i)throw new Error("Non-base58 character.");let o=i,f=0;for(let t=s.length-1;t>=0&&!(0===o&&f>=n);t--,f++)o+=58*s[t],s[t]=255&o,o>>>=8;h(0===o),n=f}for(r=0;r<s.length&&0===s[r];)r+=1;const o=i.allocUnsafe(e+(s.length-r));let f;for(f=0;f<e;f++)o[f]=0;for(;r<s.length;)o[f++]=s[r++];return o},t.test=function(t){h("string"==typeof t);for(let e=0;e<t.length;e++){const r=t.charCodeAt(e);if(65408&r)return!1;if(-1===a[r])return!1}return!0}}],["bcrypto","/lib/encoding/bech32-browser.js",function(t,e,r,i,s,n){"use strict";r.exports=d(74,r)}],["bcrypto","/lib/js/bech32.js",function(t,e,r,s,n,o){"use strict";const h=d(28,r),f=i.allocUnsafe(66),a="qpzry9x8gf2tvdw0s3jn54khce6mua7l",u=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,15,-1,10,17,21,20,26,30,7,5,-1,-1,-1,-1,-1,-1,-1,29,-1,24,13,25,9,8,23,-1,18,22,31,27,19,-1,1,0,3,16,11,28,12,14,6,4,2,-1,-1,-1,-1,-1,-1,29,-1,24,13,25,9,8,23,-1,18,22,31,27,19,-1,1,0,3,16,11,28,12,14,6,4,2,-1,-1,-1,-1,-1];function c(t){const e=t>>>25;return(33554431&t)<<5^996825010&-(e>>>0&1)^642813549&-(e>>>1&1)^513874426&-(e>>>2&1)^1027748829&-(e>>>3&1)^705979059&-(e>>>4&1)}function l(t,e){h("string"==typeof t),h(null!=e&&!0===e._isBuffer);let r,i=1;for(r=0;r<t.length;r++){const e=t.charCodeAt(r);if(65280&e||e>>>5==0)throw new Error("Invalid bech32 character.");i=c(i)^e>>>5}if(r+7+e.length>90)throw new Error("Invalid bech32 data length.");i=c(i);let s="";for(let e=0;e<t.length;e++){const r=t.charCodeAt(e);i=c(i)^31&r,s+=t[e]}s+="1";for(let t=0;t<e.length;t++){const r=e[t];if(r>>>5!=0)throw new Error("Invalid bech32 value.");i=c(i)^r,s+=a[r]}for(let t=0;t<6;t++)i=c(i);i^=1;for(let t=0;t<6;t++)s+=a[i>>>5*(5-t)&31];return s}function p(t){if(h("string"==typeof t),t.length<8||t.length>90)throw new Error("Invalid bech32 string length.");let e=0;for(;e<t.length&&"1"!==t[t.length-1-e];)e+=1;const r=t.length-(1+e);if(1+e>=t.length||e<6)throw new Error("Invalid bech32 data length.");e-=6;const s=i.allocUnsafe(e);let n,o=1,f=!1,a=!1,d="";for(let e=0;e<r;e++){let r=t.charCodeAt(e);if(r<33||r>126)throw new Error("Invalid bech32 character.");r>=97&&r<=122?f=!0:r>=65&&r<=90&&(a=!0,r=r-65+97),d+=String.fromCharCode(r),o=c(o)^r>>>5}for(o=c(o),n=0;n<r;n++)o=c(o)^31&t.charCodeAt(n);for(n+=1;n<t.length;){const e=t.charCodeAt(n),i=65408&e?-1:u[e];if(-1===i)throw new Error("Invalid bech32 character.");e>=97&&e<=122?f=!0:e>=65&&e<=90&&(a=!0),o=c(o)^i,n+6<t.length&&(s[n-(1+r)]=i),n+=1}if(f&&a)throw new Error("Invalid bech32 casing.");if(1!==o)throw new Error("Invalid bech32 checksum.");return[d,s.slice(0,e)]}function b(t,e,r,i,s,n,o){h(null!=t&&!0===t._isBuffer),h(e>>>0===e),h(null!=r&&!0===r._isBuffer),h(i>>>0===i),h((255&s)===s),h((255&n)===n),h("boolean"==typeof o),h(0!==s),h(0!==n);const f=(1<<n)-1;let a=0,u=0;for(;e<t.length;e++){const o=t[e];if(o>>>s!=0)throw new Error("Invalid bits.");for(a=a<<s|o,u+=s;u>=n;)u-=n,r[i++]=a>>>u&f}if(o)u&&(r[i++]=a<<n-u&f);else if(u>=s||a<<n-u&f)throw new Error("Invalid bits.");return h(i<=r.length),r.slice(0,i)}t.native=0,t.serialize=l,t.deserialize=p,t.is=function(t){h("string"==typeof t);try{p(t)}catch(t){return!1}return!0},t.convertBits=function(t,e,r,s){h(null!=t&&!0===t._isBuffer);const n=function(t,e,r,i){h(t>>>0===t),h((255&e)===e),h((255&r)===r),h("boolean"==typeof i),h(0!==e),h(0!==r);let s=(t*e+(r-1))/r;return s>>>=0,i&&(s+=1),s}(t.length,e,r,s);return b(t,0,i.allocUnsafe(n),0,e,r,s)},t.encode=function(t,e,r){if(h("string"==typeof t),h((255&e)===e),h(null!=r&&!0===r._isBuffer),e<0||e>31)throw new Error("Invalid bech32 version.");if(r.length<2||r.length>40)throw new Error("Invalid bech32 data length.");const i=f;return i[0]=e,l(t,b(r,0,i,1,8,5,!0))},t.decode=function(t){const[e,r]=p(t);if(0===r.length||r.length>65)throw new Error("Invalid bech32 data length.");const i=r[0];if(i>31)throw new Error("Invalid bech32 version.");const s=b(r,1,r,0,5,8,!1);if(s.length<2||s.length>40)throw new Error("Invalid bech32 data length.");return[e,i,s]},t.test=function(t){let e;h("string"==typeof t);try{[,e]=p(t)}catch(t){return!1}return!(0===e.length||e.length>65||e[0]>31)}}],["bcoin","/lib/script/witness.js",function(t,e,r,s,n,o){"use strict";const h=d(2,r),f=d(17,r),a=d(55,r),u=d(64,r),c=d(70,r),l=d(69,r),{encoding:p}=f,b=u.types,{inspectSymbol:m}=d(14,r);class g extends l{constructor(t){super(),t&&this.fromOptions(t)}fromOptions(t){return h(t,"Witness data is required."),Array.isArray(t)?this.fromArray(t):t.items?this.fromArray(t.items):this}static fromOptions(t){return(new this).fromOptions(t)}toArray(){return this.items.slice()}fromArray(t){return h(Array.isArray(t)),this.items=t,this}static fromArray(t){return(new this).fromArray(t)}toItems(){return this.items.slice()}fromItems(t){return h(Array.isArray(t)),this.items=t,this}static fromItems(t){return(new this).fromItems(t)}toStack(){return new l(this.toArray())}fromStack(t){return this.fromArray(t.items)}static fromStack(t){return(new this).fromStack(t)}[m](){return`<Witness: ${this.toString()}>`}clone(){return(new this.constructor).inject(this)}inject(t){return this.items=t.items.slice(),this}compile(){return this}getInputType(){return this.isPubkeyhashInput()?b.WITNESSPUBKEYHASH:this.isScripthashInput()?b.WITNESSSCRIPTHASH:b.NONSTANDARD}getInputAddress(){return c.fromWitness(this)}isPubkeyInput(){return!1}getPubkeyInput(){return null}isPubkeyhashInput(){return 2===this.items.length&&u.isSignatureEncoding(this.items[0])&&u.isKeyEncoding(this.items[1])}getPubkeyhashInput(){return this.isPubkeyhashInput()?[this.items[0],this.items[1]]:[null,null]}isMultisigInput(){return!1}getMultisigInput(){return null}isScripthashInput(){return this.items.length>0&&!this.isPubkeyhashInput()}getScripthashInput(){return this.isScripthashInput()?this.items[this.items.length-1]:null}isUnknownInput(){return this.getInputType()===b.NONSTANDARD}test(t){for(const e of this.items)if(0!==e.length&&t.test(e))return!0;return!1}getRedeem(){if(0===this.items.length)return null;const t=this.items[this.items.length-1];return t?a.fromRaw(t):null}indexOf(t){for(let e=0;e<this.items.length;e++){if(this.items[e].equals(t))return e}return-1}getSize(){let t=0;for(const e of this.items)t+=p.sizeVarBytes(e);return t}getVarSize(){return p.sizeVarint(this.items.length)+this.getSize()}toWriter(t){t.writeVarint(this.items.length);for(const e of this.items)t.writeVarBytes(e);return t}toRaw(){const t=this.getVarSize();return this.toWriter(f.write(t)).render()}toJSON(){return this.toRaw().toString("hex")}fromJSON(t){return h("string"==typeof t,"Witness must be a string."),this.fromRaw(i.from(t,"hex"))}static fromJSON(t){return(new this).fromJSON(t)}fromReader(t){const e=t.readVarint();for(let r=0;r<e;r++)this.items.push(t.readVarBytes());return this}fromRaw(t){return this.fromReader(f.read(t))}static fromReader(t){return(new this).fromReader(t)}static fromRaw(t,e){return"string"==typeof t&&(t=i.from(t,e)),(new this).fromRaw(t)}fromString(t){if(!Array.isArray(t)){if(h("string"==typeof t),0===(t=t.trim()).length)return this;t=t.split(/\s+/)}for(const e of t)this.items.push(i.from(e,"hex"));return this}static fromString(t){return(new this).fromString(t)}static isWitness(t){return t instanceof g}}r.exports=g}],["bcoin","/lib/primitives/output.js",function(t,e,r,s,n,o){"use strict";const h=d(2,r),f=d(17,r),a=d(77,r),u=d(5,r),c=d(70,r),l=d(55,r),p=d(11,r),b=d(62,r),{inspectSymbol:m}=d(14,r);class g{constructor(t){this.value=0,this.script=new l,t&&this.fromOptions(t)}fromOptions(t){return h(t,"Output data is required."),t.value&&(h(Number.isSafeInteger(t.value)&&t.value>=0,"Value must be a uint64."),this.value=t.value),t.script&&this.script.fromOptions(t.script),t.address&&this.script.fromAddress(t.address),this}static fromOptions(t){return(new this).fromOptions(t)}fromScript(t,e){return"string"==typeof t&&(t=c.fromString(t)),t instanceof c&&(t=l.fromAddress(t)),h(t instanceof l,"Script must be a Script."),h(Number.isSafeInteger(e)&&e>=0,"Value must be a uint64."),this.script=t,this.value=e,this}static fromScript(t,e){return(new this).fromScript(t,e)}clone(){const t=new this.constructor;return t.value=this.value,t.script.inject(this.script),t}equals(t){return h(g.isOutput(t)),this.value===t.value&&this.script.equals(t.script)}compare(t){h(g.isOutput(t));const e=this.value-t.value;return 0!==e?e:this.script.compare(t.script)}getType(){return l.typesByVal[this.script.getType()].toLowerCase()}getAddress(){return this.script.getAddress()}getHash(t){const e=this.getAddress();return e?e.getHash(t):null}[m](){return{type:this.getType(),value:a.btc(this.value),script:this.script,address:this.getAddress()}}toJSON(){return this.getJSON()}getJSON(t){let e=this.getAddress();return t=u.get(t),e&&(e=e.toString(t)),{value:this.value,script:this.script.toJSON(),address:e}}getDustThreshold(t){const e=p.WITNESS_SCALE_FACTOR;if(this.script.isUnspendable())return 0;let r=this.getSize();return this.script.isProgram()?r+=37+(107/e|0)+4:r+=148,3*b.getMinFee(r,t)}getSize(){return 8+this.script.getVarSize()}isDust(t){return this.value<this.getDustThreshold(t)}fromJSON(t){return h(t,"Output data is required."),h(Number.isSafeInteger(t.value)&&t.value>=0,"Value must be a uint64."),this.value=t.value,this.script.fromJSON(t.script),this}static fromJSON(t){return(new this).fromJSON(t)}toWriter(t){return t.writeI64(this.value),t.writeVarBytes(this.script.toRaw()),t}toRaw(){const t=this.getSize();return this.toWriter(f.write(t)).render()}fromReader(t){return this.value=t.readI64(),this.script.fromRaw(t.readVarBytes()),this}fromRaw(t){return this.fromReader(f.read(t))}static fromReader(t){return(new this).fromReader(t)}static fromRaw(t,e){return"string"==typeof t&&(t=i.from(t,e)),(new this).fromRaw(t)}static isOutput(t){return t instanceof g}}r.exports=g}],["bcoin","/lib/btc/amount.js",function(t,e,r,i,s,n){"use strict";const o=d(2,r),h=d(15,r),{inspectSymbol:f}=d(14,r);class a{constructor(t,e){this.value=0,null!=t&&this.fromOptions(t,e)}fromOptions(t,e){return"string"==typeof e?this.from(e,t):"number"==typeof t?this.fromValue(t):this.fromBTC(t)}toValue(){return this.value}toSatoshis(t){return t?this.value:this.value.toString(10)}toBits(t){return a.encode(this.value,2,t)}toMBTC(t){return a.encode(this.value,5,t)}toBTC(t){return a.encode(this.value,8,t)}to(t,e){switch(t){case"sat":return this.toSatoshis(e);case"ubtc":case"bits":return this.toBits(e);case"mbtc":return this.toMBTC(e);case"btc":return this.toBTC(e)}throw new Error(`Unknown unit "${t}".`)}toString(){return this.toBTC()}fromValue(t){return o(Number.isSafeInteger(t)&&t>=0,"Value must be an int64."),this.value=t,this}fromSatoshis(t){return this.value=a.decode(t,0),this}fromBits(t){return this.value=a.decode(t,2),this}fromMBTC(t){return this.value=a.decode(t,5),this}fromBTC(t){return this.value=a.decode(t,8),this}from(t,e){switch(t){case"sat":return this.fromSatoshis(e);case"ubtc":case"bits":return this.fromBits(e);case"mbtc":return this.fromMBTC(e);case"btc":return this.fromBTC(e)}throw new Error(`Unknown unit "${t}".`)}static fromOptions(t,e){return(new this).fromOptions(t,e)}static fromValue(t){return(new this).fromValue(t)}static fromSatoshis(t){return(new this).fromSatoshis(t)}static fromBits(t){return(new this).fromBits(t)}static fromMBTC(t){return(new this).fromMBTC(t)}static fromBTC(t){return(new this).fromBTC(t)}static from(t,e){return(new this).from(t,e)}[f](){return`<Amount: ${this.toString()}>`}static btc(t,e){return"string"==typeof t?t:a.encode(t,8,e)}static value(t){return"number"==typeof t?t:a.decode(t,8)}static encode(t,e,r){return r?h.toFloat(t,e):h.encode(t,e)}static decode(t,e){return"number"==typeof t?h.fromFloat(t,e):h.decode(t,e)}}r.exports=a}],["bcoin","/lib/primitives/mtx.js",function(t,e,r,s,n,o){"use strict";const h=d(2,r),{encoding:f}=d(17,r),{BufferMap:a}=d(79,r),u=d(55,r),c=d(81,r),l=d(82,r),p=d(76,r),b=d(85,r),m=d(83,r),g=d(86,r),w=d(70,r),y=d(11,r),S=d(62,r),v=d(77,r),I=d(69,r),E=d(13,r),{inspectSymbol:_}=d(14,r);class O extends c{constructor(t){super(),this.mutable=!0,this.changeIndex=-1,this.view=new g,t&&this.fromOptions(t)}fromOptions(t){if(null!=t.version&&(h(t.version>>>0===t.version,"Version must a be uint32."),this.version=t.version),t.inputs){h(Array.isArray(t.inputs),"Inputs must be an array.");for(const e of t.inputs)this.addInput(e)}if(t.outputs){h(Array.isArray(t.outputs),"Outputs must be an array.");for(const e of t.outputs)this.addOutput(e)}return null!=t.locktime&&(h(t.locktime>>>0===t.locktime,"Locktime must be a uint32."),this.locktime=t.locktime),null!=t.changeIndex&&(-1!==t.changeIndex?(h(t.changeIndex>>>0===t.changeIndex,"Change index must be a uint32."),this.changeIndex=t.changeIndex):this.changeIndex=-1),this}static fromOptions(t){return(new this).fromOptions(t)}clone(){const t=new this.constructor;return t.inject(this),t.changeIndex=this.changeIndex,t}addInput(t){const e=l.fromOptions(t);return this.inputs.push(e),e}addOutpoint(t){const e=m.fromOptions(t),r=l.fromOutpoint(e);return this.inputs.push(r),r}addCoin(t){h(t instanceof b,"Cannot add non-coin.");const e=l.fromCoin(t);return this.inputs.push(e),this.view.addCoin(t),e}addTX(t,e,r){h(t instanceof c,"Cannot add non-transaction."),null==r&&(r=-1);const i=l.fromTX(t,e);return this.inputs.push(i),this.view.addIndex(t,e,r),i}addOutput(t,e){let r;return r=null!=e?p.fromScript(t,e):p.fromOptions(t),this.outputs.push(r),r}check(t){return super.check(this.view,t)}checkAsync(t,e){return super.checkAsync(this.view,t,e)}verify(t){try{this.check(t)}catch(t){if("ScriptError"===t.type)return!1;throw t}return!0}async verifyAsync(t,e){try{await this.checkAsync(t,e)}catch(t){if("ScriptError"===t.type)return!1;throw t}return!0}getFee(){return super.getFee(this.view)}getInputValue(){return super.getInputValue(this.view)}getInputAddresses(){return super.getInputAddresses(this.view)}getAddresses(){return super.getAddresses(this.view)}getInputHashes(t){return super.getInputHashes(this.view,t)}getHashes(t){return super.getHashes(this.view,t)}hasCoins(){return super.hasCoins(this.view)}getSigops(t){return super.getSigops(this.view,t)}getSigopsCost(t){return super.getSigopsCost(this.view,t)}getSigopsSize(){return super.getSigopsSize(this.getSigopsCost())}verifyInputs(t){const[e]=this.checkInputs(t);return-1!==e}checkInputs(t){return super.checkInputs(this.view,t)}scriptInput(t,e,r){const i=this.inputs[t];if(h(i,"Input does not exist."),h(e,"No coin passed."),0!==i.script.raw.length||0!==i.witness.items.length)return!0;const s=e.script,n=s.getScripthash();if(n){const t=r.getRedeem(n);if(!t)return!1;if(t.isProgram()){const e=t.getWitnessScripthash();if(e){const s=r.getRedeem(e);if(!s)return!1;const n=this.scriptVector(s,r);return!!n&&(n.push(s.toRaw()),i.witness.fromStack(n),i.script.fromItems([t.toRaw()]),!0)}const s=t.getWitnessPubkeyhash();if(s){const e=u.fromPubkeyhash(s),n=this.scriptVector(e,r);return!!n&&(i.witness.fromStack(n),i.script.fromItems([t.toRaw()]),!0)}return!1}const e=this.scriptVector(t,r);return!!e&&(e.push(t.toRaw()),i.script.fromStack(e),!0)}if(s.isProgram()){const t=s.getWitnessScripthash();if(t){const e=r.getRedeem(t);if(!e)return!1;const s=this.scriptVector(e,r);return!!s&&(s.push(e.toRaw()),i.witness.fromStack(s),!0)}const e=s.getWitnessPubkeyhash();if(e){const t=u.fromPubkeyhash(e),s=this.scriptVector(t,r);return!!s&&(i.witness.fromStack(s),!0)}return!1}const o=this.scriptVector(s,r);return!!o&&(i.script.fromStack(o),!0)}scriptVector(t,e){const r=t.getPubkey();if(r){if(!r.equals(e.publicKey))return null;const t=new I;return t.pushInt(0),t}const i=t.getPubkeyhash();if(i){if(!i.equals(e.getKeyHash()))return null;const t=new I;return t.pushInt(0),t.pushData(e.publicKey),t}const[,s]=t.getMultisig();if(-1!==s){if(-1===t.indexOf(e.publicKey))return null;const r=new I;r.pushInt(0);for(let t=0;t<s;t++)r.pushInt(0);return r}return null}async signInputAsync(t,e,r,i,s){return s?await s.signInput(this,t,e,r,i,s):this.signInput(t,e,r,i)}signInput(t,e,r,i){const s=this.inputs[t],n=r.privateKey;h(s,"Input does not exist."),h(e,"No coin passed.");const o=e.value;let f=e.script,a=s.script,c=0,d=!1;if(f.isScripthash()){if(!(f=s.script.getRedeem()))throw new Error("Input has not been templated.");d=!0}if(f.isWitnessScripthash()){if(!(f=s.witness.getRedeem()))throw new Error("Input has not been templated.");a=s.witness,d=!0,c=1}else{const t=f.getWitnessPubkeyhash();t&&(f=u.fromPubkeyhash(t),a=s.witness,d=!1,c=1)}const l=this.signature(t,f,o,n,i,c);if(d){const t=a.toStack(),e=t.pop(),i=this.signVector(f,t,l,r);return!!i&&(i.push(e),a.fromStack(i),!0)}const p=a.toStack(),b=this.signVector(f,p,l,r);return!!b&&(a.fromStack(b),!0)}signVector(t,e,r,i){const s=t.getPubkey();if(s){if(!i.publicKey.equals(s))return null;if(0===e.length)throw new Error("Input has not been templated.");return e.get(0).length>0?e:(e.set(0,r),e)}const n=t.getPubkeyhash();if(n){if(!i.getKeyHash().equals(n))return null;if(2!==e.length)throw new Error("Input has not been templated.");if(0===e.get(1).length)throw new Error("Input has not been templated.");return e.get(0).length>0?e:(e.set(0,r),e)}const[o,f]=t.getMultisig();if(-1!==o){if(e.length<2)throw new Error("Input has not been templated.");if(0!==e.get(0).length)throw new Error("Input has not been templated.");if(e.length-1>f)throw new Error("Input has not been templated.");let s=0;for(let t=1;t<e.length;t++){e.get(t).length>0&&(s+=1)}if(s===o&&e.length-1===o)return e;for(;e.length-1<f;)e.pushInt(0);const n=[];for(const e of t.code)e.data&&n.push(e.data);let a=-1;for(let t=0;t<n.length;t++){if(n[t].equals(i.publicKey)){a=t;break}}if(-1===a)return null;if((a+=1)<e.length&&s<o&&0===e.get(a).length&&(e.set(a,r),s+=1),s>=o){for(let t=e.length-1;t>=1;t--){0===e.get(t).length&&e.remove(t)}for(;s>o;)e.pop(),s-=1;h(s===o),h(e.length-1===o)}return e}return null}isSigned(){for(let t=0;t<this.inputs.length;t++){const{prevout:e}=this.inputs[t],r=this.view.getOutput(e);if(!r)return!1;if(!this.isInputSigned(t,r))return!1}return!0}isInputSigned(t,e){const r=this.inputs[t];h(r,"Input does not exist."),h(e,"No coin passed.");let i=e.script,s=r.script,n=!1;if(i.isScripthash()){if(!(i=r.script.getRedeem()))return!1;n=!0}if(i.isWitnessScripthash()){if(!(i=r.witness.getRedeem()))return!1;s=r.witness,n=!0}else{const t=i.getWitnessPubkeyhash();t&&(i=u.fromPubkeyhash(t),s=r.witness,n=!1)}const o=s.toStack();return n&&o.pop(),this.isVectorSigned(i,o)}isVectorSigned(t,e){if(t.isPubkey())return 1===e.length&&0!==e.get(0).length;if(t.isPubkeyhash())return 2===e.length&&(0!==e.get(0).length&&0!==e.get(1).length);const[r]=t.getMultisig();if(-1!==r){if(e.length-1!==r)return!1;for(let t=1;t<e.length;t++){if(0===e.get(t).length)return!1}return!0}return!1}template(t){if(Array.isArray(t)){let e=0;for(const r of t)e+=this.template(r);return e}let e=0;for(let r=0;r<this.inputs.length;r++){const{prevout:i}=this.inputs[r],s=this.view.getOutput(i);s&&(t.ownOutput(s)&&this.scriptInput(r,s,t)&&(e+=1))}return e}sign(t,e){if(Array.isArray(t)){let r=0;for(const i of t)r+=this.sign(i,e);return r}h(t.privateKey,"No private key available.");let r=0;for(let i=0;i<this.inputs.length;i++){const{prevout:s}=this.inputs[i],n=this.view.getOutput(s);n&&(t.ownOutput(n)&&this.scriptInput(i,n,t)&&this.signInput(i,n,t,e)&&(r+=1))}return r}async signAsync(t,e,r){return r?await r.sign(this,t,e):this.sign(t,e)}async estimateSize(t){const e=y.WITNESS_SCALE_FACTOR;let r=0;r+=4,r+=f.sizeVarint(this.inputs.length),r+=40*this.inputs.length,r+=f.sizeVarint(this.outputs.length);for(const t of this.outputs)r+=t.getSize();r+=4;for(const{prevout:i}of this.inputs){const s=this.view.getOutput(i);if(!s){r+=110;continue}const n=s.script;if(n.isPubkey()){r+=1,r+=74;continue}if(n.isPubkeyhash()){r+=1,r+=74,r+=34;continue}const[o]=n.getMultisig();if(-1===o)if(n.isWitnessPubkeyhash()){let t=0;t+=1,t+=74,r+=t=((t+=34)+e-1)/e|0}else{if(t){const e=await t(n);if(-1!==e){r+=e;continue}}if(n.isScripthash())r+=1,r+=149;else if(n.isWitnessScripthash()){let t=0;t+=1,r+=t=((t+=149)+e-1)/e|0}else r+=110}else{let t=0;t+=1,t+=74*o,r+=t+=f.sizeVarint(t)}}return r}selectCoins(t,e){return new A(this,e).select(t)}subtractIndex(t,e){h("number"==typeof t),h("number"==typeof e);const r=this.outputs[t];if(!r)throw new Error("Subtraction index does not exist.");if(r.value<e+r.getDustThreshold())throw new Error("Could not subtract fee.");r.value-=e}subtractFee(t){h("number"==typeof t);let e=0;for(const t of this.outputs)t.script.isUnspendable()||(e+=1);if(0===e)throw new Error("Could not subtract fee.");const r=t%e,i=(t-r)/e;for(const t of this.outputs)if(!t.script.isUnspendable()){if(t.value<i+t.getDustThreshold())throw new Error("Could not subtract fee.");t.value-=i}for(const t of this.outputs)if(!t.script.isUnspendable()&&t.value>=r+t.getDustThreshold())return void(t.value-=r);throw new Error("Could not subtract fee.")}async fund(t,e){h(e,"Options are required."),h(e.changeAddress,"Change address is required."),h(0===this.inputs.length,"TX is already funded.");const r=await this.selectCoins(t,e);for(const t of r.chosen)this.addCoin(t);if(r.subtractFee){const t=r.subtractIndex;-1!==t?this.subtractIndex(t,r.fee):this.subtractFee(r.fee)}const i=new p;return i.value=r.change,i.script.fromAddress(r.changeAddress),i.isDust(S.MIN_RELAY)?(this.changeIndex=-1,h.strictEqual(this.getFee(),r.fee+r.change)):(this.outputs.push(i),this.changeIndex=this.outputs.length-1,h.strictEqual(this.getFee(),r.fee)),r}sortMembers(){let t=null;-1!==this.changeIndex&&(t=this.outputs[this.changeIndex],h(t)),this.inputs.sort(x),this.outputs.sort(B),-1!==this.changeIndex&&(this.changeIndex=this.outputs.indexOf(t),h(-1!==this.changeIndex))}avoidFeeSniping(t){h("number"==typeof t,"Must pass in height."),0==(10*Math.random()|0)&&(t-=100*Math.random()|0)<0&&(t=0),this.setLocktime(t)}setLocktime(t){h(t>>>0===t,"Locktime must be a uint32."),h(this.inputs.length>0,"Cannot set sequence with no inputs.");for(const t of this.inputs)4294967295===t.sequence&&(t.sequence=4294967294);this.locktime=t}setSequence(t,e,r){const i=this.inputs[t];h(i,"Input does not exist."),h(e>>>0===e,"Locktime must be a uint32."),this.version=2,r?(e>>>=y.SEQUENCE_GRANULARITY,e&=y.SEQUENCE_MASK,e|=y.SEQUENCE_TYPE_FLAG):e&=y.SEQUENCE_MASK,i.sequence=e}[_](){return this.format()}format(){return super.format(this.view)}toJSON(){return super.toJSON(null,this.view)}getJSON(t){return super.getJSON(t,this.view)}fromJSON(t){super.fromJSON(t);for(let e=0;e<t.inputs.length;e++){const r=t.inputs[e],{prevout:i}=r;if(!r.coin)continue;const s=b.fromJSON(r.coin);s.hash=E.fromRev(i.hash),s.index=i.index,this.view.addCoin(s)}return this}static fromJSON(t){return(new this).fromJSON(t)}static fromReader(t){return(new this).fromReader(t)}static fromRaw(t,e){return"string"==typeof t&&(t=i.from(t,e)),(new this).fromRaw(t)}toTX(){return(new c).inject(this)}commit(){return[this.toTX(),this.view]}static fromTX(t){return(new this).inject(t)}static isMTX(t){return t instanceof O}}class A{constructor(t,e){this.tx=t.clone(),this.coins=[],this.outputValue=0,this.index=0,this.chosen=[],this.change=0,this.fee=A.MIN_FEE,this.selection="value",this.subtractFee=!1,this.subtractIndex=-1,this.height=-1,this.depth=-1,this.hardFee=-1,this.rate=A.FEE_RATE,this.maxFee=-1,this.round=!1,this.changeAddress=null,this.inputs=new a,this.estimate=null,this.injectInputs(),e&&this.fromOptions(e)}fromOptions(t){if(t.selection&&(h("string"==typeof t.selection),this.selection=t.selection),null!=t.subtractFee&&("number"==typeof t.subtractFee?(h(Number.isSafeInteger(t.subtractFee)),h(t.subtractFee>=-1),this.subtractIndex=t.subtractFee,this.subtractFee=-1!==this.subtractIndex):(h("boolean"==typeof t.subtractFee),this.subtractFee=t.subtractFee)),null!=t.subtractIndex&&(h(Number.isSafeInteger(t.subtractIndex)),h(t.subtractIndex>=-1),this.subtractIndex=t.subtractIndex,this.subtractFee=-1!==this.subtractIndex),null!=t.height&&(h(Number.isSafeInteger(t.height)),h(t.height>=-1),this.height=t.height),null!=t.confirmations&&(h(Number.isSafeInteger(t.confirmations)),h(t.confirmations>=-1),this.depth=t.confirmations),null!=t.depth&&(h(Number.isSafeInteger(t.depth)),h(t.depth>=-1),this.depth=t.depth),null!=t.hardFee&&(h(Number.isSafeInteger(t.hardFee)),h(t.hardFee>=-1),this.hardFee=t.hardFee),null!=t.rate&&(h(Number.isSafeInteger(t.rate)),h(t.rate>=0),this.rate=t.rate),null!=t.maxFee&&(h(Number.isSafeInteger(t.maxFee)),h(t.maxFee>=-1),this.maxFee=t.maxFee),null!=t.round&&(h("boolean"==typeof t.round),this.round=t.round),t.changeAddress){const e=t.changeAddress;"string"==typeof e?this.changeAddress=w.fromString(e):(h(e instanceof w),this.changeAddress=e)}if(t.estimate&&(h("function"==typeof t.estimate),this.estimate=t.estimate),t.inputs){h(Array.isArray(t.inputs));for(let e=0;e<t.inputs.length;e++){const r=t.inputs[e];h(r&&"object"==typeof r);const{hash:i,index:s}=r;h(null!=i&&!0===i._isBuffer),h("number"==typeof s),this.inputs.set(m.toKey(i,s),e)}}return this}injectInputs(){if(this.tx.inputs.length>0)for(let t=0;t<this.tx.inputs.length;t++){const{prevout:e}=this.tx.inputs[t];this.inputs.set(e.toKey(),t)}}init(t){switch(this.coins=t.slice(),this.outputValue=this.tx.getOutputValue(),this.index=0,this.chosen=[],this.change=0,this.fee=A.MIN_FEE,this.tx.inputs.length=0,this.selection){case"all":case"random":this.coins.sort(P);break;case"age":this.coins.sort(N);break;case"value":this.coins.sort(R);break;default:throw new M(`Bad selection type: ${this.selection}.`)}}total(){return this.subtractFee?this.outputValue:this.outputValue+this.fee}isFull(){return this.tx.getInputValue()>=this.total()}isSpendable(t){if(this.tx.view.hasEntry(t))return!1;if(-1===this.height)return!0;if(t.coinbase)return-1!==t.height&&!(this.height+1<t.height+y.COINBASE_MATURITY);if(-1===this.depth)return!0;return!(t.getDepth(this.height)<this.depth)}getFee(t){if(this.round){const e=S.getRoundFee(t,this.rate);return Math.min(e,A.MAX_FEE)}const e=S.getMinFee(t,this.rate);return Math.min(e,A.MAX_FEE)}fund(){if(this.inputs.size>0){const t=[];for(let e=0;e<this.inputs.size;e++)t.push(null);for(const e of this.coins){const{hash:r,index:i}=e,s=m.toKey(r,i),n=this.inputs.get(s);null!=n&&(t[n]=e,this.inputs.delete(s))}if(this.inputs.size>0)throw new Error("Could not resolve preferred inputs.");for(const e of t)this.tx.addCoin(e),this.chosen.push(e)}for(;this.index<this.coins.length;){const t=this.coins[this.index++];if(this.isSpendable(t)&&(this.tx.addCoin(t),this.chosen.push(t),"all"!==this.selection&&this.isFull()))break}}async select(t){if(this.init(t),-1!==this.hardFee?this.selectHard():await this.selectEstimate(),!this.isFull())throw new M("Not enough funds.",this.tx.getInputValue(),this.total());return this.change=this.tx.getInputValue()-this.total(),this}async selectEstimate(){this.fee=A.MIN_FEE,this.fund();const t=new p;this.changeAddress?t.script.fromAddress(this.changeAddress):t.script.fromPubkeyhash(i.allocUnsafe(20)),this.tx.outputs.push(t);do{const t=await this.tx.estimateSize(this.estimate);if(this.fee=this.getFee(t),this.maxFee>0&&this.fee>this.maxFee)throw new M("Fee is too high.");this.isFull()||this.fund()}while(!this.isFull()&&this.index<this.coins.length)}selectHard(){this.fee=Math.min(this.hardFee,A.MAX_FEE),this.fund()}}A.FEE_RATE=1e4,A.MIN_FEE=1e4,A.MAX_FEE=y.COIN/10;class M extends Error{constructor(t,e,r){super(),this.type="FundingError",this.message=t,this.availableFunds=-1,this.requiredFunds=-1,null!=e&&(this.message+=` (available=${v.btc(e)},`,this.message+=` required=${v.btc(r)})`,this.availableFunds=e,this.requiredFunds=r),Error.captureStackTrace&&Error.captureStackTrace(this,M)}}function N(t,e){return(t=-1===t.height?2147483647:t.height)-(e=-1===e.height?2147483647:e.height)}function P(t,e){return Math.random()>.5?1:-1}function R(t,e){return-1===t.height&&-1!==e.height?1:-1!==t.height&&-1===e.height?-1:e.value-t.value}function x(t,e){return t.compare(e)}function B(t,e){return t.compare(e)}(t=O).MTX=O,t.Selector=A,t.FundingError=M,r.exports=t}],["buffer-map","/lib/buffer-map.js",function(t,r,s,n,o,h){"use strict";const{custom:f}=d(80,s);class a{constructor(t,e){this.key=t,this.value=e}}const u="function"==typeof SharedArrayBuffer;function c(t){if(ArrayBuffer.isView(t))return i.from(t.buffer,t.byteOffset,t.byteLength);if(function(t){return t instanceof ArrayBuffer||!!(u&&t instanceof SharedArrayBuffer)}(t))return i.from(t,0,t.byteLength);throw new TypeError("Non-buffer passed to buffer map/set.")}function l(t,e){return null!=t&&!0===t._isBuffer||(t=c(t)),t.toString(e)}function p(t){return l(t,"binary")}function b(t){return l(t,"hex")}t.BufferMap=class{constructor(t){if(this.map=new Map,null!=t)for(const[e,r]of t)this.set(e,r)}get size(){return this.map.size}get(t){const r=this.map.get(p(t));return r?r.value:e}has(t){return this.map.has(p(t))}set(t,e){return this.map.set(p(t),new a(t,e)),this}delete(t){return this.map.delete(p(t))}clear(){this.map.clear()}[Symbol.iterator](){return this.entries()}*entries(){for(const{key:t,value:e}of this.map.values())yield[t,e]}*keys(){for(const{key:t}of this.map.values())yield t}*values(){for(const{value:t}of this.map.values())yield t}forEach(t,e){if("function"!=typeof t)throw new TypeError(`${typeof t} is not a function`);for(const{key:r,value:i}of this.map.values())t.call(e,i,r,this)}toKeys(){const t=[];for(const{key:e}of this.map.values())t.push(e);return t}toValues(){const t=[];for(const{value:e}of this.map.values())t.push(e);return t}toArray(){return this.toValues()}[f](){const t=new Map;for(const{key:e,value:r}of this.map.values())t.set(b(e),r);return t}},t.BufferSet=class{constructor(t){if(this.map=new Map,null!=t)for(const e of t)this.add(e)}get size(){return this.map.size}has(t){return this.map.has(p(t))}add(t){return this.map.set(p(t),t),this}delete(t){return this.map.delete(p(t))}clear(){this.map.clear()}[Symbol.iterator](){return this.keys()}*entries(){for(const t of this.map.values())yield[t,t]}keys(){return this.map.values()}values(){return this.map.values()}forEach(t,e){if("function"!=typeof t)throw new TypeError(`${typeof t} is not a function`);for(const r of this.map.values())t.call(e,r,r,this)}toKeys(){const t=[];for(const e of this.map.values())t.push(e);return t}toValues(){return this.toKeys()}toArray(){return this.toKeys()}[f](){const t=new Set;for(const e of this.map.values())t.add(b(e));return t}}}],["buffer-map","/lib/custom-browser.js",function(t,e,r,i,s,n){"use strict";t.custom="inspect"}],["bcoin","/lib/primitives/tx.js",function(t,e,r,s,n,o){"use strict";const h=d(2,r),f=d(17,r),a=d(26,r),u=d(31,r),{BufferSet:c}=d(79,r),l=d(13,r),p=d(77,r),b=d(5,r),m=d(55,r),g=d(82,r),w=d(76,r),y=d(83,r),S=d(84,r),v=d(11,r),I=d(62,r),E=d(67,r),{encoding:_}=f,{hashType:O}=m,{inspectSymbol:A}=d(14,r);class M{constructor(t){this.version=1,this.inputs=[],this.outputs=[],this.locktime=0,this.mutable=!1,this._hash=null,this._hhash=null,this._whash=null,this._raw=null,this._offset=-1,this._block=!1,this._size=-1,this._witness=-1,this._sigops=-1,this._hashPrevouts=null,this._hashSequence=null,this._hashOutputs=null,t&&this.fromOptions(t)}fromOptions(t){if(h(t,"TX data is required."),null!=t.version&&(h(t.version>>>0===t.version,"Version must be a uint32."),this.version=t.version),t.inputs){h(Array.isArray(t.inputs),"Inputs must be an array.");for(const e of t.inputs)this.inputs.push(new g(e))}if(t.outputs){h(Array.isArray(t.outputs),"Outputs must be an array.");for(const e of t.outputs)this.outputs.push(new w(e))}return null!=t.locktime&&(h(t.locktime>>>0===t.locktime,"Locktime must be a uint32."),this.locktime=t.locktime),this}static fromOptions(t){return(new this).fromOptions(t)}clone(){return(new this.constructor).inject(this)}inject(t){this.version=t.version;for(const e of t.inputs)this.inputs.push(e.clone());for(const e of t.outputs)this.outputs.push(e.clone());return this.locktime=t.locktime,this}refresh(){this._hash=null,this._hhash=null,this._whash=null,this._raw=null,this._size=-1,this._offset=-1,this._block=!1,this._witness=-1,this._sigops=-1,this._hashPrevouts=null,this._hashSequence=null,this._hashOutputs=null}hash(t){let e=this._hash;if(e||(e=a.digest(this.toNormal()),this.mutable||(this._hash=e)),"hex"===t){let t=this._hhash;t||(t=e.toString("hex"),this.mutable||(this._hhash=t)),e=t}return e}witnessHash(t){if(!this.hasWitness())return this.hash(t);let e=this._whash;return e||(e=a.digest(this.toRaw()),this.mutable||(this._whash=e)),"hex"===t?e.toString("hex"):e}toRaw(){return this.frame().data}toNormal(){return this.hasWitness()?this.frameNormal().data:this.toRaw()}toWriter(t,e){return this.mutable?this.hasWitness()?this.writeWitness(t):this.writeNormal(t):(e&&(this._offset=t.offset,this._block=!0),t.writeBytes(this.toRaw()),t)}toNormalWriter(t){return this.hasWitness()?(this.writeNormal(t),t):this.toWriter(t)}frame(){if(this.mutable)return h(!this._raw),this.hasWitness()?this.frameWitness():this.frameNormal();if(this._raw){h(this._size>=0),h(this._witness>=0);const t=new N(this._size,this._witness);return t.data=this._raw,t}let t;return t=this.hasWitness()?this.frameWitness():this.frameNormal(),this._raw=t.data,this._size=t.size,this._witness=t.witness,t}getPosition(){return h(this._block&&this._offset>80,"Position not available."),{offset:this._offset,size:this._size}}getSizes(){return this.mutable?this.hasWitness()?this.getWitnessSizes():this.getNormalSizes():this.frame()}getVirtualSize(){const t=v.WITNESS_SCALE_FACTOR;return(this.getWeight()+t-1)/t|0}getSigopsSize(t){const e=v.WITNESS_SCALE_FACTOR,r=I.BYTES_PER_SIGOP;return(Math.max(this.getWeight(),t*r)+e-1)/e|0}getWeight(){const t=this.getSizes();return(t.size-t.witness)*(v.WITNESS_SCALE_FACTOR-1)+t.size}getSize(){return this.getSizes().size}getBaseSize(){const t=this.getSizes();return t.size-t.witness}hasWitness(){if(-1!==this._witness)return 0!==this._witness;for(const t of this.inputs)if(t.witness.items.length>0)return!0;return!1}signatureHash(t,e,r,i,s){if(h(t>=0&&t<this.inputs.length),h(e instanceof m),h("number"==typeof r),h("number"==typeof i),0===s)return this.signatureHashV0(t,e,i);if(1===s)return this.signatureHashV1(t,e,r,i);throw new Error("Unknown sighash version.")}signatureHashV0(t,e,r){if((31&r)===O.SINGLE&&t>=this.outputs.length){const t=i.alloc(32,0);return t[0]=1,t}e=e.removeSeparators();const s=this.hashSize(t,e,r),n=f.pool(s);if(n.writeU32(this.version),r&O.ANYONECANPAY){const r=this.inputs[t];n.writeVarint(1),r.prevout.toWriter(n),n.writeVarBytes(e.toRaw()),n.writeU32(r.sequence)}else{n.writeVarint(this.inputs.length);for(let i=0;i<this.inputs.length;i++){const s=this.inputs[i];if(s.prevout.toWriter(n),i!==t)switch(n.writeVarint(0),31&r){case O.NONE:case O.SINGLE:n.writeU32(0);break;default:n.writeU32(s.sequence)}else n.writeVarBytes(e.toRaw()),n.writeU32(s.sequence)}}switch(31&r){case O.NONE:n.writeVarint(0);break;case O.SINGLE:{const e=this.outputs[t];n.writeVarint(t+1);for(let e=0;e<t;e++)n.writeI64(-1),n.writeVarint(0);e.toWriter(n);break}default:n.writeVarint(this.outputs.length);for(const t of this.outputs)t.toWriter(n)}return n.writeU32(this.locktime),n.writeU32(r),a.digest(n.render())}hashSize(t,e,r){let i=0;switch(i+=4,r&O.ANYONECANPAY?(i+=1,i+=36,i+=e.getVarSize(),i+=4):(i+=_.sizeVarint(this.inputs.length),i+=41*(this.inputs.length-1),i+=36,i+=e.getVarSize(),i+=4),31&r){case O.NONE:i+=1;break;case O.SINGLE:i+=_.sizeVarint(t+1),i+=9*t,i+=this.outputs[t].getSize();break;default:i+=_.sizeVarint(this.outputs.length);for(const t of this.outputs)i+=t.getSize()}return i+=8}signatureHashV1(t,e,r,i){const s=this.inputs[t];let n=v.ZERO_HASH,o=v.ZERO_HASH,h=v.ZERO_HASH;if(!(i&O.ANYONECANPAY))if(this._hashPrevouts)n=this._hashPrevouts;else{const t=f.pool(36*this.inputs.length);for(const e of this.inputs)e.prevout.toWriter(t);n=a.digest(t.render()),this.mutable||(this._hashPrevouts=n)}if(!(i&O.ANYONECANPAY)&&(31&i)!==O.SINGLE&&(31&i)!==O.NONE)if(this._hashSequence)o=this._hashSequence;else{const t=f.pool(4*this.inputs.length);for(const e of this.inputs)t.writeU32(e.sequence);o=a.digest(t.render()),this.mutable||(this._hashSequence=o)}if((31&i)!==O.SINGLE&&(31&i)!==O.NONE)if(this._hashOutputs)h=this._hashOutputs;else{let t=0;for(const e of this.outputs)t+=e.getSize();const e=f.pool(t);for(const t of this.outputs)t.toWriter(e);h=a.digest(e.render()),this.mutable||(this._hashOutputs=h)}else if((31&i)===O.SINGLE&&t<this.outputs.length){const e=this.outputs[t];h=a.digest(e.toRaw())}const u=156+e.getVarSize(),c=f.pool(u);return c.writeU32(this.version),c.writeBytes(n),c.writeBytes(o),c.writeHash(s.prevout.hash),c.writeU32(s.prevout.index),c.writeVarBytes(e.toRaw()),c.writeI64(r),c.writeU32(s.sequence),c.writeBytes(h),c.writeU32(this.locktime),c.writeU32(i),a.digest(c.render())}checksig(t,e,r,i,s,n){if(0===i.length)return!1;const o=i[i.length-1],h=this.signatureHash(t,e,r,o,n);return u.verifyDER(h,i.slice(0,-1),s)}signature(t,e,r,i,s,n){null==s&&(s=O.ALL),null==n&&(n=0);const o=this.signatureHash(t,e,r,s,n),h=u.signDER(o,i),a=f.write(h.length+1);return a.writeBytes(h),a.writeU8(s),a.render()}check(t,e){if(0===this.inputs.length)throw new E("UNKNOWN_ERROR","No inputs.");if(!this.isCoinbase())for(let r=0;r<this.inputs.length;r++){const{prevout:i}=this.inputs[r],s=t.getOutput(i);if(!s)throw new E("UNKNOWN_ERROR","No coin available.");this.checkInput(r,s,e)}}checkInput(t,e,r){const i=this.inputs[t];h(i,"Input does not exist."),h(e,"No coin passed."),m.verify(i.script,i.witness,e.script,this,t,e.value,r)}async checkAsync(t,e,r){if(0===this.inputs.length)throw new E("UNKNOWN_ERROR","No inputs.");this.isCoinbase()||(r?await r.check(this,t,e):this.check(t,e))}async checkInputAsync(t,e,r,i){const s=this.inputs[t];h(s,"Input does not exist."),h(e,"No coin passed."),i?await i.checkInput(this,t,e,r):this.checkInput(t,e,r)}verify(t,e){try{this.check(t,e)}catch(t){if("ScriptError"===t.type)return!1;throw t}return!0}verifyInput(t,e,r){try{this.checkInput(t,e,r)}catch(t){if("ScriptError"===t.type)return!1;throw t}return!0}async verifyAsync(t,e,r){try{await this.checkAsync(t,e,r)}catch(t){if("ScriptError"===t.type)return!1;throw t}return!0}async verifyInputAsync(t,e,r,i){try{await this.checkInput(t,e,r,i)}catch(t){if("ScriptError"===t.type)return!1;throw t}return!0}isCoinbase(){return 1===this.inputs.length&&this.inputs[0].prevout.isNull()}isRBF(){if(2===this.version)return!1;for(const t of this.inputs)if(t.isRBF())return!0;return!1}getFee(t){return this.hasCoins(t)?this.getInputValue(t)-this.getOutputValue():0}getInputValue(t){let e=0;for(const{prevout:r}of this.inputs){const i=t.getOutput(r);if(!i)return 0;e+=i.value}return e}getOutputValue(){let t=0;for(const e of this.outputs)t+=e.value;return t}_getInputAddresses(t){const e=new c,r=[];if(this.isCoinbase())return[r,e];for(const i of this.inputs){const s=t?t.getOutputFor(i):null,n=i.getAddress(s);if(!n)continue;const o=n.getHash();e.has(o)||(e.add(o),r.push(n))}return[r,e]}_getOutputAddresses(){const t=new c,e=[];for(const r of this.outputs){const i=r.getAddress();if(!i)continue;const s=i.getHash();t.has(s)||(t.add(s),e.push(i))}return[e,t]}_getAddresses(t){const[e,r]=this._getInputAddresses(t),i=this.getOutputAddresses();for(const t of i){const i=t.getHash();r.has(i)||(r.add(i),e.push(t))}return[e,r]}getInputAddresses(t){const[e]=this._getInputAddresses(t);return e}getOutputAddresses(){const[t]=this._getOutputAddresses();return t}getAddresses(t){const[e]=this._getAddresses(t);return e}getInputHashes(t,e){const[,r]=this._getInputAddresses(t);return"hex"!==e?r.toArray():r.toArray().map(t=>t.toString("hex"))}getOutputHashes(t){const[,e]=this._getOutputAddresses();return"hex"!==t?e.toArray():e.toArray().map(t=>t.toString("hex"))}getHashes(t,e){const[,r]=this._getAddresses(t);return"hex"!==e?r.toArray():r.toArray().map(t=>t.toString("hex"))}hasCoins(t){if(0===this.inputs.length)return!1;for(const{prevout:e}of this.inputs)if(!t.hasEntry(e))return!1;return!0}isFinal(t,e){const r=v.LOCKTIME_THRESHOLD;if(0===this.locktime)return!0;if(this.locktime<(this.locktime<r?t:e))return!0;for(const t of this.inputs)if(4294967295!==t.sequence)return!1;return!0}verifyLocktime(t,e){const r=v.LOCKTIME_THRESHOLD,i=this.inputs[t];return h(i,"Input does not exist."),h(e>=0,"Locktime must be non-negative."),this.locktime<r==e<r&&(!(e>this.locktime)&&4294967295!==i.sequence)}verifySequence(t,e){const r=v.SEQUENCE_DISABLE_FLAG,i=v.SEQUENCE_TYPE_FLAG,s=v.SEQUENCE_MASK,n=this.inputs[t];return h(n,"Input does not exist."),h(e>=0,"Locktime must be non-negative."),!!(e&r)||!(this.version<2)&&(!(n.sequence&r)&&((n.sequence&i)==(e&i)&&!((e&s)>(n.sequence&s))))}getLegacySigops(){if(-1!==this._sigops)return this._sigops;let t=0;for(const e of this.inputs)t+=e.script.getSigops(!1);for(const e of this.outputs)t+=e.script.getSigops(!1);return this.mutable||(this._sigops=t),t}getScripthashSigops(t){if(this.isCoinbase())return 0;let e=0;for(const r of this.inputs){const i=t.getOutputFor(r);i&&(i.script.isScripthash()&&(e+=i.script.getScripthashSigops(r.script)))}return e}getWitnessSigops(t){if(this.isCoinbase())return 0;let e=0;for(const r of this.inputs){const i=t.getOutputFor(r);i&&(e+=i.script.getWitnessSigops(r.script,r.witness))}return e}getSigopsCost(t,e){null==e&&(e=m.flags.STANDARD_VERIFY_FLAGS);const r=v.WITNESS_SCALE_FACTOR;let i=this.getLegacySigops()*r;return e&m.flags.VERIFY_P2SH&&(i+=this.getScripthashSigops(t)*r),e&m.flags.VERIFY_WITNESS&&(i+=this.getWitnessSigops(t)),i}getSigops(t,e){const r=v.WITNESS_SCALE_FACTOR;return(this.getSigopsCost(t,e)+r-1)/r|0}isSane(){const[t]=this.checkSanity();return t}checkSanity(){if(0===this.inputs.length)return[!1,"bad-txns-vin-empty",100];if(0===this.outputs.length)return[!1,"bad-txns-vout-empty",100];if(this.getBaseSize()>v.MAX_BLOCK_SIZE)return[!1,"bad-txns-oversize",100];let t=0;for(const e of this.outputs){if(e.value<0)return[!1,"bad-txns-vout-negative",100];if(e.value>v.MAX_MONEY)return[!1,"bad-txns-vout-toolarge",100];if((t+=e.value)<0||t>v.MAX_MONEY)return[!1,"bad-txns-txouttotal-toolarge",100]}const e=new c;for(const t of this.inputs){const r=t.prevout.toKey();if(e.has(r))return[!1,"bad-txns-inputs-duplicate",100];e.add(r)}if(this.isCoinbase()){const t=this.inputs[0].script.getSize();if(t<2||t>100)return[!1,"bad-cb-length",100]}else for(const t of this.inputs)if(t.prevout.isNull())return[!1,"bad-txns-prevout-null",10];return[!0,"valid",0]}isStandard(){const[t]=this.checkStandard();return t}checkStandard(){if(this.version<1||this.version>I.MAX_TX_VERSION)return[!1,"version",0];if(this.getWeight()>=I.MAX_TX_WEIGHT)return[!1,"tx-size",0];for(const t of this.inputs){if(t.script.getSize()>1650)return[!1,"scriptsig-size",0];if(!t.script.isPushOnly())return[!1,"scriptsig-not-pushonly",0]}let t=0;for(const e of this.outputs){if(!e.script.isStandard())return[!1,"scriptpubkey",0];if(e.script.isNulldata())t++;else{if(e.script.isMultisig()&&!I.BARE_MULTISIG)return[!1,"bare-multisig",0];if(e.isDust(I.MIN_RELAY))return[!1,"dust",0]}}return t>1?[!1,"multi-op-return",0]:[!0,"valid",0]}hasStandardInputs(t){if(this.isCoinbase())return!0;for(const e of this.inputs){const r=t.getOutputFor(e);if(!r)return!1;if(!r.script.isPubkeyhash())if(r.script.isScripthash()){const t=e.script.getRedeem();if(!t)return!1;if(t.getSigops(!0)>I.MAX_P2SH_SIGOPS)return!1}else if(r.script.isUnknown())return!1}return!0}hasStandardWitness(t){if(this.isCoinbase())return!0;for(const e of this.inputs){const r=e.witness,i=t.getOutputFor(e);if(!i)continue;if(0===r.items.length)continue;let s=i.script;if(s.isScripthash()&&!(s=e.script.getRedeem()))return!1;if(!s.isProgram())return!1;if(s.isWitnessPubkeyhash()){if(2!==r.items.length)return!1;if(r.items[0].length>73)return!1;if(r.items[1].length>65)return!1}else if(s.isWitnessScripthash()){if(r.items.length-1>I.MAX_P2WSH_STACK)return!1;for(let t=0;t<r.items.length-1;t++){if(r.items[t].length>I.MAX_P2WSH_PUSH)return!1}const t=r.items[r.items.length-1];if(t.length>I.MAX_P2WSH_SIZE)return!1;const i=m.fromRaw(t);if(i.isPubkey()){if(r.items.length-1!=1)return!1;if(r.items[0].length>73)return!1;continue}if(i.isPubkeyhash()){if(e.witness.items.length-1!=2)return!1;if(r.items[0].length>73)return!1;if(r.items[1].length>65)return!1;continue}const[s]=i.getMultisig();if(-1!==s){if(r.items.length-1!==s+1)return!1;if(0!==r.items[0].length)return!1;for(let t=1;t<r.items.length-1;t++){if(r.items[t].length>73)return!1}}}else{if(r.items.length>I.MAX_P2WSH_STACK)return!1;for(const t of r.items)if(t.length>I.MAX_P2WSH_PUSH)return!1}}return!0}verifyInputs(t,e){const[r]=this.checkInputs(t,e);return-1!==r}checkInputs(t,e){h("number"==typeof e);let r=0;for(const{prevout:i}of this.inputs){const s=t.getEntry(i);if(!s)return[-1,"bad-txns-inputs-missingorspent",0];if(s.coinbase&&e-s.height<v.COINBASE_MATURITY)return[-1,"bad-txns-premature-spend-of-coinbase",0];const n=t.getOutput(i);if(h(n),n.value<0||n.value>v.MAX_MONEY)return[-1,"bad-txns-inputvalues-outofrange",100];if((r+=n.value)<0||r>v.MAX_MONEY)return[-1,"bad-txns-inputvalues-outofrange",100]}const i=this.getOutputValue();if(r<i)return[-1,"bad-txns-in-belowout",100];const s=r-i;return s<0?[-1,"bad-txns-fee-negative",100]:s>v.MAX_MONEY?[-1,"bad-txns-fee-outofrange",100]:[s,"valid",0]}getModifiedSize(t){null==t&&(t=this.getVirtualSize());for(const e of this.inputs){const r=41+Math.min(110,e.script.getSize());t>r&&(t-=r)}return t}getPriority(t,e,r){if(h("number"==typeof e,"Must pass in height."),this.isCoinbase())return 0;null==r&&(r=this.getVirtualSize());let i=0;for(const{prevout:r}of this.inputs){const s=t.getOutput(r);if(!s)continue;const n=t.getHeight(r);if(-1!==n&&n<=e){const t=e-n;i+=s.value*t}}return Math.floor(i/r)}getChainValue(t){if(this.isCoinbase())return 0;let e=0;for(const{prevout:r}of this.inputs){const i=t.getOutput(r);i&&(-1!==t.getHeight(r)&&(e+=i.value))}return e}isFree(t,e,r){return this.getPriority(t,e,r)>I.FREE_THRESHOLD}getMinFee(t,e){return null==t&&(t=this.getVirtualSize()),I.getMinFee(t,e)}getRoundFee(t,e){return null==t&&(t=this.getVirtualSize()),I.getRoundFee(t,e)}getRate(t,e){const r=this.getFee(t);return r<0?0:(null==e&&(e=this.getVirtualSize()),I.getRate(e,r))}getPrevout(){if(this.isCoinbase())return[];const t=new c;for(const e of this.inputs)t.add(e.prevout.hash);return t.toArray()}isWatched(t){let e=!1;t.test(this.hash())&&(e=!0);for(let r=0;r<this.outputs.length;r++){const i=this.outputs[r];if(i.script.test(t)){if(1===t.update){const e=y.fromTX(this,r);t.add(e.toRaw())}else if(2===t.update&&(i.script.isPubkey()||i.script.isMultisig())){const e=y.fromTX(this,r);t.add(e.toRaw())}e=!0}}if(e)return e;for(const e of this.inputs){const r=e.prevout;if(t.test(r.toRaw()))return!0;if(e.script.test(t))return!0}return!1}rhash(){return l.revHex(this.hash())}rwhash(){return l.revHex(this.witnessHash())}txid(){return this.rhash()}wtxid(){return this.rwhash()}toInv(){return new S(S.types.TX,this.hash())}[A](){return this.format()}format(t,e,r){let i=0,s=0,n=-1,o=null,h=0,f=null;return t&&(s=this.getFee(t),i=this.getRate(t),Number.isSafeInteger(i)||(i=0)),e&&(n=e.height,o=l.revHex(e.hash),h=e.time,f=l.date(h)),null==r&&(r=-1),{hash:this.txid(),witnessHash:this.wtxid(),size:this.getSize(),virtualSize:this.getVirtualSize(),value:p.btc(this.getOutputValue()),fee:p.btc(s),rate:p.btc(i),minFee:p.btc(this.getMinFee()),height:n,block:o,time:h,date:f,index:r,version:this.version,inputs:this.inputs.map(e=>{const r=t?t.getOutputFor(e):null;return e.format(r)}),outputs:this.outputs,locktime:this.locktime}}toJSON(){return this.getJSON()}getJSON(t,e,r,i){let s,n,o,h,f,a;return e&&(n=this.getFee(e),s=this.getRate(e),Number.isSafeInteger(s)||(s=0)),r&&(o=r.height,h=l.revHex(r.hash),f=r.time,a=l.date(f)),t=b.get(t),{hash:this.txid(),witnessHash:this.wtxid(),fee:n,rate:s,mtime:l.now(),height:o,block:h,time:f,date:a,index:i,version:this.version,inputs:this.inputs.map(r=>{const i=e?e.getCoinFor(r):null;return r.getJSON(t,i)}),outputs:this.outputs.map(e=>e.getJSON(t)),locktime:this.locktime,hex:this.toRaw().toString("hex")}}fromJSON(t){h(t,"TX data is required."),h(t.version>>>0===t.version,"Version must be a uint32."),h(Array.isArray(t.inputs),"Inputs must be an array."),h(Array.isArray(t.outputs),"Outputs must be an array."),h(t.locktime>>>0===t.locktime,"Locktime must be a uint32."),this.version=t.version;for(const e of t.inputs)this.inputs.push(g.fromJSON(e));for(const e of t.outputs)this.outputs.push(w.fromJSON(e));return this.locktime=t.locktime,this}static fromJSON(t){return(new this).fromJSON(t)}static fromRaw(t,e){return"string"==typeof t&&(t=i.from(t,e)),(new this).fromRaw(t)}static fromReader(t,e){return(new this).fromReader(t,e)}fromRaw(t){return this.fromReader(f.read(t))}fromReader(t,e){if(function(t){return!(t.left()<6)&&0===t.data[t.offset+4]&&0!==t.data[t.offset+5]}(t))return this.fromWitnessReader(t,e);const r=t.start();this.version=t.readU32();const i=t.readVarint();for(let e=0;e<i;e++)this.inputs.push(g.fromReader(t));const s=t.readVarint();for(let e=0;e<s;e++)this.outputs.push(w.fromReader(t));return this.locktime=t.readU32(),e&&(this._offset=r,this._block=!0),this.mutable?t.end():(this._raw=t.endData(),this._size=this._raw.length,this._witness=0),this}fromWitnessReader(t,e){const r=t.start();this.version=t.readU32(),h(0===t.readU8(),"Non-zero marker.");let i=t.readU8();h(0!==i,"Flags byte is zero.");const s=t.readVarint();for(let e=0;e<s;e++)this.inputs.push(g.fromReader(t));const n=t.readVarint();for(let e=0;e<n;e++)this.outputs.push(w.fromReader(t));let o=0,f=!1;if(1&i){i^=1,o=t.offset;for(const e of this.inputs)e.witness.fromReader(t),e.witness.items.length>0&&(f=!0);o=t.offset-o+2}if(0!==i)throw new Error("Unknown witness flag.");if(0===this.inputs.length&&0!==this.outputs.length)throw new Error("Zero input witness tx.");return this.locktime=t.readU32(),e&&(this._offset=r,this._block=!0),!this.mutable&&f?(this._raw=t.endData(),this._size=this._raw.length,this._witness=o):t.end(),this}frameNormal(){const t=this.getNormalSizes(),e=f.write(t.size);return this.writeNormal(e),t.data=e.render(),t}frameWitness(){const t=this.getWitnessSizes(),e=f.write(t.size);return this.writeWitness(e),t.data=e.render(),t}writeNormal(t){if(0===this.inputs.length&&0!==this.outputs.length)throw new Error("Cannot serialize zero-input tx.");t.writeU32(this.version),t.writeVarint(this.inputs.length);for(const e of this.inputs)e.toWriter(t);t.writeVarint(this.outputs.length);for(const e of this.outputs)e.toWriter(t);return t.writeU32(this.locktime),t}writeWitness(t){if(0===this.inputs.length&&0!==this.outputs.length)throw new Error("Cannot serialize zero-input tx.");t.writeU32(this.version),t.writeU8(0),t.writeU8(1),t.writeVarint(this.inputs.length);for(const e of this.inputs)e.toWriter(t);t.writeVarint(this.outputs.length);for(const e of this.outputs)e.toWriter(t);const e=t.offset;for(const e of this.inputs)e.witness.toWriter(t);const r=t.offset-e;if(t.writeU32(this.locktime),r===this.inputs.length)throw new Error("Cannot serialize empty-witness tx.");return t}getNormalSizes(){let t=0;t+=4,t+=_.sizeVarint(this.inputs.length);for(const e of this.inputs)t+=e.getSize();t+=_.sizeVarint(this.outputs.length);for(const e of this.outputs)t+=e.getSize();return new N(t+=4,0)}getWitnessSizes(){let t=0,e=0;t+=4,e+=2,t+=_.sizeVarint(this.inputs.length);for(const r of this.inputs)t+=r.getSize(),e+=r.witness.getVarSize();t+=_.sizeVarint(this.outputs.length);for(const e of this.outputs)t+=e.getSize();return new N((t+=4)+e,e)}static isTX(t){return t instanceof M}}class N{constructor(t,e){this.data=null,this.size=t,this.witness=e}}r.exports=M}],["bcoin","/lib/primitives/input.js",function(t,r,s,n,o,h){"use strict";const f=d(2,s),a=d(17,s),u=d(5,s),c=d(55,s),l=d(75,s),p=d(83,s),{inspectSymbol:b}=d(14,s);class m{constructor(t){this.prevout=new p,this.script=new c,this.sequence=4294967295,this.witness=new l,t&&this.fromOptions(t)}fromOptions(t){return f(t,"Input data is required."),this.prevout.fromOptions(t.prevout),t.script&&this.script.fromOptions(t.script),null!=t.sequence&&(f(t.sequence>>>0===t.sequence,"Sequence must be a uint32."),this.sequence=t.sequence),t.witness&&this.witness.fromOptions(t.witness),this}static fromOptions(t){return(new this).fromOptions(t)}clone(){const t=new this.constructor;return t.prevout=this.prevout,t.script.inject(this.script),t.sequence=this.sequence,t.witness.inject(this.witness),t}equals(t){return f(m.isInput(t)),this.prevout.equals(t.prevout)}compare(t){return f(m.isInput(t)),this.prevout.compare(t.prevout)}getType(t){if(this.isCoinbase())return"coinbase";if(t)return t.getType();let e;return e=this.witness.items.length>0?this.witness.getInputType():this.script.getInputType(),c.typesByVal[e].toLowerCase()}getRedeem(t){if(this.isCoinbase())return null;if(!t)return this.witness.isScripthashInput()?this.witness.getRedeem():this.script.isScripthashInput()?this.script.getRedeem():null;let e=t.script,r=null;return e.isScripthash()&&(r=e=this.script.getRedeem()),e&&e.isWitnessScripthash()&&(r=e=this.witness.getRedeem()),r}getSubtype(t){if(this.isCoinbase())return null;const e=this.getRedeem(t);if(!e)return null;const r=e.getType();return c.typesByVal[r].toLowerCase()}getAddress(t){return this.isCoinbase()?null:t?t.getAddress():this.script.code.length>0?this.script.getInputAddress():this.witness.items.length>0?this.witness.getInputAddress():null}getHash(t,e){const r=this.getAddress(t);return r?r.getHash(e):null}isFinal(){return 4294967295===this.sequence}isRBF(){return this.sequence<4294967294}isCoinbase(){return this.prevout.isNull()}[b](){return this.format()}format(t){return{type:this.getType(t),subtype:this.getSubtype(t),address:this.getAddress(t),script:this.script,witness:this.witness,redeem:this.getRedeem(t),sequence:this.sequence,prevout:this.prevout,coin:t||null}}toJSON(t,e){return this.getJSON()}getJSON(t,r){let i;return t=u.get(t),r||(i=this.getAddress())&&(i=i.toString(t)),{prevout:this.prevout.toJSON(),script:this.script.toJSON(),witness:this.witness.toJSON(),sequence:this.sequence,address:i,coin:r?r.getJSON(t,!0):e}}fromJSON(t){return f(t,"Input data is required."),f(t.sequence>>>0===t.sequence,"Sequence must be a uint32."),this.prevout.fromJSON(t.prevout),this.script.fromJSON(t.script),this.witness.fromJSON(t.witness),this.sequence=t.sequence,this}static fromJSON(t){return(new this).fromJSON(t)}getSize(){return 40+this.script.getVarSize()}toRaw(){const t=this.getSize();return this.toWriter(a.write(t)).render()}toWriter(t){return this.prevout.toWriter(t),t.writeVarBytes(this.script.toRaw()),t.writeU32(this.sequence),t}fromReader(t){return this.prevout.fromReader(t),this.script.fromRaw(t.readVarBytes()),this.sequence=t.readU32(),this}fromRaw(t){return this.fromReader(a.read(t))}static fromReader(t){return(new this).fromReader(t)}static fromRaw(t,e){return"string"==typeof t&&(t=i.from(t,e)),(new this).fromRaw(t)}fromOutpoint(t){return f(null!=t.hash&&!0===t.hash._isBuffer),f("number"==typeof t.index),this.prevout.hash=t.hash,this.prevout.index=t.index,this}static fromOutpoint(t){return(new this).fromOutpoint(t)}fromCoin(t){return f(null!=t.hash&&!0===t.hash._isBuffer),f("number"==typeof t.index),this.prevout.hash=t.hash,this.prevout.index=t.index,this}static fromCoin(t){return(new this).fromCoin(t)}fromTX(t,e){return f(t),f("number"==typeof e),f(e>=0&&e<t.outputs.length),this.prevout.hash=t.hash(),this.prevout.index=e,this}static fromTX(t,e){return(new this).fromTX(t,e)}static isInput(t){return t instanceof m}}s.exports=m}],["bcoin","/lib/primitives/outpoint.js",function(t,e,r,i,s,n){"use strict";const o=d(2,r),h=d(17,r),f=d(13,r),a=d(11,r),{inspectSymbol:u}=d(14,r);class c{constructor(t,e){this.hash=a.ZERO_HASH,this.index=4294967295,null!=t&&(o(null!=t&&!0===t._isBuffer),o(e>>>0===e,"Index must be a uint32."),this.hash=t,this.index=e)}fromOptions(t){return o(t,"Outpoint data is required."),o(null!=t.hash&&!0===t.hash._isBuffer),o(t.index>>>0===t.index,"Index must be a uint32."),this.hash=t.hash,this.index=t.index,this}static fromOptions(t){return(new this).fromOptions(t)}clone(){const t=new this.constructor;return t.hash=this.hash,t.index=this.index,t}equals(t){return o(c.isOutpoint(t)),this.hash.equals(t.hash)&&this.index===t.index}compare(t){o(c.isOutpoint(t));const e=function(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){if(t[i]<e[i])return-1;if(t[i]>e[i])return 1}return t.length<e.length?-1:t.length>e.length?1:0}(this.txid(),t.txid());return 0!==e?e:this.index-t.index}isNull(){return 4294967295===this.index&&this.hash.equals(a.ZERO_HASH)}rhash(){return f.revHex(this.hash)}txid(){return this.rhash()}toKey(){return this.toRaw()}fromKey(t){return this.hash=t.slice(0,32),this.index=h.readU32(t,32),this}static fromKey(t){return(new this).fromKey(t)}toWriter(t){return t.writeHash(this.hash),t.writeU32(this.index),t}getSize(){return 36}toRaw(){return this.toWriter(h.write(36)).render()}fromReader(t){return this.hash=t.readHash(),this.index=t.readU32(),this}fromRaw(t){return this.fromReader(h.read(t))}static fromReader(t){return(new this).fromReader(t)}static fromRaw(t){return(new this).fromRaw(t)}fromJSON(t){return o(t,"Outpoint data is required."),o("string"==typeof t.hash,"Hash must be a string."),o(t.index>>>0===t.index,"Index must be a uint32."),this.hash=f.fromRev(t.hash),this.index=t.index,this}toJSON(){return{hash:f.revHex(this.hash),index:this.index}}static fromJSON(t){return(new this).fromJSON(t)}fromTX(t,e){return o(t),o("number"==typeof e),o(e>=0),this.hash=t.hash(),this.index=e,this}static fromTX(t,e){return(new this).fromTX(t,e)}static toKey(t,e){return new c(t,e).toKey()}[u](){return`<Outpoint: ${this.rhash()}/${this.index}>`}static isOutpoint(t){return t instanceof c}}r.exports=c}],["bcoin","/lib/primitives/invitem.js",function(t,e,r,s,n,o){"use strict";const h=d(17,r),f=d(13,r);class a{constructor(t,e){this.type=t,this.hash=e}getSize(){return 36}toWriter(t){return t.writeU32(this.type),t.writeHash(this.hash),t}toRaw(){return this.toWriter(h.write(36)).render()}fromReader(t){return this.type=t.readU32(),this.hash=t.readHash(),this}fromRaw(t){return this.fromReader(h.read(t))}static fromReader(t){return(new this).fromReader(t)}static fromRaw(t,e){return"string"==typeof t&&(t=i.from(t,e)),(new this).fromRaw(t)}isBlock(){switch(this.type){case a.types.BLOCK:case a.types.WITNESS_BLOCK:case a.types.FILTERED_BLOCK:case a.types.WITNESS_FILTERED_BLOCK:case a.types.CMPCT_BLOCK:return!0;default:return!1}}isTX(){switch(this.type){case a.types.TX:case a.types.WITNESS_TX:return!0;default:return!1}}hasWitness(){return 0!=(this.type&a.WITNESS_FLAG)}rhash(){return f.revHex(this.hash)}}a.types={TX:1,BLOCK:2,FILTERED_BLOCK:3,CMPCT_BLOCK:4,WITNESS_TX:1|1<<30,WITNESS_BLOCK:2|1<<30,WITNESS_FILTERED_BLOCK:3|1<<30},a.typesByVal={1:"TX",2:"BLOCK",3:"FILTERED_BLOCK",4:"CMPCT_BLOCK",[1|1<<30]:"WITNESS_TX",[2|1<<30]:"WITNESS_BLOCK",[3|1<<30]:"WITNESS_FILTERED_BLOCK"},a.WITNESS_FLAG=1<<30,r.exports=a}],["bcoin","/lib/primitives/coin.js",function(t,r,s,n,o,h){"use strict";const f=d(2,s),a=d(17,s),u=d(13,s),c=d(77,s),l=d(76,s),p=d(5,s),b=d(11,s),m=d(83,s),{inspectSymbol:g}=d(14,s);class w extends l{constructor(t){super(),this.version=1,this.height=-1,this.coinbase=!1,this.hash=b.ZERO_HASH,this.index=0,t&&this.fromOptions(t)}fromOptions(t){return f(t,"Coin data is required."),null!=t.version&&(f(t.version>>>0===t.version,"Version must be a uint32."),this.version=t.version),null!=t.height&&(-1!==t.height?(f(t.height>>>0===t.height,"Height must be a uint32."),this.height=t.height):this.height=-1),null!=t.value&&(f(Number.isSafeInteger(t.value)&&t.value>=0,"Value must be a uint64."),this.value=t.value),t.script&&this.script.fromOptions(t.script),null!=t.coinbase&&(f("boolean"==typeof t.coinbase,"Coinbase must be a boolean."),this.coinbase=t.coinbase),null!=t.hash&&(f(null!=t.hash&&!0===t.hash._isBuffer),this.hash=t.hash),null!=t.index&&(f(t.index>>>0===t.index,"Index must be a uint32."),this.index=t.index),this}static fromOptions(t){return(new this).fromOptions(t)}clone(){f(!1,"Coins are not cloneable.")}getDepth(t){return f("number"==typeof t,"Must pass a height."),-1===this.height?0:-1===t?0:t<this.height?0:t-this.height+1}toKey(){return m.toKey(this.hash,this.index)}fromKey(t){const{hash:e,index:r}=m.fromKey(t);return this.hash=e,this.index=r,this}static fromKey(t){return(new this).fromKey(t)}rhash(){return u.revHex(this.hash)}txid(){return this.rhash()}[g](){return{type:this.getType(),version:this.version,height:this.height,value:c.btc(this.value),script:this.script,coinbase:this.coinbase,hash:this.hash?u.revHex(this.hash):null,index:this.index,address:this.getAddress()}}toJSON(){return this.getJSON()}getJSON(t,r){let i=this.getAddress();return t=p.get(t),i&&(i=i.toString(t)),{version:this.version,height:this.height,value:this.value,script:this.script.toJSON(),address:i,coinbase:this.coinbase,hash:r?e:this.rhash(),index:r?e:this.index}}fromJSON(t){return f(t,"Coin data required."),f(t.version>>>0===t.version,"Version must be a uint32."),f(-1===t.height||t.height>>>0===t.height,"Height must be a uint32."),f(Number.isSafeInteger(t.value)&&t.value>=0,"Value must be a uint64."),f("boolean"==typeof t.coinbase,"Coinbase must be a boolean."),this.version=t.version,this.height=t.height,this.value=t.value,this.script.fromJSON(t.script),this.coinbase=t.coinbase,null!=t.hash&&(f("string"==typeof t.hash,"Hash must be a string."),f(64===t.hash.length,"Hash must be a string."),f(t.index>>>0===t.index,"Index must be a uint32."),this.hash=u.fromRev(t.hash),this.index=t.index),this}static fromJSON(t){return(new this).fromJSON(t)}getSize(){return 17+this.script.getVarSize()}toWriter(t){let e=this.height;return-1===e&&(e=2147483647),t.writeU32(this.version),t.writeU32(e),t.writeI64(this.value),t.writeVarBytes(this.script.toRaw()),t.writeU8(this.coinbase?1:0),t}toRaw(){const t=this.getSize();return this.toWriter(a.write(t)).render()}fromReader(t){return this.version=t.readU32(),this.height=t.readU32(),this.value=t.readI64(),this.script.fromRaw(t.readVarBytes()),this.coinbase=1===t.readU8(),2147483647===this.height&&(this.height=-1),this}fromRaw(t){return this.fromReader(a.read(t))}static fromReader(t){return(new this).fromReader(t)}static fromRaw(t,e){return"string"==typeof t&&(t=i.from(t,e)),(new this).fromRaw(t)}fromTX(t,e,r){return f("number"==typeof e),f("number"==typeof r),f(e>=0&&e<t.outputs.length),this.version=t.version,this.height=r,this.value=t.outputs[e].value,this.script=t.outputs[e].script,this.coinbase=t.isCoinbase(),this.hash=t.hash(),this.index=e,this}static fromTX(t,e,r){return(new this).fromTX(t,e,r)}static isCoin(t){return t instanceof w}}s.exports=w}],["bcoin","/lib/coins/coinview.js",function(t,e,r,i,s,n){"use strict";const{BufferMap:o}=d(79,r),h=d(87,r),f=d(90,r),a=d(88,r);r.exports=class{constructor(){this.map=new o,this.undo=new f}get(t){return this.map.get(t)}has(t){return this.map.has(t)}add(t,e){return this.map.set(t,e),e}ensure(t){const e=this.map.get(t);return e||this.add(t,new h)}remove(t){const e=this.map.get(t);return e?(this.map.delete(t),e):null}addTX(t,e){const r=t.hash(),i=h.fromTX(t,e);return this.add(r,i)}removeTX(t,e){const r=t.hash(),i=h.fromTX(t,e);for(const t of i.outputs.values())t.spent=!0;return this.add(r,i)}addEntry(t,e){const{hash:r,index:i}=t;return this.ensure(r).add(i,e)}addCoin(t){return this.ensure(t.hash).addCoin(t)}addOutput(t,e){const{hash:r,index:i}=t;return this.ensure(r).addOutput(i,e)}addIndex(t,e,r){const i=t.hash();return this.ensure(i).addIndex(t,e,r)}spendEntry(t){const{hash:e,index:r}=t,i=this.get(e);if(!i)return null;const s=i.spend(r);return s?(this.undo.push(s),s):null}removeEntry(t){const{hash:e,index:r}=t,i=this.get(e);return i?i.remove(r):null}hasEntry(t){const{hash:e,index:r}=t,i=this.get(e);return!!i&&i.has(r)}getEntry(t){const{hash:e,index:r}=t,i=this.get(e);return i?i.get(r):null}isUnspent(t){const{hash:e,index:r}=t,i=this.get(e);return!!i&&i.isUnspent(r)}getCoin(t){const e=this.get(t.hash);return e?e.getCoin(t):null}getOutput(t){const{hash:e,index:r}=t,i=this.get(e);return i?i.getOutput(r):null}getHeight(t){const e=this.getEntry(t);return e?e.height:-1}isCoinbase(t){const e=this.getEntry(t);return!!e&&e.coinbase}hasEntryFor(t){return this.hasEntry(t.prevout)}getEntryFor(t){return this.getEntry(t.prevout)}isUnspentFor(t){return this.isUnspent(t.prevout)}getCoinFor(t){return this.getCoin(t.prevout)}getOutputFor(t){return this.getOutput(t.prevout)}getHeightFor(t){return this.getHeight(t.prevout)}isCoinbaseFor(t){return this.isCoinbase(t.prevout)}async readCoin(t,e){const r=this.getEntry(e);if(r)return r;const i=await t.readCoin(e);return i?this.addEntry(e,i):null}async readInputs(t,e){let r=!0;for(const{prevout:i}of e.inputs)await this.readCoin(t,i)||(r=!1);return r}async spendInputs(t,e){let r=0;for(;r<e.inputs.length;){const i=Math.min(r+4,e.inputs.length),s=[];for(;r<i;r++){const{prevout:i}=e.inputs[r];s.push(this.readCoin(t,i))}const n=await Promise.all(s);for(const t of n){if(!t||t.spent)return!1;t.spent=!0,this.undo.push(t)}}return!0}getSize(t){let e=0;e+=t.inputs.length;for(const{prevout:r}of t.inputs){const t=this.getEntry(r);t&&(e+=t.getSize())}return e}toWriter(t,e){for(const{prevout:r}of e.inputs){const e=this.getEntry(r);e?(t.writeU8(1),e.toWriter(t)):t.writeU8(0)}return t}fromReader(t,e){for(const{prevout:r}of e.inputs){if(0===t.readU8())continue;const e=a.fromReader(t);this.addEntry(r,e)}return this}static fromReader(t,e){return(new this).fromReader(t,e)}}}],["bcoin","/lib/coins/coins.js",function(t,e,r,i,s,n){"use strict";const o=d(2,r),h=d(88,r);r.exports=class{constructor(){this.outputs=new Map}add(t,e){return o(t>>>0===t),o(e),this.outputs.set(t,e),e}addOutput(t,e){return this.add(t,h.fromOutput(e))}addIndex(t,e,r){return this.add(e,h.fromTX(t,e,r))}addCoin(t){return this.add(t.index,h.fromCoin(t))}has(t){return this.outputs.has(t)}isUnspent(t){const e=this.outputs.get(t);return!(!e||e.spent)}get(t){return this.outputs.get(t)||null}getOutput(t){const e=this.outputs.get(t);return e?e.output:null}getCoin(t){const e=this.outputs.get(t.index);return e?e.toCoin(t):null}spend(t){const e=this.get(t);return!e||e.spent?null:(e.spent=!0,e)}remove(t){const e=this.get(t);return e?(this.outputs.delete(t),e):null}isEmpty(){return 0===this.outputs.size}fromTX(t,e){o("number"==typeof e);for(let r=0;r<t.outputs.length;r++){if(t.outputs[r].script.isUnspendable())continue;const i=h.fromTX(t,r,e);this.outputs.set(r,i)}return this}static fromTX(t,e){return(new this).fromTX(t,e)}}}],["bcoin","/lib/coins/coinentry.js",function(t,e,r,i,s,n){"use strict";const o=d(2,r),h=d(17,r),f=d(85,r),a=d(76,r),u=d(89,r),{encoding:c}=h,l=1,p=(1<<32-l>>>0)-1;r.exports=class{constructor(){this.version=1,this.height=-1,this.coinbase=!1,this.output=new a,this.spent=!1,this.raw=null}toOutput(){return this.output}toCoin(t){const e=new f;return e.version=this.version,e.height=this.height,e.coinbase=this.coinbase,e.script=this.output.script,e.value=this.output.value,e.hash=t.hash,e.index=t.index,e}fromOutput(t){return this.output=t,this}static fromOutput(t){return(new this).fromOutput(t)}fromCoin(t){return this.version=t.version,this.height=t.height,this.coinbase=t.coinbase,this.output.script=t.script,this.output.value=t.value,this}static fromCoin(t){return(new this).fromCoin(t)}fromTX(t,e,r){return o("number"==typeof e),o("number"==typeof r),o(e>=0&&e<t.outputs.length),this.version=t.version,this.height=r,this.coinbase=t.isCoinbase(),this.output=t.outputs[e],this}static fromTX(t,e,r){return(new this).fromTX(t,e,r)}getSize(){if(this.raw)return this.raw.length;let t=0;return t+=c.sizeVarint(this.version),t+=4,t+=u.size(this.output)}toWriter(t){if(this.raw)return t.writeBytes(this.raw),t;let e=this.height,r=0;return this.coinbase&&(r|=1),-1===e&&(e=p),r|=e<<l,t.writeVarint(this.version),t.writeU32(r),u.pack(this.output,t),t}toRaw(){if(this.raw)return this.raw;const t=this.getSize(),e=h.write(t);return this.toWriter(e),this.raw=e.render(),this.raw}fromReader(t){const e=t.readVarint(),r=t.readU32();let i=r>>>l;return i===p&&(i=-1),this.version=e,this.coinbase=0!=(1&r),this.height=i,u.unpack(this.output,t),this}static fromReader(t){return(new this).fromReader(t)}fromRaw(t){return this.fromReader(h.read(t)),this.raw=t,this}static fromRaw(t){return(new this).fromRaw(t)}}}],["bcoin","/lib/coins/compress.js",function(t,e,r,s,n,o){"use strict";const h=d(2,r),{encoding:f}=d(17,r),a=d(31,r),u=d(11,r),c=6,l=i.alloc(0);function p(t,e){const r=t.getPubkeyhash(!0);if(r)return e.writeU8(0),e.writeBytes(r),e;const i=t.getScripthash();if(i)return e.writeU8(1),e.writeBytes(i),e;const s=t.getPubkey(!0);if(s&&m(s)){const t=function(t){let e;switch(t[0]){case 2:case 3:e=t;break;case 4:(e=a.publicKeyConvert(t,!0))[0]=4|1&t[64];break;default:throw new Error("Bad point format.")}return h(33===e.length),e}(s);return e.writeBytes(t),e}return e.writeVarint(t.raw.length+c),e.writeBytes(t.raw),e}function b(t,e){switch(e.readU8()){case 0:{const r=e.readBytes(20,!0);t.fromPubkeyhash(r);break}case 1:{const r=e.readBytes(20,!0);t.fromScripthash(r);break}case 2:case 3:case 4:case 5:{e.offset-=1;const r=function(t){const e=t[0];switch(h(33===t.length),e){case 2:case 3:return t;case 4:t[0]=2;break;case 5:t[0]=3;break;default:throw new Error("Bad point format.")}const r=a.publicKeyConvert(t,!1);return t[0]=e,r}(e.readBytes(33,!0));t.fromPubkey(r);break}default:{e.offset-=1;const r=e.readVarint()-c;if(r>u.MAX_SCRIPT_SIZE)t.fromNulldata(l),e.seek(r);else{const i=e.readBytes(r);t.fromRaw(i)}break}}return t}function m(t){if(0===t.length)return!1;switch(t[0]){case 2:case 3:return 33===t.length;case 4:return 65===t.length&&a.publicKeyVerify(t);default:return!1}}t.pack=function(t,e){return e.writeVarint(t.value),p(t.script,e),e},t.unpack=function(t,e){return t.value=e.readVarint(),b(t.script,e),t},t.size=function(t){let e=0;return e+=f.sizeVarint(t.value),e+=function(t){if(t.isPubkeyhash(!0))return 21;if(t.isScripthash())return 21;const e=t.getPubkey(!0);if(e&&m(e))return 33;let r=0;return r+=f.sizeVarint(t.raw.length+c),r+=t.raw.length}(t.script)}}],["bcoin","/lib/coins/undocoins.js",function(t,e,r,i,s,n){"use strict";const o=d(2,r),h=d(17,r),f=d(88,r);r.exports=class{constructor(){this.items=[]}push(t){return this.items.push(t)}getSize(){let t=0;t+=4;for(const e of this.items)t+=e.getSize();return t}toRaw(){const t=this.getSize(),e=h.write(t);e.writeU32(this.items.length);for(const t of this.items)t.toWriter(e);return e.render()}fromRaw(t){const e=h.read(t),r=e.readU32();for(let t=0;t<r;t++)this.items.push(f.fromReader(e));return this}static fromRaw(t){return(new this).fromRaw(t)}isEmpty(){return 0===this.items.length}commit(){const t=this.toRaw();return this.items.length=0,t}apply(t,e){const r=this.items.pop();o(r),t.addEntry(e,r)}}}],["bcoin","/lib/primitives/keyring.js",function(t,e,r,s,n,o){"use strict";const h=d(2,r),f=d(71,r),a=d(17,r),u=d(60,r),c=d(26,r),l=d(5,r),p=d(55,r),b=d(70,r),m=d(76,r),g=d(31,r),{encoding:w}=a,{inspectSymbol:y}=d(14,r),S=i.alloc(33,0);class v{constructor(t){this.witness=!1,this.nested=!1,this.publicKey=S,this.privateKey=null,this.script=null,this._keyHash=null,this._keyAddress=null,this._program=null,this._nestedHash=null,this._nestedAddress=null,this._scriptHash160=null,this._scriptHash256=null,this._scriptAddress=null,t&&this.fromOptions(t)}fromOptions(t){let e=I(t);if(null!=t.witness&&(h("boolean"==typeof t.witness),this.witness=t.witness),null!=t.nested&&(h("boolean"==typeof t.nested),this.nested=t.nested),null!=e&&!0===e._isBuffer)return this.fromKey(e);e=I(t.key),t.publicKey&&(e=I(t.publicKey)),t.privateKey&&(e=I(t.privateKey));const r=t.script,i=t.compressed;return r?this.fromScript(e,r,i):this.fromKey(e,i)}static fromOptions(t){return(new this).fromOptions(t)}refresh(){this._keyHash=null,this._keyAddress=null,this._program=null,this._nestedHash=null,this._nestedAddress=null,this._scriptHash160=null,this._scriptHash256=null,this._scriptAddress=null}fromPrivate(t,e){return h(null!=t&&!0===t._isBuffer,"Private key must be a buffer."),h(g.privateKeyVerify(t),"Not a valid private key."),this.privateKey=t,this.publicKey=g.publicKeyCreate(t,!1!==e),this}static fromPrivate(t,e){return(new this).fromPrivate(t,e)}fromPublic(t){return h(null!=t&&!0===t._isBuffer,"Public key must be a buffer."),h(g.publicKeyVerify(t),"Not a valid public key."),this.publicKey=t,this}generate(t){const e=g.privateKeyGenerate();return this.fromKey(e,t)}static generate(t){return(new this).generate(t)}static fromPublic(t){return(new this).fromPublic(t)}fromKey(t,e){return h(null!=t&&!0===t._isBuffer,"Key must be a buffer."),32===t.length?this.fromPrivate(t,!1!==e):this.fromPublic(t)}static fromKey(t,e){return(new this).fromKey(t,e)}fromScript(t,e,r){return h(e instanceof p,"Non-script passed into KeyRing."),this.fromKey(t,r),this.script=e,this}static fromScript(t,e,r){return(new this).fromScript(t,e,r)}fromMultisigScript(t,e){h(t instanceof p,"Non-script passed."),h(t.isMultisig(),"Script must be multisig");const r=t.getSmall(-2);return h(e>=1&&e<=r,"Requested `i`th key, `n` available"),this.fromKey(t.code[e].toData()),this}static fromMultisigScript(t,e){return(new this).fromMultisigScript(t,e)}getSecretSize(){let t=0;return t+=1,t+=this.privateKey.length,33===this.publicKey.length&&(t+=1),t+=4}toSecret(t){const e=this.getSecretSize(),r=a.write(e);return h(this.privateKey,"Cannot serialize without private key."),t=l.get(t),r.writeU8(t.keyPrefix.privkey),r.writeBytes(this.privateKey),33===this.publicKey.length&&r.writeU8(1),r.writeChecksum(c.digest),f.encode(r.render())}fromSecret(t,e){const r=a.read(f.decode(t),!0),i=r.readU8();l.fromWIF(i,e);const s=r.readBytes(32);let n=!1;return r.left()>4&&(h(1===r.readU8(),"Bad compression flag."),n=!0),r.verifyChecksum(c.digest),this.fromPrivate(s,n)}static fromSecret(t,e){return(new this).fromSecret(t,e)}getPrivateKey(t,e){return this.privateKey?"base58"===t?this.toSecret(e):"hex"===t?this.privateKey.toString("hex"):this.privateKey:null}getPublicKey(t){return"base58"===t?f.encode(this.publicKey):"hex"===t?this.publicKey.toString("hex"):this.publicKey}getScript(){return this.script}getProgram(){if(!this.witness)return null;if(!this._program){let t;if(this.script){const e=this.script.sha256();t=p.fromProgram(0,e)}else{const e=u.digest(this.publicKey);t=p.fromProgram(0,e)}this._program=t}return this._program}getNestedHash(t){return this.witness?(this._nestedHash||(this._nestedHash=this.getProgram().hash160()),"hex"===t?this._nestedHash.toString("hex"):this._nestedHash):null}getNestedAddress(t,e){if(!this.witness)return null;if(!this._nestedAddress){const t=this.getNestedHash(),e=b.fromScripthash(t);this._nestedAddress=e}return"base58"===t?this._nestedAddress.toBase58(e):"string"===t?this._nestedAddress.toString(e):this._nestedAddress}getScriptHash(t){return this.witness?this.getScriptHash256(t):this.getScriptHash160(t)}getScriptHash160(t){return this.script?(this._scriptHash160||(this._scriptHash160=this.script.hash160()),"hex"===t?this._scriptHash160.toString("hex"):this._scriptHash160):null}getScriptHash256(t){return this.script?(this._scriptHash256||(this._scriptHash256=this.script.sha256()),"hex"===t?this._scriptHash256.toString("hex"):this._scriptHash256):null}getScriptAddress(t,e){if(!this.script)return null;if(!this._scriptAddress){let t;if(this.witness){const e=this.getScriptHash256();t=b.fromWitnessScripthash(e)}else{const e=this.getScriptHash160();t=b.fromScripthash(e)}this._scriptAddress=t}return"base58"===t?this._scriptAddress.toBase58(e):"string"===t?this._scriptAddress.toString(e):this._scriptAddress}getKeyHash(t){return this._keyHash||(this._keyHash=u.digest(this.publicKey)),"hex"===t?this._keyHash.toString("hex"):this._keyHash}getKeyAddress(t,e){if(!this._keyAddress){const t=this.getKeyHash();let e;e=this.witness?b.fromWitnessPubkeyhash(t):b.fromPubkeyhash(t),this._keyAddress=e}return"base58"===t?this._keyAddress.toBase58(e):"string"===t?this._keyAddress.toString(e):this._keyAddress}getHash(t){return this.nested?this.getNestedHash(t):this.script?this.getScriptHash(t):this.getKeyHash(t)}getAddress(t,e){return this.nested?this.getNestedAddress(t,e):this.script?this.getScriptAddress(t,e):this.getKeyAddress(t,e)}ownHash(t){return!!t&&(!!t.equals(this.getKeyHash())||(!(!this.script||!t.equals(this.getScriptHash()))||!(!this.witness||!t.equals(this.getNestedHash()))))}ownOutput(t,e){let r;return t instanceof m?r=t:(r=t.outputs[e],h(r,"Output does not exist.")),this.ownHash(r.getHash())}getRedeem(t){if(this.witness&&t.equals(this.getNestedHash()))return this.getProgram();if(this.script){if(t.equals(this.getScriptHash160()))return this.script;if(t.equals(this.getScriptHash256()))return this.script}return null}sign(t){return h(this.privateKey,"Cannot sign without private key."),g.signDER(t,this.privateKey)}verify(t,e){return g.verifyDER(t,e,this.publicKey)}getVersion(){return this.witness?this.nested?-1:0:-1}getType(){return this.nested?b.types.SCRIPTHASH:this.witness?b.types.WITNESS:this.script?b.types.SCRIPTHASH:b.types.PUBKEYHASH}[y](){return this.toJSON()}toJSON(t){return{witness:this.witness,nested:this.nested,publicKey:this.publicKey.toString("hex"),script:this.script?this.script.toRaw().toString("hex"):null,program:this.witness?this.getProgram().toRaw().toString("hex"):null,type:b.typesByVal[this.getType()].toLowerCase(),address:this.getAddress("string",t)}}fromJSON(t){return h(t),h("boolean"==typeof t.witness),h("boolean"==typeof t.nested),h("string"==typeof t.publicKey),h(!t.script||"string"==typeof t.script),this.witness=t.witness,this.nested=t.nested,this.publicKey=i.from(t.publicKey,"hex"),t.script&&(this.script=i.from(t.script,"hex")),this}static fromJSON(t){return(new this).fromJSON(t)}getSize(){let t=0;return t+=1,this.privateKey?(t+=w.sizeVarBytes(this.privateKey),t+=1):t+=w.sizeVarBytes(this.publicKey),t+=this.script?this.script.getVarSize():1}toWriter(t){let e=0;return this.witness&&(e|=1),this.nested&&(e|=2),t.writeU8(e),this.privateKey?(t.writeVarBytes(this.privateKey),t.writeU8(33===this.publicKey.length?1:0)):t.writeVarBytes(this.publicKey),this.script?t.writeVarBytes(this.script.toRaw()):t.writeVarint(0),t}toRaw(){const t=this.getSize();return this.toWriter(a.write(t)).render()}fromReader(t){const e=t.readU8();this.witness=0!=(1&e),this.nested=0!=(2&e);const r=t.readVarBytes();if(32===r.length){const e=1===t.readU8();this.privateKey=r,this.publicKey=g.publicKeyCreate(r,e)}else this.publicKey=r,h(g.publicKeyVerify(r),"Invalid public key.");const i=t.readVarBytes();return i.length>0&&(this.script=p.fromRaw(i)),this}fromRaw(t){return this.fromReader(a.read(t))}static fromReader(t){return(new this).fromReader(t)}static fromRaw(t){return(new this).fromRaw(t)}static isKeyRing(t){return t instanceof v}}function I(t){return t?t.privateKey?t.privateKey:t.publicKey?t.publicKey:t:t}r.exports=v}],["bcoin","/lib/workers/parser.js",function(t,e,r,s,n,o){"use strict";const h=d(2,r),f=d(3,r),a=d(54,r);class u{constructor(t,e,r){this.id=t,this.cmd=e,this.size=r}}r.exports=class extends f{constructor(){super(),this.waiting=9,this.header=null,this.pending=[],this.total=0}feed(t){for(this.total+=t.length,this.pending.push(t);this.total>=this.waiting;){const t=this.read(this.waiting);this.parse(t)}}read(t){if(h(this.total>=t,"Reading too much."),0===t)return i.alloc(0);const e=this.pending[0];if(e.length>t){const r=e.slice(0,t);return this.pending[0]=e.slice(t),this.total-=r.length,r}if(e.length===t){const t=this.pending.shift();return this.total-=t.length,t}const r=i.allocUnsafe(t);let s=0;for(;s<r.length;){const t=this.pending[0],e=t.copy(r,s);e===t.length?this.pending.shift():this.pending[0]=t.slice(e),s+=e}return h.strictEqual(s,r.length),this.total-=r.length,r}parse(t){let e,r=this.header;if(!r){try{r=this.parseHeader(t)}catch(t){return void this.emit("error",t)}return this.header=r,void(this.waiting=r.size+1)}this.waiting=9,this.header=null;try{e=this.parsePacket(r,t)}catch(t){return void this.emit("error",t)}10===t[t.length-1]?(e.id=r.id,this.emit("packet",e)):this.emit("error",new Error("No trailing newline."))}parseHeader(t){const e=t.readUInt32LE(0,!0),r=t.readUInt8(4,!0),i=t.readUInt32LE(5,!0);return new u(e,r,i)}parsePacket(t,e){switch(t.cmd){case a.types.ENV:return a.EnvPacket.fromRaw(e);case a.types.EVENT:return a.EventPacket.fromRaw(e);case a.types.LOG:return a.LogPacket.fromRaw(e);case a.types.ERROR:return a.ErrorPacket.fromRaw(e);case a.types.ERRORRESULT:return a.ErrorResultPacket.fromRaw(e);case a.types.CHECK:return a.CheckPacket.fromRaw(e);case a.types.CHECKRESULT:return a.CheckResultPacket.fromRaw(e);case a.types.SIGN:return a.SignPacket.fromRaw(e);case a.types.SIGNRESULT:return a.SignResultPacket.fromRaw(e);case a.types.CHECKINPUT:return a.CheckInputPacket.fromRaw(e);case a.types.CHECKINPUTRESULT:return a.CheckInputResultPacket.fromRaw(e);case a.types.SIGNINPUT:return a.SignInputPacket.fromRaw(e);case a.types.SIGNINPUTRESULT:return a.SignInputResultPacket.fromRaw(e);case a.types.ECVERIFY:return a.ECVerifyPacket.fromRaw(e);case a.types.ECVERIFYRESULT:return a.ECVerifyResultPacket.fromRaw(e);case a.types.ECSIGN:return a.ECSignPacket.fromRaw(e);case a.types.ECSIGNRESULT:return a.ECSignResultPacket.fromRaw(e);case a.types.MINE:return a.MinePacket.fromRaw(e);case a.types.MINERESULT:return a.MineResultPacket.fromRaw(e);case a.types.SCRYPT:return a.ScryptPacket.fromRaw(e);case a.types.SCRYPTRESULT:return a.ScryptResultPacket.fromRaw(e);default:throw new Error("Unknown packet.")}}}}],["bcoin","/lib/workers/framer.js",function(t,e,r,i,s,n){"use strict";const o=d(17,r);r.exports=class{constructor(){}packet(t){const e=10+t.getSize(),r=o.write(e);r.writeU32(t.id),r.writeU8(t.cmd),r.seek(4),t.toWriter(r),r.writeU8(10);const i=r.render();return i.writeUInt32LE(i.length-10,5,!0),i}}}],["bcoin","/lib/workers/parent-browser.js",function(e,r,s,n,o,h){"use strict";const f=d(2,s),a=d(3,s);s.exports=class extends a{constructor(){super(),this.init()}init(){t.onerror=(t=>{this.emit("error",new Error("Worker error."))}),t.onmessage=(t=>{let e;"string"==typeof t.data?(e=i.from(t.data,"hex"),f(e.length===t.data.length/2)):(f(t.data&&"object"==typeof t.data),f(t.data.data&&"number"==typeof t.data.data.length),(e=t.data.data).__proto__=i.prototype),this.emit("data",e)})}write(e){return 2===t.postMessage.length?(e.__proto__=Uint8Array.prototype,t.postMessage({data:e},[e])):t.postMessage(e.toString("hex")),!0}destroy(){t.close()}}}],["bpkg","/lib/builtins/timers.js",function(r,i,s,n,o,h){"use strict";var f=r,a=t,u=Function.prototype.apply,c=Array.prototype.slice,d=a.setTimeout,l=a.clearTimeout,p=a.setInterval,b=a.clearInterval,m=a.setImmediate,g=a.clearImmediate;function w(){return!1}function y(){return this}function S(t,e,r){this._id=u.call(t,a,r),this._set=t,this._clear=e,this._args=r}function v(t){this._id=t}S.prototype.hasRef=w,S.prototype.ref=y,S.prototype.unref=y,S.prototype.refresh=function(){return this._clear.call(a,this._id),this._id=u.call(this._set,a,this._args),this},S.prototype.close=function(){return this._clear.call(a,this._id),this},v.prototype.hasRef=w,v.prototype.ref=y,v.prototype.unref=y,f.setTimeout=function(){var t=c.call(arguments,0);return new S(d,l,t)},f.clearTimeout=function(t){t instanceof S&&t.close()},f.setInterval=function(){var t=c.call(arguments,0);return new S(p,b,t)},f.clearInterval=f.clearTimeout,f.setImmediate=function(){return new v(u.call(m,a,arguments))},f.clearImmediate=function(t){t instanceof v&&g.call(a,t._id)},function(){if(!a.setImmediate){var t,r,i,s,n,o=1,h={},f=!1,u=a.document;!function(){if(a.postMessage&&!a.importScripts){var t=!0,e=a.onmessage;return a.onmessage=function(){t=!1},a.postMessage("","*"),a.onmessage=e,t}return!1}()?a.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){l(t.data)},t=function(t){i.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,t=function(t){var e=u.createElement("script");e.onreadystatechange=function(){l(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):t=function(t){d(l,0,t)}:(s="setImmediate$"+Math.random()+"$",n=function(t){t.source===a&&"string"==typeof t.data&&0===t.data.indexOf(s)&&l(t.data.slice(s.length))},a.addEventListener?a.addEventListener("message",n,!1):a.attachEvent("onmessage",n),t=function(t){a.postMessage(s+t,"*")}),m=function(e){"function"!=typeof e&&(e=new Function(String(e)));for(var r=new Array(arguments.length-1),i=0;i<r.length;i++)r[i]=arguments[i+1];var s={callback:e,args:r};return h[o]=s,t(o),o++},g=c}function c(t){delete h[t]}function l(t){if(f)d(l,0,t);else{var r=h[t];if(r){f=!0;try{!function(t){var r=t.callback,i=t.args;switch(i.length){case 0:r();break;case 1:r(i[0]);break;case 2:r(i[0],i[1]);break;case 3:r(i[0],i[1],i[2]);break;default:r.apply(e,i)}}(r)}finally{c(t),f=!1}}}}}()}],["bpkg","/lib/builtins/process.js",function(r,i,s,n,o,f){"use strict";var a,u=r,c=t,d=c.setTimeout,l=c.clearTimeout,p=Number(new Date),b=[],m=!1,g=-1;function w(){return[]}function y(){return!1}function S(){}function v(){return 0}function I(){return""}function E(){return this}function _(){m&&a&&(m=!1,a.length>0?b=a.concat(b):g=-1,b.length>0&&O())}function O(){if(!m){var t=d.call(c,_,0),e=b.length;for(m=!0;e>0;){for(a=b,b=[];++g<e;)a&&a[g].run();g=-1,e=b.length}a=null,m=!1,l.call(c,t)}}function A(t,e){this.func=t,this.array=e}A.prototype.run=function(){this.func.apply(null,this.array)},u.allowedNodeEnvironmentFlags="function"==typeof Set?new Set:e,u.arch="javascript",u.argv=["/usr/bin/node"],u.argv0="node",u.browser=!0,u.channel=e,u.config={},u.connected=e,u.debugPort=9229,u.env={__proto__:null},u.env.PATH="/usr/bin",u.env.HOME="/",u.execArgv=[],u.execPath="/usr/bin/node",u.exitCode=e,u.mainModule=null,u.noDeprecation=!1,u.pid=1,u.platform="browser",u.ppid=1,u.release={name:"browser"},u.report={},u.stdin=null,u.stdout=null,u.stderr=null,u.throwDeprecation=!1,u.title="browser",u.traceDeprecation=!1,u.version="v0.0.0",u.versions={node:"0.0.0"},u._events={__proto__:null},u._eventsCount=0,u._maxListeners=0,u.addListener=E,u.emit=y,u.eventNames=w,u.getMaxListeners=v,u.listenerCount=v,u.listeners=w,u.off=E,u.on=E,u.once=E,u.prependListener=E,u.prependOnceListener=E,u.removeAllListeners=E,u.removeListener=E,u.setMaxListeners=E,u.rawListeners=w,u.abort=function(){throw new Error("Process aborted.")},u.binding=function(t){throw new Error("process.binding is not supported.")},u.chdir=function(t){throw new Error("process.chdir is not supported.")},u.cpuUsage=function(t){return{user:0,system:0}},u.cwd=function(){return"/"},u.dlopen=function(t,e,r){throw new Error("process.dlopen is not supported.")},u.emitWarning=function(t,e){var r="Warning: "+t;h.warn?h.warn(r):h.error?h.error(r):h.log(r)},u.exit=function(t){throw null==t&&(t=u.exitCode),t>>>=0,new Error("Exit code: "+t+".")},u.getegid=v,u.geteuid=v,u.getgid=v,u.getgroups=w,u.getuid=v,u.hasUncaughtExceptionCaptureCallback=y,u.hrtime=function(t){var e,r,i,s=Number(new Date)-p;return s<0&&(p=Number(new Date),s=0),t&&(r=t[0],i=t[1],s-=1e3*r+Math.floor(i/1e6),isFinite(s)||(s=0),s<0&&(s=0)),[r=(s-(e=s%1e3))/1e3,i=1e6*e]},u.hrtime.bigint=function(){if("function"!=typeof BigInt)throw new Error("BigInt is unsupported.");var t=Number(new Date)-p;return t<0&&(p=Number(new Date),t=0),BigInt(t)*BigInt(1e6)},u.initgroups=S,u.kill=S,u.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0,external:0}},u.nextTick=function(t){if("function"!=typeof t)throw new TypeError("Callback must be a function");var e,r=new Array(arguments.length-1);if(arguments.length>1)for(e=1;e<arguments.length;e++)r[e-1]=arguments[e];b.push(new A(t,r)),1!==b.length||m||d.call(c,O,0)},u.report.getReport=I,u.report.setOptions=S,u.report.triggerReport=I,u.send=e,u.setegid=S,u.seteuid=S,u.setgid=S,u.setgroups=S,u.setuid=S,u.setUncaughtExceptionCaptureCallback=S,u.umask=v,u.uptime=function(){var t=Number(new Date)-p;return t<0&&(p=Number(new Date),t=0),t/1e3}}],["bpkg","/lib/builtins/buffer.js",function(t,r,i,s,n,o){var f=[["buffer","/index.js",function(t,r,i,s,n){"use strict";var o=u(1),f=u(2);t.Buffer=d,t.SlowBuffer=function(t){+t!=t&&(t=0);return d.alloc(+t)},t.INSPECT_MAX_BYTES=50;var a=2147483647;function c(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=d.prototype,e}function d(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return b(t)}return l(t,e,r)}function l(t,r,i){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!d.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|w(t,e),i=c(r),s=i.write(t,e);s!==r&&(i=i.slice(0,s));return i}(t,r);if(ArrayBuffer.isView(t))return m(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(K(t,ArrayBuffer)||t&&K(t.buffer,ArrayBuffer))return function(t,r,i){if(r<0||t.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<r+(i||0))throw new RangeError('"length" is outside of buffer bounds');var s;s=r===e&&i===e?new Uint8Array(t):i===e?new Uint8Array(t,r):new Uint8Array(t,r,i);return s.__proto__=d.prototype,s}(t,r,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return d.from(s,r,i);var n=function(t){if(null!=t&&!0===t._isBuffer){var r=0|g(t.length),i=c(r);return 0===i.length?i:(t.copy(i,0,0,r),i)}if(t.length!==e)return"number"!=typeof t.length||W(t.length)?c(0):m(t);if("Buffer"===t.type&&Array.isArray(t.data))return m(t.data)}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return d.from(t[Symbol.toPrimitive]("string"),r,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function p(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function b(t){return p(t),c(t<0?0:0|g(t))}function m(t){for(var e=t.length<0?0:0|g(t.length),r=c(e),i=0;i<e;i+=1)r[i]=255&t[i];return r}function g(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function w(t,e){if(null!=t&&!0===t._isBuffer)return t.length;if(ArrayBuffer.isView(t)||K(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var s=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return D(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(t).length;default:if(s)return i?-1:D(t).length;e=(""+e).toLowerCase(),s=!0}}function y(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function S(t,e,r,i,s){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),W(r=+r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0){if(!s)return-1;r=0}if("string"==typeof e&&(e=d.from(e,i)),null!=e&&!0===e._isBuffer)return 0===e.length?-1:v(t,e,r,i,s);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,i,s);throw new TypeError("val must be string, number or Buffer")}function v(t,r,i,s,n){var o,h=1,f=t.length,a=r.length;if(s!==e&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||r.length<2)return-1;h=2,f/=2,a/=2,i/=2}function u(t,e){return 1===h?t[e]:t.readUInt16BE(e*h)}if(n){var c=-1;for(o=i;o<f;o++)if(u(t,o)===u(r,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===a)return c*h}else-1!==c&&(o-=o-c),c=-1}else for(i+a>f&&(i=f-a),o=i;o>=0;o--){for(var d=!0,l=0;l<a;l++)if(u(t,o+l)!==u(r,l)){d=!1;break}if(d)return o}return-1}function I(t,e,r,i){r=Number(r)||0;var s=t.length-r;i?(i=Number(i))>s&&(i=s):i=s;var n=e.length;i>n/2&&(i=n/2);for(var o=0;o<i;++o){var h=parseInt(e.substr(2*o,2),16);if(W(h))return o;t[r+o]=h}return o}function E(t,e,r,i){return H(D(e,t.length-r),t,r,i)}function _(t,e,r,i){return H(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,i)}function O(t,e,r,i){return _(t,e,r,i)}function A(t,e,r,i){return H(j(e),t,r,i)}function M(t,e,r,i){return H(function(t,e){for(var r,i,s,n=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),i=r>>8,s=r%256,n.push(s),n.push(i);return n}(e,t.length-r),t,r,i)}function N(t,e,r){return 0===e&&r===t.length?o.fromByteArray(t):o.fromByteArray(t.slice(e,r))}function P(t,e,r){r=Math.min(t.length,r);for(var i=[],s=e;s<r;){var n,o,h,f,a=t[s],u=null,c=a>239?4:a>223?3:a>191?2:1;if(s+c<=r)switch(c){case 1:a<128&&(u=a);break;case 2:128==(192&(n=t[s+1]))&&(f=(31&a)<<6|63&n)>127&&(u=f);break;case 3:n=t[s+1],o=t[s+2],128==(192&n)&&128==(192&o)&&(f=(15&a)<<12|(63&n)<<6|63&o)>2047&&(f<55296||f>57343)&&(u=f);break;case 4:n=t[s+1],o=t[s+2],h=t[s+3],128==(192&n)&&128==(192&o)&&128==(192&h)&&(f=(15&a)<<18|(63&n)<<12|(63&o)<<6|63&h)>65535&&f<1114112&&(u=f)}null===u?(u=65533,c=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),s+=c}return function(t){var e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);var r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=R));return r}(i)}t.kMaxLength=a,d.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),d.TYPED_ARRAY_SUPPORT||void 0===h||"function"!=typeof h.error||h.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){return d.isBuffer(this)?this.buffer:e}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){return d.isBuffer(this)?this.byteOffset:e}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=function(t,e,r){return l(t,e,r)},d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,d.alloc=function(t,r,i){return function(t,r,i){return p(t),t<=0?c(t):r!==e?"string"==typeof i?c(t).fill(r,i):c(t).fill(r):c(t)}(t,r,i)},d.allocUnsafe=function(t){return b(t)},d.allocUnsafeSlow=function(t){return b(t)},d.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==d.prototype},d.compare=function(t,e){if(K(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),K(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),null==t||!0!==t._isBuffer||null==e||!0!==e._isBuffer)throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,i=e.length,s=0,n=Math.min(r,i);s<n;++s)if(t[s]!==e[s]){r=t[s],i=e[s];break}return r<i?-1:i<r?1:0},d.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return d.alloc(0);var i;if(r===e)for(r=0,i=0;i<t.length;++i)r+=t[i].length;var s=d.allocUnsafe(r),n=0;for(i=0;i<t.length;++i){var o=t[i];if(K(o,Uint8Array)&&(o=d.from(o)),null==o||!0!==o._isBuffer)throw new TypeError('"list" argument must be an Array of Buffers');o.copy(s,n),n+=o.length}return s},d.byteLength=w,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},d.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},d.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},d.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?P(this,0,t):function(t,r,i){var s=!1;if((r===e||r<0)&&(r=0),r>this.length)return"";if((i===e||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,r,i);case"utf8":case"utf-8":return P(this,r,i);case"ascii":return x(this,r,i);case"latin1":case"binary":return B(this,r,i);case"base64":return N(this,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,r,i);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(t){if(null==t||!0!==t._isBuffer)throw new TypeError("Argument must be a Buffer");return this===t||0===d.compare(this,t)},d.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},d.prototype.compare=function(t,r,i,s,n){if(K(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),null==t||!0!==t._isBuffer)throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===e&&(r=0),i===e&&(i=t?t.length:0),s===e&&(s=0),n===e&&(n=this.length),r<0||i>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&r>=i)return 0;if(s>=n)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,s>>>=0,n>>>=0,this===t)return 0;for(var o=n-s,h=i-r,f=Math.min(o,h),a=this.slice(s,n),u=t.slice(r,i),c=0;c<f;++c)if(a[c]!==u[c]){o=a[c],h=u[c];break}return o<h?-1:h<o?1:0},d.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},d.prototype.indexOf=function(t,e,r){return S(this,t,e,r,!0)},d.prototype.lastIndexOf=function(t,e,r){return S(this,t,e,r,!1)},d.prototype.write=function(t,r,i,s){if(r===e)s="utf8",i=this.length,r=0;else if(i===e&&"string"==typeof r)s=r,i=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(i)?(i>>>=0,s===e&&(s="utf8")):(s=i,i=e)}var n=this.length-r;if((i===e||i>n)&&(i=n),t.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var o=!1;;)switch(s){case"hex":return I(this,t,r,i);case"utf8":case"utf-8":return E(this,t,r,i);case"ascii":return _(this,t,r,i);case"latin1":case"binary":return O(this,t,r,i);case"base64":return A(this,t,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,r,i);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function x(t,e,r){var i="";r=Math.min(t.length,r);for(var s=e;s<r;++s)i+=String.fromCharCode(127&t[s]);return i}function B(t,e,r){var i="";r=Math.min(t.length,r);for(var s=e;s<r;++s)i+=String.fromCharCode(t[s]);return i}function k(t,e,r){var i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var s="",n=e;n<r;++n)s+=V(t[n]);return s}function T(t,e,r){for(var i=t.slice(e,r),s="",n=0;n<i.length;n+=2)s+=String.fromCharCode(i[n]+256*i[n+1]);return s}function U(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,r,i,s,n){if(null==t||!0!==t._isBuffer)throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<n)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function C(t,e,r,i,s,n){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(t,e,r,i,s){return e=+e,r>>>=0,s||C(t,0,r,4),f.write(t,e,r,i,23,4),r+4}function q(t,e,r,i,s){return e=+e,r>>>=0,s||C(t,0,r,8),f.write(t,e,r,i,52,8),r+8}d.prototype.slice=function(t,r){var i=this.length;t=~~t,r=r===e?i:~~r,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),r<0?(r+=i)<0&&(r=0):r>i&&(r=i),r<t&&(r=t);var s=this.subarray(t,r);return s.__proto__=d.prototype,s},d.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var i=this[t],s=1,n=0;++n<e&&(s*=256);)i+=this[t+n]*s;return i},d.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var i=this[t+--e],s=1;e>0&&(s*=256);)i+=this[t+--e]*s;return i},d.prototype.readUInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),this[t]},d.prototype.readUInt16LE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]|this[t+1]<<8},d.prototype.readUInt16BE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]<<8|this[t+1]},d.prototype.readUInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},d.prototype.readUInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},d.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var i=this[t],s=1,n=0;++n<e&&(s*=256);)i+=this[t+n]*s;return i>=(s*=128)&&(i-=Math.pow(2,8*e)),i},d.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var i=e,s=1,n=this[t+--i];i>0&&(s*=256);)n+=this[t+--i]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*e)),n},d.prototype.readInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},d.prototype.readInt16LE=function(t,e){t>>>=0,e||U(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},d.prototype.readInt16BE=function(t,e){t>>>=0,e||U(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},d.prototype.readInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},d.prototype.readInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},d.prototype.readFloatLE=function(t,e){return t>>>=0,e||U(t,4,this.length),f.read(this,t,!0,23,4)},d.prototype.readFloatBE=function(t,e){return t>>>=0,e||U(t,4,this.length),f.read(this,t,!1,23,4)},d.prototype.readDoubleLE=function(t,e){return t>>>=0,e||U(t,8,this.length),f.read(this,t,!0,52,8)},d.prototype.readDoubleBE=function(t,e){return t>>>=0,e||U(t,8,this.length),f.read(this,t,!1,52,8)},d.prototype.writeUIntLE=function(t,e,r,i){(t=+t,e>>>=0,r>>>=0,i)||z(this,t,e,r,Math.pow(2,8*r)-1,0);var s=1,n=0;for(this[e]=255&t;++n<r&&(s*=256);)this[e+n]=t/s&255;return e+r},d.prototype.writeUIntBE=function(t,e,r,i){(t=+t,e>>>=0,r>>>=0,i)||z(this,t,e,r,Math.pow(2,8*r)-1,0);var s=r-1,n=1;for(this[e+s]=255&t;--s>=0&&(n*=256);)this[e+s]=t/n&255;return e+r},d.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,1,255,0),this[e]=255&t,e+1},d.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},d.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},d.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},d.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},d.prototype.writeIntLE=function(t,e,r,i){if(t=+t,e>>>=0,!i){var s=Math.pow(2,8*r-1);z(this,t,e,r,s-1,-s)}var n=0,o=1,h=0;for(this[e]=255&t;++n<r&&(o*=256);)t<0&&0===h&&0!==this[e+n-1]&&(h=1),this[e+n]=(t/o>>0)-h&255;return e+r},d.prototype.writeIntBE=function(t,e,r,i){if(t=+t,e>>>=0,!i){var s=Math.pow(2,8*r-1);z(this,t,e,r,s-1,-s)}var n=r-1,o=1,h=0;for(this[e+n]=255&t;--n>=0&&(o*=256);)t<0&&0===h&&0!==this[e+n+1]&&(h=1),this[e+n]=(t/o>>0)-h&255;return e+r},d.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},d.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},d.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},d.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},d.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},d.prototype.writeFloatLE=function(t,e,r){return L(this,t,e,!0,r)},d.prototype.writeFloatBE=function(t,e,r){return L(this,t,e,!1,r)},d.prototype.writeDoubleLE=function(t,e,r){return q(this,t,e,!0,r)},d.prototype.writeDoubleBE=function(t,e,r){return q(this,t,e,!1,r)},d.prototype.copy=function(t,e,r,i){if(null==t||!0!==t._isBuffer)throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var s=i-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,i);else if(this===t&&r<e&&e<i)for(var n=s-1;n>=0;--n)t[n+e]=this[n+r];else Uint8Array.prototype.set.call(t,this.subarray(r,i),e);return s},d.prototype.fill=function(t,r,i,s){if("string"==typeof t){if("string"==typeof r?(s=r,r=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),s!==e&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!d.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===t.length){var n=t.charCodeAt(0);("utf8"===s&&n<128||"latin1"===s)&&(t=n)}}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;var o;if(r>>>=0,i=i===e?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=r;o<i;++o)this[o]=t;else{var h=null!=t&&!0===t._isBuffer?t:d.from(t,s),f=h.length;if(0===f)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<i-r;++o)this[o+r]=h[o%f]}return this};var F=/[^+/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function D(t,e){var r;e=e||1/0;for(var i=t.length,s=null,n=[],o=0;o<i;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!s){if(r>56319){(e-=3)>-1&&n.push(239,191,189);continue}if(o+1===i){(e-=3)>-1&&n.push(239,191,189);continue}s=r;continue}if(r<56320){(e-=3)>-1&&n.push(239,191,189),s=r;continue}r=65536+(s-55296<<10|r-56320)}else s&&(e-=3)>-1&&n.push(239,191,189);if(s=null,r<128){if((e-=1)<0)break;n.push(r)}else if(r<2048){if((e-=2)<0)break;n.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;n.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;n.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return n}function j(t){return o.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,r,i){for(var s=0;s<i&&!(s+r>=e.length||s>=t.length);++s)e[s+r]=t[s];return s}function K(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function W(t){return t!=t}}],["base64-js","/index.js",function(t,e,r,i,s){"use strict";t.byteLength=function(t){var e=c(t),r=e[0],i=e[1];return 3*(r+i)/4-i},t.toByteArray=function(t){for(var e,r=c(t),i=r[0],s=r[1],n=new h(function(t,e,r){return 3*(e+r)/4-r}(0,i,s)),f=0,a=s>0?i-4:i,u=0;u<a;u+=4)e=o[t.charCodeAt(u)]<<18|o[t.charCodeAt(u+1)]<<12|o[t.charCodeAt(u+2)]<<6|o[t.charCodeAt(u+3)],n[f++]=e>>16&255,n[f++]=e>>8&255,n[f++]=255&e;2===s&&(e=o[t.charCodeAt(u)]<<2|o[t.charCodeAt(u+1)]>>4,n[f++]=255&e);1===s&&(e=o[t.charCodeAt(u)]<<10|o[t.charCodeAt(u+1)]<<4|o[t.charCodeAt(u+2)]>>2,n[f++]=e>>8&255,n[f++]=255&e);return n},t.fromByteArray=function(t){for(var e,r=t.length,i=r%3,s=[],o=0,h=r-i;o<h;o+=16383)s.push(d(t,o,o+16383>h?h:o+16383));1===i?(e=t[r-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return s.join("")};for(var n=[],o=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=f.length;a<u;++a)n[a]=f[a],o[f.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function d(t,e,r){for(var i,s,o=[],h=e;h<r;h+=3)i=(t[h]<<16&16711680)+(t[h+1]<<8&65280)+(255&t[h+2]),o.push(n[(s=i)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63}],["ieee754","/index.js",function(t,e,r,i,s){t.read=function(t,e,r,i,s){var n,o,h=8*s-i-1,f=(1<<h)-1,a=f>>1,u=-7,c=r?s-1:0,d=r?-1:1,l=t[e+c];for(c+=d,n=l&(1<<-u)-1,l>>=-u,u+=h;u>0;n=256*n+t[e+c],c+=d,u-=8);for(o=n&(1<<-u)-1,n>>=-u,u+=i;u>0;o=256*o+t[e+c],c+=d,u-=8);if(0===n)n=1-a;else{if(n===f)return o?NaN:1/0*(l?-1:1);o+=Math.pow(2,i),n-=a}return(l?-1:1)*o*Math.pow(2,n-i)},t.write=function(t,e,r,i,s,n){var o,h,f,a=8*n-s-1,u=(1<<a)-1,c=u>>1,d=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,l=i?0:n-1,p=i?1:-1,b=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-o))<1&&(o--,f*=2),(e+=o+c>=1?d/f:d*Math.pow(2,1-c))*f>=2&&(o++,f/=2),o+c>=u?(h=0,o=u):o+c>=1?(h=(e*f-1)*Math.pow(2,s),o+=c):(h=e*Math.pow(2,c-1)*Math.pow(2,s),o=0));s>=8;t[r+l]=255&h,l+=p,h/=256,s-=8);for(o=o<<s|h,a+=s;a>0;t[r+l]=255&o,l+=p,o/=256,a-=8);t[r+l-p]|=128*b}}]],a=[];function u(e){if(e>>>0!==e||e>f.length)return function(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}(e);for(;a.length<=e;)a.push(null);var r=a[e];if(r)return r.exports;var o=f[e],h=o[0],u=o[1],c=o[2],d=t,l=i;0!==e&&(l={id:"/"+h+u,exports:d={},parent:i.parent,filename:i.filename,loaded:!1,children:i.children,paths:i.paths}),a[e]=l;try{c.call(d,d,l,s,n,void 0)}catch(t){throw a[e]=null,t}return f[e]=null,0!==e&&(l.loaded=!0),l.exports}u(0)}]],a=[];function u(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}function c(t){u(t)}function d(t,e){if(t>>>0!==t||t>f.length)return u(t);if(null!=e&&!e.children)return u(t);for(;a.length<=t;)a.push(null);var i=a[t];if(i)return i.exports;var s=f[t],n=s[0],o=s[1],h=s[2],d=o,l=d.split("/").slice(0,-1).join("/")||"/",p=c,b={},m={id:"/"+n+o,exports:b,parent:e,filename:d,loaded:!1,children:[],paths:["/"],require:p};e&&e.children.push(m),0===t&&(p.main=m),0===t&&(r.mainModule=m),a[t]=m;try{h.call(b,b,p,m,d,l,void 0)}catch(e){throw a[t]=null,e}return f[t]=null,m.loaded=!0,m.exports}c.cache={__proto__:null},c.extensions={__proto__:null},c.main=null,c.resolve=u,c.resolve.paths=u,s=d(95,null),n=s.setTimeout,s.clearTimeout,s.setInterval,s.clearInterval,o=s.setImmediate,s.clearImmediate,r=d(96,null),i=d(97,null).Buffer;var l=d(0,null);"function"==typeof define&&define.amd?define("Worker",[],function(){return l}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=l:t.Worker=l}("undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")());
